"use strict";(self.legacyJsonp=self.legacyJsonp||[]).push([["45591"],{307595:function(e,t,n){n.r(t);var r={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CloseupVideoEndCard_pin",selections:[{args:null,kind:"FragmentSpread",name:"useCalculateMaxWidthAndHeightForSideBySideVariant_pin"}],type:"Pin",abstractKey:null};r.hash="e04be51b4be0a2585e7803d004fa83b7",t.default=r},60533:function(e,t,n){n.r(t);var r={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CloseupVideoNonDuplo_pin",selections:[{args:null,kind:"FragmentSpread",name:"CloseupVideoEndCard_pin"},{args:null,kind:"FragmentSpread",name:"VideoWithContextLogging_pin"},{args:null,kind:"FragmentSpread",name:"useCalculateMaxWidthAndHeightForSideBySideVariant_pin"}],type:"Pin",abstractKey:null};r.hash="53ae9ecd15f057f744460205e5d495fd",t.default=r},35312:function(e,t,n){n.r(t);var r={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"StoryPinBlock_pin",selections:[{args:null,kind:"FragmentSpread",name:"StoryPinStickerBlockCloseup_pin"}],type:"Pin",abstractKey:null};r.hash="8bb1bb1f7bafeed0fe43bed44ef12d2a",t.default=r},303965:function(e,t,n){n.r(t);var r={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"StoryPinStickerBlockCloseup_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"gridTitle",storageKey:null},{alias:"imageSpec_236x",args:[{kind:"Literal",name:"spec",value:"236x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null}],storageKey:'images(spec:"236x")'},{alias:null,args:null,concreteType:"RichPinGridData",kind:"LinkedField",name:"richSummary",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"displayName",storageKey:null},{alias:null,args:null,concreteType:"RichPinProductMetadata",kind:"LinkedField",name:"products",plural:!0,selections:[{alias:null,args:null,concreteType:"OfferSummary",kind:"LinkedField",name:"offerSummary",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"price",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"maxPrice",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],type:"Pin",abstractKey:null};r.hash="7e8d917850c8329247291df0d281a59b",t.default=r},111419:function(e,t,n){n.r(t);var r={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useCalculateImageContainerDimension_pin",selections:[{args:null,kind:"FragmentSpread",name:"useCalculateMaxWidthAndHeightForSideBySideVariant_pin"}],type:"Pin",abstractKey:null};r.hash="86a6c49cecdb70d77f786a1965756cf9",t.default=r},331047:function(e,t,n){n.r(t);var r,i,o,a,l=(r={alias:null,args:null,kind:"ScalarField",name:"domain",storageKey:null},i={alias:null,args:null,kind:"ScalarField",name:"link",storageKey:null},a=[{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"officialUser",plural:!1,selections:o=[{alias:null,args:null,kind:"ScalarField",name:"firstName",storageKey:null}],storageKey:null}],{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useCalculateMaxWidthAndHeightForSideBySideVariant_pin",selections:[{alias:null,args:null,concreteType:"PinCarouselData",kind:"LinkedField",name:"carouselData",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"index",storageKey:null},{alias:null,args:null,concreteType:"PinCarouselSlot",kind:"LinkedField",name:"carouselSlots",plural:!0,selections:[r,i],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"closeupAttribution",plural:!1,selections:o,storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"closeupUnifiedTitle",storageKey:null},r,{alias:null,args:null,kind:"ScalarField",name:"isEligibleForPdp",storageKey:null},i,{alias:null,args:null,concreteType:"Domain",kind:"LinkedField",name:"linkDomain",plural:!1,selections:a,storageKey:null},{alias:null,args:null,concreteType:"UserWebsite",kind:"LinkedField",name:"linkUserWebsite",plural:!1,selections:a,storageKey:null},{alias:null,args:null,concreteType:"RichPinDataView",kind:"LinkedField",name:"richMetadata",plural:!1,selections:[{alias:null,args:null,concreteType:"RichPinProductMetadata",kind:"LinkedField",name:"products",plural:!0,selections:[{alias:null,args:null,concreteType:"OfferSummary",kind:"LinkedField",name:"offerSummary",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"price",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"standardPrice",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"trackedLink",storageKey:null}],type:"Pin",abstractKey:null});l.hash="f82ccc429683f2cb3ed96de5adc86f80",t.default=l},856782:function(e,t,n){n.d(t,{S:function(){return r}});var r=1e3;t.Z=3},112931:function(e,t,n){n.d(t,{ZP:function(){return h},GJ:function(){return y}});var r,i=n(586659);n(872555);var o=n(592821),a=n(979904),l=n(139707),s=n(974297),u=n(28427),c=n(611499),d=n(601686);function p(e){return function(e){if(Array.isArray(e))return f(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return f(e,void 0);var n=({}).toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?f(e,void 0):void 0}}(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var m=(void 0!==r||(r=n(111419)).hash&&"86a6c49cecdb70d77f786a1965756cf9"!==r.hash&&console.error("The definition of 'useCalculateImageContainerDimension_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),r);function y(e,t){return"".concat(Math.floor(e/t*1e4)/1e4," / 1")}function h(e){var t=e.carouselData,n=e.imageToDisplayWidthRatio,r=void 0===n?1:n,f=e.mainImage,y=void 0===f?{width:1,height:1,url:""}:f,h=e.maxCloseupImageWidth,v=e.pinKey,b=e.shouldPadImage,g=void 0!==b&&b,_=(0,u.Z)(m,v),S=(0,d.x4)(),P=S.peekCloseupEnabled,x=S.viewportSize,w=(0,o.Re)().numericValues,j=(0,a.Z)({pinKey:_}).maxHeight,O=null!=w?w:{},I=O.fiftyPercentHeight,A=O.fiftyPercentWidth,T=O.maxHeight,C=O.maxWidth,k=(0,l.Z)(y).peekRedesignFastFollowsEnabled;return(0,i.useMemo)(function(){var e,n,i,o,a,l,u,d=h-c.d2,f=Math.min(g?d:h,null!=C?C:1/0,null!=A?A:1/0),m=(n=[y].concat(p((null==t||null==(e=t.carousel_slots)?void 0:e.map(function(e){var t,n,r,i,o,a;return(0,s.Z)(e.images)||((n=null==(t=e.videos)?void 0:t.video_list)?null!=(r=n.V_720P)&&r.url?n.V_720P:null!=(i=n.V_HLSV4)&&i.url?n.V_HLSV4:null!=(o=n.V_HLSV3_MOBILE)&&o.url?n.V_HLSV3_MOBILE:null!=(a=n.V_HLSV3_WEB)&&a.url?n.V_HLSV3_WEB:null:null)}).filter(function(e){return!!e}))||[])).map(function(e){var t=e.width,n=e.height;return(null!=t?t:1)/(null!=n?n:1)}),Math.min.apply(Math,p(n))),v=Math.floor(f*(t?r:1)/m),b="sm"===x?I:T;u=P?null!=b?b:v:"number"==typeof j?j:v;var _=k?void 0:u,S=_?Math.min(v,_):v,w=Math.min(f*(P?S/v:1),null!=C?C:1/0,null!=A?A:1/0),O=((a=(null==y?void 0:y.width)/y.height)>(l=w/S)?(i=w,o=w/a):(i=S*a,o=S),{containerAspectRatio:l,letterBoxedWidth:i,letterBoxedHeight:o}),E=O.containerAspectRatio,R=O.letterBoxedWidth,M=O.letterBoxedHeight;return{containerAspectRatio:E,containerHeight:S,containerWidth:w,horizontalOffset:(w-R)/2,letterBoxedHeight:M,letterBoxedWidth:R,letterBoxAspectRatio:R/M,verticalOffset:(S-M)/2}},[h,g,y,t,r,x,I,T,P,j,k,C,A])}},899117:function(e,t){t.Z=function(e,t){var n,r=t||{},i=r.height,o=r.width;switch(e){case"enabled_15":n=.15;break;case"enabled_25":n=.25;break;default:n=.35}return(void 0===o?0:o)/(void 0===i?0:i)<n}},179639:function(e,t,n){n.d(t,{Z:function(){return w}});var r=n(586659),i=n(20256),o=n(592821),a=n(979904),l=n(869985),s=n(980787),u=n(19585),c=n(399806),d=n(218831),p=n(601686),f=n(382718);function m(e){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach(function(t){S(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function v(e,t){return(v=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function b(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(g=function(){return!!e})()}function _(e){return(_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function S(e,t,n){return(t=P(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function P(e){var t=function(e,t){if("object"!=m(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=m(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==m(t)?t:t+""}var x=function(e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");o.prototype=Object.create(e&&e.prototype,{constructor:{value:o,writable:!0,configurable:!0}}),Object.defineProperty(o,"prototype",{writable:!1}),e&&v(o,e);var t,n,r=(t=g(),function(){var e,n=_(o);return e=t?Reflect.construct(n,arguments,_(this).constructor):n.apply(this,arguments),function(e,t){if(t&&("object"==m(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return b(e)}(this,e)});function o(){var e;if(!(this instanceof o))throw TypeError("Cannot call a class as a function");for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];return S(b(e=r.call.apply(r,[this].concat(n))),"startAudiblePlayTime",e.props.muted?null:new Date),e}return n=[{key:"componentDidUpdate",value:function(e){e.muted!==this.props.muted&&(this.startAudiblePlayTime=this.props.muted?null:new Date)}},{key:"componentWillUnmount",value:function(){var e=this.props,t=e.musicRecordingId,n=e.muted,r=e.pinId,i=e.video;if(t&&!n&&this.startAudiblePlayTime&&Date.now()-this.startAudiblePlayTime.getTime()>=2e3){var o,a,l,s,u,d,p,f=(0,c.Z)({vEXP3:null==(o=i.video_list)?void 0:o.V_EXP3,vEXP4:null==(a=i.video_list)?void 0:a.V_EXP4,vEXP5:null==(l=i.video_list)?void 0:l.V_EXP5,vEXP6:null==(s=i.video_list)?void 0:s.V_EXP6,vEXP7:null==(u=i.video_list)?void 0:u.V_EXP7,v720P:null==(d=i.video_list)?void 0:d.V_720P,vHLSV3MOBILE:null==(p=i.video_list)?void 0:p.V_HLSV3_MOBILE})||{},m=f.hlsv3,y=f.mp4||m,h=(null==y?void 0:y.duration)||0;this.props.logContextEvent({event_type:8999,object_id_str:t,aux_data:{pin_id:r,story_pin_music_duration:h}})}}},{key:"render",value:function(){var e,t,n,r,o,a,s,u,d,p=this.props,m=p.activePageIndex,y=p.aspectRatio,h=p.blockHeight,v=p.blockWidth,b=p.closeupBodyWidth,g=p.closeupStoryPinViewability,_=p.closeupWithinMasonryEnabled,S=p.customEndCard,P=p.isPlaying,x=p.muted,w=p.onEnded,j=p.onUpdateVideoInfo,O=p.pageIndex,I=p.pin,A=p.pinId,T=p.maxHeight,C=p.video,k=p.videoThumbnailStartTime,E=null!=(e=(0,c.Z)({vEXP3:null==(t=C.video_list)?void 0:t.V_EXP3,vEXP4:null==(n=C.video_list)?void 0:n.V_EXP4,vEXP5:null==(r=C.video_list)?void 0:r.V_EXP5,vEXP6:null==(o=C.video_list)?void 0:o.V_EXP6,vEXP7:null==(a=C.video_list)?void 0:a.V_EXP7,v720P:null==(s=C.video_list)?void 0:s.V_720P,vHLSV3MOBILE:null==(u=C.video_list)?void 0:u.V_HLSV3_MOBILE}))?e:{},R=E.hlsv3,M=E.mp4,L=M||R;if(!L)return null;var z=L.height,V=L.thumbnail,F=L.width,D=null!=y?y:(null!=F?F:1)/(null!=z?z:1),B={height:"100%",left:"0",top:"0",width:"100%"},N=_&&b?(null!=b?b:v)/(null!=(d=Number(T))?d:h):v/h;if(!_&&Math.abs(N-D)>.01){if(N<D){var Z=100*D/N;B.width="".concat(Z,"%"),B.left="-".concat((Z-100)/2,"%")}else if(N>D){var W=100*N/D;B.height="".concat(W,"%"),B.top="-".concat((W-100)/2,"%")}}var H="number"==typeof m&&O<=m+3;return(0,f.jsx)(i.xu,{height:"100%",overflow:"hidden",position:"relative",width:"100%",children:(0,f.jsx)(i.xu,{height:"100%",position:"absolute",width:"100%",children:H||P||k?(0,f.jsx)(i.xu,{dangerouslySetInlineStyle:{__style:B},position:"absolute",children:(0,f.jsx)(l.Z,{aspectRatio:_?N:y,autoplay:P,closeupStoryPinViewability:g,contextLogData:{component:0===O?227:228,element:10957,objectId:A,story_pin_page_id:O,view:3,viewParameter:157},customEndCard:S,customThumbnail:V,isPromoted:!1,loop:!1,muted:x,objectFit:M?_?"contain":"cover":void 0,onEnded:function(){w&&w(O)},onTimeChange:function(e){var t=e.time;j&&"number"==typeof L.duration&&L.duration>0&&j({currentTime:t,duration:L.duration/1e3})},pinId:A,pinKey:null===I?null:{type:"Legacy",data:I},preferMp4:!!M,showControls:"hover",variant:"storyPin",video:{id:C.id,hlsv3:R,mp4:M},videoThumbnailStartTime:k})}):V&&(0,f.jsx)(i.Ee,{alt:this.props.i18n._('Video cover image', 'closeup.storyPin.videoCover', 'cover image displayed for a video'),fit:"cover",naturalHeight:null!=z?z:1,naturalWidth:null!=F?F:1,src:V})})})}}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,P(r.key),r)}}(o.prototype,n),Object.defineProperty(o,"prototype",{writable:!1}),o}(r.PureComponent);function w(e){var t=(0,s.u)().logContextEvent,n=e.pin,r=(0,u.ZP)(),i=(0,p.x4)().closeupWithinMasonryEnabled,l=(0,d.K)().closeupBodyWidth,c=(0,o.Re)().maxHeight,m=(0,a.Z)({pinKey:null===n?null:{type:"Legacy",data:n}}).maxHeight;return(0,f.jsx)(x,h(h({},e),{},{closeupBodyWidth:l,closeupWithinMasonryEnabled:i,i18n:r,logContextEvent:t,maxHeight:i?m:c}))}},248762:function(e,t,n){n.d(t,{Z:function(){return ec}}),n(492996);var r,i,o=n(20256),a=n(112931),l=n(592821),s=n(963489),u=n(883817),c=n(980787),d=n(886981),p=n(382718),f=function(e){var t=e.block,n=t.block_style,r=(n=void 0===n?{}:n).height,i=n.width,a=n.x_coord,f=n.y_coord,m=n.rotation,y=t.original_comment_id,h=e.horizontalOffset,v=e.pageAspectRatio,b=e.scaleFactor,g=e.verticalOffset,_=(0,c.u)().logContextEvent,S=l._B/v,P=(void 0===i?0:i)*l._B*b/100,x=(void 0===r?0:r)*S*b/100,w=(void 0===a?0:a)*l._B*b/100+(void 0===h?0:h),j=(void 0===f?0:f)*S*b/100+(void 0===g?0:g),O=(0,s.s0)(),I=(0,d.Z)({name:"AggregatedCommentResource",options:{commentId:y,field_set_key:"comment_reply_sticker"}}).data;return(0,p.jsx)(o.xu,{dangerouslySetInlineStyle:{__style:{left:w,top:j,transform:"rotate(".concat(void 0===m?0:m,"deg)")}},display:"flex",height:x,margin:-1,padding:1,position:"absolute",rounding:2,width:P,zIndex:u.B_,children:(0,p.jsx)(o.iP,{onTap:function(){_({event_type:102,view_type:1,component:227,element:12541,aux_data:{comment_id:y}}),null!=I&&I.pin_id&&O("/pin/".concat(I.pin_id,"/comments/").concat(y||""))},rounding:"pill"})})},m=n(291892),y=n(7525);function h(e){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var v=["src","fallbackSrc"];function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach(function(t){var r,i;r=t,i=n[t],(r=function(e){var t=function(e,t){if("object"!=h(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=h(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==h(t)?t:t+""}(r))in e?Object.defineProperty(e,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[r]=i}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function _(e){var t=e.src,n=e.fallbackSrc,r=function(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if(({}).hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],-1===t.indexOf(n)&&({}).propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}(e,v),i=(0,y.Z)(t);return(0,p.jsx)(m.Z,g(g({},r),{},{src:i?t:n}))}var S=n(581722);function P(e){var t=e.isUseCache,n=e.signature;return(0,S.v9)(function(e){var r=e.pinbuilder.storyPinItemBlocks;if(!t)return null;for(var i=0,o=Object.keys(r);i<o.length;i++){var a,l,s=o[i];if((null==(a=r[s].media)?void 0:a.signatureEdited)===n||(null==(l=r[s].media)?void 0:l.signature)===n)return r[s]}return null})}var x=n(586659),w=n(111923),j=n(865540),O=n(982166),I=n(19585),A=n(542092);function T(e,t,n,r,i,o,a){try{var l=e[o](a),s=l.value}catch(e){return void n(e)}l.done?t(s):Promise.resolve(s).then(r,i)}function C(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var k=function(e){var t,n=e.aggregatedCommentId,r=e.onDismiss,i=(0,I.ZP)(),a=(0,j.Z)(),l=(0,w.Z)(),s=function(e){if(Array.isArray(e))return e}(t=(0,x.useState)(""))||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,l=[],s=!0,u=!1;try{for(o=(n=n.call(e)).next;!(s=(r=o.call(n)).done)&&(l.push(r.value),2!==l.length);s=!0);}catch(e){u=!0,i=e}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return l}}(t,2)||function(e,t){if(e){if("string"==typeof e)return C(e,2);var n=({}).toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?C(e,2):void 0}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),u=s[0],c=s[1],d=(0,p.jsx)(o.kC,{justifyContent:"end",children:(0,p.jsx)(o.zx,{color:"red",disabled:!u,onClick:function(){var e;(e=regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l({fromUnifiedComment:!0,objectType:A.o.aggregatedComment,objectId:n,tags:"[]",text:u});case 2:case"end":return e.stop()}},e)}),function(){var t=this,n=arguments;return new Promise(function(r,i){var o=e.apply(t,n);function a(e){T(o,r,i,a,l,"next",e)}function l(e){T(o,r,i,a,l,"throw",e)}a(void 0)})})(),r()},text:i._('Post', 'ideapin.questionsticker.replymodal.postbutton', 'Post reply to creator Q&A question')})});return(0,p.jsx)(O.ZP,{accessibilityModalLabel:"reply to creator Q and A question",align:"start",footer:d,heading:i._('Reply', 'ideapin.questionsticker.replymodal', 'Reply to creator Q&A question'),onDismiss:r,children:(0,p.jsx)(o.xu,{paddingX:8,paddingY:1,children:(0,p.jsx)(o.Kx,{id:"ideaPinQuestionStickerReplyModalTextArea",onChange:function(e){c(e.value)},placeholder:a?i._('Your reply will show up as a public comment on this Pin.', 'pin.questionsticker.replymodal.placeholder', 'Placeholder for creator Q&A reply textarea'):i._('Your reply will show up as a public comment on this Idea Pin.', 'ideapin.questionsticker.replymodal.placeholder', 'Placeholder for creator Q&A reply textarea'),value:u})})})},E=n(744862),R=n(821342),M=n(28427),L=n(302148),z=n(123317),V=n(294711);function F(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,l=[],s=!0,u=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=o.call(n)).done)&&(l.push(r.value),l.length!==t);s=!0);}catch(e){u=!0,i=e}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return D(e,t);var n=({}).toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?D(e,t):void 0}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function D(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var B=(void 0!==r||(r=n(303965)).hash&&"7e8d917850c8329247291df0d281a59b"!==r.hash&&console.error("The definition of 'StoryPinStickerBlockCloseup_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),r);function N(e){var t,n=e.block,r=e.elementType,i=e.horizontalOffset,a=e.onFlyoutOpen,f=e.pageAspectRatio,m=e.pageIndex,y=e.pinKey,h=e.scaleFactor,v=e.tooltipElementType,b=e.verticalOffset,g=e.videoPinProgress,_=(0,c.u)().logContextEvent,S=F((0,x.useState)(!1),2),P=S[0],w=S[1],j=F((0,x.useState)(!1),2),O=j[0],A=j[1],T=(0,x.useRef)(null),C=(0,s.s0)(),D=(0,I.ZP)(),N=(0,M.Z)(B,y),Z=(0,R.Z)(),W=n.block_style,H=(W=void 0===W?{}:W).height,U=W.width,K=W.x_coord,X=W.y_coord,G=W.rotation,q=n.end_time,$=n.error_message,J=n.interactive_sticker_type,Y=void 0===J?null:J,Q=n.is_removed,ee=n.is_valid,et=n.start_time,en=n.sticker_data,er=n.type,ei=null==N?void 0:N.entityId,eo=en||{},ea=eo.board_id,el=eo.question_comment_id,es=null!=(t=n.user)?t:{},eu=es.image_small_url,ec=es.full_name,ed=es.username,ep=null,ef=ee&&5===Y&&!!ea,em=ee&&7===Y&&!!el,ey=(0,d.Z)(ea&&ef?{name:"BoardResource",options:{field_set_key:"tagged_board_preview",board_id:ea}}:null),eh=ey.data||{},ev=eh.is_collaborative,eb=eh.pin_count,eg=eh.url;er===z.h8.PRODUCT_STICKER?ep=ei?"/pin/".concat(ei,"/"):"/":er===z.h8.MENTION_STICKER?ep="/".concat(void 0===ed?"":ed,"/"):ef&&(ep=ey.isLoaded?"".concat(eg):null);var e_=l._B/f,eS=(void 0===U?0:U)*l._B*h/100,eP=(void 0===H?0:H)*e_*h/100,ex=(void 0===K?0:K)*l._B*h/100+(void 0===i?0:i),ew=(void 0===X?0:X)*e_*h/100+(void 0===b?0:b),ej=(g||{}).currentTime,eO=!(0,V.Z)({currentTime:ej,endTime:q,startTime:et}),eI=function(){_({event_type:123,component:228,element:v,view_type:3,view_parameter:157,aux_data:{story_pin_page_id:m}}),w(!1)},eA=function(e){var t=e.event;_({event_type:120,component:228,element:v,view_type:3,view_parameter:157,aux_data:{error_message:!ee&&$?$:null,story_pin_page_id:m}}),w(!0),a&&(t.stopPropagation(),a())};(0,x.useEffect)(function(){return document.addEventListener("scroll",function(){w(!1)}),function(){return document.removeEventListener("scroll",function(){w(!1)})}},[]);var eT=function(){var e=null,t=Z.isAuth?null==Z?void 0:Z.avatar_color_index:void 0;switch(er){case z.h8.PRODUCT_STICKER:var n=N||{},r=n.gridTitle,i=n.imageSpec_236x,a=n.richSummary,l=n.description,s=a||{},u=s.displayName,c=((s.products||[])[0]||{}).offerSummary||{},d=c||{},f=d.price,m=d.maxPrice,y=!!c&&(!!f||!!m),h=u||r||l;e=(0,p.jsxs)(x.Fragment,{children:[(0,p.jsx)(o.xu,{flex:"none",children:(0,p.jsx)(o.zd,{height:40,rounding:3,wash:!0,width:40,children:(null==i?void 0:i.url)&&(0,p.jsx)(o.Ee,{alt:"",color:"lightGray",fit:"cover",naturalHeight:1,naturalWidth:1,src:i.url})})}),(0,p.jsx)(o.xu,{flex:"grow",paddingX:2,children:y?(0,p.jsxs)(o.kC,{alignContent:"center",alignItems:"stretch",direction:"column",flex:"grow",justifyContent:"center",children:[(0,p.jsx)(o.xv,{color:"shopping",lineClamp:1,size:"100",weight:"bold",children:f}),(0,p.jsx)(o.xv,{lineClamp:1,size:"100",children:h})]}):(0,p.jsx)(o.xv,{lineClamp:1,size:"100",children:h})}),(0,p.jsx)(o.xu,{flex:"none",children:(0,p.jsx)(o.Sj,{bgColor:"transparent",icon:"arrow-forward",iconColor:"darkGray",size:"xs"})})]});break;case z.h8.MENTION_STICKER:e=(0,p.jsxs)(x.Fragment,{children:[(0,p.jsx)(o.xu,{flex:"none",children:(0,p.jsx)(E.qE,{color:t,name:null!=ec?ec:"",size:"sm",src:null!=eu?eu:void 0})}),(0,p.jsx)(o.xu,{flex:"grow",paddingX:2,children:(0,p.jsx)(o.xv,{lineClamp:1,size:"200",weight:"bold",children:ec})}),(0,p.jsx)(o.xu,{flex:"none",children:(0,p.jsx)(o.Sj,{bgColor:"transparent",icon:"arrow-forward",iconColor:"darkGray",size:"xs"})})]});break;case z.h8.GENERIC_STICKER:e=[5].includes(Y)?ee?ey.isLoaded?(0,p.jsxs)(x.Fragment,{children:[(0,p.jsxs)(o.xu,{flex:"grow",paddingX:2,children:[(0,p.jsx)(o.xv,{lineClamp:1,size:"100",weight:"bold",children:ev?D._('Explore this group board', 'closeup.StoryPin.stickerBlock.boardSticker.clickLabel', 'Label explaining click action when group board tag flyout showing'):D._('Explore this board', 'closeup.StoryPin.stickerBlock.boardSticker.clickLabel', 'Label explaining click action when board tag flyout showing')}),(0,p.jsx)(o.xv,{size:"100",children:(!!eb||0===eb)&&(0,L.nk)(D.ngettext('{{ pinCount }} Pin', '{{ pinCount }} Pins', eb, 'closeup.StoryPin.stickerBlock.boardSticker.boardLabel', 'Caption when board tag flyout that showing number of Pins on board'),{pinCount:eb})})]}),(0,p.jsx)(o.xu,{flex:"none",children:(0,p.jsx)(o.Sj,{bgColor:"transparent",icon:"arrow-forward",iconColor:"darkGray",size:"xs"})})]}):(0,p.jsxs)(o.xu,{alignItems:"center",direction:"row",display:"flex",flex:"grow",paddingY:2,children:[(0,p.jsx)(o.xu,{marginEnd:1,paddingX:2,children:(0,p.jsx)(o.xv,{color:"subtle",lineClamp:1,size:"100",children:D._('Loading board...', 'closeup.StoryPin.stickerBlock.boardSticker.loadingText', 'Label explaining board sticker still loading')})}),(0,p.jsx)(o.xH,{accessibilityLabel:D._('Board is loading', 'closeup.StoryPin.stickerBlock.boardSticker.loadingSpinnerText', 'Accessibility label for board loading spinner'),show:!0,size:"sm"})]}):(0,p.jsx)(o.xu,{paddingX:2,paddingY:2,children:(0,p.jsx)(o.xv,{color:"subtle",lineClamp:1,size:"200",weight:"bold",children:$})}):(0,p.jsx)(o.xu,{paddingX:2,paddingY:2,children:(0,p.jsx)(o.xv,{color:"subtle",lineClamp:1,size:"200",weight:"bold",children:D._('Sticker not supported yet', 'closeup.StoryPin.stickerBlock.genericStickerError', 'Label explaining this sticker has not been implemented yet')})});break;case z.h8.VTO_MAKEUP_STICKER:e=(0,p.jsx)(o.xv,{size:"300",weight:"bold",children:D._('Try this sticker on your phone!', 'closeup.storyPin.vtoMakeupSticker', 'Caption when @vitural-try-on-makeup tag is tapped for Web')})}return(0,p.jsx)(o.xu,{alignItems:"center","data-test-id":er,display:"flex",justifyContent:"center",padding:er===z.h8.PRODUCT_STICKER?1:3,width:"100%",children:Q?(0,p.jsx)(o.xv,{color:"subtle",size:"200",weight:"bold",children:D._('Tag removed!', 'closeup.storyPin.stickerBlock', 'Caption when the tag is removed')}):e})};return(0,p.jsx)(x.Fragment,{children:eO?null:(0,p.jsxs)(o.xu,{ref:T,dangerouslySetInlineStyle:{__style:{left:ex,top:ew,transform:"rotate(".concat(void 0===G?0:G,"deg)")}},"data-test-id":(er||"")+"_container",display:"flex",height:eP+2*l.Xw,margin:-1,padding:1,position:"absolute",rounding:2,width:eS+2*l.Xw,zIndex:u.B_,children:[(0,p.jsx)(o.iP,{disabled:eO,onTap:P?eI:function(e){var t=e.event;eO||(_({event_type:101,component:228,element:r,view_type:3,view_parameter:157,aux_data:{story_pin_page_id:m}}),em?A(!0):eA({event:t}))},rounding:"pill"}),P&&(0,p.jsx)(o.mh,{zIndex:u.ej,children:(0,p.jsx)(o.J2,{_deprecatedShowCaret:!0,anchor:T.current,idealDirection:"up",onDismiss:eI,positionRelativeToAnchor:!1,size:Q?"flexible":"sm",children:Q?eT():(0,p.jsx)(o.iP,{fullWidth:!0,onTap:function(e){e.event.preventDefault(),Q||(_({event_type:101,component:228,element:v,object_id_str:ei,view_type:3,view_parameter:157,aux_data:{story_pin_page_id:m}}),ep?C(ep):eI())},children:eT()})})}),!!el&&O&&(0,p.jsx)(k,{aggregatedCommentId:el,onDismiss:function(){A(!1)}})]})})}var Z=n(445698),W=n(47676),H=n(238187),U=n(452750);function K(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,l=[],s=!0,u=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=o.call(n)).done)&&(l.push(r.value),l.length!==t);s=!0);}catch(e){u=!0,i=e}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return X(e,t);var n=({}).toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?X(e,t):void 0}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function X(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function G(e){var t=e.block,n=e.fontsLoaded,r=e.horizontalOffset,i=e.pageAspectRatio,a=e.scaleFactor,l=e.thumbnail,s=e.verticalOffset,u=t.block_style,c=t.style,d=void 0===c?z.Cc:c,f=t.text,m=d.alignment,y=d.font,h=d.font_size,v=d.highlight_color,b=d.vertical_alignment,g=void 0===b?z.Cc.vertical_alignment:b,_=(null!=d?d:{}).hex_color,S=void 0===_?z.Cc.hex_color:_,P=K((0,x.useState)(0),2),w=P[0],j=P[1],O=K((0,x.useState)([]),2),I=O[0],A=O[1],T=y||z.Cc.font,C=T.name,k=T.default_size,E=T.letter_spacing,R=T.line_height,M=(0,U.Z)(T),L=Math.round(100*((null==u?void 0:u.width)||100))/1e4,V=Math.round(100*((null==u?void 0:u.height)||100))/1e4,F=Math.round(100*((null==u?void 0:u.x_coord)||0))/1e4,D=Math.round(100*((null==u?void 0:u.y_coord)||0))/1e4;(0,x.useEffect)(function(){if(n){var e=(0,H.KV)({text:f,boxHeight:W.q8/i*V,boxWidth:W.q8*L,font:M,startFontSize:Math.floor(h||k||24)});A(e.lines),j(e.fontSize)}},[n,f]);var B=w*a,N=v?(0,z.pE)(B,R):{x:0,y:0},X=L*W.q8*a+2*N.x,G=V*(W.q8/i)*a+2*N.y,q=(void 0===r?0:r)+F*W.q8*a-N.x,$=l?"".concat(100*D,"%"):(void 0===s?0:s)+D*(W.q8/i)*a-N.y;return(0,p.jsx)(o.xu,{dangerouslySetInlineStyle:{__style:{left:q,top:$}},display:"flex",height:G,position:"absolute",width:X,children:(0,p.jsx)(o.xu,{dangerouslySetInlineStyle:{__style:(0,Z.RK)({alignment:m,verticalAlignment:g})},children:(0,p.jsx)(o.xu,{display:"inlineBlock",maxWidth:"100%",children:(0,p.jsx)("p",{style:(0,Z.BN)({fontSize:B,hexColor:S,letterSpacing:E,lineHeight:R,name:C}),children:I.map(function(e,t){return(0,p.jsx)("span",{"data-gestalt-valid-html":"Text",style:(0,Z.xm)({fontSize:B,hasText:e.text.length>0,highlightColor:v||null,lineHeight:R}),children:t===I.length-1?e.text:(0,p.jsxs)(x.Fragment,{children:[e.text," ",(0,p.jsx)("br",{})]})},"paragraphLine-".concat(t,"-").concat((null!=f?f:"").substr(0,9)))})})})})})}var q=n(179639);function $(e){var t=e.ownerId,n=(0,I.ZP)(),r=(0,R.Z)(),i=r.isAuth&&r.id===t;return(0,p.jsxs)(o.xu,{alignItems:"center",color:"tertiary",direction:"column",display:"flex",height:"100%",justifyContent:"center",width:"100%",children:[(0,p.jsx)(o.xv,{color:"inverse",children:i?n._('Your video is processing!', 'closeup.storyPin.videoPlaceholder', 'Let user know that their video is still processing'):n._('This video is still processing!', 'closeup.storyPin.videoPlaceholder', 'Let user know that this video is still processing')}),(0,p.jsx)(o.xv,{color:"inverse",children:n._('Check back in a few minutes.', 'closeup.storyPin.videoPlaceholder', 'Let user know to come back in a couple of minutes to view the video')})]})}var J=n(139707),Y=n(934645),Q=n(716920),ee=n(956077),et=n(85574),en=n(601686),er=n(653621);function ei(e){return(ei="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function eo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function ea(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?eo(Object(n),!0).forEach(function(t){var r,i;r=t,i=n[t],(r=function(e){var t=function(e,t){if("object"!=ei(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=ei(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ei(t)?t:t+""}(r))in e?Object.defineProperty(e,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[r]=i}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):eo(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function el(e){var t,n,r,i,s,u,c,d,f,y,h,v=e.block,b=e.isActive,g=e.pwtTrackImageLoad,S=e.thumbnail,x=(0,I.ZP)(),w=(0,en.x4)(),j=w.closeupWithinMasonryEnabled,O=w.isCloseupMediaViewerOpen,A=w.peekCloseupEnabled,T=w.showProductDetailPage,C=(0,Y.Z)({showProductDetailPage:T}),k=(S||C?{}:(0,et.Z)({closeupWithinMasonryEnabled:j,peekCloseupEnabled:A})).borderStyle,E=(null==(t=v.image)||null==(n=t.images)?void 0:n["750x"])||(null==(r=v.image)||null==(i=r.images)?void 0:i["474x"]),R=E||{},M=R.height,L=void 0===M?1:M,z=R.width,V=void 0===z?1:z,F=P({isUseCache:!0,signature:v.image_signature}),D=(0,J.Z)(E).peekRedesignFastFollowsEnabled;return E||F?(h=S?"cover":j||D?"none":"contain",(0,p.jsx)(o.xu,{alignItems:A?"center":void 0,dangerouslySetInlineStyle:{__style:ea(ea({},k),{},{aspectRatio:j?(0,a.GJ)(V,L):void 0,contain:"strict",display:A?"grid":"block",justifySelf:j?"center":void 0})},height:j?"100%":"inherit",overflow:"hidden",width:j?void 0:"inherit",children:F?(0,p.jsx)(_,{_enableViewTransitions:!0,alt:x._('Story pin image', 'closeup.storypin.renderer', 'Alt text for story pin image'),color:l.yc,elementTiming:"StoryPinImageBlock-MainPinImage",fallbackSrc:null!=(s=null==(u=F.media)?void 0:u.src)?s:"",fit:h,isActive:b,naturalHeight:L,naturalWidth:V,onLoad:g,src:null!=(c=null==E?void 0:E.url)?c:"",suppressViewTransitionTags:O}):(0,p.jsx)(m.Z,{_enableViewTransitions:!0,alt:x._('Story pin image', 'closeup.storypin.renderer', 'Alt text for story pin image'),borderStyle:k,color:l.yc,elementTiming:"StoryPinImageBlock-MainPinImage",fetchPriority:j?"high":void 0,fit:h,isActive:b,naturalHeight:null!=(d=null==E?void 0:E.height)?d:1,naturalWidth:null!=(f=null==E?void 0:E.width)?f:1,onLoad:g,src:null!=(y=null==E?void 0:E.url)?y:"",suppressViewTransitionTags:O})})):null}function es(e){var t,n,r=e.activePageIndex,i=e.block,a=e.closeupStoryPinViewability,s=e.customEndCard,u=e.isActive,c=e.isSplitLayout,d=e.musicRecordingId,f=e.muted,m=e.onEnded,y=e.onUpdateVideoInfo,h=e.ownerId,v=e.pageAspectRatio,b=e.pageDimensions,g=e.pageIndex,_=e.pin,S=e.pinId,x=e.scaleFactor,w=e.stillLoading,j=e.videoThumbnailStartTime,O=e.thumbnail,I=void 0!==O&&O,A=i.block_style,T=(A=void 0===A?{}:A).height,C=void 0===T?100:T,k=A.width,E=void 0===k?100:k,R=A.x_coord,M=void 0===R?0:R,L=A.y_coord,z=void 0===L?0:L,V=i.video,F=(0,en.x4)().closeupWithinMasonryEnabled,D=l._B/v,B=b.height,N=b.width,Z=E*l._B*x/100,W=E<100?Math.min(Math.max(100,E)-Math.abs(M),E):Math.min(Math.max(E-Math.abs(M),0),100),H=C<100?Math.min(Math.max(100,C)-Math.abs(z),C):Math.min(Math.max(C-Math.abs(z),0),100),U=F?"100%":H*D*x/100,K=F?"100%":W*l._B*x/100,X=Math.max(z,0)*D*x/100,G=Math.max(M,0)*l._B*x/100,J=P({isUseCache:!V,signature:i.video_signature});if(w)return null;var Y=(J||{}).media||{},Q=Y.duration,ee=Y.src,et=!!ee&&!!Q;return V||et?!!((null==V||null==(t=V.video_list)?void 0:t.V_HLSV3_MOBILE)||(null==V||null==(n=V.video_list)?void 0:n.V_720P)||et)&&(0,p.jsx)(o.xu,{height:void 0!==c&&c?"50%":"100%",overflow:"hidden",position:"relative",children:(0,p.jsx)(o.xu,{dangerouslySetInlineStyle:{__style:{alignSelf:"anchor-center",left:G,top:X}},height:I?B:U,overflow:"hidden",position:"absolute",width:I?N:K,children:(0,p.jsx)(q.Z,{activePageIndex:r,aspectRatio:v,blockHeight:I?B:C*D*x/100,blockWidth:I?N:Z,closeupStoryPinViewability:a,customEndCard:s,isPlaying:u,musicRecordingId:d,muted:f,onEnded:m,onUpdateVideoInfo:y,pageIndex:g,pin:_,pinId:S,video:V||{video_list:{V_EXP7:{duration:Q?1e3*Q:0,url:ee}}},videoThumbnailStartTime:j})})}):(0,p.jsx)(o.xu,{dangerouslySetInlineStyle:{__style:{left:G,top:X}},height:U,position:"absolute",width:K,children:(0,p.jsx)($,{ownerId:h})})}var eu=(void 0!==i||(i=n(35312)).hash&&"8bb1bb1f7bafeed0fe43bed44ef12d2a"!==i.hash&&console.error("The definition of 'StoryPinBlock_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),i);function ec(e){var t,n=e.activePageIndex,r=e.block,i=e.closeupStoryPinViewability,a=e.customEndCard,s=e.disableProductStickers,u=e.fontsLoaded,c=e.horizontalOffset,d=e.isActive,m=e.isSplitLayout,y=e.musicRecordingId,h=e.muteVideos,v=e.onEnded,b=e.onFlyoutOpen,g=e.onUpdateVideoInfo,_=e.ownerId,S=e.pageAspectRatio,P=e.pageHeight,x=e.pageIndex,w=e.pageWidth,j=e.pin,O=e.pinId,I=e.previewOnly,A=e.pinKey,T=e.stillLoading,C=e.thumbnail,k=void 0!==C&&C,E=e.transform,R=e.verticalOffset,L=e.videoPinProgress,V=e.videoThumbnailStartTime,F=(0,M.Z)(eu,A),D=(0,en.x4)().closeupWithinMasonryEnabled,B=r.block_style,Z=(B=void 0===B?{}:B).height,W=void 0===Z?100:Z,H=B.width,U=void 0===H?100:H,K=B.x_coord,X=B.y_coord,q=r.interactive_sticker_type,$=(0,Q.g)();if(0===W||0===U)return null;var J=w/l._B;switch(r.type){case z.h8.PARAGRAPH:case z.h8.HEADING:return(0,p.jsx)(G,{block:r,fontsLoaded:u,horizontalOffset:c,pageAspectRatio:S,scaleFactor:J,thumbnail:k,verticalOffset:R});case z.h8.VIDEO:return(0,p.jsx)(es,{activePageIndex:n,block:r,closeupStoryPinViewability:i,customEndCard:a,isActive:d,isSplitLayout:void 0!==m&&m,musicRecordingId:y,muted:h,onEnded:v,onUpdateVideoInfo:g,ownerId:_,pageAspectRatio:S,pageDimensions:{height:P,width:w},pageIndex:x,pin:j,pinId:O,scaleFactor:J,stillLoading:void 0!==T&&T,thumbnail:k,videoThumbnailStartTime:V});case z.h8.IMAGE:var Y=E||{},et=Y.scaleX,ei=Y.scaleY;return(0,p.jsx)(o.xu,{dangerouslySetInlineStyle:{__style:{display:D?"grid":"block",height:"".concat(W,"%"),left:"".concat((void 0===K?0:K)*(void 0===et?1:et),"%"),top:"".concat((void 0===X?0:X)*(void 0===ei?1:ei),"%"),width:"".concat(U,"%")}},overflow:"hidden",position:"absolute",children:(0,p.jsx)(el,{block:r,isActive:d,pwtTrackImageLoad:function(){$&&d&&($.addBinaryAnnotation("pin.id",O,"STRING"),$.addBinaryAnnotation("video",!1,"BOOL"),$.stop()),d&&((0,ee.rt)("pin.id",O,"STRING"),(0,ee.rt)("video",!1,"BOOL"),(0,ee.Nx)(er.pM),(0,ee.l7)(er._z))},thumbnail:k})});case z.h8.MENTION_STICKER:return!I&&(0,p.jsx)(N,{block:ea({},r),elementType:12120,horizontalOffset:c,onFlyoutOpen:b,pageAspectRatio:S,pageIndex:x,pinKey:null,scaleFactor:J,tooltipElementType:12121,verticalOffset:R,videoPinProgress:L});case z.h8.GENERIC_STICKER:return!I&&(t=5===(void 0===q?null:q),(0,p.jsx)(N,{block:ea({},r),elementType:t?12827:12858,horizontalOffset:c,onFlyoutOpen:b,pageAspectRatio:S,pageIndex:x,pinKey:null,scaleFactor:J,tooltipElementType:t?12828:12859,verticalOffset:R,videoPinProgress:L}));case z.h8.PRODUCT_STICKER:return!I&&!s&&(0,p.jsx)(N,{block:ea({},r),elementType:12223,horizontalOffset:c,onFlyoutOpen:b,pageAspectRatio:S,pageIndex:x,pinKey:F,scaleFactor:J,tooltipElementType:12224,verticalOffset:R,videoPinProgress:L});case z.h8.VTO_MAKEUP_STICKER:return!I&&(0,p.jsx)(N,{block:ea({},r),elementType:12561,horizontalOffset:c,onFlyoutOpen:b,pageAspectRatio:S,pageIndex:x,pinKey:null,scaleFactor:J,tooltipElementType:12561,verticalOffset:R,videoPinProgress:L});case z.h8.COMMENT_REPLY_STICKER:return r.type===z.h8.COMMENT_REPLY_STICKER&&!I&&(0,p.jsx)(f,{block:r,horizontalOffset:c,pageAspectRatio:S,scaleFactor:J,verticalOffset:R});default:return null}}},995415:function(e,t){t.Z=function(e){var t=e.carouselData,n=e.domain,r="",i=n||"";if(t){var o,a=t.carouselSlots,l=void 0===a?[]:a,s=null!=(o=t.index)?o:0;l&&l[s]&&(r=l[s].link||"",i=l[s].domain||i)}return{carouselLink:r,currentDomain:i}}},979904:function(e,t,n){n.d(t,{Z:function(){return d}}),n(872555);var r,i=n(995415),o=n(934645),a=n(28427),l=n(644493),s=n(664897),u=n(601686),c=(void 0!==r||(r=n(331047)).hash&&"f82ccc429683f2cb3ed96de5adc86f80"!==r.hash&&console.error("The definition of 'useCalculateMaxWidthAndHeightForSideBySideVariant_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),r);function d(e){var t,n,r,d,p,f,m,y,h,v,b=e.pinKey,g=(0,u.x4)().closeupWithinMasonryEnabled,_=(0,s.Z)(),S=(0,a.Z)(c,b),P=(0,o.Z)({showProductDetailPage:!!(null!=S&&S.isEligibleForPdp)});if(!g)return{maxHeight:void 0};var x=null==S||null==(n=S.richMetadata)||null==(r=n.products)?void 0:r[0],w=null==x?void 0:x.offerSummary,j=(null==w?void 0:w.price)||(null==w?void 0:w.standardPrice),O=null==S||null==(d=S.linkDomain)||null==(p=d.officialUser)?void 0:p.firstName,I=!!(null!=S&&null!=(f=S.closeupAttribution)&&f.firstName)||O,A=null==S||null==(m=S.linkUserWebsite)||null==(y=m.officialUser)?void 0:y.firstName,T=(null==S?void 0:S.trackedLink)||(null==S?void 0:S.link)||"",C=null!=(h=(0,l.Z)(T))?h:T,k=(0,i.Z)({carouselData:(null==S?void 0:S.carouselData)&&{carouselSlots:(null==S?void 0:S.carouselData.carouselSlots)&&(null==S?void 0:S.carouselData.carouselSlots.map(function(e){return{domain:e.domain,link:e.link}})),index:null==S||null==(v=S.carouselData)?void 0:v.index},domain:null==S?void 0:S.domain}).currentDomain.split(".")[0],E=0,R=0;if(t=84+18*!!j,E+=(null!=S&&S.closeupUnifiedTitle?23:0)+40*!!I,R+=(A||O||k)&&C?64:0,t+=Math.max(E,R),_)return{maxHeight:P?void 0:"calc(round(100vh, 1px) - ".concat(80,"px - ").concat(t,"px)")};var M=Math.round(window.innerHeight)-80-t;return{maxHeight:P?void 0:M}}},139707:function(e,t,n){n.d(t,{Z:function(){return l}});var r=n(899117),i=n(274320),o=n(15667),a=n(647709);function l(e){var t=(0,o.B)().isAuthenticated,n=(0,a.HG)(),l=(0,i.r)().checkExperiment,s=t&&n&&l("closeup_dweb_peek_redesign_fast_follow").anyEnabled,u=l("closeup_dweb_peek_redesign_fast_follow").group,c=t&&n&&l("closeup_dweb_side_by_side_redesign_fast_follow").anyEnabled,d=c?l("closeup_dweb_side_by_side_redesign_fast_follow").group:"";return{peekRedesignFastFollowsExpGroup:u,peekRedesignFastFollowsEnabled:s&&(0,r.Z)(u,e),sideBySideRedesignFastFollowsExpGroup:d,sideBySideRedesignFastFollowsEnabled:c,sideBySideFullWidthCTAEnabled:"enabled_full_width_cta"===d||"employees"===d,sideBySidePWTDeferActionBarLoad:"enabled_pwt_defer_action_bar_load"===d}}},934645:function(e,t,n){var r=n(274320),i=n(15667),o=n(647709);t.Z=function(e){var t=e.showProductDetailPage,n=e.skipActivation,a=(0,r.r)().checkExperiment,l=(0,o.HG)();return!!(0,i.B)().isAuthenticated&&!!l&&!!t&&a("closeup_dweb_blended_ui",{dangerouslySkipActivation:n}).anyEnabled}},11919:function(e,t,n){n.r(t),n.d(t,{default:function(){return V}});var r=n(586659),i=n(341044),o=n(20256),a=n(707915),l=n(856782),s=n(111330),u=n(702849),c=n(19585),d=n(369416),p=n(753143),f=n(341742),m=n(664897),y=n(790427),h=n(382718);function v(e){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach(function(t){var r,i;r=t,i=n[t],(r=function(e){var t=function(e,t){if("object"!=v(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=v(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==v(t)?t:t+""}(r))in e?Object.defineProperty(e,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[r]=i}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function _(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,l=[],s=!0,u=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=o.call(n)).done)&&(l.push(r.value),l.length!==t);s=!0);}catch(e){u=!0,i=e}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return S(e,t);var n=({}).toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?S(e,t):void 0}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function S(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function P(e){var t=e.containerRef,n=e.onAnimationEnd,i=e.startAnimating,a=e.containerWidth,l=(0,c.ZP)(),f=(0,m.Z)(),v=(0,p.M0)(),b=_((0,r.useState)(),2),S=b[0],P=b[1],x=_((0,r.useState)(!1),2),w=x[0],j=x[1],O=_((0,r.useState)(),2),I=O[0],A=O[1],T=l._('Share', 'secondarySendButtonAnimation.share', 'Share label for sharing a Pin'),C={buttonStyle:{animation:S,backgroundColor:u.Et},textStyle:{animation:I}};return(0,r.useEffect)(function(){if(!f&&a)if(i){j(!0);var e=(v.getItem(s.$M)||{animationSeenCount:0}).animationSeenCount;v.setItem(s.$M,{animationSeenCount:e+1,lastAnimationTimestamp:Date.now()}),P("buttonSlideOut 1s ease-in forwards"),A("textFadeIn 1s ease-in forwards")}else P("buttonSlideIn .3s ease-in forwards"),A("textFadeOut .3s ease-in-out forwards")},[a,v,i,f]),(0,h.jsxs)(r.Fragment,{children:[(0,h.jsx)(d.Z,{unsafeCSS:"\n@keyframes buttonSlideOut {\n  0% {\n    width: ".concat(48,"px;\n  }\n  15% {\n    width: ").concat(a,"px;\n  }\n  100% {\n    width: ").concat(a,"px;\n  }\n}\n\n@keyframes textFadeIn {\n  0% {\n    opacity: 0;\n  }\n  15% {\n    opacity: 0;\n  }\n  25% {\n    opacity: 1;\n  }\n  100% {\n    opacity: 1;\n  }\n}\n\n@keyframes buttonSlideIn {\n  0% {\n    width: ").concat(a,"px;\n  }\n  100% {\n    width: ").concat(48,"px;\n  }\n}\n\n@keyframes textFadeOut {\n  0% {\n    opacity: 1;\n  }\n  15% {\n    opacity: 1;\n  }\n  25% {\n    opacity: 0;\n  }\n  100% {\n    opacity: 0;\n  }\n}\n")}),(0,h.jsx)(o.xu,{ref:t,alignItems:"center",dangerouslySetInlineStyle:{__style:g(g({},C.buttonStyle),{},{visibility:w?"visible":"hidden"})},display:"flex",onAnimationEnd:function(e){"buttonSlideIn"===e.animationName&&n()},position:"absolute",rounding:4,zIndex:y.mS,children:(0,h.jsxs)(o.kC,{alignItems:"center",gap:1,children:[(0,h.jsx)(o.xu,{padding:3,children:(0,h.jsx)(o.JO,{accessibilityLabel:T,color:"default",icon:"share",size:24})}),(0,h.jsx)(o.xu,{dangerouslySetInlineStyle:{__style:C.textStyle},marginEnd:3,children:(0,h.jsx)(o.mg,{size:"md",children:T})})]})})]})}function x(e){var t=e.onAnimationEnd,n=(0,r.useRef)(null),i=_((0,r.useState)(0),2),o=i[0],a=i[1],s=_((0,r.useState)(!1),2),u=s[0],c=s[1];return(0,f.Z)(function(){var e=setTimeout(function(){c(!0);var e=setTimeout(function(){c(!1)},3e3);return function(){return clearTimeout(e)}},l.S+1e3);return function(){return clearTimeout(e)}}),(0,r.useEffect)(function(){if(n.current&&!o&&u){var e=n.current.getBoundingClientRect().width;e&&a(e)}},[n,o,u]),(0,h.jsx)(P,{containerRef:n,containerWidth:o,onAnimationEnd:t,startAnimating:u})}var w=n(121836),j=n(937392),O=n(675973),I=n(238589),A=n(807765),T=n(74229),C=n(539532);function k(e){return(k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function E(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function R(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?E(Object(n),!0).forEach(function(t){M(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function M(e,t,n){var r;return(r=function(e,t){if("object"!=k(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=k(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==k(r)?r:r+"")in e)?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function L(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,l=[],s=!0,u=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=o.call(n)).done)&&(l.push(r.value),l.length!==t);s=!0);}catch(e){u=!0,i=e}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return z(e,t);var n=({}).toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?z(e,t):void 0}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function z(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function V(e){var t=e.controllerOptions,n=e.iconColor,l=e.iconOnly,u=e.buttonText,d=e.showSendAnimation,m=void 0!==d&&d,y=e.tabIndex,v=void 0===y?0:y,b=e.closeupWithinMasonryEnabled,g=void 0!==b&&b,_=e.isInCloseupMediaViewer,S=void 0!==_&&_,P=(0,c.ZP)(),k=(0,p.M0)(),E=(0,I.Nl)(),z=(0,O.Z)().checkExperiment,V=(0,A.f)().setIsShowingShareButton,F=(0,r.useRef)(null),D=L((0,r.useState)(m),2),B=D[0],N=D[1],Z=S?new o.H3([T.k]):new o.Ry(5),W=L((0,r.useState)(function(){var e=E.getItem(w.bl)||0;return(k.getItem(s.$M)||{animationSeenCount:0}).animationSeenCount<2&&(2===e||3===e)}),1)[0],H=function(){N(!1)};return(0,f.Z)(function(){var e=(k.getItem(s.$M)||{lastAnimationTimestamp:0}).lastAnimationTimestamp;(0,i.Z)(new Date(e),new Date)||k.setItem(s.$M,{animationSeenCount:0,lastAnimationTimestamp:e})}),(0,r.useEffect)(function(){return V(m),function(){V(!1)}},[V,m]),(0,h.jsxs)(r.Fragment,{children:[(0,h.jsx)(C.Z,R(R({},t),{},{children:function(e){var r=e.handleSendShareFlyoutButtonClick;return(0,h.jsxs)(o.u,{inline:!0,text:P._('Share', 'Closeup.SharePin.Icon', 'Icon for sharing the current pin'),zIndex:Z,children:[B&&W&&z("sg_dweb_improved_share_animation_on_closeup").anyEnabled&&(0,h.jsx)(o.xu,{"data-test-id":"closeup-share-button",children:(0,h.jsx)(o.iP,{onTap:r,children:(0,h.jsx)(x,{onAnimationEnd:H})})}),S?(0,h.jsx)(o.zx,{ref:F,accessibilityLabel:P._('Share', 'Closeup.SharePin.AccessibilityLabel', 'Accessible label for button to share this pin'),color:"semiTransparentWhite",iconEnd:"share",onClick:r,size:"lg",tabIndex:v,text:(0,h.jsx)(o.xv,{weight:"bold",children:P._('Share', 'Closeup.SharePin.Button', 'Button to share the current pin')})}):(0,h.jsx)(a.Z,{ref:F,accessibilityLabel:P._('Send', 'Accessible label for button to send this pin', 'Accessible label for button to send this pin'),bgColor:g?"white":void 0,buttonText:u,handleClick:function(){return r()},icon:"share",iconColor:n,iconOnly:l,isActive:t.isFlyoutOpen,tabIndex:v,testId:"closeup-share-button"})]})}})),(0,h.jsx)(j.N,{anchors:M({},3017,F.current),idealDirection:"down",onAnchorTouch:"complete",placementId:12,scrollToDismiss:!0})]})}},869985:function(e,t,n){n.d(t,{Z:function(){return ec}});var r,i,o=n(586659);n(872555);var a=n(20256),l=n(592821),s=n(979904),u=n(890479),c=n(11919),d=n(980787),p=n(679422),f=n(28427),m=n(19585),y=n(601686),h=n(603316),v=n(382718);function b(e){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function _(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach(function(t){j(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function S(e,t){return(S=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function P(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function x(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(x=function(){return!!e})()}function w(e){return(w=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function j(e,t,n){return(t=O(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function O(e){var t=function(e,t){if("object"!=b(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=b(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==b(t)?t:t+""}var I={__style:{backgroundColor:"#000"}},A=(void 0!==r||(r=n(307595)).hash&&"e04be51b4be0a2585e7803d004fa83b7"!==r.hash&&console.error("The definition of 'CloseupVideoEndCard_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),r),T=function(e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");i.prototype=Object.create(e&&e.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),Object.defineProperty(i,"prototype",{writable:!1}),e&&S(i,e);var t,n,r=(t=x(),function(){var e,n=w(i);return e=t?Reflect.construct(n,arguments,w(this).constructor):n.apply(this,arguments),function(e,t){if(t&&("object"==b(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return P(e)}(this,e)});function i(){var e;if(!(this instanceof i))throw TypeError("Cannot call a class as a function");for(var t=arguments.length,n=Array(t),o=0;o<t;o++)n[o]=arguments[o];return j(P(e=r.call.apply(r,[this].concat(n))),"handleRestartVideo",function(t){var n,r,i=t.event;i.stopPropagation(),null==(n=(r=e.props).onRestartVideo)||n.call(r,{event:i}),(0,h.nP)("web.video.endcard.share",{sampleRate:1,tags:{status:"restart",variant:"enabled_send_first"}})}),j(P(e),"handleShareVideo",function(){var t=e.props,n=t.clientTrackingParams,r=t.onToggleFlyout,i=t.isFlyoutOpen,o=t.pinId,a=t.requireAuth,l=t.logContextEvent;if(i&&(0,h.nP)("web.video.endcard.share",{sampleRate:1,tags:{status:"shareSheetOpen",variant:"enabled_send_first"}}),l({event_type:101,component:179,object_id_str:o,view_type:3,view_parameter:156,element:11731,clientTrackingParams:n}),a)return void a();r&&r()}),j(P(e),"handleExternalSend",function(){(0,h.nP)("web.video.endcard.share",{sampleRate:1,tags:{status:"shareSheetOpen",variant:"enabled_send_first"}})}),j(P(e),"renderReplayButton",function(){return(0,v.jsx)(a.iP,{accessibilityLabel:e.props.i18n._('Watch again', 'Button when pressed restarts the video', 'Button when pressed restarts the video'),onTap:e.handleRestartVideo,rounding:2,children:(0,v.jsxs)(a.xu,{alignItems:"center",display:"flex",padding:2,children:[(0,v.jsx)(a.xu,{marginEnd:3,children:(0,v.jsx)(a.JO,{accessibilityLabel:e.props.i18n._('Watch again', 'Button when pressed restarts the video', 'Button when pressed restarts the video'),color:"inverse",icon:"refresh",size:18})}),(0,v.jsx)(a.X6,{color:"light",overflow:"normal",size:"400",children:e.props.i18n._('Watch again', 'Clickable label when pressed restarts the video', 'Clickable label when pressed restarts the video')})]})})}),j(P(e),"renderShareButton",function(){var t=e.props,n=t.clientTrackingParams,r=t.gridDescription,i=t.imageSrc,o=t.isFlyoutOpen,l=t.onFlyoutDismiss,s=t.pinId;return(0,v.jsx)(a.iP,{accessibilityLabel:e.props.i18n._('Send', 'end.video.send.icon.label', 'Clickable label when pressed opens share sheet after video is finished'),onTap:e.handleShareVideo,rounding:2,children:(0,v.jsxs)(a.xu,{alignItems:"center",display:"flex",justifyContent:"center",padding:2,children:[(0,v.jsx)(c.default,{controllerOptions:{flyoutDisplayOptions:{shownWithinMasonry:!0},loggingOptions:{component:179,element:72,onExternalSend:e.handleExternalSend,viewType:3},isFlyoutOpen:o,onFlyoutDismiss:l,onToggleFlyout:function(){},sendObject:{type:"pin",description:r,id:s,imageUrl:i,url:"/pin/".concat(s,"/"),clientTrackingParams:n}},iconColor:"white",iconOnly:!0,tabIndex:-1}),(0,v.jsx)(a.xu,{children:(0,v.jsx)(a.X6,{color:"light",overflow:"normal",size:"400",children:e.props.i18n._('Send', 'end.video.send.icon.label', 'Clickable label when pressed opens share sheet after video is finished')})})]})})}),e}return n=[{key:"componentDidMount",value:function(){var e=this.props,t=e.clientTrackingParams,n=e.pinId,r=e.logContextEvent;(0,h.nP)("web.video.endcard.share",{sampleRate:1,tags:{status:"land",variant:"enabled_send_first"}}),r({event_type:13,component:179,object_id_str:n,view_type:3,view_parameter:156,element:11731,clientTrackingParams:t})}},{key:"render",value:function(){var e=this.props,t=e.backgroundImage,n=e.naturalHeight,r=e.naturalWidth,i=e.maxHeight,o=e.maxWidth,l=e.pinTitle;return(0,v.jsx)(a.xu,{maxHeight:i,maxWidth:o,children:(0,v.jsxs)(a.Ee,{alt:l||"",naturalHeight:n,naturalWidth:r,src:t,children:[(0,v.jsx)(a.xu,{bottom:!0,dangerouslySetInlineStyle:I,left:!0,position:"absolute",right:!0,top:!0}),(0,v.jsx)(a.xu,{alignItems:"center",direction:"column",display:"flex",height:"100%",justifyContent:"center",left:!0,maxHeight:i,maxWidth:o,position:"absolute",top:!0,width:"100%",children:(0,v.jsxs)(a.xu,{position:"absolute",children:[(0,v.jsx)(a.xu,{children:this.renderShareButton()}),(0,v.jsx)(a.xu,{alignSelf:"center",children:this.renderReplayButton()})]})})]})})}}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,O(r.key),r)}}(i.prototype,n),Object.defineProperty(i,"prototype",{writable:!1}),i}(o.PureComponent);function C(e){var t,n=e.pinKey,r=e.variant,i=(0,f.Z)(A,n),o=(0,d.u)().logContextEvent,a=(0,m.ZP)(),u=(0,p.Z)(),c=(0,y.x4)(),h=c.closeupWithinMasonryEnabled,b=c.peekCloseupEnabled,g=c.viewportSize,S=(0,l.Re)(),P=S.maxHeight,x=S.fiftyPercentHeight,w=S.fiftyPercentWidth,j=(0,s.Z)({pinKey:i}).maxHeight;return b?t="sm"===g?x:P:h&&(t=j),(0,v.jsx)(T,_(_({},e),{},{closeupWithinMasonryEnabled:h,i18n:a,logContextEvent:o,maxHeight:"media-viewer"===r?"inherit":t,maxWidth:"media-viewer"===r?"inherit":w,requireAuth:u}))}var k=function(e){var t=e.backgroundImage,n=e.onRestartVideo,r=e.pinTitle,i=(0,m.ZP)();return(0,v.jsx)(a.xu,{"data-test-id":"video-end-card",height:"100%",width:"100%",children:(0,v.jsxs)(a.Ee,{alt:r||"",fit:"contain",naturalHeight:1,naturalWidth:1,src:t,children:[(0,v.jsx)(a.xu,{bottom:!0,dangerouslySetInlineStyle:I,left:!0,opacity:.8,position:"absolute",right:!0,top:!0}),(0,v.jsx)(a.xu,{alignItems:"center",display:"flex",height:"100%",justifyContent:"center",left:!0,position:"absolute",top:!0,width:"100%",children:(0,v.jsx)(a.xu,{children:(0,v.jsx)(a.iP,{onTap:n,rounding:2,children:(0,v.jsxs)(a.xu,{alignItems:"center",display:"flex",padding:2,children:[(0,v.jsx)(a.hU,{accessibilityLabel:i._('Replay', 'closeupVideo.endCard.ReplayButton', 'Button when pressed restarts the video'),icon:"refresh",iconColor:"white",size:"md"}),(0,v.jsx)(a.X6,{color:"light",overflow:"normal",size:"400",children:i._('Replay', 'closeupVideo.endCard.ReplayButton', 'Button when pressed restarts the video')})]})})})})]})})},E=n(293565),R=n(392824),M=n(716920),L=n(361423),z=n(754545),V=n(956077),F=n(15667),D=n(281106),B=n(181663),N=n(123317),Z=n(724084),W=n(510928),H=n(647709),U=n(239728),K=n(104659),X=n(653621),G=n(589357),q=n(720445);function $(e){return($="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function J(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,l=[],s=!0,u=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=o.call(n)).done)&&(l.push(r.value),l.length!==t);s=!0);}catch(e){u=!0,i=e}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Y(e,t);var n=({}).toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Y(e,t):void 0}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Y(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function Q(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function ee(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Q(Object(n),!0).forEach(function(t){eo(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Q(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function et(e,t){return(et=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function en(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function er(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(er=function(){return!!e})()}function ei(e){return(ei=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function eo(e,t,n){return(t=ea(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ea(e){var t=function(e,t){if("object"!=$(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=$(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==$(t)?t:t+""}var el=(void 0!==i||(i=n(60533)).hash&&"53ae9ecd15f057f744460205e5d495fd"!==i.hash&&console.error("The definition of 'CloseupVideoNonDuplo_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),i),es=function(e,t){var n,r;t({currentTime:null!=(n=null==e?void 0:e.currentTime)?n:0,duration:null!=(r=null==e?void 0:e.duration)?r:1})},eu=function(e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");i.prototype=Object.create(e&&e.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),Object.defineProperty(i,"prototype",{writable:!1}),e&&et(i,e);var t,n,r=(t=er(),function(){var e,n=ei(i);return e=t?Reflect.construct(n,arguments,ei(this).constructor):n.apply(this,arguments),function(e,t){if(t&&("object"==$(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return en(e)}(this,e)});function i(){var e;if(!(this instanceof i))throw TypeError("Cannot call a class as a function");for(var t=arguments.length,n=Array(t),o=0;o<t;o++)n[o]=arguments[o];return eo(en(e=r.call.apply(r,[this].concat(n))),"state",{controls:"always"===e.props.showControls&&!e.props.disabled,fullscreen:!1,playing:!(0,E.G6)(e.props.requestContext.userAgent.browserName)&&!!e.props.autoplay&&!e.props.disabled,ready:!1,seeking:!1,showEndCard:!1,volume:e.props.muted||e.props.shouldMute?0:1,videoStartTime:e.props.videoStartTime||0}),eo(en(e),"setVideoPwtLoadingStop",function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(L.Z){var n=e.props,r=n.storyPinStepStopwatch,i=n.pinId;r&&(t||r.addAnnotation("video.startup.end"),r.addBinaryAnnotation("pin.id",i,"STRING"),r.addBinaryAnnotation("video",!0,"BOOL"),r.addBinaryAnnotation("preload",t,"BOOL"),r.addSubspan({name:"perceived_video_load",endTime:L.Z.now()}),r.stop()),t||(0,R.ZP)("video.startup.end"),(0,R.L8)("perceived_video_load"),(0,V.Nx)(X._z),(0,V.rt)("pin.id",i,"STRING"),(0,V.rt)("video",!0,"BOOL"),"STORY_PIN_CLOSEUP"===(0,z.Ly)()&&(0,V.l7)(X.pM)}}),eo(en(e),"componentDidMount",function(){var t=e.props,n=t.customThumbnail,r=t.video,i=t.preferMp4,o=r.mp4,a=r.hlsv3||r.hls||null,l=(i&&o||a||{}).thumbnail,s=(0,G.j4)(n||l);(null==s?void 0:s.ready)===4&&(e.setState({ready:!0}),e.props.autoplay&&e.setVideoPwtLoadingStop(!0)),document.addEventListener("fullscreenchange",e.onFullscreenChange),document.addEventListener("webkitfullscreenchange",e.onFullscreenChange),document.addEventListener("mozfullscreenchange",e.onFullscreenChange),document.addEventListener("MSFullscreenChange",e.onFullscreenChange)}),eo(en(e),"componentWillUnmount",function(){document.removeEventListener("fullscreenchange",e.onFullscreenChange),document.removeEventListener("webkitfullscreenchange",e.onFullscreenChange),document.removeEventListener("mozfullscreenchange",e.onFullscreenChange),document.removeEventListener("MSFullscreenChange",e.onFullscreenChange)}),eo(en(e),"onFullscreenChange",function(){document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||e.props.setPanelOpen(function(e){return!e})}),eo(en(e),"componentDidUpdate",function(t,n){e.props.videoStartTime&&e.props.videoStartTime!==t.videoStartTime&&e.setState({videoStartTime:e.props.videoStartTime}),!1===t.isPlaying&&e.props.isPlaying&&e.setState({playing:!0,controls:"never"!==e.props.showControls}),t.isPlaying&&!1===e.props.isPlaying&&e.setState({playing:!1}),t.autoplay!==e.props.autoplay&&(e.setState({playing:!!e.props.autoplay}),e.props.autoplay&&e.state.ready&&e.setVideoPwtLoadingStop(!0)),t.muted!==e.props.muted&&e.setState({volume:+!e.props.muted}),"never"===e.props.showControls&&n.controls&&e.setState({controls:!1}),(n.controls||n.playing)&&e.props.disabled&&e.setState({playing:!1,controls:!1}),!n.playing&&e.state.playing&&e.props.onPlay&&e.props.onPlay(),e.props.isCloseupMediaViewerOpen&&!t.isCloseupMediaViewerOpen&&e.setState({playing:!1})}),eo(en(e),"handleTouch",function(){var t=e.state.seeking,n=e.props.disabled;t||n||e.setState(function(e){return{playing:!e.playing}})}),eo(en(e),"handleShowControls",function(){return e.setState({controls:!0})}),eo(en(e),"handleHideControls",function(){return e.setState({controls:!1})}),eo(en(e),"handleReady",function(){var t=e.state,n=t.ready,r=t.playing,i=e.props,o=i.autoplay,a=i.disabled;o&&!n&&e.setVideoPwtLoadingStop(),e.setState({ready:!0}),(0,E.G6)(e.props.requestContext.userAgent.browserName)&&!r&&o&&!a&&e.setState({playing:!0})}),eo(en(e),"handleEnded",function(t){var n=t.event,r=e.props,i=r.customThumbnail,o=r.customEndCard,a=r.pinId,l=r.setCurrentVideo,s=r.loop,u=r.onEnded;n.stopPropagation(),!s&&(e.setState({playing:!1}),i&&i.endsWith(".gif")||o||(e.setState({showEndCard:!0,videoStartTime:0}),l({pinId:a,isPromoted:!1,currentTime:0})),e.state.fullscreen&&e.exitFullscreen()),u&&u(),e.props.setPanelOpen(!0)}),eo(en(e),"handlePause",function(t){t.event.stopPropagation(),e.setState({playing:!1})}),eo(en(e),"handlePlay",function(t){t.event.stopPropagation(),e.setState({playing:!0})}),eo(en(e),"handleFullscreenChange",function(t){var n=t.event,r=t.fullscreen;n.stopPropagation(),e.setState({fullscreen:r})}),eo(en(e),"handlePlayheadDown",function(){e.setState({seeking:!0})}),eo(en(e),"handlePlayheadUp",function(){setTimeout(function(){e.setState({seeking:!1})},500)}),eo(en(e),"handleRestartVideo",function(t){t.event.stopPropagation(),e.setState({playing:!0,showEndCard:!1})}),eo(en(e),"handleShareRestartVideo",function(t){t.event.stopPropagation(),e.setState({playing:!0,showEndCard:!1})}),eo(en(e),"handleVolumeChange",function(t){var n=t.event,r=t.volume,i=e.props.shouldMute;n.stopPropagation(),i||e.setState({volume:r})}),eo(en(e),"exitFullscreen",function(){var e=window.document;(e.fullscreenElement||e.webkitFullscreenElement||e.mozFullScreenElement)&&(e.exitFullscreen?e.exitFullscreen():e.webkitExitFullscreen?e.webkitExitFullscreen():e.mozCancelFullScreen?e.mozCancelFullScreen():e.msExitFullscreen&&e.msExitFullscreen())}),eo(en(e),"requestFullscreen",function(){var t=e.props,n=t.customThumbnail,r=t.video,i=t.preferMp4,o=r.mp4,a=r.hlsv3||r.hls||null,l=(i&&o||a||{}).thumbnail,s=(0,G.j4)(n||l);s.requestFullscreen?s.requestFullscreen():s.webkitRequestFullscreen?s.webkitRequestFullscreen():s.mozRequestFullScreen?s.mozRequestFullScreen():s.msRequestFullscreen&&s.msRequestFullscreen()}),eo(en(e),"renderCloseupVideoEndCard",function(t,n,r,i){var o={backgroundImage:t,naturalHeight:n,naturalWidth:r,onRestartVideo:e.handleShareRestartVideo},a={backgroundImage:t,naturalHeight:n,naturalWidth:r,onRestartVideo:e.handleRestartVideo},l=e.props,s=l.clientTrackingParams,u=l.flyoutShareProps,c={clientTrackingParams:s,gridDescription:u?u.gridDescription:"",imageSrc:u?u.imageSrc:"",isFlyoutOpen:!!u&&u.isFlyoutOpen,onFlyoutDismiss:u?u.onFlyoutDismiss:function(){},onToggleFlyout:u?u.onToggleFlyout:function(){},pinId:u?u.pinId:"",pinKey:e.props.pin,variant:e.props.variant};return i?(0,v.jsx)(k,ee({},a)):(0,v.jsx)(C,ee(ee({},c),o))}),e}return n=[{key:"render",value:function(){var e=this,t=this.props,n=t.aspectRatio,r=t.autoplay,i=t.closeupStoryPinViewability,o=t.contextLogData,s=void 0===o?{component:179,is_closeup_video:!0,objectId:this.props.pinId,view:3,viewParameter:156}:o,c=t.customThumbnail,d=t.isPromoted,p=t.loop,f=t.objectFit,m=t.preferMp4,y=t.preload,h=t.requestContext,b=t.showControls,g=t.variant,_=t.video,S=t.captions,P=t.isDesktop,x=t.videoThumbnailStartTime,w=t.pin,j=t.pinId,O=t.setProgressInfo,I=t.progressInfo,A=t.setPanelOpen,T=t.panelOpen,C=t.setMute,k=t.isMuted,R=t.closeupWithinMasonryEnabled,M=t.maxHeight,L=t.maxWidth,z=t.onTimeChange,V=t.seekTime,F=t.roundingOverride;s.is_closeup_video=!0;var Z=this.state,W=Z.controls,H=Z.fullscreen,K=Z.playing,X=Z.showEndCard,$=Z.volume,J=Z.videoStartTime,Y=_.hlsv3||_.hls||null;if(!Y&&!_.mp4)return null;var Q=_.mp4,et=m&&Q&&Q.url||Y&&[{type:"video/m3u8",src:Y.url}]||void 0,en=m&&Q||Y||{},er=en.height,ei=en.thumbnail,eo=en.width,ea=c||ei;return(0,v.jsxs)(a.zd,{height:R||"media-viewer"===g?"inherit":void 0,rounding:F,wash:!R&&"media-viewer"!==g||void 0,width:R||"media-viewer"===g?"inherit":void 0,willChangeTransform:!((0,E.G6)(h.userAgent.browserName)&&H),children:[X?this.renderCloseupVideoEndCard(null!=ea?ea:"",null!=er?er:1,null!=eo?eo:1,d):(0,v.jsxs)(a.iP,{accessibilityLabel:this.props.i18n._('Pause or play video', 'pin.closeup.video.tap', 'tap area to pause or play video'),fullHeight:R||"media-viewer"===g,onMouseEnter:"hover"===b?this.handleShowControls:void 0,onMouseLeave:"hover"===b?this.handleHideControls:void 0,onTap:this.handleTouch,rounding:2,children:[(0,v.jsx)(D.Z,{playing:K,zIndexValue:99}),(0,v.jsx)(u.Z,{id:"VideoWithContextLogging",children:(0,v.jsx)(q.ZP,{aspectRatio:null!=n?n:(null!=eo?eo:1)/(null!=er?er:1),backgroundColor:R?"black":l.yc,captions:S,closeupStoryPinViewability:i,contextLogData:ee(ee({},s),{},{video_id:this.props.video.id}),hlsConfig:{startLevel:G.VS},isAutoPlay:!!r,loop:p,objectFit:f,onControlsPause:this.handlePause,onControlsPlay:this.handlePlay,onEnded:this.handleEnded,onFullscreenChange:this.handleFullscreenChange,onPlay:function(){},onPlayError:function(){},onPlayheadDown:this.handlePlayheadDown,onPlayheadUp:this.handlePlayheadUp,onReady:this.handleReady,onTimeChange:"storyPin"===g?z:function(e){var t=e.time;es&&"number"==typeof(null==Q?void 0:Q.duration)&&Q.duration>0&&O&&es({currentTime:t,duration:Q.duration/U.gJ},O)},onVolumeChange:this.handleVolumeChange,pin:w,pinKey:w,playing:K,poster:ea,preferMp4:m,preload:y,seekTime:V,src:et,variant:g,video:m&&Q||Y||{},videoStartTime:J||x,volume:$})})]}),(0,v.jsx)(a.xu,{onMouseEnter:"hover"===b?this.handleShowControls:void 0,onMouseLeave:"hover"===b?this.handleHideControls:void 0,children:"storyPin"!==g&&(0,v.jsx)(a.xu,{bottom:!0,dangerouslySetInlineStyle:{__style:ee(ee({},W?ee({},G.Ul):{}),{},{flexDirection:"column-reverse"})},display:"flex",height:G.hy,maxHeight:M,maxWidth:L,paddingX:6,position:"absolute",width:"100%",zIndex:N.Gf,children:(0,v.jsx)(u.Z,{id:"IdeaPinVideoScrubber",children:(0,v.jsx)(B.Z,{activePageIndex:0,captionsUrl:S,handleMute:function(){e.setState({volume:+!!k}),C(!k)},handlePanelChange:function(){A&&A(!T),T&&P&&e.requestFullscreen()},handlePause:function(){e.setState({playing:!1})},handlePausePlay:function(){e.setState({playing:!K})},handlePlay:function(){e.setState({playing:!0})},handleWatchAgain:this.handleRestartVideo,inMilliseconds:!1,isMuted:k,isPanelOpen:T,isPlaying:K,isStoryPin:!1,pageCount:1,pages:[],pinId:j,progressInfo:I,showEndCard:X,showVideoControls:W,viewParameter:156})})})})]})}}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ea(r.key),r)}}(i.prototype,n),Object.defineProperty(i,"prototype",{writable:!1}),i}(o.Component);function ec(e){var t,n,r,i=e.pinKey,a=e.pinId,c=e.isPromoted,d=e.video,p=e.muted,h=e.variant,b=(0,f.Z)(el,i),g=(0,m.ZP)(),_=(0,F.B)(),S=(0,M.g)(),P=(0,Z.Hx)().seekTimes,x=(0,y.x4)(),w=x.clientTrackingParams,j=x.closeupWithinMasonryEnabled,O=x.isCloseupMediaViewerOpen,I=(0,l.Re)().maxWidth,A=(0,K.G)(),T=A.appUI,C=A.setCurrentVideo,k=T.videosAutoplaying,E=k.organicVideosAutoplaying,R=k.promotedVideosAutoplaying,L=_.locale.toLowerCase(),z=null!=(t=(null==(n=d.mp4)?void 0:n.captions_urls)||(null==(r=d.hlsv3)?void 0:r.captions_urls))?t:{},V=L&&z[L]||Object.values(z)[0]||"",D=(0,H.HG)(),B=c?R[a]:E[a],N=parseInt((0,W.Z)().t||0,10),U=J((0,o.useState)((null==B?void 0:B.currentTime)||0),2),X=U[0],G=U[1],q=J((0,o.useState)(null),2),$=q[0],Y=q[1],Q=J((0,o.useState)(!0),2),et=Q[0],en=Q[1],er=J((0,o.useState)(p),2),ei=er[0],eo=er[1],ea=(0,s.Z)({pinKey:b}).maxHeight;(0,o.useEffect)(function(){var e=X;N>0&&(e=N),P[a]&&(e=P[a]),G(e)},[P,a,N,X]);var es=(0,o.useMemo)(function(){return("default"!==h||!O)&&(!B||!B.paused)},[h,B,O]);return(0,v.jsx)(u.Z,{id:"CloseupVideoInner",children:(0,v.jsx)(eu,ee(ee({},e),{},{captions:String(V)||"",clientTrackingParams:w,closeupWithinMasonryEnabled:j,i18n:g,isCloseupMediaViewerOpen:O,isDesktop:D,isMuted:ei,isPanelOpen:et,isPlaying:es,maxHeight:ea,maxWidth:"media-viewer"===h?void 0:I,panelOpen:et,pin:b,progressInfo:$,requestContext:_,seekTime:P[a],setCurrentVideo:C,setMute:eo,setPanelOpen:en,setProgressInfo:Y,storyPinStepStopwatch:S,variant:h,videoStartTime:X}))})}eo(eu,"defaultProps",{loop:!1,showControls:"hover"})},974297:function(e,t,n){n.d(t,{Z:function(){return r}});function r(e){var t;return e&&null!=(t=[e["736x"],e["564x"],e["474x"],e["236x"]].find(function(e){return null==e?void 0:e.url}))?t:null}},607600:function(e,t,n){n.d(t,{Z:function(){return a}});var r=n(33357),i=n.n(r),o=n(603316);function a(e){if("undefined"==typeof window||!document.head)return(0,o.nP)("load_fonts.failure",{sampleRate:1,tags:{failure_reason:"window undefined"}}),Promise.reject(Error("Window is undefined or no head on the document. Unable to load fonts"));var t=document.head,n=[];return e.forEach(function(e){e.styles.forEach(function(r){var o,a,l,s=document.querySelector("#".concat(null!=(o=e.fontFamily)?o:"","-").concat(r.name));s||((s=document.createElement("style")).setAttribute("id","".concat(null!=(a=e.fontFamily)?a:"","-").concat(r.name)),t.appendChild(s),e.format&&r.fontUrl&&s&&s.sheet&&s.sheet.insertRule('\n            @font-face {\n              font-family: "'.concat(null!=(l=e.fontFamily)?l:"",'";\n              font-style: "').concat(r.fontStyle,'";\n              font-weight: "').concat(r.fontWeight,'";\n              src: url("').concat(r.fontUrl,'") format("').concat(e.format,'");\n            }\n          '),0),n.push(new(i())(e.fontFamily,{style:r.fontStyle,weight:r.fontWeight}).load()))})}),Promise.all(n).then(function(){Promise.resolve()}).catch(function(e){(0,o.nP)("load_fonts.failure",{sampleRate:1,tags:{failure_reason:"unsuccessful load"}}),Promise.reject(e)})}},291892:function(e,t,n){n.d(t,{Z:function(){return d}});var r=n(586659),i=n(284778),o=n(382718);function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var l=["alt","children","color","elementTiming","fetchPriority","isActive","naturalHeight","naturalWidth","onLoad","src","fit","srcSet"];function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach(function(t){var r,i;r=t,i=n[t],(r=function(e){var t=function(e,t){if("object"!=a(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=a(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==a(t)?t:t+""}(r))in e?Object.defineProperty(e,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[r]=i}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var c=function(e,t,n){var i=(0,r.useRef)(null),o=(0,r.useRef)(null);(0,r.useEffect)(function(){if(e!==i.current||n&&n!==o.current){i.current=null!=e?e:null;var r=document.querySelector('img[src="'.concat(e,'"]'))||null;null!=r&&r.complete&&t()}o.current=n},[e,t,n])};function d(e){var t=e.alt,n=e.children,r=e.color,a=e.elementTiming,s=e.fetchPriority,d=e.isActive,p=e.naturalHeight,f=e.naturalWidth,m=e.onLoad,y=e.src,h=e.fit,v=e.srcSet,b=function(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if(({}).hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],-1===t.indexOf(n)&&({}).propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}(e,l);return c(y,m,void 0!==d&&d),(0,o.jsx)(i.Z,u(u({},b),{},{alt:t,color:r,elementTiming:a,fetchPriority:s,fit:void 0===h?"none":h,naturalHeight:p,naturalWidth:f,onLoad:m,src:y,srcSet:v,children:n}))}},658673:function(e,t,n){n.d(t,{Z:function(){return T}});var r=n(586659),i=n(729434),o=n(901360),a=n(592109),l=n(735201),s=n(645214),u=n(979817),c=n(868178),d=n(375730),p=n(594885),f=n(932885),m=n(986906),y=n(970773),h=n(361423);function v(e){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function b(e){return function(e){if(Array.isArray(e))return _(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||g(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(e,t){if(e){if("string"==typeof e)return _(e,t);var n=({}).toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_(e,t):void 0}}function _(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function S(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function P(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?S(Object(n),!0).forEach(function(t){x(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):S(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function x(e,t,n){var r;return(r=function(e,t){if("object"!=v(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=v(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==v(r)?r:r+"")in e)?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var w=(0,a.XV)("PwtStopwatch"),j=function(e,t){if(h.Z){if("start"===t.type&&!e.isTiming){var n=t.name,r=t.startTime,i=t.navigationType;return(0,o.A9)("TIMING.".concat(n)),{isTiming:!0,name:n,isSampled:t.isSampled,startTime:"number"==typeof r?r:h.Z.now(),metricId:{type:"stopwatch",name:n,navigationType:i},pwtStaticContext:t.pwtStaticContext,annotations:e.annotations,binaryAnnotations:e.binaryAnnotations,spans:e.spans,traceId:e.traceId,spanNameUpdates:e.spanNameUpdates}}if(!e.isTiming)if(t.bypassIsTimingCheck)w("allowing action while stopwatch is not actively timing (bypassIsTimingCheck is set to true)",t);else{var a=t.name||e.name;return w("ignoring action - stopwatch is not actively timing",t),(0,o.A9)("WARN.".concat(a,".noTiming.").concat(t.type)),e}if("annotate"===t.type){var p=h.Z.now();return w("adding annotation {".concat(t.label,": ").concat(p,"}")),P(P({},e),{},{annotations:e.annotations.concat([{label:t.label,timestamp:p}])})}if("binaryAnnotate"===t.type)return w("adding binary annotation {".concat(t.name,": ").concat(String(t.value),"}")),P(P({},e),{},{binaryAnnotations:P(P({},e.binaryAnnotations),x({},t.name,{value:t.value,type:t.annotationType}))});if("binaryAnnotateOperation"===t.type){var m=t.binaryAnnotationValueAndType,v=m.value,g=m.type;if(!e.binaryAnnotations[t.name])return P(P({},e),{},{binaryAnnotations:P(P({},e.binaryAnnotations),x({},t.name,{value:v,type:g}))});var _=e.binaryAnnotations[t.name].value||0;return w("operating on binary annotation {\n          name: ".concat(t.name,"\n          pervious value: ").concat(String(_),"\n          operand: ").concat(String(v),"\n        }")),P(P({},e),{},{binaryAnnotations:P(P({},e.binaryAnnotations),x({},t.name,{value:v?t.operation(_,v):_,type:g}))})}if("addSubspan"===t.type){w("adding subspan {".concat(t.name,"}")),-1!==e.spans.findIndex(function(e){return e.name===t.name})&&w("WARNING: adding duplicate subspan name {".concat(t.name,"}"));var S=t.id||(0,y.Z)();-1!==e.spans.findIndex(function(e){return e.id===S})&&w("WARNING: adding duplicate subspan id {".concat(t.name,": ").concat(S,"}"));var j=0;return t.startTime?j=t.startTime:e.startTime?j=e.startTime:w("WARNING: adding subspan {".concat(t.name,"} without start time")),P(P({},e),{},{spans:[].concat(b(e.spans),[{name:t.name,id:S,startTime:j,endTime:t.endTime||1/0,annotationMap:P({},t.annotations),binaryAnnotationMap:P({},t.binaryAnnotations),parentId:t.parentId}])})}if("subspanStart"===t.type){w("starting subspan {".concat(t.name,"}")),-1!==e.spans.findIndex(function(e){return e.name===t.name})&&w("WARNING: starting duplicate subspan name {".concat(t.name,"}"));var O,I=t.id||(0,y.Z)();-1!==e.spans.findIndex(function(e){return e.id===I})&&w("WARNING: starting duplicate subspan id {".concat(t.name,": ").concat(I,"}"));var A=t.parentName?null==(O=e.spans.find(function(e){return e.name===t.parentName}))?void 0:O.id:null;return P(P({},e),{},{spans:[].concat(b(e.spans),[{name:t.name,id:I,parentId:t.parentId||A,startTime:h.Z.now(),endTime:1/0,annotationMap:P({},t.annotations),binaryAnnotationMap:P({},t.binaryAnnotations)}])})}if("subspanStop"===t.type){w("stopping subspan {".concat(t.name,"}")),!t.id&&e.spans.filter(function(e){return e.name===t.name}).length>1&&(0,o.H)("duplicate_subspan_stop_name",{name:t.name,type:t.type});var T=t.id?e.spans.findIndex(function(e){return e.id===t.id}):e.spans.findIndex(function(e){return e.name===t.name});return T>-1?(e.spans[T].endTime=h.Z.now(),t.annotations&&(e.spans[T].annotationMap=P(P({},e.spans[T].annotationMap),t.annotations)),t.binaryAnnotations&&(e.spans[T].binaryAnnotationMap=P(P({},e.spans[T].binaryAnnotationMap),t.binaryAnnotations))):(0,o.H)("invalid_subspan_stop_name",{name:t.name}),e}if("subspanUpdateName"===t.type){e.spans.filter(function(e){return e.name===t.currentName}).length>1&&(0,o.H)("duplicate_subspan_stop_name",{name:t.currentName,type:t.type});var C=e.spans.findIndex(function(e){return e.name===t.currentName});return C>-1?t.updateWhenStopwatchCompletes?e.spanNameUpdates=[].concat(b(e.spanNameUpdates),[{currentName:t.currentName,newName:t.newName}]):(w("renaming subspan {".concat(t.currentName,"} to {").concat(t.newName,"}")),e.spans[C].name=t.newName):(0,o.H)("no_subspan_found_to_rename",{name:t.currentName}),e}if("stop"===t.type&&e.isTiming){var k=e.startTime,E=e.metricId,R=e.pwtStaticContext,M=e.annotations,L=e.binaryAnnotations,z=e.isSampled,V=e.spans,F=e.traceId;if(t.stopwatchPerformanceObserver&&t.stopwatchPerformanceObserver.disconnect(),z){var D=t.stopTime||h.Z.now(),B=b(V.map(function(t){t.endTime===1/0&&(t.endTime=D);var n=e.spanNameUpdates.findIndex(function(e){return t.name===e.currentName});return n>-1&&(w("renaming subspan {".concat(t.name,"} to {").concat(e.spanNameUpdates[n].newName,"}")),t.name=e.spanNameUpdates[n].newName,e.spanNameUpdates=e.spanNameUpdates.filter(function(e){return e.newName!==t.name})),t}));if(t.manualAndResourceSpans||0===V.length){var N=(0,y.Z)();B.push.apply(B,[{name:"network_resources",id:N,startTime:k,endTime:D,annotationMap:{},binaryAnnotationMap:{},parentId:null}].concat(b((t.customStopwatchBuffer||[]).map(function(e){return(0,d.Z)((0,u.p)(e,[]),N)}).filter(Boolean))))}var Z={type:"COMPLETE",metricId:E,traceId:F,startTime:k,endTime:D,spans:B,annotationMap:P({},(0,f.Z)(M)),binaryAnnotationMap:(0,s.ng)({metricId:E,pwtStaticContext:R,binaryAnnotations:L,performanceResourceTimings:t.customStopwatchBuffer||[],type:"COMPLETE"})};(0,c.Z)({metricId:E,pwtStaticContext:R,result:Z})}return(0,l.$B)(),{isTiming:!1,name:e.name,annotations:[],binaryAnnotations:{},spans:[],traceId:(0,y.Z)(),spanNameUpdates:[]}}if("error"===t.type){var W=t.error,H=t.stopwatchPerformanceObserver;return W&&(0,o.H)(W),H&&H.disconnect(),(0,l.$B)(),{isTiming:!1,name:e.name,annotations:[],binaryAnnotations:{},spans:[],traceId:(0,y.Z)(),spanNameUpdates:[]}}if("abort"===t.type&&e.isTiming){t.stopwatchPerformanceObserver&&t.stopwatchPerformanceObserver.disconnect();var U=t.reason||"",K=e.startTime,X=e.metricId,G=e.pwtStaticContext,q=e.binaryAnnotations,$=e.traceId,J={type:"ABORT",traceId:$,startTime:K,endTime:h.Z.now(),spans:[],annotationMap:{},binaryAnnotationMap:(0,s.ng)({metricId:X,pwtStaticContext:G,binaryAnnotations:q,performanceResourceTimings:t.customStopwatchBuffer||[],type:"ABORT"}),reason:U};return(0,c.Z)({metricId:X,pwtStaticContext:G,result:J}),(0,l.$B)(),{isTiming:!1,name:e.name,annotations:[],binaryAnnotations:{},spans:[],traceId:$,spanNameUpdates:[]}}}return e},O=function(e){var t,n=e.name,i=e.sampleRate,o=e.navigationType,a=e.manualAndResourceSpans,s=void 0!==a&&a,u=(0,p.Z)(),c=(0,r.useRef)([]),d=(0,r.useRef)(null),f=(0,r.useRef)(null);null===f.current&&(f.current=(0,l.jf)());var y=function(e){if(Array.isArray(e))return e}(t=(0,r.useReducer)(j,{isTiming:!1,name:n,annotations:[],binaryAnnotations:{},spans:[],traceId:f.current,spanNameUpdates:[]}))||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,l=[],s=!0,u=!1;try{for(o=(n=n.call(e)).next;!(s=(r=o.call(n)).done)&&(l.push(r.value),2!==l.length);s=!0);}catch(e){u=!0,i=e}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return l}}(t,2)||g(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),v=y[0],b=y[1];return u?{isTiming:v.isTiming,name:v.name,start:function(e){return window.PerformanceObserver&&(c.current=[],d.current=(0,m.Z)({entryTypes:["resource"]},function(e){c.current=c.current.concat(e.getEntries()),c.current.length>1e3&&(c.current=c.current.slice(-1e3))})),b({type:"start",startTime:e,name:n,navigationType:o,pwtStaticContext:u,isSampled:!i||Math.random()<i})},stop:function(e){return b({type:"stop",stopTime:e,stopwatchPerformanceObserver:d.current,customStopwatchBuffer:c.current,manualAndResourceSpans:s})},error:function(e){b({type:"error",stopwatchPerformanceObserver:d.current,error:e})},abort:function(e){return b({type:"abort",stopTime:null===h.Z||void 0===h.Z?void 0:h.Z.now(),stopwatchPerformanceObserver:d.current,customStopwatchBuffer:c.current,reason:e})},annotate:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return b({type:"annotate",label:e,parentId:t,bypassIsTimingCheck:n})},binaryAnnotate:function(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return b({type:"binaryAnnotate",name:e,value:t,annotationType:n,parentId:r,bypassIsTimingCheck:i})},binaryAnnotateOperation:function(e){var t=e.name,n=e.binaryAnnotationValueAndType,r=e.operation,i=e.parentId,o=e.bypassIsTimingCheck;return b({type:"binaryAnnotateOperation",name:t,binaryAnnotationValueAndType:n,operation:r,parentId:i,bypassIsTimingCheck:void 0!==o&&o})},addSubspan:function(e){var t=e.name,n=e.startTime,r=e.endTime,i=e.annotations,o=e.binaryAnnotations,a=e.parentId,l=e.id,s=e.bypassIsTimingCheck;return b({type:"addSubspan",name:t,startTime:n,endTime:r,annotations:void 0===i?{}:i,binaryAnnotations:void 0===o?{}:o,parentId:void 0===a?null:a,id:void 0===l?null:l,bypassIsTimingCheck:void 0!==s&&s})},subspanStart:function(e){var t=e.name,n=e.annotations,r=e.binaryAnnotations,i=e.parentId,o=e.parentName,a=e.id,l=e.bypassIsTimingCheck;return b({type:"subspanStart",name:t,annotations:void 0===n?{}:n,binaryAnnotations:void 0===r?{}:r,parentId:void 0===i?null:i,parentName:void 0===o?null:o,id:void 0===a?null:a,bypassIsTimingCheck:void 0!==l&&l})},subspanStop:function(e){var t=e.name,n=e.annotations,r=e.binaryAnnotations,i=e.id,o=e.parentId,a=e.bypassIsTimingCheck;return b({type:"subspanStop",name:t,annotations:n,binaryAnnotations:r,id:i,parentId:o,bypassIsTimingCheck:void 0!==a&&a})},subspanUpdateName:function(e){var t=e.currentName,n=e.newName,r=e.bypassIsTimingCheck,i=e.updateWhenStopwatchCompletes;return b({type:"subspanUpdateName",currentName:t,newName:n,bypassIsTimingCheck:r,updateWhenStopwatchCompletes:void 0===i||i})},getSpans:function(e,t){return v.spans.filter(function(n){return n[e]===t})},getTraceId:function(){return v.traceId}}:null},I=n(891631),A=n(382718),T=function(e){var t=e.name,n=e.sampleRate,a=e.abortOnUnloadOrClientNavigation,l=void 0===a||a,s=e.navigationType,u=e.manualAndResourceSpans,c=void 0!==u&&u,d=(0,i.Z)("Stopwatch_".concat(t)),p=d.Provider;return{Provider:function(e){var i=e.children,a=O({name:t,sampleRate:n,navigationType:s,manualAndResourceSpans:c}),u=(0,I.Z)(),d=u?u.time:0,f=(0,r.useRef)(!1),m=null==a?void 0:a.isTiming,y=(0,r.useCallback)(function(e){f.current?(f.current=!1,null==a||a.abort(e)):(0,o.A9)("WARN.".concat(t,".noTiming.abort"))},[a]),h=(0,r.useCallback)(function(e,t){null==a||a.annotate(e,t)},[a]),v=(0,r.useCallback)(function(e,t,n,r){null==a||a.binaryAnnotate(e,t,n,r)},[a]),b=(0,r.useCallback)(function(e){var t=e.name,n=e.binaryAnnotationValueAndType,r=e.operation,i=e.parentId,o=e.bypassIsTimingCheck;null==a||a.binaryAnnotateOperation({name:t,binaryAnnotationValueAndType:n,operation:r,parentId:i,bypassIsTimingCheck:o})},[a]),g=(0,r.useCallback)(function(e){var t=e.name,n=e.startTime,r=e.endTime,i=e.annotations,o=e.binaryAnnotations,l=e.parentId,s=e.id,u=e.bypassIsTimingCheck;null==a||a.addSubspan({name:t,startTime:n,endTime:r,annotations:i,binaryAnnotations:o,parentId:l,id:s,bypassIsTimingCheck:u})},[a]),_=(0,r.useCallback)(function(e){var t=e.name,n=e.annotations,r=e.binaryAnnotations,i=e.parentId,o=e.parentName,l=e.id,s=e.bypassIsTimingCheck;null==a||a.subspanStart({name:t,annotations:n,binaryAnnotations:r,parentId:i,parentName:o,id:l,bypassIsTimingCheck:s})},[a]),S=(0,r.useCallback)(function(e){var t=e.name,n=e.annotations,r=e.binaryAnnotations,i=e.id,o=e.parentId,l=e.bypassIsTimingCheck;null==a||a.subspanStop({name:t,annotations:n,binaryAnnotations:r,id:i,parentId:o,bypassIsTimingCheck:l})},[a]),P=(0,r.useCallback)(function(e){var t=e.currentName,n=e.newName,r=e.bypassIsTimingCheck,i=e.updateWhenStopwatchCompletes;null==a||a.subspanUpdateName({currentName:t,newName:n,bypassIsTimingCheck:r,updateWhenStopwatchCompletes:i})},[a]),x=(0,r.useCallback)(function(e,t){return a?a.getSpans(e,t):[]},[a]),w=(0,r.useCallback)(function(){return a?a.getTraceId():""},[a]),j=(0,r.useCallback)(function(e){f.current?(f.current=!1,null==a||a.error(e)):(0,o.A9)("WARN.".concat(t,".noTiming.error"))},[a]),T=(0,r.useCallback)(function(e){f.current&&(null==a||a.abort("duplicated_init_stopwatch_action")),f.current=!0,null==a||a.start(e)},[a]),C=(0,r.useCallback)(function(e){f.current?(f.current=!1,null==a||a.stop(e)):(0,o.A9)("WARN.".concat(t,".noTiming.stop"))},[a]);(0,r.useEffect)(function(){return function(){l&&y("unloadOrClientNavigation")}},[d]);var k=(0,r.useMemo)(function(){return{name:t,isTiming:m,abort:y,addAnnotation:h,addBinaryAnnotation:v,binaryAnnotationOperation:b,addSubspan:g,subspanStart:_,subspanStop:S,getSpans:x,getTraceId:w,updateSubspanName:P,stop:C,error:j,start:T}},[m,y,h,v,b,g,_,S,x,w,P,C,j,T]);return(0,A.jsx)(p,{value:k,children:i})},get:d.useMaybeHook}}},716920:function(e,t,n){n.d(t,{T:function(){return a},g:function(){return l}});var r=(0,n(658673).Z)({name:"story_pin_step",sampleRate:1}),i=r.Provider,o=r.get,a=i,l=o},932885:function(e,t){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach(function(t){o(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function o(e,t,r){var i;return(i=function(e,t){if("object"!=n(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=n(i))return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==n(i)?i:i+"")in e)?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}t.Z=function(e){var t={};e.forEach(function(e){var n=e.label,r=e.timestamp;t=i(i({},t),{},o({},n,(t[n]||[]).concat([r])))});var n=Object.freeze({});return Object.keys(t).forEach(function(e){(t[e]||[]).forEach(function(t,r){var a=r?"".concat(e,"_").concat(r+1):e;n=i(i({},n),{},o({},a,t))})}),n}},281106:function(e,t,n){n.d(t,{Z:function(){return u}});var r=n(586659),i=n(20256),o=n(883817),a=n(369416),l=n(123317),s=n(382718);function u(e){var t=e.playing,n=e.zIndexValue;return(0,s.jsxs)(r.Fragment,{children:[(0,s.jsx)(a.Z,{unsafeCSS:"#story-pin-closeup-pause-play-overlay svg { filter: drop-shadow( 0px 0px 8px rgba(0,0,0,0.1));}"}),(0,s.jsx)(i.xu,{alignItems:"center",bottom:!0,dangerouslySetInlineStyle:{__style:{pointerEvents:"none"}},"data-test-id":"story-pin-closeup-pause-play-overlay",display:"flex",id:"story-pin-closeup-pause-play-overlay",justifyContent:"center",left:!0,opacity:.8,position:"absolute",right:!0,rounding:l.yR,top:!0,zIndex:n?new i.Ry(n):o.p8,children:!t&&(0,s.jsx)(i.JO,{accessibilityLabel:"Play",color:"light",icon:"play",size:48})})]})}},181663:function(e,t,n){n.d(t,{Z:function(){return g}});var r=n(586659),i=n(20256),o=n(19585),a=n(453179),l=n(579935),s=n(123317),u=n(724084),c=n(941404),d=n(572227),p=n(647709),f=n(239728),m=n(792171),y=n(601686),h=n(382718),v=function(){},b=function(e){var t=e.accessibilityLabel,n=e.dataTestId,r=e.disable,o=e.handleTap,a=e.icon;return(0,h.jsx)(i.xu,{"data-test-id":n,opacity:r?.5:void 0,children:(0,h.jsx)(i.iP,{disabled:r,onTap:o,children:(0,h.jsx)(i.JO,{accessibilityLabel:t,color:"light",icon:a,size:16})})})};function g(e){var t,n,g,_,S,P=e.activePageIndex,x=e.handlePanelChange,w=e.handlePlay,j=e.handlePause,O=e.handlePausePlay,I=e.handleMute,A=e.handleVideoScrubbingNewPage,T=e.handleWatchAgain,C=e.inMilliseconds,k=e.isPlaying,E=e.isMuted,R=e.isPanelOpen,M=e.pages,L=e.pageCount,z=e.pinId,V=void 0===z?"":z,F=e.progressInfo,D=e.showEndCard,B=e.showVideoControls,N=void 0!==B&&B,Z=e.viewParameter,W=e.isStoryPin,H=void 0===W||W,U=e.captionsUrl,K=(0,o.ZP)(),X=(F||{}).currentTime,G=(0,u.Hx)().seekTimes,q=(0,y.x4)().closeupWithinMasonryEnabled,$=(0,m.H)(),J=(0,p.HG)(),Y=$.captionsEnabled,Q=(0,d.Z)(),ee=M[P],et=(ee||E).should_mute,en=Object.keys(G).includes(V)&&G[V]?G[V]:X,er=(0,r.useMemo)(function(){return M.map(function(e){var t,n,r,i,o,l,s,u=null==(t=e.blocks)?void 0:t.find(function(e){return 3===e.block_type}),c=(null==u||null==(n=u.video)||null==(r=n.video_list)||null==(i=r.V_HLSV3_MOBILE)?void 0:i.duration)||(null==u||null==(o=u.video)||null==(l=o.video_list)||null==(s=l.V_720P)?void 0:s.duration);return c?{duration:c,isVideo:!0}:{duration:a.oN,isVideo:!1}})},[M]),ei=[{duration:(null==F?void 0:F.duration)||0,isVideo:!0}],eo=H?er:ei,ea=null==(t=(ee&&(null==(_=ee.blocks)?void 0:_[0])||{}).video)||null==(n=t.video_list)||null==(g=n.V_HLSV3_MOBILE)?void 0:g.captions_urls,el=!1;(ea&&0!==Object.keys(ea).length||(void 0===U?"":U))&&(el=!0);var es=(0,r.useMemo)(function(){return eo.reduce(function(e,t){return e+(t.duration||0)},0)/(H?f.gJ:1)},[eo,H]),eu=(0,r.useMemo)(function(){return eo.filter(function(e,t){return t<P}).reduce(function(e,t){return e+(t.duration||0)},0)/f.gJ},[eo,P]),ec=eo.length>0&&null!=(S=eo[P])&&S.isVideo?null!=X?X:0:(null!=X?X:0)*5+(null!=eu?eu:0),ed=K._('Hide captions', 'gestalt.video.accessibilityHideCaptionsLabel', 'ARIA label for hide captions button'),ep=K._('Show captions', 'gestalt.video.accessibilityShowCaptionsLabel', 'ARIA label for show captions button');return(0,h.jsxs)(i.xu,{alignContent:"evenly",alignItems:"baseline",dangerouslySetInlineStyle:{__style:{gap:"18.5px",pointerEvents:"auto"}},direction:"column",display:"flex",justifyContent:"between",width:"100%",children:[(0,h.jsxs)(i.xu,{alignItems:"center",dangerouslySetInlineStyle:{__style:{opacity:N||!k?1:0,transition:"all .1s"}},direction:"row",display:"flex",justifyContent:"between",width:"99%",children:[(0,h.jsxs)(i.kC,{alignItems:"center",direction:"row",gap:5,children:[(0,h.jsx)(b,{accessibilityLabel:k?K._('Pause', 'closeup.IdeaPinVideo.Pause', 'Pause button on Idea Pin video'):K._('Play', 'closeup.IdeaPinVideo.Play', 'Play button on Idea Pin video'),dataTestId:"story-pin-closeup-".concat(k?"pause":"play"),handleTap:D&&T?T:O,icon:k?"pause":"play"}),F&&(0,h.jsx)(i.iP,{children:(0,h.jsxs)(i.xu,{"aria-label":"".concat(K._('Video duration', 'closeup.IdeaPinVideo.durationLabel', 'Screen reader label for video duration display'),": ").concat((0,s.Lc)(ec)," of ").concat((0,s.Lc)(es)),"data-test-id":"time-display",children:[(0,h.jsx)(i.xv,{align:"end",color:"inverse",inline:!0,overflow:"normal",size:"300",weight:"bold",children:"".concat((0,s.Lc)(ec))})," ",(0,h.jsx)(i.xu,{display:"inlineBlock",opacity:.6,children:(0,h.jsx)(i.xv,{align:"end",color:"inverse",inline:!0,overflow:"normal",size:"300",weight:"bold",children:"/ ".concat((0,s.Lc)(es))})})]})})]}),(0,h.jsxs)(i.kC,{direction:"row",gap:5,children:[el&&(0,h.jsx)(b,{accessibilityLabel:Y?ep:ed,dataTestId:"closed-captions-button-".concat(Y?"disable":"enable"),handleTap:function(){var e=J?"desktop_pin_page":"mweb_pin_page";Y?(0,c.My)("".concat(e,".closed_captions_button.toggle_off")):(0,c.My)("".concat(e,".closed_captions_button.toggle_on")),Q({action:"click",item:"closed-captions-button"}),$.setCaptionsEnabled(!Y)},icon:Y?"captions":"captions-outline"}),(0,h.jsx)(b,{accessibilityLabel:E?K._('Unmute', 'closeup.IdeaPinVideo.unmute', 'Unmute button on Idea Pin video'):K._('Mute', 'closeup.IdeaPinVideo.mute', 'Mute button on Idea Pin video'),dataTestId:"story-pin-closeup-".concat(E?"unmute":"mute"),disable:et,handleTap:I,icon:E?"mute":"sound"}),x&&!q&&(0,h.jsx)(b,{accessibilityLabel:R?K._('Maximize', 'closeup.IdeaPinVideo.maximize', 'Maximize button on Idea Pin video'):K._('Minimize', 'closeup.IdeaPinVideo.minimize', 'Minimize button on Idea Pin video'),dataTestId:"story-pin-closeup-".concat(R?"maximize":"minimize"),handleTap:x||v,icon:R?"maximize":"minimize"})]})]}),(0,h.jsx)(l.ZP,{activePageCurrentTime:en,activePageIndex:P,duration:es,handlePause:j,handlePlay:w,handleVideoScrubbingNewPage:A,inMilliseconds:C,isPlaying:k,pageCount:L,pageDurations:eo,pinId:V,progressInfo:F,shouldShowPlayhead:!0,showEndCard:D,showVideoControls:N,videoDurations:eo,viewParameter:Z})]})}},579935:function(e,t,n){n.d(t,{$:function(){return v},$E:function(){return h},ZP:function(){return S}});var r=n(586659),i=n(20256),o=n(521009),a=n(19585),l=n(453179),s=n(15667),u=n(382718);function c(e){var t=e.pillHeight,n=e.scrubberWidth;return(0,u.jsx)(i.xu,{dangerouslySetInlineStyle:{__style:{backgroundColor:h}},display:"flex",flex:"grow",height:t,overflow:"hidden",rounding:"pill",children:(0,u.jsx)(i.xu,{color:v,dangerouslySetInlineStyle:{__style:{width:n}},"data-test-id":"video-progress-bar",height:"100%",rounding:"pill"})})}var d=n(724084),p=n(647709),f=n(239728);function m(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,l=[],s=!0,u=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=o.call(n)).done)&&(l.push(r.value),l.length!==t);s=!0);}catch(e){u=!0,i=e}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return y(e,t);var n=({}).toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?y(e,t):void 0}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var h="rgba(255,255,255,0.24)",v="light",b=function(){},g=function(e){var t=e.children,n=e.setHoveringChange,r=e.handleMouseDown,o=e.handleMouseLeave,l=e.handleTouchStart,s=e.playhead,c=e.isPlaying,d=e.showVideoControls,f=(0,a.ZP)(),m=!(0,p.HG)();return(0,u.jsx)(i.iP,{children:(0,u.jsx)(i.xu,{ref:s,alignItems:"center","aria-label":f._('Video scrubber progress bar', 'ideaPin.closeupvideo.videoScrubberLabel', 'Accessibility label for video scrubber progress bar on video idea pins.'),dangerouslySetInlineStyle:{__style:{pointerEvents:"auto",touchAction:"none"}},"data-test-id":"bullet-video-progress-bar",display:"flex",flex:"grow",justifyContent:m?"center":"start",marginBottom:6*!m,minHeight:"8px",onFocus:n(!0),onMouseDown:r,onMouseLeave:o,onMouseOver:n(!0),onTouchEnd:function(e){return e.preventDefault()},onTouchStart:l,opacity:d||!c?1:0,paddingY:6*!!m,position:"relative",role:"progressbar",width:"100%",children:t})})},_=function(e){var t=e.isRTL,n=e.isSeeking,r=e.scrubberWidth;return(0,u.jsx)(i.xu,{dangerouslySetInlineStyle:{__style:t?{right:r}:{left:r}},"data-test-id":"video-progress-bar-playhead",position:"relative",children:(0,u.jsx)(i.xu,{color:v,height:4,position:"absolute",rounding:"pill",children:(0,u.jsx)(i.xu,{color:"light",dangerouslySetInlineStyle:{__style:{marginTop:n?-8:-6}},height:n?16:12,marginStart:-2,rounding:"circle",width:n?16:12})})})};function S(e){var t=e.activePageIndex,n=e.activePageCurrentTime,a=e.pageCount,y=e.progressInfo,h=e.showEndCard,S=e.duration,P=void 0===S?0:S,x=e.pageDurations,w=void 0===x?[]:x,j=e.handlePlay,O=void 0===j?b:j,I=e.handlePause,A=void 0===I?b:I,T=e.handleVideoScrubbingNewPage,C=void 0===T?b:T,k=e.inMilliseconds,E=e.videoDurations,R=void 0===E?[]:E,M=e.viewParameter,L=e.isInactiveStreamPin,z=void 0!==L&&L,V=e.isPlaying,F=void 0!==V&&V,D=e.setVideoProgress,B=e.shouldShowPlayhead,N=void 0!==B&&B,Z=e.showVideoControls,W=void 0===Z||Z,H=e.pinId,U=void 0===H?"":H,K=!(0,p.HG)(),X=(0,r.useRef)(null),G=(0,s.B)().isRTL,q=m((0,r.useState)(!1),2),$=q[0],J=q[1],Y=m((0,r.useState)(F),2),Q=Y[0],ee=Y[1],et=m((0,r.useState)(),2),en=et[0],er=et[1],ei=(0,o.Z)(),eo=m((0,r.useState)(!1),2),ea=eo[0],el=eo[1],es=(0,d.RC)(),eu=es.clearSeekTime,ec=es.updateSeekTime,ed=(0,r.useCallback)(function(e,n){if(!z&&n<=a){if(n!==t&&C(n),D){var r,i;D({currentTime:e/1e3,duration:R[n].isVideo?null!=(r=null==y?void 0:y.duration)?r:1:null!=(i=null==y?void 0:y.duration)?i:5,pinId:U})}ec(e/1e3,U)}ei({event_type:101,view_type:3,view_parameter:M,component:14302})},[t,C,z,ei,a,U,null==y?void 0:y.duration,D,ec,R,M]),ep=w.map(function(e){return"".concat((e.duration||0)/P/10,"%")}),ef=(0,r.useMemo)(function(){var e=0;return w.map(function(t){var n=t.duration+e,r={min:e,max:n};return e=n,r})},[w]),em=$?"0 1.2px":"0 1px",ey=function(e){return function(){return J(e)}},eh=(0,r.useCallback)(function(e){if(X.current){var t=X.current.getBoundingClientRect(),n=t.left,r=t.right,i=t.width,o=void 0===i?0:i,a=(G?Math.max(0,Math.min(((void 0===r?0:r)-e)/o,1)):Math.max(0,Math.min((e-(void 0===n?0:n))/o,1)))*P*1e3,l=ef.findIndex(function(e){return a>=e.min&&a<=e.max}),s=-1===l?0:l;ed(a-ef[s].min,s)}},[P,ed,ef,G]),ev=(0,r.useCallback)(function(){ea||ee(F||h),el(!0)},[ea,ee,F,h]),eb=(0,r.useCallback)(function(e){ev(),F&&A(),eh(e.pageX)},[ev,F,A,eh]),eg=(0,r.useCallback)(function(e){ea&&eh(e.pageX)},[eh,ea]),e_=(0,r.useCallback)(function(e){if(ea){e.preventDefault();var t=Array.from(e.changedTouches).find(function(e){return e.identifier===en});t&&eh(t.pageX)}},[ea,eh,en]),eS=(0,r.useCallback)(function(){ey(!1),er(void 0),el(!1),Q&&O()},[O,Q]),eP=(0,r.useCallback)(function(e){Array.from(e.changedTouches).find(function(e){return e.identifier===en})&&(ey(!1),er(void 0),el(!1),eu()),Q&&O()},[eu,O,Q,en]);return(0,r.useEffect)(function(){return ea&&!z&&(window.addEventListener("mousemove",eg),window.addEventListener("mouseup",eS),window.addEventListener("touchmove",e_),window.addEventListener("touchend",eP)),function(){window.removeEventListener("mousemove",eg),window.removeEventListener("mouseup",eS),window.removeEventListener("touchmove",e_),window.removeEventListener("touchend",eP)}},[eg,eS,eP,e_,z,ea,eh,Q,en]),(0,u.jsx)(g,{handleMouseDown:eb,handleMouseLeave:function(){ey(!1)},handleTouchStart:function(e){ev(),ey(!0);var t=e.changedTouches[0];er(t.identifier),eh(t.pageX)},isPlaying:F,playhead:X,setHoveringChange:ey,showVideoControls:W,children:Array(a).fill(void 0).map(function(e,r){var o,s,d=null!=(o=null==y?void 0:y.currentTime)?o:0,p=null!=(s=null==y?void 0:y.duration)?s:l.P6,m=R[r],b="".concat(null!=m&&m.isVideo&&k?Math.floor(1e4*(null!=n?n:d)/(m.duration/f.gJ))/100:d/p*100,"%");return(0,u.jsx)(i.xu,{dangerouslySetInlineStyle:{__style:{margin:em}},flex:"grow",width:ep.length===a?ep[r]:"auto",children:(0,u.jsx)(i.xu,{dangerouslySetInlineStyle:{__style:{transition:"all .1s"}},"data-test-id":"idea-pin-video-progress-bar",rounding:"pill",children:r<t||h?(0,u.jsx)(i.xu,{color:v,height:4,rounding:"pill"}):t===r&&y?(0,u.jsxs)(i.kC,{alignItems:"center",flex:"grow",children:[N&&(W||$||ea||K)&&(0,u.jsx)(_,{isRTL:G,isSeeking:ea,scrubberWidth:b}),(0,u.jsx)(c,{pillHeight:4,scrubberWidth:b})]}):(0,u.jsx)(i.xu,{color:v,dangerouslySetInlineStyle:{__style:{opacity:.24}},height:4,rounding:"pill"})})},"".concat(U,"-").concat(r))})})}},445698:function(e,t,n){n.d(t,{BN:function(){return y},RK:function(){return m},d3:function(){return v},tq:function(){return b},xm:function(){return h}});var r=n(586659),i=n(607600),o=n(123317),a=n(543561),l=n(341742);function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,l=[],s=!0,u=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=o.call(n)).done)&&(l.push(r.value),l.length!==t);s=!0);}catch(e){u=!0,i=e}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return c(e,t);var n=({}).toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(e,t):void 0}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach(function(t){var r,i;r=t,i=n[t],(r=function(e){var t=function(e,t){if("object"!=s(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=s(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==s(t)?t:t+""}(r))in e?Object.defineProperty(e,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[r]=i}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var f=function(e,t){var n=(0,o.pE)(e,t);return"".concat(n.y,"px ").concat(n.x,"px")},m=function(e){var t=e.alignment,n=e.verticalAlignment,r={alignItems:"flex-start",display:"flex",height:"100%",justifyContent:"start",textAlign:"left",width:"100%"};return 1===n?r.alignItems="center":2===n&&(r.alignItems="flex-end"),1===t&&(r.justifyContent="center",r.textAlign="center"),r},y=function(e){var t=e.fontSize,n=e.hexColor,r=e.highlightColor,i=e.letterSpacing,o=e.lineHeight;return p({fontSize:t,letterSpacing:i,color:n,fontFamily:e.name,margin:0,maxHeight:"100%",textShadow:!r&&n&&"#ffffff"===n.toLowerCase()?"0px 1px 4px rgba(0, 0, 0, 0.2)":void 0,wordBreak:"break-word"},r?{backgroundColor:r,borderRadius:t/5,padding:f(t,o)}:{})},h=function(e){var t=e.fontSize,n=e.hasText,r=e.highlightColor,i=e.lineHeight;return p({},r?{backgroundColor:n?r:void 0,borderRadius:t/5,padding:f(t,i)}:{})},v=function(e){var t=e.letterSpacing,n=e.lineHeight;return{fontFamily:e.name,fontGroup:"",fontOverrides:{letterSpacing:t,lineHeight:n,textTransform:!1},format:"truetype",defaultStyle:0,styles:[{name:"Regular",fontStyle:"",fontWeight:"normal",fontUrl:e.url}]}};function b(e){var t=e.hasPin,n=e.pages,s=e.limitToSingleFont,c=u((0,r.useState)(!1),2),d=c[0],p=c[1],f=u((0,r.useState)(function(){return!!t&&(0,a.X7)(n)}),2),m=f[0],y=f[1],h=function(){var e=n.reduce(function(e,t){var n,r=(null==t||null==(n=t.blocks)?void 0:n.filter(function(e){return[o.h8.PARAGRAPH,o.h8.HEADING].includes(e.type)}))||[];return s&&r.length>1&&(r=[r[0]]),r.forEach(function(t){var n,r=(null==(n=t.style)?void 0:n.font)||o.Cc.font,i=r.name,a=void 0===i?"":i;e[a]||(e[a]=r)}),e},{});if(Object.keys(e).length>0){var t=Object.keys(e).map(function(t){var n=e[t];return v({letterSpacing:n.letter_spacing,lineHeight:n.line_height,name:n.name,url:n.url})});(0,i.Z)(t),p(!0)}};return(0,l.Z)(function(){h()}),(0,l.Z)(function(){m||h()}),(0,r.useEffect)(function(){m||y((0,a.X7)(n))},[m,n]),{fontsLoaded:d,mediaDataReceived:m}}},294711:function(e,t,n){n.d(t,{Z:function(){return r}});function r(e){var t=e.currentTime,n=e.endTime,r=e.startTime;return"number"!=typeof r||"number"!=typeof n||!(r>=0)||!(n>0)||!(r<n)||r<=t&&t<=n}},543561:function(e,t,n){n.d(t,{B7:function(){return s},X7:function(){return u},n4:function(){return l}});var r=n(123317);function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t,n){return(t=a(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e){var t=function(e,t){if("object"!=i(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=i(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==i(t)?t:t+""}var l=function(e,t){var n=/^\d{1,3}\.\d{1,3}(?:\.\d{1,6})?$/;if(!(null!=e&&e.match(n))||!(null!=t&&t.match(n)))return null;for(var r=null==e?void 0:e.split("."),i=null==t?void 0:t.split("."),o=Math.max((null!=r?r:"").length,(null!=i?i:"").length),a=0;a<o;a+=1){var l,s,u,c,d=a<(null!=(l=null==r?void 0:r.length)?l:0)?parseInt(null!=(s=null==r?void 0:r[a])?s:"",10):0,p=a<(null!=(u=null==i?void 0:i.length)?u:0)?parseInt(null!=(c=null==i?void 0:i[a])?c:"",10):0;if(d<p)return -1;if(d>p)return 1}return 0},s=function(){var e;function t(e,n,r){var i=this;if(!(this instanceof t))throw TypeError("Cannot call a class as a function");o(this,"start",Date.now()),o(this,"paused",!1),this.onProgress=e,this.onComplete=n,this.duration=r,this.remaining=r,"undefined"!=typeof window&&(this.intervalId=window.setInterval(function(){var e=i.paused?i.duration-i.remaining:i.duration-i.remaining+(Date.now()-i.start);i.onProgress(e/i.duration)},500),this.resume())}return e=[{key:"currentTime",value:function(){return this.duration-this.remaining}},{key:"pause",value:function(){this.paused=!0,window.clearTimeout(this.timerId),this.remaining-=Date.now()-this.start;var e=this.duration-this.remaining;this.onProgress(e/this.duration)}},{key:"resume",value:function(){this.paused=!1,this.start=Date.now(),window.clearTimeout(this.timerId),this.timerId=window.setTimeout(this.onComplete,this.remaining)}},{key:"clear",value:function(){window.clearTimeout(this.timerId),window.clearInterval(this.intervalId)}}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,a(r.key),r)}}(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}();function u(e){return e.some(function(e){var t;return(null!=(t=null==e?void 0:e.blocks)?t:[]).some(function(e){return e.type===r.h8.IMAGE&&!!e.image||e.type===r.h8.VIDEO&&(!!e.video||!!e.video_signature)})})}},644493:function(e,t,n){n.d(t,{Z:function(){return r}});function r(e){try{return decodeURIComponent(e)}catch(e){return null}}},399806:function(e,t,n){n.d(t,{Q:function(){return o},Z:function(){return a}});var r=["vHLSV3MOBILE"],i=function(){var e;return!(null!=(e=window)&&e.devicePixelRatio)||window.devicePixelRatio<=1?"1x":"2x"},o=function(){var e,t,n,r="undefined"!=typeof window?null==(e=window.navigator)||null==(t=e.connection)?void 0:t.effectiveType:void 0,o=i();return r?"4g"===r?n="40-80":(o="1x",n="0-1"):n="unknown",{downloadSpeedGroup:n,screenDimension:o}};function a(e){var t,n,i,a,l,s,u,c,d,p,f,m,y=e.vHLSV3MOBILE,h=(n=(t=function(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if(({}).hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],-1===t.indexOf(n)&&({}).propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}(e,r)).vEXP3,i=t.vEXP4,a=t.vEXP5,l=t.vEXP6,s=t.vEXP7,u=t.v720P,d=(c=o()).downloadSpeedGroup,p=c.screenDimension,({unknown:f={"1x":n,"2x":a},"0-1":f,"1-5":{"1x":i,"2x":a},"5-10":{"1x":a,"2x":a},"10-20":{"1x":l,"2x":l},"20-40":m={"1x":s,"2x":s},"40-80":m,"80_or_above":m})[d][p]||u||void 0),v=y||void 0;return h?{hlsv3:v,mp4:h}:{hlsv3:v}}},807765:function(e,t,n){n.d(t,{c:function(){return d},f:function(){return c}});var r=n(586659),i=n(729434),o=n(382718);function a(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,l=[],s=!0,u=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=o.call(n)).done)&&(l.push(r.value),l.length!==t);s=!0);}catch(e){u=!0,i=e}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return l(e,t);var n=({}).toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?l(e,t):void 0}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var s=(0,i.Z)("CloseupAnimations"),u=s.Provider,c=s.get;function d(e){var t=e.children,n=a((0,r.useState)(!1),2),i=n[0],l=n[1],s=a((0,r.useState)(!1),2),c=s[0],d=s[1],p=(0,r.useMemo)(function(){return{isShowingShareButton:i,setIsShowingShareButton:l,isShowingVisualSearchButton:c,setIsShowingVisualSearchButton:d}},[i,c]);return(0,o.jsx)(u,{value:p,children:t})}},218831:function(e,t,n){n.d(t,{C:function(){return u},K:function(){return s}});var r=n(586659),i=n(382718);function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,l=[],s=!0,u=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=o.call(n)).done)&&(l.push(r.value),l.length!==t);s=!0);}catch(e){u=!0,i=e}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return a(e,t);var n=({}).toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(e,t):void 0}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var l=(0,r.createContext)({closeupBodyWidth:0,isCollageOverlayOpen:!1,isRelatedPins10PercentVisible:!1,setCloseupBodyWidth:function(){},setIsCollageOverlayOpen:function(){},setIsRelatedPins10PercentVisible:function(){}});function s(){var e=(0,r.useContext)(l);if(!e)throw Error("useCloseupBodyContext must be used within CloseupBodyContextProvider");return e}function u(e){var t=e.children,n=o((0,r.useState)(0),2),a=n[0],s=n[1],u=o((0,r.useState)(!1),2),c=u[0],d=u[1],p=o((0,r.useState)(!1),2),f=p[0],m=p[1],y=(0,r.useMemo)(function(){return{closeupBodyWidth:a,setCloseupBodyWidth:s,isCollageOverlayOpen:c,setIsCollageOverlayOpen:d,isRelatedPins10PercentVisible:f,setIsRelatedPins10PercentVisible:m}},[a,c,f]);return(0,i.jsx)(l,{value:y,children:t})}},85574:function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach(function(t){var i,o;i=t,o=n[t],(i=function(e){var t=function(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=r(i))return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==r(t)?t:t+""}(i))in e?Object.defineProperty(e,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[i]=o}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}n.d(t,{Z:function(){return m}});var a={WebkitMaskImage:"-webkit-radial-gradient(white, black)"},l=function(e){return"".concat(null!=e?e:0,"px")},s=function(e){var t=e.topLeft,n=e.topRight,r=e.bottomRight,i=e.bottomLeft;return"".concat(l(t)," ").concat(l(n)," ").concat(l(r)," ").concat(l(i))},u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.additionalPadding,n=void 0===t?0:t;return{borderRadius:s({topLeft:32+n,topRight:32+n,bottomRight:0,bottomLeft:0}),borderRadiusNumeric:32+n}},c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.additionalPadding,n=void 0===t?0:t;return{borderRadius:s({topLeft:24+n,topRight:24+n,bottomRight:24+n,bottomLeft:24+n}),borderRadiusNumeric:24+n}},d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.additionalPadding,n=void 0===t?0:t;return{borderRadius:s({topLeft:32+n,topRight:0,bottomRight:0,bottomLeft:32+n}),borderRadiusNumeric:32+n}},p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.additionalPadding,n=void 0===t?0:t;return{borderRadius:s({topLeft:0,topRight:32+n,bottomRight:32+n,bottomLeft:0}),borderRadiusNumeric:32+n}},f=function(e){var t=e.getterOptions,n=e.isPadded,r=e.isRTL;return n?c(t):r?p(t):d(t)};function m(e){var t=e.additionalPadding,n=e.isSideBySide,r=e.isPadded,i=e.isRTL,l=e.closeupWithinMasonryEnabled,s=e.peekCloseupEnabled,d={additionalPadding:t};if(void 0!==l&&l)return{borderStyle:o(o({},a),{},{borderRadius:"".concat(24,"px")}),borderRadiusNumeric:24};if(void 0!==s&&s)return{borderStyle:o(o({},a),{},{borderRadius:"unset"}),borderRadiusNumeric:0};if(n){var p=f({isPadded:r,isRTL:i,getterOptions:d}),m=p.borderRadius,y=p.borderRadiusNumeric;return{borderStyle:o(o({},a),{},{borderRadius:m}),borderRadiusNumeric:y}}var h=(r?c:u)(d),v=h.borderRadius,b=h.borderRadiusNumeric;return{borderStyle:o(o({},a),{},{borderRadius:v}),borderRadiusNumeric:b}}},653621:function(e,t,n){function r(e){return function(e){if(Array.isArray(e))return i(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return i(e,void 0);var n=({}).toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,void 0):void 0}}(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}n.d(t,{GL:function(){return s},_z:function(){return a},d0:function(){return c},hO:function(){return u},pM:function(){return l}});var o,a="video",l="image",s=new Map([["DEFAULT",new Set(["button"])],["story_pin",new Set([a])],["product_detail_page",new Set(["description","shopButton","thumbnailsLoaded"])],["product_detail_page_plus",new Set(["description","shopButton","thumbnailsLoaded"])]]),u=(o=new Set,s.forEach(function(e){o=new Set([].concat(r(o),r(e)))}),o),c=new Set([].concat(r(u),[l,"resource"]))},452750:function(e,t,n){n.d(t,{Z:function(){return i}});var r=n(640785);function i(e){var t;return{defaultStyle:0,fontFamily:null!=(t=e.name)?t:"",fontGroup:r.gu,fontOverrides:{letterSpacing:e.letter_spacing,lineHeight:e.line_height},format:"truetype",id:e.id,styles:[{fontStyle:"",fontUrl:e.url,fontWeight:"normal",name:"normal"}]}}},341044:function(e,t,n){n.d(t,{Z:function(){return o}});var r=n(654262),i=n(947631);function o(e,t){(0,i.Z)(2,arguments);var n=(0,r.Z)(e),o=(0,r.Z)(t);return n.getTime()===o.getTime()}}}]);