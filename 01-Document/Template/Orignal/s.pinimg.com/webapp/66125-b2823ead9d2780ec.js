(self.legacyJsonp=self.legacyJsonp||[]).push([["66125"],{510233:function(e,t,n){"use strict";n.r(t);var r,o={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"PinsPaneHelperGetPinTitle_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"gridTitle",storageKey:null},{alias:null,args:null,concreteType:"RichPinDataView",kind:"LinkedField",name:"richMetadata",plural:!1,selections:[r={alias:null,args:null,kind:"ScalarField",name:"title",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"RichPinGridData",kind:"LinkedField",name:"richSummary",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"displayName",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"typeName",storageKey:null}],storageKey:null},r],type:"Pin",abstractKey:null};o.hash="594842fa993e078b47ba30a204789923",t.default=o},282812:function(e,t,n){"use strict";n.r(t);var r,o={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"PinsPaneHelperGetProductPrice_pin",selections:[{alias:null,args:null,concreteType:"RichPinDataView",kind:"LinkedField",name:"richMetadata",plural:!1,selections:r=[{alias:null,args:null,concreteType:"RichPinProductMetadata",kind:"LinkedField",name:"products",plural:!0,selections:[{alias:null,args:null,concreteType:"OfferSummary",kind:"LinkedField",name:"offerSummary",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"price",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"RichPinGridData",kind:"LinkedField",name:"richSummary",plural:!1,selections:r,storageKey:null}],type:"Pin",abstractKey:null};o.hash="7c716add671f3d56448cd9d81ab6cc81",t.default=o},212994:function(e,t,n){"use strict";n.d(t,{Z:function(){return g}});var r=n(586659),o=n(20256),i=n(166282),a=n(159527),l=n(382718);function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach(function(t){y(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function d(e,t){return(d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function f(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(p=function(){return!!e})()}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function y(e,t,n){return(t=b(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function b(e){var t=function(e,t){if("object"!=s(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=s(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==s(t)?t:t+""}var m={gradientBackground:{left:{backgroundImage:"linear-gradient(to left, rgba(255, 255, 255, 0), #fff)",pointerEvents:"none"},right:{backgroundImage:"linear-gradient(to right, rgba(255, 255, 255, 0), #fff)",pointerEvents:"none"}},innerScrollContainer:{marginBottom:-17,overflowX:"auto",overflowY:"hidden",paddingBottom:17}},g=function(e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");c.prototype=Object.create(e&&e.prototype,{constructor:{value:c,writable:!0,configurable:!0}}),Object.defineProperty(c,"prototype",{writable:!1}),e&&d(c,e);var t,n,r=(t=p(),function(){var e,n=h(c);return e=t?Reflect.construct(n,arguments,h(this).constructor):n.apply(this,arguments),function(e,t){if(t&&("object"==s(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return f(e)}(this,e)});function c(){var e;if(!(this instanceof c))throw TypeError("Cannot call a class as a function");for(var t=arguments.length,n=Array(t),s=0;s<t;s++)n[s]=arguments[s];return y(f(e=r.call.apply(r,[this].concat(n))),"state",{canScrollLeft:!1,canScrollRight:!1,isContainerHover:!1,isLeftHover:!1,isRightHover:!1}),y(f(e),"scroll",function(t){var n=f(e).scrollbar,r=e.props,o=r.extendToEdgeDistanceX,a=r.scrollSpeedPxPerMs,l=r.minScrollDuration,s=r.easingFunction;n&&0!==t&&(e.scrollAnimationManager&&e.scrollAnimationManager.cancel(),e.scrollAnimationManager=(0,i.Z)(n,t,0,{easingFunction:s,extendToEdgeDistanceX:o,scrollSpeedPxPerMs:a,minScrollDuration:l,onAnimationComplete:function(){e.refreshScroll(),e.scrollAnimationManager=null}}),e.scrollAnimationManager.start())}),y(f(e),"refreshScroll",function(){var t=e.state,n=t.canScrollLeft,r=t.canScrollRight;if(e.scrollbar){var o=e.scrollbar,i=o.scrollLeft,a=o.scrollWidth,l=o.clientWidth,s={};if(l<a){var c=i>0,u=i<a-l;(n!==c||r!==u)&&(s.canScrollLeft=c,s.canScrollRight=u)}else(n||r)&&(s.canScrollLeft=!1,s.canScrollRight=!1);Object.keys(s).length&&e.setState(s)}}),y(f(e),"refreshScrollThrottled",(0,a.Z)(e.refreshScroll,50)),y(f(e),"handleLeftArrowClick",function(){return e.handleArrowClick("left")}),y(f(e),"handleRightArrowClick",function(){return e.handleArrowClick("right")}),y(f(e),"handleArrowClick",function(t){if(e.scrollbar){var n=e.props,r=n.scrollDistanceRatio,o=n.scrollDistanceMin,i=e.scrollbar.clientWidth;e.scroll(("left"===t?-1:1)*Math.max(Math.floor(r*i),o))}}),y(f(e),"handleContainerMouseEnter",function(){e.setState({isContainerHover:!0})}),y(f(e),"handleContainerMouseLeave",function(){e.setState({isContainerHover:!1})}),y(f(e),"handleLeftArrowMouseEnter",function(){return e.handleArrowHover("left",!0)}),y(f(e),"handleLeftArrowMouseLeave",function(){return e.handleArrowHover("left",!1)}),y(f(e),"handleRightArrowMouseEnter",function(){return e.handleArrowHover("right",!0)}),y(f(e),"handleRightArrowMouseLeave",function(){return e.handleArrowHover("right",!1)}),y(f(e),"handleArrowHover",function(t,n){e.setState(y({},"left"===t?"isLeftHover":"isRightHover",n))}),y(f(e),"saveScrollBarRef",function(t){e.scrollbar=t}),y(f(e),"Style",u(u({},m),{},{arrowBackground:{backgroundColor:"wide"===e.props.variant?"rgba(255, 255, 255, .97)":"rgba(0, 0, 0, .1)",boxShadow:"wide"===e.props.variant?"0 1px 20px 0 rgba(0, 0, 0, .1)":void 0},arrow:{default:{position:"absolute",top:"50%",transform:"wide"===e.props.variant?"translateY(-115%)":"translateY(-50%)"},left:{left:"wide"===e.props.variant?-84:-12},right:{right:"wide"===e.props.variant?-72:-12}}})),y(f(e),"renderArrow",function(t){var n,r=e.state,i=r.canScrollLeft,a=r.canScrollRight,s="wide"===e.props.variant,c=("left"===t?e.state.isLeftHover:e.state.isRightHover)?"darkGray":"gray";s&&(c="left"===t&&i||"right"===t&&a?"darkGray":"gray");var d="left"===t?e.Style.arrow.left:e.Style.arrow.right;return(0,l.jsx)(o.xu,{dangerouslySetInlineStyle:{__style:u(u({},e.Style.arrow.default),d)},children:(0,l.jsx)(o.iP,{onMouseEnter:"left"===t?e.handleLeftArrowMouseEnter:e.handleRightArrowMouseEnter,onMouseLeave:"left"===t?e.handleLeftArrowMouseLeave:e.handleRightArrowMouseLeave,onTap:"left"===t?e.handleLeftArrowClick:e.handleRightArrowClick,rounding:"circle",children:(0,l.jsx)(o.xu,{dangerouslySetInlineStyle:{__style:e.Style.arrowBackground},padding:1,rounding:"circle",children:(0,l.jsx)(o.Sj,{bgColor:"white",icon:"left"===t?"arrow-back":"arrow-forward",iconColor:null!=(n=c)?n:"gray",size:s?"lg":"sm"})})},t)})}),e}return n=[{key:"componentDidMount",value:function(){window.addEventListener("resize",this.refreshScrollThrottled),this.refreshScroll()}},{key:"componentDidUpdate",value:function(){this.refreshScroll()}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.refreshScrollThrottled),this.scrollAnimationManager&&this.scrollAnimationManager.cancel()}},{key:"render",value:function(){var e=this.state,t=e.canScrollLeft,n=e.canScrollRight,r=e.isContainerHover,i=this.props,a=i.alwaysShowArrows,s=i.children,c=!i.showArrowsOnlyOnHover||r,u=t&&c,d=n&&c;return(0,l.jsxs)(o.xu,{onMouseEnter:this.handleContainerMouseEnter,onMouseLeave:this.handleContainerMouseLeave,position:"relative",children:[(0,l.jsx)(o.xu,{overflow:"hidden",children:(0,l.jsx)(o.xu,{ref:this.saveScrollBarRef,dangerouslySetInlineStyle:{__style:this.Style.innerScrollContainer},onScroll:this.refreshScrollThrottled,children:s})}),u&&!a&&(0,l.jsx)(o.xu,{bottom:!0,dangerouslySetInlineStyle:{__style:this.Style.gradientBackground.left},left:!0,position:"absolute",top:!0,width:60}),d&&!a&&(0,l.jsx)(o.xu,{bottom:!0,dangerouslySetInlineStyle:{__style:this.Style.gradientBackground.right},position:"absolute",right:!0,top:!0,width:60}),(u||a)&&this.renderArrow("left"),(d||a)&&this.renderArrow("right")]})}}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,b(r.key),r)}}(c.prototype,n),Object.defineProperty(c,"prototype",{writable:!1}),c}(r.PureComponent);y(g,"defaultProps",{easingFunction:"ease-in-out",extendToEdgeDistanceX:160,minScrollDuration:200,scrollDistanceMin:200,scrollDistanceRatio:3/4,scrollSpeedPxPerMs:1.2,showArrowsOnlyOnHover:!0,variant:"default"})},294887:function(e,t,n){"use strict";var r=n(332910),o=n.n(r);t.Z=RegExp(/^(https?:\/\/){0,1}/.source+"("+o().source+"){1,}"+/(\.){1,}/.source+"("+o().source+"){1,}"+/(\/){0,1}/.source,"gi")},767439:function(e,t,n){"use strict";var r=n(586659),o="undefined"!=typeof document?document:{};t.Z=function(){var e=(0,r.useRef)(void 0),t=o.documentElement,n=o.body;return t?[function(){if(n&&n.style&&!e.current){var r=window.innerWidth-t.clientWidth,o=parseInt(window.getComputedStyle(n).getPropertyValue("padding-right"),10)||0;t.style.position="relative",t.style.overflow="hidden",n.style.position="relative",n.style.overflow="hidden",n.style.paddingRight="".concat(o+r,"px"),e.current=!0}},function(){n&&n.style&&e.current&&(t.style.position="",t.style.overflow="",n.style.position="",n.style.overflow="",n.style.paddingRight="",e.current=!1)}]:[]}},121469:function(e,t,n){"use strict";n.d(t,{Z:function(){return c}});var r=n(586659),o=n(20256),i=n(93966),a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:500;return function(r){var o=r.target;t>0&&(setTimeout(function(){o.src="".concat(e,"?").concat(Date.now()).concat(t)},n),t-=1,n*=2)}},l=n(102113),s=n(382718),c=function(e){var t=e.skipImageReloadOnError,n=e.video,c=e.rounding,u=e.image,d=(0,r.createRef)();(0,r.useEffect)(function(){d.current&&n&&(d.current.currentTime=n.thumbnail)},[n,d]);var f=void 0===e.containerWidth?i.yF:e.containerWidth,p=e.imgHeight||void 0;if(n){var h=n.customCoverImg,y=n.width/n.height,b=e.containerWidth?e.containerWidth/y:void 0;return(0,s.jsxs)(o.xu,{direction:"column",display:"flex",height:b,justifyContent:"center",overflow:"hidden",position:"relative",width:f,children:[(0,s.jsx)(o.zd,{height:"100%",rounding:4,wash:!0,width:"100%",children:(0,s.jsx)(o.kC,{alignItems:"center",height:"100%",justifyContent:"center",width:"100%",children:h?(0,s.jsx)(o.Ee,{alt:h.name,fit:"contain",naturalHeight:h.height,naturalWidth:h.width,src:h.src}):(0,s.jsx)(o.nk,{aspectRatio:y,autoplay:!0,objectFit:"cover",onPlay:function(){},onPlayError:function(){},src:n.src})})}),(0,s.jsx)(o.xu,{alignItems:"end",bottom:!0,display:"flex",justifyContent:"start",left:!0,padding:2,position:"absolute",right:!0,top:!0,children:(0,s.jsx)(l.Z,{duration:1e3*n.duration})})]})}if(u){var m=u.altText,g=u.dominantColor,v=u.height,_=u.url,x=u.width;return(0,s.jsx)(o.xu,{direction:"column",display:"flex",height:p,justifyContent:"center",overflow:"hidden",rounding:null!=c?c:2,width:f,children:_&&(0,s.jsx)(o.Ee,{alt:null!=m?m:"",color:g||"#efefef",fit:p?"cover":"none",naturalHeight:null!=v?v:1,naturalWidth:null!=x?x:1,onError:void 0!==t&&t?function(){}:function(){a(null!=_?_:"",5)},src:_})})}return null}},642411:function(e,t){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?r(Object(o),!0).forEach(function(t){var r,i;r=t,i=o[t],(r=function(e){var t=function(e,t){if("object"!=n(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=n(o))return o;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==n(t)?t:t+""}(r))in e?Object.defineProperty(e,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[r]=i}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):r(Object(o)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))})}return e}t.Z=function(e,t,n,r){return o(o({id:e,field_set_key:"auth_web_main_pin",add_fields:n?n.join(","):void 0,client_tracking_params:void 0,noCache:!0,fetch_visual_search_objects:!0},t?{orbac_subject_id:t}:Object.freeze({})),{},{get_page_metadata:!!r})}},865540:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var r=n(821342),o=n(675973),i=n(647709),a=n(448505),l=n(7872);function s(e){var t=(0,i.HG)(),n=(0,o.Z)().checkExperiment,s=(0,a.Z)(),c=(0,r.Z)(),u=(0,l.lJ)(c,s),d=!t||n("web_sce_organic_pinbuilder_dep").anyEnabled;return!u&&(e&&n("sce_lightswitch_organic"),!t||!!d)}},626247:function(e,t,n){"use strict";var r=n(586659),o=n(20256),i=n(121469),a=n(744862),l=n(821342),s=n(93966),c=n(19585),u=n(324307),d=n(382718);function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach(function(t){_(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function b(e,t){return(b=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function m(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(g=function(){return!!e})()}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _(e,t,n){return(t=x(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function x(e){var t=function(e,t){if("object"!=f(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=f(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==f(t)?t:t+""}var j={base:function(e){var t=e.rounding;return{borderRadius:"number"==typeof t?4*t:4,display:"flex",flexDirection:"column",height:e.height,outline:"none",padding:8,transition:"background-color 0.25s cubic-bezier(0.31, 1, 0.34, 1)"}},focused:function(){return{padding:4,border:"4px solid rgba(0, 132, 255, 0.5)"}},hovered:function(){return{backgroundColor:"rgba(0, 0, 0, 0.05)",cursor:"pointer"}},selected:function(){return{padding:6,border:"2px solid #e60023"}}},P=function(e,t){var n=((e.rich_summary||{}).displayName||"").trim(),r=(e.description||"").trim(),o=(e.title||"").trim();return(0,u.ZP)(o||n||r,t)},O=function(e){var t=e.name,n=(0,c.ZP)();return(0,d.jsxs)(o.xu,{display:"flex",padding:1,children:[(0,d.jsx)(o.xu,{marginEnd:1,children:(0,d.jsx)(o.JO,{accessibilityLabel:n._('Pin link arrow', 'Accessibility label for pin preview link icon', 'Accessibility label for pin preview link icon'),color:"default",icon:"arrow-up-right",inline:!0,size:10})}),(0,d.jsx)(o.xu,{children:(0,d.jsx)(o.xv,{inline:!0,size:"200",children:t})})]})},w=function(e){var t=e.avatarUrl,n=e.businessName,r=e.isMobile,i=void 0!==r&&r,s=(0,c.ZP)(),u=(0,l.Z)(),f=u.isAuth?null==u?void 0:u.avatar_color_index:void 0;return(0,d.jsxs)(o.xu,{alignItems:"center",display:"flex",justifyContent:i?"evenly":"start",paddingY:1,children:[(0,d.jsx)(o.xu,{children:(0,d.jsx)(a.qE,{color:f,name:n,size:i?"xs":"sm",src:t})}),(0,d.jsxs)(o.xu,{marginStart:+!i,children:[(0,d.jsx)(o.xv,{size:i?"100":"200",weight:"bold",children:s._('Promoted by', 'Label for who promoted the pin', 'Label for who promoted the pin')}),(0,d.jsx)(o.xv,{size:i?"100":"200",children:n})]})]})},S=function(e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");a.prototype=Object.create(e&&e.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),Object.defineProperty(a,"prototype",{writable:!1}),e&&b(a,e);var t,n,r=(t=g(),function(){var e,n=v(a);return e=t?Reflect.construct(n,arguments,v(this).constructor):n.apply(this,arguments),function(e,t){if(t&&("object"==f(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return m(e)}(this,e)});function a(){var e;if(!(this instanceof a))throw TypeError("Cannot call a class as a function");for(var t=arguments.length,n=Array(t),o=0;o<t;o++)n[o]=arguments[o];return _(m(e=r.call.apply(r,[this].concat(n))),"state",{isHovered:!1,isFocused:!1}),_(m(e),"getIsActionable",function(){return!!e.props.onSelect}),_(m(e),"getStyle",function(){var t=e.state,n=t.isFocused,r=t.isHovered,o=e.props.selected,i=e.getIsActionable();return Object.entries({base:!0,focused:i&&n,hovered:i&&r,selected:!!o}).reduce(function(t,n){var r=function(e){if(Array.isArray(e))return e}(n)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,l=[],s=!0,c=!1;try{for(i=(n=n.call(e)).next;!(s=(r=i.call(n)).done)&&(l.push(r.value),2!==l.length);s=!0);}catch(e){c=!0,o=e}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return l}}(n,2)||function(e,t){if(e){if("string"==typeof e)return y(e,2);var n=({}).toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?y(e,2):void 0}}(n,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),o=r[0],i=r[1];return h(h({},t),i?j[o](e.props):{})},{})}),_(m(e),"handleMouseEnter",function(){e.setState({isHovered:!0})}),_(m(e),"handleMouseLeave",function(){e.setState({isHovered:!1})}),_(m(e),"handleClick",function(){var t=e.props,n=t.onSelect,r=t.pin;n&&n(r)}),_(m(e),"handleKeyPress",function(t){"Enter"===t.key&&e.handleClick()}),_(m(e),"handleFocus",function(){e.setState({isFocused:!0})}),_(m(e),"handleBlur",function(){e.setState({isFocused:!1})}),e}return n=[{key:"render",value:function(){var e=this.props,t=e.pin,n=e.imageHeight,r=e.hideAuthorAttribution,a=e.maxDescriptionLength,l=e.promoted,c=e.showDescription,u=e.skipImageReloadOnError,f=e.width,p=e.video,y=e.rounding,b=e.isMobile,m=void 0!==b&&b,g=P(t,a),v=this.props.i18n._('No description available', '[m10n]quickPromote.pin.noDescription', '[m10n] Accessibility label when there is no description available'),_=this.getIsActionable()?{onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,onMouseDown:this.handleClick,onKeyPress:this.handleKeyPress,onFocus:this.handleFocus,onBlur:this.handleBlur,role:"button",tabIndex:0}:{},x=(null==t?void 0:t.images)&&(t.images.orig||t.images["236x"]||t.images["474x"]||t.images["736x"]);return(0,d.jsxs)("div",h(h({style:this.getStyle()},_),{},{"aria-label":g||v,children:[(0,d.jsx)(i.Z,{containerWidth:f,image:t&&x&&{altText:t.altText,dominantColor:t.dominant_color,url:x.url,width:x.width,height:x.height},imgHeight:n,rounding:y,skipImageReloadOnError:u,video:p}),!l&&t.video_signature&&(0,d.jsx)(o.xu,{marginTop:1,children:(0,d.jsx)(o.JO,{accessibilityLabel:this.props.i18n._('Video play button', '[m10n] Accessibility label for a video play icon', '[m10n] Accessibility label for a video play icon'),color:"default",icon:"play",inline:!0,size:12})}),l&&!r&&!m&&(0,d.jsx)(O,{name:l.businessName}),c&&g.length>0&&(0,d.jsx)(o.xu,{maxWidth:f||s.yF,padding:l?1:void 0,paddingX:l?void 0:1,paddingY:l?void 0:4,children:(0,d.jsx)(o.xv,{size:m?"100":"200",weight:"bold",children:g})}),l&&(0,d.jsx)(w,{avatarUrl:l.avatarImageSmallUrl,businessName:l.businessName,isMobile:m})]}))}}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,x(r.key),r)}}(a.prototype,n),Object.defineProperty(a,"prototype",{writable:!1}),a}(r.Component);_(S,"defaultProps",{showDescription:!0}),t.ZP=function(e){var t=(0,c.ZP)(),n=e.badgeMessage;return(0,d.jsxs)(o.xu,{children:[(0,d.jsx)(S,h(h({},e),{},{i18n:t})),n&&(0,d.jsx)(o.xu,{"data-test-id":"recommended-pins",display:"inlineBlock",left:!0,padding:4,position:"absolute",top:!0,children:(0,d.jsx)(o.Ct,{text:n})})]})}},967308:function(e,t,n){"use strict";n.d(t,{Z:function(){return ns}});var r=n(586659),o=n(20256),i=n(212994),a=n(865540),l=n(581722),s=n(686319),c=n(821342),u=n(19585),d=n(261449),f=n(15667),p=n(744862),h=function(e,t,n){var r=e.name.toLocaleLowerCase(),o=t.name.toLocaleLowerCase();return r<o?n?-1:1:r>o?n?1:-1:0},y=function(e,t,n){return e.lastModified||t.lastModified?e.lastModified?t.lastModified?e.lastModified<t.lastModified?n?-1:1:e.lastModified>t.lastModified?n?1:-1:h(e,t,!0):1:-1:h(e,t,!0)},b=n(382718);function m(e){var t=e.path,n=void 0===t?"":t,r=e.rootName,i=void 0===r?"Home":r,a=e.onChangeDirectory,l=n;n&&"/"!==n.charAt(0)&&(l="/".concat(l)),n&&"/"===n.charAt(n.length-1)&&(l=l.substring(0,n.length-1));var s=l.split("/");return(0,b.jsx)(o.kC,{alignItems:"start",justifyContent:"start",children:s.map(function(e,t){var n=s.slice(0,t+1).join("/");return(0,b.jsxs)(o.xu,{display:"flex",children:[t>0&&(0,b.jsx)(o.xu,{paddingX:1,children:(0,b.jsx)(o.xv,{color:"subtle",children:">"})}),(0,b.jsx)(o.xu,{paddingX:1,children:(0,b.jsx)(o.iP,{onTap:function(){return a(n)},children:(0,b.jsx)(o.xv,{color:t===s.length-1?"default":"subtle",children:0===t?i:e})})})]},n)})})}var g=n(656442);function v(e){return -1===e.indexOf(".")?"":e.trim().split(".").pop().toLowerCase()}var _=n(594306);function x(e){var t=v(e.name);return"dropboxFolder"===e.type||!!t&&_.P7.includes(t)||!!t&&_.sc.includes(t)}function j(e,t){var n=e.lastIndexOf(".")-3,r=e.substr(n);return e.length>t&&n-3>=1?"".concat(e.substr(0,t-(r.length+3)),"...").concat(r):e}var P=n(656013);function O(e){var t=e.item,n=t.name,r=t.type,i=t.thumbnail?"data:image/jpeg;base64,".concat(t.thumbnail):"",a=x(t);return(0,b.jsx)(o.zd,{height:"100%",rounding:2,width:"100%",children:(0,b.jsx)(o.kC,{alignItems:"center",height:"100%",justifyContent:"center",width:"100%",children:a&&i?(0,b.jsx)(o.Ee,{alt:n||"",fit:"cover",naturalHeight:1,naturalWidth:1,src:i}):(0,b.jsx)(o.JO,{accessibilityLabel:"dropboxFolder"===r?"Folder icon":"Unknown file icon",icon:"dropboxFolder"===r?"folder":"file-unknown",size:"60%"})})})}function w(e){var t=e.color,n=e.duration,i=e.type,a=(0,u.ZP)();return(0,b.jsx)(o.xu,{color:t,display:"flex",paddingX:2,paddingY:1,rounding:"pill",children:"localVideo"===i||"dropboxVideo"===i?(0,b.jsxs)(r.Fragment,{children:[(0,b.jsx)(o.JO,{accessibilityLabel:a._('Video icon', 'Icon label to tell if media type is a video', 'Icon label to tell if media type is a video'),color:"inverse",icon:"video-camera"}),!!n&&(0,b.jsx)(o.xu,{marginStart:1,children:(0,b.jsx)(o.xv,{color:"inverse",size:"200",children:n})})]}):(0,b.jsx)(o.xv,{color:"inverse",size:"200",children:a._('GIF', 'Text to represent media is a GIF image', 'Text to represent media is a GIF image')})})}function S(e){var t=e.number;return(0,b.jsx)(o.xu,{alignItems:"center",color:"primary","data-test-id":"number-overlay",display:"flex",height:24,justifyContent:"center",margin:3,position:"absolute",right:!0,rounding:"circle",top:!0,width:24,children:(0,b.jsx)(o.xv,{color:"inverse",size:"200",weight:"bold",children:t})})}function A(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var I={__style:{padding:6}},E={__style:{padding:2,opacity:.5}},C={margin:2},D={padding:2,cursor:"pointer"};function T(e){var t,n=e.item,i=e.onClick,a=e.selected,l=e.selectedIndex,s=function(e){if(Array.isArray(e))return e}(t=(0,r.useState)(!1))||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,l=[],s=!0,c=!1;try{for(i=(n=n.call(e)).next;!(s=(r=i.call(n)).done)&&(l.push(r.value),2!==l.length);s=!0);}catch(e){c=!0,o=e}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return l}}(t,2)||function(e,t){if(e){if("string"==typeof e)return A(e,2);var n=({}).toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?A(e,2):void 0}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),c=s[0],u=s[1],d=(0,r.useCallback)(function(){return i(n)},[n,i]),f=(0,r.useCallback)(function(){return u(!0)},[u]),p=(0,r.useCallback)(function(){return u(!1)},[u]),h=x(n),y=(0,g.Z)(n),m=(0,b.jsxs)(o.xu,{alignItems:"center",color:c?"lightWash":"secondary",display:"flex",height:153,justifyContent:"center",position:"relative",rounding:2,width:153,children:[(0,b.jsx)(O,{item:n}),l>=0&&(0,b.jsx)(S,{number:l+1}),!!y&&(0,b.jsx)(o.xu,{bottom:!0,left:!0,margin:1,position:"absolute",children:(0,b.jsx)(w,{color:"transparentDarkGray",type:y})})]}),v=(0,b.jsxs)(o.xu,{paddingY:2,children:[(0,b.jsx)(o.xv,{lineClamp:1,size:"200",children:j(n.name,20)}),(0,b.jsxs)(o.xu,{paddingY:1,children:[!!n.items&&(0,b.jsx)(o.xv,{lineClamp:1,size:"100",children:"".concat(n.items," items")}),!!n.size&&(0,b.jsx)(o.xv,{lineClamp:1,size:"100",children:n.size})]})]});return(0,b.jsx)(P.Z,{onClick:h?d:void 0,rounded:!0,style:C,children:(0,b.jsx)(o.xu,{dangerouslySetInlineStyle:h?I:E,rounding:2,width:168,children:h?(0,b.jsxs)(o.st,{onMouseEnter:f,onMouseLeave:p,children:[(0,b.jsx)(P.Z,{rounded:!0,selected:a,style:D,children:m}),v]}):(0,b.jsxs)(r.Fragment,{children:[m,v]})})})}function k(e){var t=e.items,n=e.selected,r=e.onClick;return(0,b.jsx)(o.Rk,{columnWidth:168,gutterWidth:4,items:t,layout:"uniformRow",minCols:5,renderItem:function(e){var t=e.data,o=n.map(function(e){return e.id});return(0,b.jsx)(T,{item:t,onClick:r,selected:o.includes(t.id),selectedIndex:o.indexOf(t.id)},t.id)}})}function z(e){return(z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function R(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function B(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?R(Object(n),!0).forEach(function(t){H(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):R(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function L(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function F(e,t){return(F=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Z(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function M(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(M=function(){return!!e})()}function N(e){return(N=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function H(e,t,n){return(t=U(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function U(e){var t=function(e,t){if("object"!=z(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=z(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==z(t)?t:t+""}var W=["grid","list"],V={grid:0,list:1},G={__style:{zIndex:1e3}},X=function(e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");i.prototype=Object.create(e&&e.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),Object.defineProperty(i,"prototype",{writable:!1}),e&&F(i,e);var t,n,r=(t=M(),function(){var e,n=N(i);return e=t?Reflect.construct(n,arguments,N(this).constructor):n.apply(this,arguments),function(e,t){if(t&&("object"==z(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return Z(e)}(this,e)});function i(){var e;if(!(this instanceof i))throw TypeError("Cannot call a class as a function");for(var t=arguments.length,n=Array(t),o=0;o<t;o++)n[o]=arguments[o];return H(Z(e=r.call.apply(r,[this].concat(n))),"state",{view:e.props.initialView,sort:"newest",query:"",isFlyoutOpen:!1}),H(Z(e),"handleSearch",function(t){var n=t.value;return e.setState({query:n})}),H(Z(e),"handleChangeView",function(t){var n=t.activeIndex;e.setState({view:W[n]})}),H(Z(e),"handleSort",function(t){var n=t.value;return e.setState({sort:n})}),H(Z(e),"handleSetRef",function(t){e._ref=t}),H(Z(e),"handleAvatarClick",function(){var t=e.props.onFlyoutChange,n=e.state.isFlyoutOpen;e.setState({isFlyoutOpen:!n}),t&&t(!n)}),H(Z(e),"handleFlyoutDismiss",function(){var t=e.props.onFlyoutChange;e.setState({isFlyoutOpen:!1}),t&&t(!1)}),H(Z(e),"options",[{label:e.props.i18n._('Newest', 'Dropdown option to sort by newest', 'Dropdown option to sort by newest'),value:"newest"},{label:e.props.i18n._('Oldest', 'Dropdown option to sort by oldest', 'Dropdown option to sort by oldest'),value:"oldest"},{label:e.props.i18n._('A to Z', 'Dropdown option to sort by descending alphabetical order', 'Dropdown option to sort by descending alphabetical order'),value:"a-z"},{label:e.props.i18n._('Z to A', 'Dropdown option to sort by ascending alphabetical order', 'Dropdown option to sort by ascending alphabetical order'),value:"z-a"}]),H(Z(e),"getSort",function(e){switch(e){case"oldest":return function(e,t){return y(e,t,!0)};case"a-z":return function(e,t){return h(e,t,!0)};case"z-a":return function(e,t){return h(e,t,!1)};default:return function(e,t){return y(e,t,!1)}}}),e}return n=[{key:"render",value:function(){var e=this.props,t=e.path,n=e.items,r=e.selected,i=e.name,a=e.avatarUrl,l=e.onChangeDirectory,s=e.onFileClick,c=e.onLogout,u=this.state,d=u.view,f=u.sort,h=u.query,y=u.isFlyoutOpen,g=((function(e){if(Array.isArray(e))return L(e)})(n)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(n)||function(e,t){if(e){if("string"==typeof e)return L(e,void 0);var n=({}).toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?L(e,void 0):void 0}}(n)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).sort(this.getSort(f)),v=h.length>0?g.filter(function(e){return e.name.toLocaleLowerCase().includes(h.toLocaleLowerCase())}):g;return(0,b.jsxs)(o.kC,{alignItems:"stretch",direction:"column",height:"100%",justifyContent:"start",children:[(0,b.jsxs)(o.xu,{direction:"row",display:"flex",marginEnd:-1,marginStart:-1,paddingY:2,children:[(0,b.jsx)(o.xu,{ref:this.handleSetRef,paddingX:2,children:(0,b.jsx)(o.iP,{onTap:this.handleAvatarClick,rounding:"circle",children:(0,b.jsx)(p.qE,{name:i,size:"sm",src:a})})}),(0,b.jsx)(o.xu,{flex:"grow",paddingX:2,children:(0,b.jsx)(o.Um,{accessibilityLabel:this.props.i18n._('Search', 'Accessibility label for the searching through dropbox items and folders', 'Accessibility label for the searching through dropbox items and folders'),id:"dropbox-search-field",onChange:this.handleSearch,placeholder:this.props.i18n._('Search', 'Placeholder for search field', 'Placeholder for search field'),size:"lg",value:h})}),(0,b.jsx)(o.xu,{paddingX:2,children:(0,b.jsx)(o.sY,{items:[(0,b.jsx)(o.JO,{accessibilityLabel:"Switch to Grid View",icon:"view-type-default"}),(0,b.jsx)(o.JO,{accessibilityLabel:"Switch to List View",icon:"view-type-list"})],onChange:this.handleChangeView,selectedItemIndex:V[d]})}),(0,b.jsx)(o.xu,{paddingX:2,width:174,children:(0,b.jsx)(o.EI,{id:"asset-picker-dropbox-sort-select-list",onChange:this.handleSort,value:f,children:this.options.map(function(e){var t=e.label,n=e.value;return(0,b.jsx)(o.EI.Option,{label:t,value:n},t)})})})]}),(0,b.jsx)(o.xu,{paddingY:2,children:(0,b.jsx)(m,{onChangeDirectory:l,path:t,rootName:"Dropbox"})}),(0,b.jsx)(o.xu,{marginEnd:-2,marginStart:-2,width:0,children:(0,b.jsx)(k,{items:v,onClick:s,selected:r})}),y&&(0,b.jsx)(o.mh,{children:(0,b.jsx)(o.xu,{dangerouslySetInlineStyle:G,position:"absolute",top:!0,children:(0,b.jsx)(o.J2,{anchor:this._ref,idealDirection:"down",onDismiss:this.handleFlyoutDismiss,positionRelativeToAnchor:!1,children:(0,b.jsx)(o.xu,{padding:4,width:"100%",children:(0,b.jsxs)(o.xu,{direction:"column",display:"flex",justifyContent:"center",marginBottom:-2,marginTop:-2,width:"100%",children:[(0,b.jsxs)(o.xu,{alignItems:"center",display:"flex",paddingY:2,children:[(0,b.jsx)(p.qE,{name:i,size:"sm",src:a}),(0,b.jsx)(o.xu,{paddingX:2,children:(0,b.jsx)(o.xv,{children:i})})]}),(0,b.jsx)(o.iz,{}),(0,b.jsxs)(o.xu,{paddingY:2,children:[(0,b.jsx)(o.xu,{paddingY:2,children:(0,b.jsx)(o.rU,{href:"https://www.dropbox.com",onClick:function(e){return(0,e.dangerouslyDisableOnNavigation)()},children:(0,b.jsxs)(o.kC,{alignItems:"stretch",justifyContent:"between",children:[(0,b.jsx)(o.xv,{weight:"bold",children:this.props.i18n._('Go to Dropbox', 'Link to redirect to Dropbox index page', 'Link to redirect to Dropbox index page')}),(0,b.jsx)(o.JO,{accessibilityLabel:this.props.i18n._('Go to Dropbox', 'Link to redirect to Dropbox index page', 'Link to redirect to Dropbox index page'),color:"default",icon:"visit"})]})})}),(0,b.jsx)(o.xu,{paddingY:2,children:(0,b.jsx)(o.rU,{href:"#",onClick:function(e){var t=e.event,n=e.dangerouslyDisableOnNavigation;t.preventDefault(),n(),c()},children:(0,b.jsx)(o.xv,{weight:"bold",children:this.props.i18n._('Sign out', 'Button to unlink user from their Dropbox account', 'Button to unlink user from their Dropbox account')})})})]})]})})})})})]})}}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,U(r.key),r)}}(i.prototype,n),Object.defineProperty(i,"prototype",{writable:!1}),i}(r.Component);function Y(e){var t=(0,u.ZP)();return(0,b.jsx)(X,B(B({},e),{},{i18n:t}))}H(X,"defaultProps",{items:[],selected:[],initialView:"grid",path:"",name:"Dropbox User",avatarUrl:""});var q=n(932603);function K(e){var t=e.onClick;return(0,b.jsx)(o.xu,{height:"100%",children:(0,b.jsxs)(o.xu,{alignItems:"center",direction:"column",display:"flex",height:"100%",justifyContent:"center",padding:3,children:[q.Z,(0,b.jsx)(o.xu,{paddingY:5,children:(0,b.jsx)(o.xv,{weight:"bold",children:"Connect to your Dropbox account"})}),(0,b.jsx)(o.zx,{color:"gray",onClick:t,text:"Sign in"})]})})}var J=n(448303);function $(e){return($="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Q(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function ee(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Q(Object(n),!0).forEach(function(t){ei(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Q(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function et(e,t){return(et=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function en(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function er(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(er=function(){return!!e})()}function eo(e){return(eo=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ei(e,t,n){return(t=ea(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ea(e){var t=function(e,t){if("object"!=$(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=$(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==$(t)?t:t+""}var el=function(e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");i.prototype=Object.create(e&&e.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),Object.defineProperty(i,"prototype",{writable:!1}),e&&et(i,e);var t,n,r=(t=er(),function(){var e,n=eo(i);return e=t?Reflect.construct(n,arguments,eo(this).constructor):n.apply(this,arguments),function(e,t){if(t&&("object"==$(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return en(e)}(this,e)});function i(){var e;if(!(this instanceof i))throw TypeError("Cannot call a class as a function");for(var t=arguments.length,n=Array(t),o=0;o<t;o++)n[o]=arguments[o];return ei(en(e=r.call.apply(r,[this].concat(n))),"state",{path:"",userName:"",userAvatarURL:"",items:[],isLoading:!1}),ei(en(e),"_isMounted",!1),ei(en(e),"startDropboxAuthorization",function(){var t=e.props,n=t.socialManager,r=t.updateSocialNetwork,o=t.setError;n.handleConnect("dropbox",!0,{success:function(){e._isMounted&&(r("dropbox",!0),e.setState({isLoading:!0},e.getUserAccountInfo))},error:function(){e._isMounted&&o(e.props.i18n._('Hmm... your Dropbox sign in didn\'t work. Give it another try.', 'Error message to indicate that there was error happened while signing into Dropbox', 'Error message to indicate that there was error happened while signing into Dropbox'))}},e.props.i18n)}),ei(en(e),"listPathContent",function(){var t=e.props.setError,n=e.state.path;(0,s.Z)({url:"/v3/dropbox/folder/",data:{path:n}}).then(function(t){var n=t.resource_response.data.entries,r=n.map(function(e){return e.id}),o=n.reduce(function(e,t){return"file"===t[".tag"]?e[t.id]={id:t.id,type:"dropboxFile",name:t.name,size:function(e,t){var n=t?1e3:1024;if(Math.abs(e)<n)return e+" B";var r=["KB","MB","GB","TB","PB","EB","ZB","YB"],o=-1;do e/=n,o+=1;while(Math.abs(e)>=n&&o<r.length-1);var i=e.toFixed(1);return i.endsWith(".0")&&(i=i.substring(0,i.length-2)),i+" "+r[o]}(t.size,!1),lastModified:new Date(t.client_modified),isDownloadable:t.is_downloadable}:e[t.id]={id:t.id,type:"dropboxFolder",name:t.name},e},{});(0,s.Z)({url:"/v3/dropbox/files/",data:{paths:r,add_fields:["dropboxfile.thumbnail"]}}).then(function(e){return e.resource_response.data.forEach(function(e){"success"===e.thumbnail[".tag"]&&(o[e.id]=ee(ee({},o[e.id]),{},{thumbnail:e.thumbnail.thumbnail}))}),Promise.all(Object.values(o).filter(function(e){return"dropboxFolder"===e.type}).map(function(e){return(0,s.Z)({url:"/v3/dropbox/folder/",data:{path:e.id}})}))}).then(function(e){e.forEach(function(e){var t=e.resource_response.data;o[t.path].items=t.size})}).then(function(){if(e._isMounted){var t=Object.values(o);e.setState({items:t},function(){return e.setState({isLoading:!1})})}})}).catch(function(){e._isMounted&&e.setState({isLoading:!1},function(){return t(e.props.i18n._('Hmm... your files from Dropbox didn\'t upload. Try again.', 'Error message to indicate that there was error happened while retrieving files in user\u2019s Dropbox', 'Error message to indicate that there was error happened while retrieving files in user\u2019s Dropbox'))})})}),ei(en(e),"handleClick",function(t){var n=e.props.onSelect,r=e.state.path;"dropboxFolder"===t.type?e.handleChangeDirectory("".concat(r,"/").concat(t.name)):n(t)}),ei(en(e),"handleChangeDirectory",function(t){e.setState({path:t,isLoading:!0},e.listPathContent)}),ei(en(e),"getUserAccountInfo",function(){(0,s.Z)({url:"/v3/dropbox/users/me/"}).then(function(t){if(e._isMounted){var n=t.resource_response.data;e.setState({userName:n.name.display_name,userAvatarURL:n.profile_photo_url},e.listPathContent)}}).catch(function(){(0,e.props.setError)("Hmm... We didn't get your Dropbox account information. Try again.")})}),ei(en(e),"handleLogout",function(){(0,e.props.updateSocialNetwork)("dropbox",!1),(0,s.Z)({url:"/v3/connect/dropbox/",method:"DELETE"})}),e}return n=[{key:"componentDidMount",value:function(){var e=this.props.viewer;this._isMounted=!0,e.isAuth&&e.socialNetwork.dropbox.connected&&this.setState({isLoading:!0},this.getUserAccountInfo)}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"render",value:function(){var e=this.props,t=e.viewer,n=e.visible,r=e.selectedAssets,i=e.onFlyoutChange,a=this.state,l=a.items,s=a.path,c=a.userName,u=a.userAvatarURL,d=a.isLoading,f=t.isAuth&&t.socialNetwork.dropbox.connected;return(0,b.jsxs)(o.xu,{column:12,display:n?"block":"none",height:"100%",padding:3,children:[(0,b.jsx)(o.xu,{height:"100%",paddingX:3,paddingY:1,children:f?(0,b.jsx)(Y,{avatarUrl:u,initialView:"grid",items:l,name:c,onChangeDirectory:this.handleChangeDirectory,onFileClick:this.handleClick,onFlyoutChange:i,onLogout:this.handleLogout,path:s,selected:r}):(0,b.jsx)(K,{onClick:this.startDropboxAuthorization})}),d&&(0,b.jsx)(o.xu,{alignItems:"center",bottom:!0,display:"flex",justifyContent:"center",left:!0,position:"absolute",right:!0,top:!0,children:(0,b.jsx)(o.xH,{accessibilityLabel:this.props.i18n._('Dropbox Loading Spinner', 'description for loading spinner inside AssetPicker Dropbox tab', 'description for loading spinner inside AssetPicker Dropbox tab'),show:!0})})]})}}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ea(r.key),r)}}(i.prototype,n),Object.defineProperty(i,"prototype",{writable:!1}),i}(r.Component);function es(e){var t=(0,l.I0)(),n=(0,u.ZP)(),r=(0,d.k)();return(0,b.jsx)(el,ee(ee({},e),{},{i18n:n,requestContext:(0,f.B)(),socialManager:r,updateSocialNetwork:function(e,n){return t((0,J.V6)(e,n))},viewer:(0,c.Z)()}))}var ec=n(886981),eu=n(448505),ed=n(469987),ef=n(526435),ep=n(406262),eh=n(253374),ey=n(571045),eb=n(767209),em=n(70012);function eg(e){return function(e){if(Array.isArray(e))return ev(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return ev(e,void 0);var n=({}).toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ev(e,void 0):void 0}}(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ev(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function e_(e){var t=e.addAssets,n=(0,f.B)(),i=(0,u.ZP)(),a=(0,r.useCallback)(function(e){return t?t(e):function(){}},[t]);return(0,b.jsx)(o.xu,{height:160,marginBottom:4,rounding:2,width:160,children:(0,b.jsx)(eb.Z,{accept:[].concat(eg((0,em.Z)(n.userAgent.browserName)),eg(_.ss)).join(","),allowMultipleFiles:!0,id:"asset-empty-view-upload",onChange:function(e){a(e.target.files?Array.from(e.target.files):[])},onDrop:function(e){a((0,ey.Z)(e.dataTransfer))},children:function(){return(0,b.jsx)(o.xu,{alignItems:"center",color:"secondary",display:"flex",height:"100%",justifyContent:"center",rounding:2,children:(0,b.jsx)(o.JO,{accessibilityLabel:i._('Add assets', 'Accessibility label for adding images and videos', 'Accessibility label for adding images and videos'),icon:"add-circle",size:32})})}})})}var ex=n(469191);function ej(e){var t=e.height,n=e.image,r=e.width,i=n.height,a=n.src,l=n.width;return(0,b.jsxs)(o.zd,{height:"100%",rounding:2,width:"100%",children:[(0,b.jsx)(o.xu,{bottom:!0,left:!0,position:"absolute",right:!0,top:!0,children:(0,b.jsx)(ex.Z,{color:"rgba(0, 0, 0, 0.12)"})}),(0,b.jsx)(o.Ee,{alt:n.name||"",fit:t||r?"cover":void 0,naturalHeight:t||i||1,naturalWidth:r||l||1,src:a})]})}function eP(e){var t=e.height,n=e.width,r=e.title,i=e.description,a=e.image236x,l=e.image474x||a||{},s=l.height,c=l.width,u=l.url;return(0,b.jsx)(o.zd,{height:t||"100%",rounding:2,width:n||"100%",children:u&&(0,b.jsx)(o.Ee,{alt:r||i||"",fit:t||n?"cover":void 0,naturalHeight:null!=s?s:1,naturalWidth:null!=c?c:1,src:u})})}function eO(e){var t=e.height,n=e.width,r=e.video.customCoverImg;return(0,b.jsx)(o.zd,{height:t,rounding:2,width:n,children:r&&r.src&&(0,b.jsx)(o.Ee,{alt:r&&r.name||"",fit:t||n?"cover":void 0,naturalHeight:t||r&&r.height||0,naturalWidth:n||r&&r.width||0,src:r.src})})}function ew(e){var t,n,r=e.asset,o=e.height,i=e.width;return"localImage"===r.type||"webImage"===r.type?(0,b.jsx)(ej,{height:o,image:r,width:i}):"pin"===r.type?(0,b.jsx)(eP,{description:r.description,height:o,image236x:null!=(t=r.images)&&t["236x"]?{height:r.images["236x"].height,url:r.images["236x"].url,width:r.images["236x"].width}:void 0,image474x:null!=(n=r.images)&&n["474x"]?{height:r.images["474x"].height,url:r.images["474x"].url,width:r.images["474x"].width}:void 0,title:r.title,width:i}):"localVideo"===r.type?(0,b.jsx)(eO,{height:o,video:r,width:i}):"dropboxFile"===r.type||"dropboxFolder"===r.type?(0,b.jsx)(O,{item:r}):null}var eS=n(888382);function eA(e){var t=e.addAssets,n=e.asset,i=e.onSelect,a=e.selected,l=e.selectedIndex,s=(0,r.useCallback)(function(){return i(n)},[n]);if("blank"===n.type)return(0,b.jsx)(e_,{addAssets:t});var c="localVideo"===n.type?1e3*n.duration:void 0,u=("pin"===n.type&&n.videos?n.videos:{}).video_list,d=(u&&u.V_720P||{}).duration,f=(0,g.Z)(n),p=c||d?(0,ed.Z)(c||d||0):void 0;return(0,b.jsxs)(o.xu,{column:12,"data-group-id":"asset-picker-view-grid-group-item",children:[(0,b.jsxs)(P.Z,{onClick:s,rounded:!0,selected:a,children:[(0,b.jsxs)(o.xu,{"data-test-id":"asset-picker-view-item",position:"relative",children:[(0,b.jsx)(ew,{asset:n}),!!f&&(0,b.jsx)(o.xu,{bottom:!0,left:!0,margin:1,position:"absolute",children:(0,b.jsx)(w,{color:"transparentDarkGray",duration:p,type:f})})]}),l>=0&&(0,b.jsx)(S,{number:l+1})]}),ep.Z.enabled("shop_the_pin")&&"pin"===n.type&&(0,b.jsxs)(o.xu,{children:[(0,b.jsx)(eS.dV,{input:{type:"Legacy",data:n},children:function(e){return!!e&&(0,b.jsx)(o.xu,{children:(0,b.jsx)(o.xu,{display:"flex",paddingY:1,children:(0,b.jsx)(eh.Z,{icon:"tag",text:e})})})}}),(0,b.jsx)(eS.v2,{input:{type:"Legacy",data:n},children:function(e){return!!e&&(0,b.jsx)(o.xu,{width:ef.MN,children:(0,b.jsx)(o.xv,{overflow:"breakWord",size:"200",weight:"bold",children:e})})}})]}),!!n.name&&(0,b.jsx)(o.xu,{paddingY:1,title:n.name,children:(0,b.jsx)(o.xv,{size:"200",children:j(String(n.name),20)})})]})}function eI(e){var t=e.assets,n=e.loadItems,r=e.scrollContainer;return(0,b.jsx)(o.Rk,{columnWidth:158,gutterWidth:16,items:t,loadItems:n,minCols:5,renderItem:function(t){var n,r=t.data,o=t.itemIdx,i=e.addAssets,a=e.onSelect,l=e.selectedAssets,s=e.showAddAssetButton,c=(void 0===s||s)&&0===o;return(0,b.jsx)(eA,{addAssets:i,asset:c?{id:"pinbuilder_asset_picker_blank",type:"blank"}:r,onSelect:c?function(){}:a,selected:!c&&(!!l.includes(r)||!!l.find(function(e){return r.id===e.id})),selectedIndex:c?-1:(n=l.indexOf(r))>-1?n:l.findIndex(function(e){return e.id===r.id})})},scrollContainer:r})}function eE(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function eC(e){var t,n=e.onSelect,i=e.pins,a=e.selectedAssets,l=e.shouldShowProductsOnly,s=e.searchFilterText,c=e.addAssets,d=(0,u.ZP)(),f=function(e){if(Array.isArray(e))return e}(t=(0,r.useState)(!1))||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,l=[],s=!0,c=!1;try{for(i=(n=n.call(e)).next;!(s=(r=i.call(n)).done)&&(l.push(r.value),2!==l.length);s=!0);}catch(e){c=!0,o=e}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return l}}(t,2)||function(e,t){if(e){if("string"==typeof e)return eE(e,2);var n=({}).toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?eE(e,2):void 0}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),p=f[0],h=f[1];(0,r.useEffect)(function(){return h(i&&!i.isLoaded)});var y=l?eS.VX:eS.Bc,m=i&&i.data&&i.data.filter(function(e){return!!e&&"pin"===e.type&&y(e)&&(0,eS.ir)(e,s)},[])||[];return(0,b.jsxs)(o.xu,{alignItems:"center","data-test-id":"asset-picker-pins-pane",display:"flex",height:p?"100%":void 0,justifyContent:"center",children:[(0,b.jsx)(o.xH,{accessibilityLabel:d._('Loading...', 'Loading', 'Loading'),show:p}),i&&i.data&&i.data.length>0&&(0,b.jsx)(eI,{addAssets:c,assets:m,loadItems:i.fetchMore,onSelect:n,scrollContainer:function(){return window},selectedAssets:a,showAddAssetButton:!1})]})}function eD(e){var t=e.addAssets,n=e.onSelect,r=e.searchFilterText,o=e.selectedAssets,i=e.shouldShowProductsOnly,a=e.username,l=(0,ec.Z)({name:"UserPinsResource",options:{field_set_key:"detailed",username:a,prepend:!1,include_protected_pins:!0,limit:1e3,page_size:150}});return(0,b.jsx)(eC,{addAssets:t,onSelect:n,pins:l,searchFilterText:r,selectedAssets:o,shouldShowProductsOnly:i})}function eT(e){return(eT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ek(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function ez(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ek(Object(n),!0).forEach(function(t){eZ(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ek(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function eR(e,t){return(eR=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function eB(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function eL(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(eL=function(){return!!e})()}function eF(e){return(eF=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function eZ(e,t,n){return(t=eM(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function eM(e){var t=function(e,t){if("object"!=eT(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=eT(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==eT(t)?t:t+""}var eN={PRODUCTS:"PRODUCTS",ALL_PINS:"ALL_PINS"},eH=function(e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");a.prototype=Object.create(e&&e.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),Object.defineProperty(a,"prototype",{writable:!1}),e&&eR(a,e);var t,n,i=(t=eL(),function(){var e,n=eF(a);return e=t?Reflect.construct(n,arguments,eF(this).constructor):n.apply(this,arguments),function(e,t){if(t&&("object"==eT(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return eB(e)}(this,e)});function a(){var e;if(!(this instanceof a))throw TypeError("Cannot call a class as a function");for(var t=arguments.length,n=Array(t),o=0;o<t;o++)n[o]=arguments[o];return eZ(eB(e=i.call.apply(i,[this].concat(n))),"state",{shouldShowProductsOnly:!0,searchText:"",showDropdownFlyout:!1,currentSelection:eN.PRODUCTS}),eZ(eB(e),"dropdownRef",(0,r.createRef)()),eZ(eB(e),"handleOnSelect",function(t){var n=t.item;if(n.value in eN){var r=n.value;e.setState({shouldShowProductsOnly:r===eN.PRODUCTS,showDropdownFlyout:!1,currentSelection:r})}}),eZ(eB(e),"toggleDropdown",function(){e.setState(function(e){return{showDropdownFlyout:!e.showDropdownFlyout}})}),eZ(eB(e),"handleSearchQueryUpdates",function(t){e.setState({searchText:t.value})}),eZ(eB(e),"handleAssetSelect",function(t){(0,e.props.onSelect)(t)}),e}return n=[{key:"render",value:function(){var e,t=this,n=this.props,r=n.selectedAssets,i=n.visible,a=n.viewer,l=n.user.data,s=this.state,c=s.shouldShowProductsOnly,u=s.searchText,d=s.showDropdownFlyout,f=s.currentSelection,p=(e=this.props.i18n,new Map([[eN.PRODUCTS,e._('Product Pins', 'Dropdown filter to show products only', 'Dropdown filter to show products only')],[eN.ALL_PINS,e._('All Pins', 'Dropdown filter to show all pins', 'Dropdown filter to show all pins')]])),h=(l?l.username:a&&a.isAuth&&a.username)||"";return this.props.orbacActingAs&&this.props.orbacActingAs.user&&this.props.orbacActingAs.user.username&&(h=this.props.orbacActingAs.user.username),(0,b.jsxs)(o.xu,{display:i?"block":"none",height:"100%",padding:6,children:[(0,b.jsxs)(o.kC,{direction:"column",gap:3,children:[(0,b.jsx)(o.X6,{size:"600",children:this.props.i18n._('Use your Pins', 'Select products to the collection/STL selected in Pin Builder.', 'Select products to the collection/STL selected in Pin Builder.')}),(0,b.jsx)(o.xv,{children:this.props.i18n._('Keep it simple\u2014use your existing Pins to add products to your image. Add products in the order you want people to see them.', 'Description of the functionalities in the pins picker tab', 'Description of the functionalities in the pins picker tab')}),(0,b.jsxs)(o.kC,{alignItems:"center",direction:"row",gap:2,justifyContent:"start",children:[(0,b.jsx)(o.kC.Item,{flex:"grow",children:(0,b.jsx)(o.nv,{id:"search",onChange:this.handleSearchQueryUpdates,placeholder:this.props.i18n._('Search Pin title or description', 'Placeholder search bar text to search the pins', 'Placeholder search bar text to search the pins'),size:"lg",type:"text",value:u})}),(0,b.jsx)(o.zx,{ref:this.dropdownRef,accessibilityControls:"Dropdown to show product pins or all pins",accessibilityExpanded:d,accessibilityHaspopup:!0,dataTestId:"dropdown-button",iconEnd:"arrow-down",onClick:this.toggleDropdown,selected:d,text:p.get(f)||""}),this.state.showDropdownFlyout&&(0,b.jsx)(o.Lt,{anchor:this.dropdownRef.current,id:"filterDropdown",onDismiss:function(){return t.setState({showDropdownFlyout:!1})},children:Object.keys(eN).map(function(e){return eN[e]}).map(function(e){return(0,b.jsx)(o.Lt.Item,{dataTestId:"dropdown-item-".concat(e.toLowerCase()),onSelect:t.handleOnSelect,option:{value:e,label:p.get(e)||""},selected:e===f?{label:p.get(e)||"",value:e}:null},e)})})]})]}),(0,b.jsx)(o.xu,{children:i&&(0,b.jsx)(eD,{addAssets:void 0,onSelect:this.handleAssetSelect,searchFilterText:u,selectedAssets:r,shouldShowProductsOnly:c,username:h})})]})}}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,eM(r.key),r)}}(a.prototype,n),Object.defineProperty(a,"prototype",{writable:!1}),a}(r.PureComponent);function eU(e){var t=(0,l.v9)(function(e){return e.advertiser}),n=(0,u.ZP)(),r=(0,c.Z)(),o=(0,eu.Z)(),i=(0,ec.Z)({name:"UserResource",options:{field_set_key:"grid_item",user_id:!!t&&t.owner_user_id||r.isAuth&&r.id||""}});return(0,b.jsx)(eH,ez(ez({},e),{},{advertiser:t,i18n:n,orbacActingAs:o,user:i,viewer:r}))}var eW=n(473728),eV=n(694955),eG=n(315280),eX=n(755583),eY=n(980787);function eq(e){return(eq="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function eK(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function eJ(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?eK(Object(n),!0).forEach(function(t){e3(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):eK(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function e$(e){return function(e){if(Array.isArray(e))return eQ(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return eQ(e,void 0);var n=({}).toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?eQ(e,void 0):void 0}}(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function eQ(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function e0(e,t){return(e0=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function e1(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function e2(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(e2=function(){return!!e})()}function e8(e){return(e8=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function e3(e,t,n){return(t=e5(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function e5(e){var t=function(e,t){if("object"!=eq(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=eq(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==eq(t)?t:t+""}var e6={__style:{zIndex:ef.v9}},e4=function(e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");i.prototype=Object.create(e&&e.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),Object.defineProperty(i,"prototype",{writable:!1}),e&&e0(i,e);var t,n,r=(t=e2(),function(){var e,n=e8(i);return e=t?Reflect.construct(n,arguments,e8(this).constructor):n.apply(this,arguments),function(e,t){if(t&&("object"==eq(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return e1(e)}(this,e)});function i(){var e;if(!(this instanceof i))throw TypeError("Cannot call a class as a function");for(var t=arguments.length,n=Array(t),o=0;o<t;o++)n[o]=arguments[o];return e3(e1(e=r.call.apply(r,[this].concat(n))),"state",{sort:"newest",query:""}),e3(e1(e),"handleSearch",function(t){var n=t.value;e.props.logContextEvent({event_type:7472,component:13392,element:11270}),e.setState({query:n})}),e3(e1(e),"getSort",function(e){switch(e){case"oldest":return function(){return -1};case"a-z":return function(e,t){var n=e.name.toLocaleLowerCase(),r=t.name.toLocaleLowerCase();return n<r?-1:+(n>r)};case"z-a":return function(e,t){var n=e.name.toLocaleLowerCase(),r=t.name.toLocaleLowerCase();return n>r?-1:+(n<r)};default:return function(){return 0}}}),e3(e1(e),"handleSort",function(t){var n=t.value;e.props.logContextEvent({event_type:3828,component:13392,element:11273}),e.setState({sort:n})}),e3(e1(e),"options",[{label:e.props.i18n._('Newest', 'Dropdown option to sort by newest', 'Dropdown option to sort by newest'),value:"newest"},{label:e.props.i18n._('Oldest', 'Dropdown option to sort by oldest', 'Dropdown option to sort by oldest'),value:"oldest"},{label:e.props.i18n._('A to Z', 'Dropdown option to sort by descending alphabetical order', 'Dropdown option to sort by descending alphabetical order'),value:"a-z"},{label:e.props.i18n._('Z to A', 'Dropdown option to sort by ascending alphabetical order', 'Dropdown option to sort by ascending alphabetical order'),value:"z-a"}]),e3(e1(e),"handleDrop",function(t){var n=e.props,r=n.addAssets,o=n.logContextEvent,i=(0,ey.Z)(t.dataTransfer);o({event_type:3502,component:13392,element:11275}),r(i)}),e3(e1(e),"handleSearchFieldFocus",function(){e.props.logContextEvent({event_type:101,component:13392,element:11270})}),e}return n=[{key:"render",value:function(){var e=this.props,t=e.addAssets,n=e.assets,r=e.imageFileTypes,i=e.onSelect,a=e.selectedAssets,l=this.state,s=l.sort,c=l.query,u=e$(n).sort(this.getSort(s)),d=c.length>0?u.filter(function(e){return e.name.toLocaleLowerCase().includes(c.toLocaleLowerCase())}):u;return(0,b.jsxs)(o.xu,{"data-test-id":"asset-picker-uploaded-pane",direction:"column",display:"flex",height:"100%",children:[(0,b.jsxs)(o.xu,{"data-test-id":"uploaded-pane-filter-box",display:"flex",padding:2,children:[(0,b.jsx)(o.xu,{flex:"grow",paddingX:1,children:(0,b.jsx)(o.Um,{accessibilityLabel:this.props.i18n._('Search', 'Accessibility label for the searching through uploaded images and videos', 'Accessibility label for the searching through uploaded images and videos'),id:"asset-search-field",onChange:this.handleSearch,onFocus:this.handleSearchFieldFocus,placeholder:this.props.i18n._('Search', 'Placeholder for search field', 'Placeholder for search field'),size:"lg",value:c})}),(0,b.jsx)(o.xu,{paddingX:1,width:168,children:(0,b.jsx)(o.EI,{id:"asset-picker-sort-select-list",onChange:this.handleSort,value:s,children:this.options.map(function(e){var t=e.label,n=e.value;return(0,b.jsx)(o.EI.Option,{label:t,value:n},t)})})})]}),(0,b.jsx)(o.xu,{height:"100%",position:"relative",width:"100%",children:(0,b.jsx)(eb.Z,{accept:[].concat(e$(r),e$(_.ss)).join(","),allowMultipleFiles:!0,color:"white",id:"asset-picker-upload-pane",onDrop:this.handleDrop,children:function(e){return(0,b.jsx)(o.xu,{dangerouslySetInlineStyle:e?void 0:e6,paddingY:2,position:"relative",children:(0,b.jsx)(eI,{addAssets:t,assets:[{id:"pinbuilder_asset_picker_blank",type:"blank"}].concat(e$(d)),onSelect:i,selectedAssets:a})})}})})]})}}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,e5(r.key),r)}}(i.prototype,n),Object.defineProperty(i,"prototype",{writable:!1}),i}(r.Component);function e9(e){var t=(0,eY.u)().logContextEvent,n=(0,f.B)(),r=(0,em.Z)(n.userAgent.browserName),o=(0,u.ZP)();return(0,b.jsx)(e4,eJ(eJ({},e),{},{i18n:o,imageFileTypes:r,logContextEvent:t}))}var e7=n(672410),te=n(990730),tt=n(984993);function tn(e){return(tn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function tr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function to(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?tr(Object(n),!0).forEach(function(t){var r,o;r=t,o=n[t],(r=function(e){var t=function(e,t){if("object"!=tn(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=tn(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==tn(t)?t:t+""}(r))in e?Object.defineProperty(e,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[r]=o}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tr(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var ti=n(316095);function ta(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function tl(e){var t,n=e.onSelect,i=e.setError,s=e.selectedAssets,c=e.visible,d=(0,u.ZP)(),f=(0,a.Z)(),p=function(e){if(Array.isArray(e))return e}(t=(0,r.useState)(""))||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,l=[],s=!0,c=!1;try{for(i=(n=n.call(e)).next;!(s=(r=i.call(n)).done)&&(l.push(r.value),2!==l.length);s=!0);}catch(e){c=!0,o=e}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return l}}(t,2)||function(e,t){if(e){if("string"==typeof e)return ta(e,2);var n=({}).toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ta(e,2):void 0}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),h=p[0],y=p[1],m=(0,l.I0)(),g=(0,l.v9)(function(e){return e.pinbuilder.assets}),v=function(e){return i(""),y(""),(0,eG.Z)({i18n:d,ideaPinRenamingEnabled:f,files:e,options:{allowVideo:!0}}).then(function(e){return Promise.all(e.filter(function(e){return["localVideo","localImage","error"].includes(e.type)}).map(function(e){return"localVideo"===e.type?(0,te.v)(e,0).then(function(t){return to(to({},e),{},{customCoverImg:{id:(0,e7.Z)(),fileSrc:e.fileSrc,name:e.name,size:(0,tt.Mi)(t).size,src:t,width:e.width,height:e.height,type:"localImage"}})}):Promise.resolve(e)})).then(function(e){var t=e.filter(function(e){return"error"===e.type}),r=e.filter(function(e){return"error"!==e.type});t.length>0&&((g.length>0||r.length>0)&&i((0,eW.Z)(d.ngettext('Sorry, {{numOfErrors}} file could not be uploaded.', 'Sorry, {{numOfErrors}} files could not be uploaded.', t.length, 'Error message saying how many files could not be uploaded', 'Error message saying how many files could not be uploaded'),{numOfErrors:t.length}),null,(0,b.jsx)(o.rU,{href:eV.CmU,onClick:function(e){return(0,e.dangerouslyDisableOnNavigation)()},target:"blank",children:(0,b.jsx)(o.zx,{color:"transparent",text:d._('Learn more', 'Learn more about error', 'Learn more about error')})})),y(t[0].message)),r.forEach(function(e){m((0,ti.addPinBuilderAsset)(e)),n(e)})})})};return(0,b.jsx)(o.xu,{column:12,display:c?"block":"none",height:"100%",children:g.length>0?(0,b.jsx)(o.xu,{height:"100%",paddingX:3,paddingY:1,children:(0,b.jsx)(e9,{addAssets:v,assets:g,onSelect:n,selectedAssets:s})}):(0,b.jsx)(o.xu,{height:"100%",padding:3,children:(0,b.jsx)(eX.Z,{addAssets:v,errorMessage:h})})})}var ts=n(982166),tc=n(678213),tu=n(765908),td=n(194737),tf=n(7872);function tp(e){return(tp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function th(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function ty(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?th(Object(n),!0).forEach(function(t){t_(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):th(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function tb(e,t){return(tb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function tm(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function tg(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(tg=function(){return!!e})()}function tv(e){return(tv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function t_(e,t,n){return(t=tx(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function tx(e){var t=function(e,t){if("object"!=tp(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=tp(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==tp(t)?t:t+""}var tj={border:"none",bottom:0,borderRadius:"0px 16px 16px 0px",height:"100%",width:"40px"},tP=function(e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");i.prototype=Object.create(e&&e.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),Object.defineProperty(i,"prototype",{writable:!1}),e&&tb(i,e);var t,n,r=(t=tg(),function(){var e,n=tv(i);return e=t?Reflect.construct(n,arguments,tv(this).constructor):n.apply(this,arguments),function(e,t){if(t&&("object"==tp(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return tm(e)}(this,e)});function i(){var e;if(!(this instanceof i))throw TypeError("Cannot call a class as a function");for(var t=arguments.length,n=Array(t),o=0;o<t;o++)n[o]=arguments[o];return t_(tm(e=r.call.apply(r,[this].concat(n))),"state",{value:e.props.initialValue||""}),t_(tm(e),"handleOnChange",function(t){var n=t.value;e.setState({value:n})}),t_(tm(e),"handleOnSubmit",function(t){var n=e.props.onSubmit,r=e.state.value;t.preventDefault(),n({event:t,value:r})}),e}return n=[{key:"render",value:function(){var e=this.props,t=e.id,n=e.placeholder,r=e.type,i=this.state.value;return(0,b.jsx)(o.xu,{color:"secondary",rounding:4,children:(0,b.jsx)("form",{noValidate:!0,onSubmit:this.handleOnSubmit,children:(0,b.jsxs)(o.xu,{display:"flex",marginEnd:-1,marginStart:-1,children:[(0,b.jsx)(o.xu,{flex:"grow",paddingX:1,position:"relative",width:"100%",children:(0,b.jsx)(o.nv,{id:t,onChange:this.handleOnChange,placeholder:n,size:"lg",type:r,value:i})}),(0,b.jsx)(o.kC,{alignItems:"center",justifyContent:"center",children:(0,b.jsx)("button",{right:"",style:tj,type:"submit",children:(0,b.jsx)(o.JO,{accessibilityLabel:this.props.i18n._('Submit', 'Icon Button for submitting a text field value', 'Icon Button for submitting a text field value'),icon:"arrow-forward",inline:!0})})})]})})})}}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,tx(r.key),r)}}(i.prototype,n),Object.defineProperty(i,"prototype",{writable:!1}),i}(r.Component);function tO(e){var t=(0,u.ZP)();return(0,b.jsx)(tP,ty(ty({},e),{},{i18n:t}))}function tw(e){return(tw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function tS(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function tA(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?tS(Object(n),!0).forEach(function(t){var r,o;r=t,o=n[t],(r=function(e){var t=function(e,t){if("object"!=tw(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=tw(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==tw(t)?t:t+""}(r))in e?Object.defineProperty(e,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[r]=o}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tS(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function tI(e){var t=e.itemId,n=e.onSelect,r=e.onSubmit,i=e.selectedAssets,a=(0,u.ZP)(),l=(0,f.B)(),s=(0,eu.Z)(),d=(0,c.Z)(),p=(0,tf.lJ)(d,s)||d.isAuth&&d.id,h=(0,ec.Z)({name:"ProductGroupItemIdPinResource",options:tA(tA({merchantId:(0,tf._P)(l,d,s)},p!==(d.isAuth?d.id:void 0)?{orbacSubjectId:p}:{}),{},{itemId:t,filters:{1:[t]}})}),y=h.data;if(!h.isLoaded)return(0,b.jsx)(o.xH,{accessibilityLabel:a._('Loading...', 'Loading', 'Loading'),show:!0});var m=(null!=y?y:[]).reduce(function(e,t){if(t){if(t.type="pin",t.rich_metadata){var n=t.rich_metadata.url||t.rich_metadata.id;(0,td.Z)({url:n||""})&&(t.link=n)}e.push(t)}return e},[]);return(0,b.jsxs)(o.xu,{children:[(0,b.jsx)(o.xu,{marginBottom:4,paddingX:3,children:(0,b.jsx)(tO,{id:"asset-picker-itemid",initialValue:t,onSubmit:r,placeholder:a._('Enter product item ID', 'Placeholder for entering an item ID for a product from a catalog', 'Placeholder for entering an item ID for a product from a catalog')})}),m.length>0?(0,b.jsx)(eI,{assets:m,onSelect:n,selectedAssets:i,showAddAssetButton:!1}):(0,b.jsx)(o.xu,{maxWidth:468,padding:5,children:(0,b.jsx)(o.xv,{align:"center",color:"error",size:"200",children:a._('Hmm, there\u2019s no Pin for that. Correct any item ID formatting errors and try again.', 'Error message when no pins are returned after searching via catalogs item ID', 'Error message when no pins are returned after searching via catalogs item ID')})})]})}function tE(e){return(tE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function tC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function tD(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?tC(Object(n),!0).forEach(function(t){tB(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tC(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function tT(e,t){return(tT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function tk(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function tz(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(tz=function(){return!!e})()}function tR(e){return(tR=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function tB(e,t,n){return(t=tL(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function tL(e){var t=function(e,t){if("object"!=tE(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=tE(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==tE(t)?t:t+""}var tF=function(e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");i.prototype=Object.create(e&&e.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),Object.defineProperty(i,"prototype",{writable:!1}),e&&tT(i,e);var t,n,r=(t=tz(),function(){var e,n=tR(i);return e=t?Reflect.construct(n,arguments,tR(this).constructor):n.apply(this,arguments),function(e,t){if(t&&("object"==tE(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return tk(e)}(this,e)});function i(){var e;if(!(this instanceof i))throw TypeError("Cannot call a class as a function");for(var t=arguments.length,n=Array(t),o=0;o<t;o++)n[o]=arguments[o];return tB(tk(e=r.call.apply(r,[this].concat(n))),"state",{itemId:"",validationError:null}),tB(tk(e),"handleOnSubmit",function(t){var n=t.value.trim().toLowerCase();n?(e.props.logContextEvent({event_type:7472,component:13392,element:11451}),e.setState({itemId:n,validationError:""})):e.setState({validationError:e.props.i18n._('Hmm, there\u2019s no Pin for that. Correct any item ID formatting errors and try again.', 'AssetPickerCatalogTab.NoPinError', 'Error message when no pins are returned after searching via catalogs item ID')})}),e}return n=[{key:"render",value:function(){var e=this.props,t=e.onSelect,n=e.selectedAssets,r=e.visible,i=this.state,a=i.itemId,l=i.validationError;return(0,b.jsx)(o.xu,{column:12,display:r?"block":"none",height:"100%",padding:3,children:a.length>0?(0,b.jsx)(tI,{itemId:a,onSelect:t,onSubmit:this.handleOnSubmit,selectedAssets:n}):(0,b.jsxs)(o.xu,{alignItems:"center",direction:"column",display:"flex",height:"100%",justifyContent:"center",padding:4,children:[(0,b.jsxs)(o.xu,{marginBottom:3,children:[(0,b.jsx)(o.xv,{align:"center",weight:"bold",children:this.props.i18n._('Add a product with its item ID', 'Prompt for adding a product from a catalog using an item ID', 'Prompt for adding a product from a catalog using an item ID')}),(0,b.jsx)(o.xv,{align:"center",children:this.props.i18n._('Product item IDs can be found in your data source', 'Helper text for where to find a product\'s item ID in a catalog', 'Helper text for where to find a product\'s item ID in a catalog')})]}),(0,b.jsx)(o.xu,{width:486,children:(0,b.jsx)(tO,{id:"asset-picker-itemid",onSubmit:this.handleOnSubmit,placeholder:this.props.i18n._('Enter product item ID', 'Placeholder for entering an item ID for a product from a catalog', 'Placeholder for entering an item ID for a product from a catalog')})}),l&&(0,b.jsx)(o.xu,{maxWidth:468,padding:5,children:(0,b.jsx)(o.xv,{align:"center",color:"error",size:"200",children:l})})]})})}}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,tL(r.key),r)}}(i.prototype,n),Object.defineProperty(i,"prototype",{writable:!1}),i}(r.Component);function tZ(e){var t=(0,eY.u)().logContextEvent,n=(0,u.ZP)();return(0,b.jsx)(tF,tD(tD({},e),{},{i18n:n,logContextEvent:t}))}var tM=n(640924);function tN(e){var t=e.onSubmit,n=e.title,r=e.description,i=e.validationError,a=(0,u.ZP)();return(0,b.jsxs)(o.xu,{alignItems:"center",direction:"column",display:"flex",height:"100%",justifyContent:"center",padding:4,children:[(0,b.jsxs)(o.xu,{marginBottom:3,children:[(0,b.jsx)(o.xv,{align:"center",weight:"bold",children:n||a._('Upload an image from your website', 'Prompt for scraping media from site', 'Prompt for scraping media from site')}),r&&(0,b.jsx)(o.xv,{children:r})]}),(0,b.jsx)(o.xu,{width:486,children:(0,b.jsx)(tO,{id:"asset-picker-url",onSubmit:t,placeholder:a._('Enter your website URL', 'Placeholder for entering website URL', 'Placeholder for entering website URL'),type:"url"})}),i&&(0,b.jsx)(o.xu,{maxWidth:468,padding:5,children:(0,b.jsx)(o.xv,{align:"center",color:"error",size:"200",children:i})})]})}var tH=n(162931),tU=n(233624),tW=n(481849);function tV(e){var t=e.allowPinFetch,n=e.onSelect,r=e.onSubmit,i=e.selectedAssets,a=e.url,l=e.validationError,s=(0,u.ZP)(),c=(0,tU.Z)(a)?/\/pin\/([\w-]+)\/?$/.exec(a):null;return(0,b.jsx)(o.xu,{"data-test-id":"asset-picker-scraping-pane",height:"100%",children:c&&t?(0,b.jsx)(tW.Z,{fieldSetKey:"images_only_item",pinId:c[1],children:function(e){var t=e.pin,l=e.error;return e.loading&&!l?(0,b.jsxs)(o.kC,{alignItems:"center",direction:"column",height:"100%",justifyContent:"center",children:[(0,b.jsx)(o.xH,{accessibilityLabel:s._('Loading', 'Accessibility label for spinner loading', 'Accessibility label for spinner loading'),show:!0}),(0,b.jsx)(o.xu,{padding:2,children:(0,b.jsx)(o.xv,{children:s._('Loading image', 'Loading message for image loading', 'Loading message for image loading')})})]}):(0,b.jsxs)(o.xu,{children:[(0,b.jsx)(o.xu,{marginBottom:4,paddingX:3,children:(0,b.jsx)(tO,{id:"asset-picker-url",initialValue:a,onSubmit:r,placeholder:s._('Enter your website URL', 'Placeholder for entering website URL', 'Placeholder for entering website URL'),type:"url"})}),l?(0,b.jsx)(o.xu,{maxWidth:468,padding:5,children:(0,b.jsx)(o.xv,{align:"center",color:"error",size:"200",children:s._('Hmm, that link didn\u2019t work. Try entering it again or use a different link.', 'Error message when scraping a link does not work.', 'Error message when scraping a link does not work.')})}):(0,b.jsx)(eI,{assets:t?[t]:[],onSelect:n,selectedAssets:i,showAddAssetButton:!1})]})}}):(0,b.jsx)(tH.ZP,{source:"product_tags",url:a,children:function(e){var t=e.images,c=e.loading,u=e.error;return!c||l||u?(t.forEach(function(e){return Object.assign(e,{id:e.url,src:e.url,type:"webImage",sourceURL:a})}),(0,b.jsxs)(o.xu,{children:[(0,b.jsx)(o.xu,{marginBottom:4,paddingX:3,children:(0,b.jsx)(tO,{id:"asset-picker-url",initialValue:a,onSubmit:r,placeholder:s._('Enter your website URL', 'Placeholder for entering website URL', 'Placeholder for entering website URL'),type:"url"})}),l||u?(0,b.jsx)(o.xu,{"data-test-id":"scrape-validation-error",maxWidth:468,padding:5,children:(0,b.jsx)(o.xv,{align:"center",color:"error",size:"200",children:l||u})}):(0,b.jsx)(eI,{assets:t,onSelect:n,selectedAssets:i,showAddAssetButton:!1})]})):(0,b.jsxs)(o.kC,{alignItems:"center",direction:"column",height:"100%",justifyContent:"center",children:[(0,b.jsx)(o.xH,{accessibilityLabel:s._('Loading', 'Accessibility label for spinner loading', 'Accessibility label for spinner loading'),show:!0}),(0,b.jsx)(o.xu,{padding:2,children:(0,b.jsx)(o.xv,{children:s._('Loading images', 'Loading message for image loading', 'Loading message for image loading')})})]})}})})}function tG(e){return(tG="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function tX(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function tY(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?tX(Object(n),!0).forEach(function(t){tQ(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tX(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function tq(e,t){return(tq=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function tK(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function tJ(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(tJ=function(){return!!e})()}function t$(e){return(t$=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function tQ(e,t,n){return(t=t0(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function t0(e){var t=function(e,t){if("object"!=tG(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=tG(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==tG(t)?t:t+""}var t1=function(e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");i.prototype=Object.create(e&&e.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),Object.defineProperty(i,"prototype",{writable:!1}),e&&tq(i,e);var t,n,r=(t=tJ(),function(){var e,n=t$(i);return e=t?Reflect.construct(n,arguments,t$(this).constructor):n.apply(this,arguments),function(e,t){if(t&&("object"==tG(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return tK(e)}(this,e)});function i(){var e;if(!(this instanceof i))throw TypeError("Cannot call a class as a function");for(var t=arguments.length,n=Array(t),o=0;o<t;o++)n[o]=arguments[o];return tQ(tK(e=r.call.apply(r,[this].concat(n))),"state",{url:"",validationError:null}),tQ(tK(e),"validateUrl",function(t){var n=e.props.usedUrls;return e.validateWebsiteUrl(t)||(n.includes(t)?e.props.i18n._('You can\'t tag from the same page twice.', 'AssetPickerScrapeTab.repeatedURL', 'Error message for using the same product link twice on a Pin tag'):null)}),tQ(tK(e),"validateWebsiteUrl",function(t){var n=e.props.i18n._('Please enter a valid URL', 'AssetPickerScrapeTab.invalidURL', 'Error message for invalid/empty url');if(!t)return n;var r=(0,tM.Jx)({message:n});return(0,tM.a3)(t,[r])}),tQ(tK(e),"handleOnSubmit",function(t){var n=t.value;e.props.logContextEvent({event_type:7472,component:13392,element:11267,aux_data:{url:n}});var r=n.trim(),o=e.validateUrl(r);e.setState({url:r,validationError:o})}),tQ(tK(e),"handleOnSelect",function(t){var n=e.props,r=n.resetOnSelect,o=n.onSelect;void 0!==r&&r&&e.setState({url:""}),o(t)}),e}return n=[{key:"render",value:function(){var e=this.props,t=e.selectedAssets,n=e.visible,r=e.title,i=e.description,a=this.state,l=a.url,s=a.validationError;return(0,b.jsx)(o.xu,{column:12,display:n?"block":"none",height:"100%",padding:3,children:l.length>0?(0,b.jsx)(tV,{allowPinFetch:!0,onSelect:this.handleOnSelect,onSubmit:this.handleOnSubmit,selectedAssets:t,url:l,validationError:s}):(0,b.jsx)(tN,{description:i,onSubmit:this.handleOnSubmit,title:r,validationError:s})})}}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,t0(r.key),r)}}(i.prototype,n),Object.defineProperty(i,"prototype",{writable:!1}),i}(r.Component);function t2(e){var t=(0,eY.u)().logContextEvent,n=(0,u.ZP)();return(0,b.jsx)(t1,tY(tY({},e),{},{i18n:n,logContextEvent:t}))}var t8=n(676934),t3=n(383673);function t5(e){return(t5="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function t6(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function t4(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?t6(Object(n),!0).forEach(function(t){no(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):t6(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function t9(e){return function(e){if(Array.isArray(e))return t7(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return t7(e,void 0);var n=({}).toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?t7(e,void 0):void 0}}(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t7(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function ne(e,t){return(ne=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function nt(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function nn(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(nn=function(){return!!e})()}function nr(e){return(nr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function no(e,t,n){return(t=ni(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ni(e){var t=function(e,t){if("object"!=t5(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=t5(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==t5(t)?t:t+""}var na=function(e){var t=e.condition,n=e.children;return t?(0,b.jsx)(o.xu,{position:"absolute",zIndex:tc.b7,children:n}):n},nl=function(e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");l.prototype=Object.create(e&&e.prototype,{constructor:{value:l,writable:!0,configurable:!0}}),Object.defineProperty(l,"prototype",{writable:!1}),e&&ne(l,e);var t,n,a=(t=nn(),function(){var e,n=nr(l);return e=t?Reflect.construct(n,arguments,nr(this).constructor):n.apply(this,arguments),function(e,t){if(t&&("object"==t5(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return nt(e)}(this,e)});function l(e){var t;if(!(this instanceof l))throw TypeError("Cannot call a class as a function");return no(nt(t=a.call(this,e)),"state",{activeTabIndex:t.props.initialTab&&t.props.shownTabs?t.props.shownTabs.indexOf(t.props.initialTab):0,assets:t.props.selectedPins||[],isLoading:!1,isDropboxFlyoutOpen:!1,error:null,usedUrls:[]}),no(nt(t),"downloadDropboxAssets",function(){var e=t.state.assets,n=t.props,r=n.i18n,o=n.ideaPinRenamingEnabled;return Promise.all(e.map(function(e){return"dropboxFile"===e.type?(0,s.Z)({url:"/v3/dropbox/files/",data:{paths:[e.id],add_fields:["dropboxfile.file_base64"]}}).then(function(t){var n=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:512,r=atob(e),o=[],i=0;i<r.length;i+=n){for(var a=r.slice(i,i+n),l=Array(a.length),s=0;s<a.length;s+=1)l[s]=a.charCodeAt(s);var c=new Uint8Array(l);o.push(c)}return new Blob(o,{type:t})}(t.resource_response.data[0].file_base64);return(0,tu.Z)({i18n:r,ideaPinRenamingEnabled:o,file:new File([n],e.name,{type:function(e){switch(e){case"jpg":case"jpeg":return"image/jpeg";case"png":return"image/png";case"gif":return"image/gif";case"bmp":return"image/bmp";case"tiff":return"image/tiff";case"webp":return"image/webp";case"mp4":return"video/mp4";case"m4v":return"video/x-m4v";case"mov":return"video/quicktime";default:return""}}(v(e.name)),lastModified:e.lastModified.getTime()}),options:{allowVideo:!0}})}).catch(function(){return null}):e}))}),no(nt(t),"handleChangeTab",function(e){var n=e.activeTabIndex,r=e.event;(0,e.dangerouslyDisableOnNavigation)(),r.preventDefault(),t.setState({activeTabIndex:n})}),no(nt(t),"handleAssetSelect",function(e){t.props.logContextEvent({event_type:101,component:13392,element:11272});var n=t.props.maxAssetsToSelect,r=t.state,o=r.assets,i=r.usedUrls;if(e.id){if(o.some(function(t){return t.id===e.id}))t.setState({assets:o.filter(function(t){return t.id!==e.id}),usedUrls:i.filter(function(n){return n!==t.getUrl(e)})});else if(n<=0||o.length<n){var a=t.getUrl(e);t.setState({assets:[].concat(t9(o),[e]),usedUrls:a?[].concat(t9(i),[a]):i})}}}),no(nt(t),"getUrl",function(e){switch(e.type){case"pin":return e.link;case"webImage":return e.sourceURL;default:return null}}),no(nt(t),"handleSecondaryAction",function(){var e=t.props,n=e.onSecondaryAction,r=e.onDismiss,o=e.logContextEvent,i=t.state.assets;n&&(o({event_type:101,component:13392,element:11271,aux_data:{pin_builder_data:JSON.stringify({media_types:i.map(function(e){return e.type})})}}),t.setState({isLoading:!0},function(){t.downloadDropboxAssets().then(function(e){if(e){var t=e.filter(function(e){return!!e&&"error"!==e.type});t.length>0&&n(t)}r()})}))}),no(nt(t),"handlePrimaryAction",function(){var e=t.props,n=e.onPrimaryAction,r=e.onDismiss;(0,e.logContextEvent)({event_type:101,component:13392,element:11269,aux_data:{pin_builder_data:JSON.stringify({media_types:t.state.assets.map(function(e){return e.type})})}}),t.setState({isLoading:!0},function(){t.downloadDropboxAssets().then(function(e){if(e){var t=e.filter(function(e){return!!e&&"error"!==e.type});t.length>0&&n(t)}r()})})}),no(nt(t),"handleRemoveAsset",function(e){if(t.props.logContextEvent({event_type:101,component:13392,element:11274}),e.id){var n=t.getUrl(e),r=n?[].concat(t9(t.state.usedUrls),[n]):t.state.usedUrls;t.setState(function(t){return{assets:t.assets.some(function(t){return t.id===e.id})?t.assets.filter(function(t){return t.id!==e.id}):[].concat(t9(t.assets),[e]),usedUrls:t.usedUrls.some(function(e){return e===n})?t.usedUrls.filter(function(e){return e!==n}):r}})}}),no(nt(t),"removeError",function(){t.props.logContextEvent({event_type:101,component:13392,element:11264}),t.setState({error:null})}),no(nt(t),"handleSetLoading",function(e,n){n?t.setState({isLoading:e},n):t.setState({isLoading:e})}),no(nt(t),"handleSetError",function(e,n,r){if(e||n||r){var i=(0,b.jsx)(o.zx,{color:"white",onClick:t.removeError,text:t.props.i18n._('Got it', 'Button text to indicate a user understands action', 'Button text to indicate a user understands action')});t.setState({error:(0,b.jsx)(t8.Z,{errorMessage:e,primaryAction:n||i,secondaryAction:r})})}else t.setState({error:null})}),no(nt(t),"handleDismiss",function(){var e=t.props.onDismiss;t.state.isDropboxFlyoutOpen||e()}),no(nt(t),"handleDropboxFlyoutChange",function(e){return t.setState({isDropboxFlyoutOpen:e})}),no(nt(t),"defaultPrimaryText",function(e){return(0,eW.Z)(t.props.i18n.ngettext('Create Pin', 'Create {{ numPins }} Pins', e, 'Button to create Pins out of selected assets', 'Button to create Pins out of selected assets'),{numPins:e})}),(0,t3.Z)(),t}return n=[{key:"componentDidMount",value:function(){var e=this,t=this.props.selectedPins?this.props.selectedPins.map(function(t){return e.getUrl(t)||""}).filter(function(e){return e.length>0}):[];this.setState({usedUrls:t})}},{key:"render",value:function(){var e=this,t=this.props,n=t.closeOnOutsideClick,a=t.isSecondaryButtonDisabled,l=t.onSecondaryAction,s=t.primaryButtonText,c=void 0===s?this.defaultPrimaryText:s,u=t.pinItemId,d=t.resetScrapeOnSelect,f=t.scrapeDescription,p=t.scrapeTitle,h=t.secondaryButtonText,y=t.useModalWithNoLayer,m=void 0!==y&&y,v=this.props.shownTabs?this.props.shownTabs:["upload","scrape"],_=this.state,x=_.activeTabIndex,j=_.assets,P=_.usedUrls,O=_.isLoading,S=_.error,A="string"==typeof c?c:c(j.length),I=h||this.props.i18n._('Create carousel Pin', 'Button to create carousel Pin out of selected assets', 'Button to create carousel Pin out of selected assets'),E=[];v.includes("product_pins")&&E.push({text:this.props.i18n._('Your Pins', 'Tab on asset picker to select from user\'s product pins.', 'Tab on asset picker to select from user\'s product pins.'),href:"#"}),v.includes("upload")&&E.push({text:this.props.i18n._('Assets', 'Tab on asset picker to select from uploaded assets', 'Tab on asset picker to select from uploaded assets'),href:"#"}),v.includes("scrape")&&E.push({text:this.props.i18n._('URL', 'Tab on asset picker to select from scraped URL', 'Tab on asset picker to select from scraped URL'),href:"#"}),v.includes("dropbox")&&E.push({text:this.props.i18n._('Dropbox', 'Tab on asset picker to select from Dropbox', 'Tab on asset picker to select from Dropbox'),href:"#"}),v.includes("catalog")&&E.push({text:this.props.i18n._('Catalog', 'Tab on asset picker to upload pin from product catalog', 'Tab on asset picker to upload pin from product catalog'),href:"#"});var C=m?o.u_:ts.ZP;return(0,b.jsx)(na,{condition:!!m,children:(0,b.jsx)(C,{accessibilityModalLabel:this.props.i18n._('Select assets', 'Label to describe the asset picker', 'Label to describe the asset picker'),closeOnOutsideClick:n,footer:(0,b.jsxs)(o.xu,{display:"flex",marginBottom:-4,children:[(0,b.jsx)(o.xu,{display:"flex",flex:"grow",height:"100%",marginEnd:8,children:(0,b.jsx)(o.xu,{marginTop:-4,width:"100%",children:(0,b.jsx)(i.Z,{showArrowsOnlyOnHover:!1,children:(0,b.jsx)(o.xu,{"data-group-id":"asset-picker-thumbnails-carousel-group",display:"flex",height:48,paddingY:1,children:j.map(function(t,n){var r=(0,g.Z)(t);return(0,b.jsxs)(o.xu,{"data-test-id":"asset-picker-thumbnail",display:"flex",flex:"none",height:44,padding:1,position:"relative",width:44,children:[(0,b.jsx)(ew,{asset:t,height:40,width:40}),(0,b.jsx)(o.xu,{color:"tertiary",height:16,marginEnd:-1,marginTop:-1,padding:1,position:"absolute",right:!0,rounding:"circle",top:!0,width:16,children:(0,b.jsx)(o.iP,{fullHeight:!0,fullWidth:!0,onTap:function(){return e.handleRemoveAsset(t)},children:(0,b.jsx)(o.JO,{accessibilityLabel:e.props.i18n._('Remove Asset', 'Icon button to remove selected media file', 'Icon button to remove selected media file'),color:"inverse",icon:"cancel",size:8})})}),!!r&&(0,b.jsx)(o.xu,{bottom:!0,left:!0,position:"absolute",children:(0,b.jsx)(w,{type:r})})]},"asset-picker-thumbnail-".concat(n))})})})})}),(0,b.jsxs)(o.xu,{display:"flex",flex:"none",margin:-3,marginTop:1,children:[!!l&&(0,b.jsx)(o.xu,{"data-test-id":"asset-picker-secondary-action-button",paddingX:1,children:(0,b.jsx)(o.zx,{color:"gray",disabled:!!a&&(j.length<2||j.length>ef.dS||j.some(function(e){return"localImage"!==e.type})),onClick:this.handleSecondaryAction,text:I})}),(0,b.jsx)(o.xu,{"data-test-id":"asset-picker-primary-action-button",paddingX:1,children:(0,b.jsx)(o.zx,{color:"red",disabled:0===j.length,onClick:this.handlePrimaryAction,text:A})})]})]}),heading:(0,b.jsx)(o.xu,{alignItems:"center","data-test-id":"tabs-header-list",display:"flex",justifyContent:"center",padding:4,children:(0,b.jsx)(o.mQ,{activeTabIndex:x,onChange:this.handleChangeTab,tabs:E})}),onDismiss:this.handleDismiss,size:912,children:(0,b.jsxs)(r.Fragment,{children:[(0,b.jsxs)(o.xu,{height:460,overflow:"auto",children:[!!S&&S,v.includes("upload")&&(0,b.jsx)(tl,{onSelect:this.handleAssetSelect,selectedAssets:j,setError:this.handleSetError,visible:x===v.indexOf("upload")}),v.includes("scrape")&&(0,b.jsx)(t2,{description:f,onSelect:this.handleAssetSelect,resetOnSelect:d,selectedAssets:j,title:p,usedUrls:P,visible:x===v.indexOf("scrape")}),v.includes("dropbox")&&(0,b.jsx)(es,{onFlyoutChange:this.handleDropboxFlyoutChange,onSelect:this.handleAssetSelect,selectedAssets:j,setError:this.handleSetError,visible:x===v.indexOf("dropbox")}),v.includes("product_pins")&&(0,b.jsx)(eU,{onSelect:this.handleAssetSelect,pinItemId:u,selectedAssets:j,visible:x===v.indexOf("product_pins")}),v.includes("catalog")&&(0,b.jsx)(tZ,{onSelect:this.handleAssetSelect,selectedAssets:j,visible:x===v.indexOf("catalog")})]}),O&&(0,b.jsx)(o.xu,{alignItems:"center",bottom:!0,display:"flex",justifyContent:"center",left:!0,position:"absolute",right:!0,top:!0,children:(0,b.jsx)(o.xH,{accessibilityLabel:"Dropbox Loading Spinner",show:!0})})]})})})}}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ni(r.key),r)}}(l.prototype,n),Object.defineProperty(l,"prototype",{writable:!1}),l}(r.Component);function ns(e){var t=(0,u.ZP)(),n=(0,a.Z)(),r=(0,eY.u)().logContextEvent;return(0,b.jsx)(nl,t4(t4({},e),{},{i18n:t,ideaPinRenamingEnabled:n,logContextEvent:r}))}no(nl,"defaultProps",{shownTabs:["upload","scrape"],maxAssetsToSelect:0})},7580:function(e,t,n){"use strict";n.d(t,{Z:function(){return f}});var r=n(581722),o=n(20256),i=n(682290),a=n(19585),l=n(302148),s=n(382718);function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function u(){var e;return((function(e){if(Array.isArray(e))return c(e)})(e=Array(8))||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return c(e,void 0);var n=({}).toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(e,void 0):void 0}}(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).map(function(e,t){return(0,s.jsx)(o.xu,{borderStyle:"sm","data-test-id":"StlTaggedProductsEmptyStateGrid-".concat(t),height:105,marginEnd:2*(3!==t&&7!==t),marginTop:4*(t>=4),rounding:3,width:105},t)})}var d=n(400704);function f(e){var t=(0,a.ZP)(),n=e.pinTagId,c=e.taggedObjects,f=(0,r.v9)(function(t){return(0,d.Xe)(t,e)}),p=c.length>0,h=(0,l.nk)(t._('{{ count }}/8', 'pinbuilder.taggedProducts.count', 'The number of tagged products'),{count:c.length}).join(""),y="collectionsTag"===f;return(0,s.jsxs)(o.xu,{column:12,"data-test-id":"stl-tagged-items-grid",children:[(!n||n&&0===c.length)&&y&&(0,s.jsx)(o.kC,{alignItems:"stretch",justifyContent:"start",wrap:!0,children:(0,s.jsx)(u,{})}),!y&&(0,s.jsxs)(o.kC,{alignItems:"stretch",justifyContent:"between",children:[(0,s.jsx)(o.xv,{size:"100",children:t._('Tag up to 8 products in the scene', 'pinbuilder.taggedProducts.limit', 'Users can tag the image with up to 8 products')}),(0,s.jsx)(o.xv,{size:"100",children:h})]}),(0,s.jsx)(o.xu,{display:"flex",marginBottom:p?10:void 0,marginTop:10*!!p,width:445,wrap:!0,children:!!n&&p&&c.map(function(e,t){return(0,s.jsx)(o.xu,{children:(0,s.jsx)(i.Z,{index:t,pinTagId:e.pinTagId,size:"md",status:e.status,taggedObjectId:e.taggedObjectId})},e.taggedObjectId)})})]})}},282169:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return tU},PinBuilderEditor:function(){return tH}});var r=n(586659),o=n(581722),i=n(20256),a=n(575108),l=n(865540),s=n(967308),c=n(980787),u=n(19585),d=n(526435),f=n(15667),p=n(694955),h=n(767209),y=n(70012),b=n(315280),m=n(382718);function g(e){var t,n,r,o,a=e.isSelected,l=e.disabled,s=e.onClick,c=e.ratio,u=e.width,d=void 0===u?84:u,f={width:d,backgroundColor:a?"#fff":"#efefef",border:a?"2px solid #e50c29":"2px solid #efefef",borderRadius:8,boxSizing:"border-box",cursor:l?"default":"pointer",height:d*(null!=(t=c.h)?t:1)/(null!=(n=c.w)?n:1),outline:"none",opacity:l?.5:void 0,padding:0};return(0,m.jsx)(i.iP,{disabled:l,onTap:s,children:(0,m.jsx)(i.xu,{alignItems:"center",dangerouslySetInlineStyle:{__style:f},display:"flex",justifyContent:"center",rounding:2,children:(0,m.jsx)(i.xv,{color:"default",size:"200",weight:"bold",children:"".concat(null!=(r=c.w)?r:1,":").concat(null!=(o=c.h)?o:1)})})})}function v(e){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function x(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_(Object(n),!0).forEach(function(t){S(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function j(e,t){return(j=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function P(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function O(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(O=function(){return!!e})()}function w(e){return(w=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function S(e,t,n){return(t=A(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function A(e){var t=function(e,t){if("object"!=v(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=v(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==v(t)?t:t+""}var I=function(e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");o.prototype=Object.create(e&&e.prototype,{constructor:{value:o,writable:!0,configurable:!0}}),Object.defineProperty(o,"prototype",{writable:!1}),e&&j(o,e);var t,n,r=(t=O(),function(){var e,n=w(o);return e=t?Reflect.construct(n,arguments,w(this).constructor):n.apply(this,arguments),function(e,t){if(t&&("object"==v(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return P(e)}(this,e)});function o(e){var t;if(!(this instanceof o))throw TypeError("Cannot call a class as a function");return S(P(t=r.call(this,e)),"onClickAspectRatio",function(e){var n=t.props,r=n.aspectRatioIndex,o=n.aspectRatios,i=n.canDeselectAspectRatio,a=n.onSelectAspectRatioIndex,l=n.numImages,s=n.pinCanvas,c=n.logContextEvent;if(s){var u,d,f=o[e],p=e===r&&i&&1===l;p?(s.setAspectRatio(null),a(null)):(s.setAspectRatio(f),a(e)),c({event_type:101,component:13780,element:12137,aux_data:{aspect_ratio:f?"".concat(null!=(u=f.w)?u:1,":").concat(null!=(d=f.h)?d:1):null,selected:!p}})}}),S(P(t),"onClickRotateImage",function(){var e=t.props,n=e.pinCanvas,r=e.logContextEvent;n&&n.rotateImage("clockwise"),r({event_type:101,component:13780,element:12138,aux_data:{editor_option:"rotate"}})}),S(P(t),"onClickFlipImageHorizontal",function(){var e=t.props,n=e.pinCanvas,r=e.logContextEvent;n&&n.flipImage("horizontal"),r({event_type:101,component:13780,element:12138,aux_data:{editor_option:"horizontal_flip"}})}),S(P(t),"onClickFlipImageVertical",function(){var e=t.props,n=e.pinCanvas,r=e.logContextEvent;n&&n.flipImage("vertical"),r({event_type:101,component:13780,element:12138,aux_data:{editor_option:"vertical_flip"}})}),S(P(t),"onClickScaleImage",function(){var e=t.props,n=e.isScalingMode,r=e.pinCanvas,o=e.logContextEvent;r&&(n?r.exitScalingMode():r.enterScalingMode()),o({event_type:101,component:13780,element:12138,aux_data:{editor_option:"scale_mode_".concat(n?"exit":"enter")}})}),S(P(t),"onClickAddImage",function(){var e=t.props,n=e.numImages,r=e.logContextEvent;t.setState({isAssetPickerOpen:!0,isReplace:!1,maxAssetsToSelect:d.Xy-n}),r({event_type:101,component:13780,element:12139,aux_data:{editor_option:"add_image"}})}),S(P(t),"onClickReplaceImage",function(){t.setState({isAssetPickerOpen:!0,isReplace:!0}),t.props.logContextEvent({event_type:101,component:13780,element:12139,aux_data:{editor_option:"replace_image"}})}),S(P(t),"onClickDeleteImage",function(){var e=t.props,n=e.pinCanvas,r=e.logContextEvent;n&&n.removeImage(),r({event_type:101,component:13780,element:12139,aux_data:{editor_option:"delete_image"}})}),S(P(t),"onAddImageInputChange",function(e){var n=t.props,r=n.i18n,o=n.ideaPinRenamingEnabled,i=e.target.files?Array.from(e.target.files):[];(0,b.Z)({i18n:r,ideaPinRenamingEnabled:o,files:i,options:{allowVideo:!1}}).then(function(e){var n=e.filter(function(e){return"error"!==e.type});t.handleAddImage(n)}),t.props.logContextEvent({event_type:101,component:13780,element:12139,aux_data:{editor_option:"add_image"}})}),S(P(t),"onReplaceImageInputChange",function(e){var n=t.props,r=n.i18n,o=n.ideaPinRenamingEnabled,i=e.target.files?Array.from(e.target.files):[];(0,b.Z)({i18n:r,ideaPinRenamingEnabled:o,files:i,options:{allowVideo:!1}}).then(function(e){var n=e.filter(function(e){return"error"!==e.type});t.handleReplaceImage(n)}),t.props.logContextEvent({event_type:101,component:13780,element:12139,aux_data:{editor_option:"replace_image"}})}),S(P(t),"handleAddImage",function(e){var n=t.props.pinCanvas,r=e.map(function(e){return e.src}).filter(function(e){return!!e});n&&r.length>0&&r.forEach(function(e){n.addImage(e)})}),S(P(t),"handleReplaceImage",function(e){var n=t.props.pinCanvas,r=e.map(function(e){return e.src}).filter(function(e){return!!e});n&&r.length>0&&n.replaceImage(r[0])}),S(P(t),"handleDismiss",function(){t.setState({isAssetPickerOpen:!1})}),S(P(t),"onClickReset",function(){var e=t.props,n=e.aspectRatios,r=e.canDeselectAspectRatio,o=e.pinCanvas,i=e.onReset,a=e.logContextEvent;o&&(o.resetCrop(),o.setAspectRatio(r?null:n[0]),i()),a({event_type:101,component:13780,element:12135,aux_data:{editor_mode:"crop"}})}),t.state={isAssetPickerOpen:!1,isReplace:!1,maxAssetsToSelect:0},t}return n=[{key:"render",value:function(){var e=this,t=this.props,n=t.aspectRatioIndex,r=t.aspectRatios,o=t.imageFileTypes,a=t.isImageSelected,l=t.isScalingMode,c=t.numImages,u=t.mediaType,f=t.videoStartText,y=t.videoEndText,b=t.validateStartTime,v=t.validateEndTime,_=t.handleEndTimeChange,x=t.handleStartTimeChange,j=this.state,P=j.isAssetPickerOpen,O=j.isReplace,w=j.maxAssetsToSelect,S=!a,A=c>1&&l,I=this.props.i18n._('Rotate 90\xB0', 'Rotate the angle of the image by 90 degrees', 'Rotate the angle of the image by 90 degrees'),E=this.props.i18n._('Flip image horizontally', 'Flip the image on the horizontal axis', 'Flip the image on the horizontal axis'),C=this.props.i18n._('Flip image vertically', 'Flip the image on the vertical axis', 'Flip the image on the vertical axis'),D=this.props.i18n._('Resize image', 'Resize an image in the collage Pin', 'Resize an image in the collage Pin'),T=this.props.i18n._('Add image', 'Add image to the collage Pin', 'Add image to the collage Pin'),k=this.props.i18n._('Replace image', 'Replace image in the collage Pin', 'Replace image in the collage Pin'),z=this.props.i18n._('Delete image', 'Delete image from the collage Pin', 'Delete image from the collage Pin');return(0,m.jsxs)(i.xu,{column:12,direction:"column",display:"flex",children:[(0,m.jsxs)(i.xu,{flex:"grow",overflow:"auto",padding:8,position:"relative",children:[(0,m.jsx)(i.xu,{marginBottom:3,children:(0,m.jsx)(i.X6,{size:"600",children:"video"===u?this.props.i18n._('Trim & Crop', 'cropPane.heading', 'Trim and crop the video selected in Pin Builder.'):this.props.i18n._('Crop', 'cropPane.heading', 'Crop the image selected in Pin Builder.')})}),(0,m.jsx)(i.xu,{marginBottom:8,children:(0,m.jsx)(i.xv,{children:this.props.i18n._('Crop and adjust your image to focus on the most interesting part', 'Describing what this tool is about.', 'Describing what this tool is about.')})}),(0,m.jsxs)(i.xu,{children:[(0,m.jsx)(i.xv,{size:"200",weight:"bold",children:this.props.i18n._('Aspect ratio', 'Adjust the aspect ratio of the cropping.', 'Adjust the aspect ratio of the cropping.')}),(0,m.jsx)(i.xu,{paddingY:1,children:(0,m.jsx)(i.xv,{color:"subtle",size:"200",children:this.props.i18n._('We recommend a 2:3 aspect ratio for most Pins on Pinterest', 'Recommendation for the best aspect ratio for an image on Pinterest', 'Recommendation for the best aspect ratio for an image on Pinterest')})}),(0,m.jsx)(i.xu,{display:"flex",marginEnd:-2,marginStart:-2,marginTop:2,children:r.map(function(t,r){return(0,m.jsx)(i.xu,{"data-test-id":"pinbuilder-editor-aspect-ratio-crop-button",flex:"none",paddingX:2,children:(0,m.jsx)(g,{disabled:A,isSelected:r===n,onClick:function(){return e.onClickAspectRatio(r)},ratio:t})},r)})})]}),(0,m.jsxs)(i.xu,{marginTop:8,children:[(0,m.jsx)(i.xv,{size:"200",weight:"bold",children:this.props.i18n._('Adjust', 'Adjust the rotation of the image', 'Adjust the rotation of the image')}),(0,m.jsxs)(i.xu,{display:"flex",marginEnd:-1,marginStart:-1,marginTop:4,children:[(0,m.jsx)(i.xu,{"data-test-id":"pinbuilder-editor-rotate-right-button",paddingX:1,children:(0,m.jsx)(i.u,{text:I,children:(0,m.jsx)(i.hU,{accessibilityLabel:I,bgColor:"lightGray",disabled:S,icon:"rotate",iconColor:"darkGray",onClick:this.onClickRotateImage,size:"md"})})}),"video"!==u&&(0,m.jsx)(i.xu,{"data-test-id":"pinbuilder-editor-flip-button-horizontal",paddingX:1,children:(0,m.jsx)(i.u,{text:E,children:(0,m.jsx)(i.hU,{accessibilityLabel:E,bgColor:"lightGray",disabled:S,icon:"flip-horizontal",iconColor:"darkGray",onClick:this.onClickFlipImageHorizontal,size:"md"})})}),"video"!==u&&(0,m.jsx)(i.xu,{"data-test-id":"pinbuilder-editor-flip-button-vertical",paddingX:1,children:(0,m.jsx)(i.u,{text:C,children:(0,m.jsx)(i.hU,{accessibilityLabel:C,bgColor:"lightGray",disabled:S,icon:"flip-vertical",iconColor:"darkGray",onClick:this.onClickFlipImageVertical,size:"md"})})}),"video"!==u&&(0,m.jsx)(i.xu,{"data-test-id":"pinbuilder-editor-move-button",paddingX:1,children:(0,m.jsx)(i.u,{text:D,children:(0,m.jsx)(i.hU,{accessibilityLabel:D,bgColor:l?"transparentDarkGray":"lightGray",disabled:1===c||!a,icon:"scale",iconColor:l?"white":"darkGray",onClick:this.onClickScaleImage,size:"md"})})})]})]}),"video"!==u&&(0,m.jsxs)(i.xu,{marginTop:8,children:[(0,m.jsx)(i.xv,{size:"200",weight:"bold",children:this.props.i18n._('Change an image', 'Heading for buttons that add, replace and remove an image', 'Heading for buttons that add, replace and remove an image')}),(0,m.jsxs)(i.xu,{display:"flex",marginEnd:-1,marginStart:-1,marginTop:4,children:[(0,m.jsx)(i.xu,{"data-test-id":"pinbuilder-editor-add-image-button",paddingX:1,children:(0,m.jsx)(i.u,{text:T,children:c<d.Xy?(0,m.jsx)(h.Z,{accept:o.join(","),allowMultipleFiles:!0,color:"white",id:"layouts-add-image-input",onChange:this.onAddImageInputChange,children:function(){return(0,m.jsx)(i.hU,{accessibilityLabel:T,bgColor:"lightGray",disabled:c>=d.Xy,icon:"add-layout",iconColor:"darkGray",size:"md"})}}):(0,m.jsx)(i.hU,{accessibilityLabel:T,bgColor:"lightGray",disabled:c>=d.Xy,icon:"add-layout",iconColor:"darkGray",onClick:this.onClickAddImage,size:"md"})})}),(0,m.jsx)(i.xu,{"data-test-id":"pinbuilder-editor-replace-image-button",paddingX:1,children:(0,m.jsx)(i.u,{text:k,children:S?(0,m.jsx)(i.hU,{accessibilityLabel:k,bgColor:"lightGray",disabled:S,icon:"replace",iconColor:"darkGray",onClick:this.onClickReplaceImage,size:"md"}):(0,m.jsx)(h.Z,{accept:o.join(","),allowMultipleFiles:!1,color:"white",id:"layouts-replace-image-input",onChange:this.onReplaceImageInputChange,children:function(){return(0,m.jsx)(i.hU,{accessibilityLabel:k,bgColor:"lightGray",disabled:S,icon:"replace",iconColor:"darkGray",size:"md"})}})})}),(0,m.jsx)(i.xu,{"data-test-id":"pinbuilder-editor-delete-image-button",paddingX:1,children:(0,m.jsx)(i.u,{text:z,children:(0,m.jsx)(i.hU,{accessibilityLabel:z,bgColor:"lightGray",disabled:S||1===c,icon:"trash-can",iconColor:"darkGray",onClick:this.onClickDeleteImage,size:"md"})})})]})]}),"video"===u&&(0,m.jsxs)(i.xu,{marginTop:8,children:[(0,m.jsx)(i.xv,{size:"200",weight:"bold",children:this.props.i18n._('Trim', 'Adjust the start and end time of the video', 'Adjust the start and end time of the video')}),(0,m.jsx)(i.xu,{paddingY:1,children:(0,m.jsxs)(i.xv,{color:"subtle",size:"200",children:[this.props.i18n._('Video Pins 1 to 2 minutes long work best. Video ads 6 to 15 seconds long work best. ', 'Recommendation for the best video length for video on Pinterest', 'Recommendation for the best video length for video on Pinterest'),(0,m.jsx)(i.rU,{display:"inlineBlock",href:p.Moe,onClick:function(e){return(0,e.dangerouslyDisableOnNavigation)()},target:"blank",underline:"hover",children:this.props.i18n._('Learn More.', 'Link to Pinterest help center about creative best practices', 'Link to Pinterest help center about creative best practices')})]})}),(0,m.jsxs)(i.xu,{display:"flex",marginEnd:-1,marginStart:-1,marginTop:4,children:[(0,m.jsxs)(i.xu,{paddingX:2,children:[(0,m.jsx)(i.xu,{children:(0,m.jsx)(i.__,{htmlFor:"videoStartText",children:(0,m.jsx)(i.xv,{size:"100",children:"Start"})})}),(0,m.jsx)(i.nv,{errorMessage:f?b(f):"",id:"videoStartText",onChange:x,size:"lg",type:"text",value:f})]}),(0,m.jsxs)(i.xu,{children:[(0,m.jsx)(i.xu,{children:(0,m.jsx)(i.__,{htmlFor:"videoEndText",children:(0,m.jsx)(i.xv,{size:"100",children:"End"})})}),(0,m.jsx)(i.nv,{errorMessage:y?v(y):"",id:"videoEndText",onChange:_,size:"lg",type:"text",value:y})]})]})]})]}),(0,m.jsxs)(i.xu,{column:12,direction:"column",display:"flex",children:[(0,m.jsx)(i.iz,{}),(0,m.jsx)(i.xu,{"data-tutorial-id":"pin-builder-editor-reset-button",paddingX:8,paddingY:2,children:(0,m.jsx)(i.zx,{accessibilityLabel:this.props.i18n._('Reset', ' - ', ' -- '),color:"white",fullWidth:!0,onClick:this.onClickReset,text:"video"===u?this.props.i18n._('Clear crop', 'Resets cropping changes', 'Resets cropping changes'):this.props.i18n._('Reset', 'Resets all the changes.', 'Resets all the changes.')})})]}),P&&(0,m.jsx)(s.Z,{maxAssetsToSelect:w,onDismiss:this.handleDismiss,onPrimaryAction:O?this.handleReplaceImage:this.handleAddImage,primaryButtonText:O?this.props.i18n._('Use image', 'Button text for use another image to replace the selected image in the collage Pin.', 'Button text for use another image to replace the selected image in the collage Pin.'):this.props.i18n._('Add image', 'Button text for adding some other images to the collage Pin', 'Button text for adding some other images to the collage Pin')})]})}}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,A(r.key),r)}}(o.prototype,n),Object.defineProperty(o,"prototype",{writable:!1}),o}(r.Component);function E(e){var t=(0,c.u)().logContextEvent,n=(0,u.ZP)(),r=(0,l.Z)(),i=(0,f.B)(),a=(0,y.Z)(i.userAgent.browserName),s=(0,o.v9)(function(t){return t.pinbuilder.pinDrafts[e.pinDraftId].type});return(0,m.jsx)(I,x(x({},e),{},{i18n:n,ideaPinRenamingEnabled:r,imageFileTypes:a,logContextEvent:t,type:s}))}var C=n(640785),D=n(406262),T=n(114767),k=n(600222),z=n(72918),R=n(886981),B=n(625892),L=n(624844);function F(e){var t=e.marginIndex,n=e.onSelectMargin,r=(0,u.ZP)(),o=r._('Apply narrow margins', 'Adjust the margin to small.', 'Adjust the margin to small.'),a=r._('Apply medium margins', 'Adjust the margin to medium.', 'Adjust the margin to medium.'),l=r._('Apply wide margins', 'Adjust the margin to large.', 'Adjust the margin to large.'),s=[(0,m.jsx)(i.xu,{"data-group-id":"pinbuilder-editor-margins-size-button","data-test-id":"pinbuilder-editor-margins-small-button",children:(0,m.jsx)(i.u,{text:o,children:(0,m.jsx)(i.JO,{accessibilityLabel:o,color:0===t?"default":"subtle",icon:"margins-small",size:18})})}),(0,m.jsx)(i.xu,{"data-group-id":"pinbuilder-editor-margins-size-button","data-test-id":"pinbuilder-editor-margins-medium-button",children:(0,m.jsx)(i.u,{text:a,children:(0,m.jsx)(i.JO,{accessibilityLabel:a,color:1===t?"default":"subtle",icon:"margins-medium",size:18})})}),(0,m.jsx)(i.xu,{"data-group-id":"pinbuilder-editor-margins-size-button","data-test-id":"pinbuilder-editor-margins-large-button",children:(0,m.jsx)(i.u,{text:l,children:(0,m.jsx)(i.JO,{accessibilityLabel:l,color:2===t?"default":"subtle",icon:"margins-large",size:18})})})];return(0,m.jsx)(i.sY,{items:s,onChange:n,selectedItemIndex:t})}var Z=n(503246),M=n(571045);function N(e){return(N="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function H(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function U(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?H(Object(n),!0).forEach(function(t){q(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):H(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function W(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function V(e,t){return(V=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function G(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function X(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(X=function(){return!!e})()}function Y(e){return(Y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function q(e,t,n){return(t=K(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function K(e){var t=function(e,t){if("object"!=N(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=N(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==N(t)?t:t+""}var J={__style:{tabindex:0,margin:2}},$=function(e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");o.prototype=Object.create(e&&e.prototype,{constructor:{value:o,writable:!0,configurable:!0}}),Object.defineProperty(o,"prototype",{writable:!1}),e&&V(o,e);var t,n,r=(t=X(),function(){var e,n=Y(o);return e=t?Reflect.construct(n,arguments,Y(this).constructor):n.apply(this,arguments),function(e,t){if(t&&("object"==N(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return G(e)}(this,e)});function o(){var e;if(!(this instanceof o))throw TypeError("Cannot call a class as a function");for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];return q(G(e=r.call.apply(r,[this].concat(n))),"handleLoadFiles",function(t){var n=e.props,r=n.i18n,o=n.ideaPinRenamingEnabled,i=n.onLoadLogos,a={minHeight:d.P0,minWidth:d.zr};(0,b.Z)({i18n:r,ideaPinRenamingEnabled:o,files:t,options:a}).then(function(e){i(e.reduce(function(e,t){return"localImage"===t.type?[].concat(function(e){if(Array.isArray(e))return W(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return W(e,void 0);var n=({}).toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?W(e,void 0):void 0}}(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),[t]):e},[]))})}),q(G(e),"handleDrop",function(t){var n=(0,M.Z)(t.dataTransfer);e.handleLoadFiles(n)}),q(G(e),"handleChange",function(t){var n=t.target.files?Array.from(t.target.files):[];e.handleLoadFiles(n)}),e}return n=[{key:"render",value:function(){var e=this,t=this.props,n=t.width,r=t.height,o=t.imageFileTypes;return(0,m.jsx)(i.xu,{dangerouslySetInlineStyle:J,height:r,rounding:2,width:n,children:(0,m.jsx)(h.Z,{accept:o.join(","),allowMultipleFiles:!0,id:"add-button-placeholder",onChange:this.handleChange,onDrop:this.handleDrop,children:function(){return(0,m.jsx)(i.xu,{alignItems:"center",display:"flex",height:"100%",justifyContent:"center",rounding:2,children:(0,m.jsx)(i.JO,{accessibilityLabel:e.props.i18n._('Import local images', 'Add local images to Pin builder', 'Add local images to Pin builder'),icon:"add-circle",size:24})})}})})}}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,K(r.key),r)}}(o.prototype,n),Object.defineProperty(o,"prototype",{writable:!1}),o}(r.Component);function Q(e){var t=(0,u.ZP)(),n=(0,l.Z)(),r=(0,f.B)(),o=(0,y.Z)(r.userAgent.browserName);return(0,m.jsx)($,U(U({},e),{},{i18n:t,ideaPinRenamingEnabled:n,imageFileTypes:o}))}q($,"defaultProps",{height:147,width:147});var ee=n(656013);function et(e){return(et="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function en(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function er(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?en(Object(n),!0).forEach(function(t){es(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):en(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function eo(e,t){return(eo=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function ei(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ea(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(ea=function(){return!!e})()}function el(e){return(el=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function es(e,t,n){return(t=ec(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ec(e){var t=function(e,t){if("object"!=et(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=et(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==et(t)?t:t+""}var eu={__style:{padding:"2px"}},ed=function(e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");o.prototype=Object.create(e&&e.prototype,{constructor:{value:o,writable:!0,configurable:!0}}),Object.defineProperty(o,"prototype",{writable:!1}),e&&eo(o,e);var t,n,r=(t=ea(),function(){var e,n=el(o);return e=t?Reflect.construct(n,arguments,el(this).constructor):n.apply(this,arguments),function(e,t){if(t&&("object"==et(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return ei(e)}(this,e)});function o(){var e;if(!(this instanceof o))throw TypeError("Cannot call a class as a function");for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];return es(ei(e=r.call.apply(r,[this].concat(n))),"state",{isHovering:!1}),es(ei(e),"handleMouseEnter",function(){e.setState({isHovering:!0})}),es(ei(e),"handleMouseLeave",function(){e.setState({isHovering:!1})}),e}return n=[{key:"render",value:function(){var e=this.props,t=e.imgSrc,n=e.imgWidth,r=e.imgHeight,o=e.fit,a=e.title,l=e.selected,s=e.onClick,c=e.onDelete,u=this.state.isHovering;return(0,m.jsxs)(i.xu,{dangerouslySetInlineStyle:eu,"data-test-id":"pinbuilder-asset-preview",onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,position:"relative",children:[(0,m.jsx)(ee.Z,{onClick:s,selected:l,children:(0,m.jsxs)(i.xu,{color:"secondary","data-test-id":"selectable-asset-preview",height:r,overflow:"hidden",position:"relative",rounding:2,width:n,children:[(0,m.jsx)(i.Ee,{alt:a||"",fit:o,naturalHeight:1,naturalWidth:1,src:t}),a&&(0,m.jsx)(i.xu,{marginBottom:1,marginTop:2,children:(0,m.jsx)(i.xv,{lineClamp:1,size:"100",children:a})})]})}),u&&(0,m.jsx)(i.xu,{color:"tertiary","data-test-id":"remove-asset-icon-button",height:16,marginEnd:-1,marginTop:-1,padding:1,position:"absolute",right:!0,rounding:"circle",top:!0,width:16,children:(0,m.jsx)(i.iP,{fullHeight:!0,fullWidth:!0,onTap:c,children:(0,m.jsx)(i.JO,{accessibilityLabel:this.props.i18n._('Remove Asset', 'Icon button to remove selected media file', 'Icon button to remove selected media file'),color:"inverse",icon:"cancel",size:8})})})]})}}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ec(r.key),r)}}(o.prototype,n),Object.defineProperty(o,"prototype",{writable:!1}),o}(r.Component);function ef(e){var t=(0,u.ZP)();return(0,m.jsx)(ed,er(er({},e),{},{i18n:t}))}function ep(e){return(ep="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function eh(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function ey(e,t){return(ey=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function eb(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function em(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(em=function(){return!!e})()}function eg(e){return(eg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ev(e,t,n){return(t=e_(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function e_(e){var t=function(e,t){if("object"!=ep(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=ep(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ep(t)?t:t+""}var ex=function(e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");o.prototype=Object.create(e&&e.prototype,{constructor:{value:o,writable:!0,configurable:!0}}),Object.defineProperty(o,"prototype",{writable:!1}),e&&ey(o,e);var t,n,r=(t=em(),function(){var e,n=eg(o);return e=t?Reflect.construct(n,arguments,eg(this).constructor):n.apply(this,arguments),function(e,t){if(t&&("object"==ep(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return eb(e)}(this,e)});function o(){var e;if(!(this instanceof o))throw TypeError("Cannot call a class as a function");for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];return ev(eb(e=r.call.apply(r,[this].concat(n))),"state",{selectedIndex:void 0}),ev(eb(e),"onSelectLogo",function(t){(0,e.props.onSelectLogo)(t),e.setState(function(e){return{selectedIndex:e.selectedIndex===t?null:t}})}),e}return n=[{key:"shouldComponentUpdate",value:function(e,t){return!(0,Z.ZP)(this.props.logos,e.logos)||!(0,Z.ZP)(this.props.logoIndex,e.logoIndex)||!(0,Z.ZP)(this.state.selectedIndex,t.selectedIndex)}},{key:"render",value:function(){var e=this,t=this.props.logos;return(0,m.jsx)(i.xu,{column:12,"data-test-id":"logo-picker",maxHeight:165,minHeight:70,overflow:"scroll",paddingY:1,children:(0,m.jsx)(i.Rk,{columnWidth:62,gutterWidth:9,items:[{type:"placeholder"}].concat(function(e){if(Array.isArray(e))return eh(e)}(t)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||function(e,t){if(e){if("string"==typeof e)return eh(e,void 0);var n=({}).toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?eh(e,void 0):void 0}}(t)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),renderItem:function(t){var n=t.data,r=t.itemIdx,o=e.props,i=o.logoIndex,a=o.onAddNewLogos,l=o.onDeleteLogo,s=i!==e.state.selectedIndex?i:e.state.selectedIndex;return"placeholder"===n.type?(0,m.jsx)(Q,{height:58,onLoadLogos:a,width:58}):(0,m.jsx)(ef,{fit:"contain",imgHeight:58,imgSrc:n.src,imgWidth:58,onClick:function(){return e.onSelectLogo(r-1)},onDelete:function(){return l(r-1)},selected:s===r-1})}})})}}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,e_(r.key),r)}}(o.prototype,n),Object.defineProperty(o,"prototype",{writable:!1}),o}(r.Component);function ej(e){var t=e.logoPositionIndex,n=e.onSelectLogoPosition,r=(0,u.ZP)(),o=r._('Position top left', 'Adjust the location of the logo to top left.', 'Adjust the location of the logo to top left.'),a=r._('Position top center', 'Adjust the location of the logo to top center.', 'Adjust the location of the logo to top center.'),l=r._('Position top right', 'Adjust the location of the logo to top right.', 'Adjust the location of the logo to top right.'),s=r._('Position bottom left', 'Adjust the location of the logo to bottom left.', 'Adjust the location of the logo to bottom left.'),c=r._('Position bottom center', 'Adjust the location of the logo to bottom center.', 'Adjust the location of the logo to bottom center.'),d=r._('Position bottom right', 'Adjust the location of the logo to bottom right.', 'Adjust the location of the logo to bottom right.'),f=[(0,m.jsx)(i.xu,{"data-group-id":"pinbuilder-editor-logo-position-picker-button","data-test-id":"pinbuilder-editor-logo-position-top-left-button",children:(0,m.jsx)(i.u,{text:o,children:(0,m.jsx)(i.JO,{accessibilityLabel:o,color:0===t?"default":"subtle",icon:"align-top-left",size:18})})}),(0,m.jsx)(i.xu,{"data-group-id":"pinbuilder-editor-logo-position-picker-button","data-test-id":"pinbuilder-editor-logo-position-top-center-button",children:(0,m.jsx)(i.u,{text:a,children:(0,m.jsx)(i.JO,{accessibilityLabel:a,color:1===t?"default":"subtle",icon:"align-top-center",size:18})})}),(0,m.jsx)(i.xu,{"data-group-id":"pinbuilder-editor-logo-position-picker-button","data-test-id":"pinbuilder-editor-logo-position-top-right-button",children:(0,m.jsx)(i.u,{text:l,children:(0,m.jsx)(i.JO,{accessibilityLabel:l,color:2===t?"default":"subtle",icon:"align-top-right",size:18})})}),(0,m.jsx)(i.xu,{"data-group-id":"pinbuilder-editor-logo-position-picker-button","data-test-id":"pinbuilder-editor-logo-position-bottom-left-button",children:(0,m.jsx)(i.u,{text:s,children:(0,m.jsx)(i.JO,{accessibilityLabel:s,color:3===t?"default":"subtle",icon:"align-bottom-left",size:18})})}),(0,m.jsx)(i.xu,{"data-group-id":"pinbuilder-editor-logo-position-picker-button","data-test-id":"pinbuilder-editor-logo-position-bottom-center-button",children:(0,m.jsx)(i.u,{text:c,children:(0,m.jsx)(i.JO,{accessibilityLabel:c,color:4===t?"default":"subtle",icon:"align-bottom-center",size:18})})}),(0,m.jsx)(i.xu,{"data-group-id":"pinbuilder-editor-logo-position-picker-button","data-test-id":"pinbuilder-editor-logo-position-bottom-right-button",children:(0,m.jsx)(i.u,{text:d,children:(0,m.jsx)(i.JO,{accessibilityLabel:d,color:5===t?"default":"subtle",icon:"align-bottom-right",size:18})})})];return(0,m.jsxs)(i.kC,{alignItems:"stretch",direction:"column",justifyContent:"start",children:[(0,m.jsx)(i.xu,{marginBottom:2,children:(0,m.jsx)(i.xv,{size:"200",weight:"bold",children:r._('Position', 'Adjust the position of the logo', 'Adjust the position of the logo')})}),(0,m.jsx)(i.sY,{items:f,onChange:n,responsive:!0,selectedItemIndex:t})]})}function eP(e){return(eP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function eO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function ew(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?eO(Object(n),!0).forEach(function(t){eC(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):eO(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function eS(e,t){return(eS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function eA(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function eI(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(eI=function(){return!!e})()}function eE(e){return(eE=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function eC(e,t,n){return(t=eD(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function eD(e){var t=function(e,t){if("object"!=eP(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=eP(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==eP(t)?t:t+""}var eT=function(e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");o.prototype=Object.create(e&&e.prototype,{constructor:{value:o,writable:!0,configurable:!0}}),Object.defineProperty(o,"prototype",{writable:!1}),e&&eS(o,e);var t,n,r=(t=eI(),function(){var e,n=eE(o);return e=t?Reflect.construct(n,arguments,eE(this).constructor):n.apply(this,arguments),function(e,t){if(t&&("object"==eP(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return eA(e)}(this,e)});function o(){var e;if(!(this instanceof o))throw TypeError("Cannot call a class as a function");for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];return eC(eA(e=r.call.apply(r,[this].concat(n))),"onReset",function(){var t=e.props,n=t.pinCanvas,r=t.onReset,o=t.logContextEvent;r(),n&&n.removeLogo(),o({event_type:101,component:13780,element:12135,aux_data:{editor_mode:"logo"}})}),eC(eA(e),"onDeleteLogo",function(t){var n=e.props,r=n.pinCanvas,o=n.onDeleteLogo,i=n.logo,a=n.logContextEvent;o(t),i.logoIndex===t&&r&&r.removeLogo(),a({event_type:101,component:13780,element:12142})}),eC(eA(e),"setLogo",function(t){var n=e.props,r=n.pinCanvas,o=n.logo,i=n.logoImages;r&&(null!=t?r.setLogo({assetId:i[t].assetId,src:i[t].src,size:o.logoSize,margin:d.mt[o.logoMarginIndex],position:d.n_[o.logoPositionIndex],backgroundColor:o.logoBackgroundColor,backgroundOpacity:d.AQ[o.logoTransparencyIndex]}):r.removeLogo())}),eC(eA(e),"onSelectLogo",function(t){var n=e.props,r=n.pinCanvas,o=n.onSelectLogo,i=n.logo,a=n.logContextEvent;o(t),i.logoIndex===t?r&&r.removeLogo():r&&e.setLogo(t),a({event_type:101,component:13780,element:12141})}),eC(eA(e),"onChangeLogoSize",function(t){var n=e.props,r=n.pinCanvas,o=n.onChangeLogoSize,i=n.logContextEvent;o(t),r&&r.setLogoSize(t),i({event_type:3828,component:13780,element:12147,aux_data:{value:t}})}),eC(eA(e),"onSelectLogoMargin",function(t){var n=t.activeIndex,r=e.props,o=r.pinCanvas,i=r.onSelectLogoMargin,a=r.logContextEvent,l=d.mt[n];i(n),o&&o.setLogoMargin(l),a({event_type:101,component:13780,element:12148,aux_data:{value:l}})}),eC(eA(e),"onSelectLogoPosition",function(t){var n=t.activeIndex,r=e.props,o=r.pinCanvas,i=r.onSelectLogoPosition,a=r.logContextEvent,l=d.n_[n];i(n),o&&o.setLogoPosition(l),a({event_type:101,component:13780,element:12149,aux_data:{value:l}})}),eC(eA(e),"onSelectLogoBackgroundColor",function(t){var n=t.value,r=e.props,o=r.pinCanvas,i=r.onSelectLogoBackgroundColor,a=r.logContextEvent,l=n.startsWith("#")||""===n?n.toLowerCase():"#".concat(n).toLowerCase();i(l),o&&o.setLogoBackgroundColor(l),a({event_type:8721,component:13780,element:12150,aux_data:{editor_option:"color",value:l}})}),eC(eA(e),"onSelectLogoTransparency",function(t){var n=t.activeIndex,r=e.props,o=r.pinCanvas,i=r.onSelectLogoTransparency,a=r.logContextEvent,l=d.AQ[n];i(n),o&&o.setLogoBackgroundOpacity(l),a({event_type:8721,component:13780,element:12150,aux_data:{editor_option:"transparency",value:l}})}),e}return n=[{key:"componentDidUpdate",value:function(e){var t=e.logo,n=e.logoImages,r=this.props,o=r.logo,i=r.logoImages;(t.logoIndex!==o.logoIndex||n.length!==i.length)&&this.setLogo(o.logoIndex)}},{key:"render",value:function(){var e=this.props,t=e.logo,n=e.logoImages,r=e.onUploadLogos,o=e.pinCanvas,a=t.logoIndex,l=t.logoSize,s=t.logoMarginIndex,c=t.logoPositionIndex,u=t.logoBackgroundColor,d=t.logoTransparencyIndex;return(0,m.jsxs)(i.xu,{column:12,direction:"column",display:"flex",children:[(0,m.jsxs)(i.xu,{flex:"grow",overflow:"auto",paddingY:8,children:[(0,m.jsx)(i.xu,{paddingX:8,children:(0,m.jsx)(i.X6,{size:"600",children:this.props.i18n._('Logo', 'Add a logo to the image selected in Pin Builder.', 'Add a logo to the image selected in Pin Builder.')})}),(0,m.jsx)(i.xu,{marginTop:3,paddingX:8,children:(0,m.jsx)(i.xv,{children:this.props.i18n._('Add your logo to make this Pin feel official', ' - ', ' -- ')})}),(0,m.jsx)(i.xu,{marginTop:6,paddingX:8,children:(0,m.jsx)(ex,{logoIndex:a,logos:n,onAddNewLogos:r,onDeleteLogo:this.onDeleteLogo,onSelectLogo:this.onSelectLogo})}),(0,m.jsxs)(i.xu,{display:"flex",justifyContent:"between",marginTop:10,paddingX:8,position:"relative",children:[(0,m.jsxs)(i.kC,{alignItems:"stretch",direction:"column",justifyContent:"start",width:84,children:[(0,m.jsx)(i.xu,{marginBottom:2,children:(0,m.jsx)(i.xv,{size:"200",weight:"bold",children:this.props.i18n._('Size', 'Adjust the size of the logo', 'Adjust the size of the logo')})}),(0,m.jsx)(L.Z,{iconName:"logo-large",id:"pinbuilder-editor-logo-size-text-field",maxValue:80,minValue:20,onChange:this.onChangeLogoSize,step:10,value:l})]}),(0,m.jsxs)(i.xu,{children:[(0,m.jsx)(i.xu,{marginBottom:2,children:(0,m.jsx)(i.xv,{size:"200",weight:"bold",children:this.props.i18n._('Margins', 'Adjust the position of the text overlay', 'Adjust the position of the text overlay')})}),(0,m.jsx)(F,{marginIndex:s,onSelectMargin:this.onSelectLogoMargin})]})]}),(0,m.jsx)(i.xu,{marginTop:10,paddingX:8,position:"relative",children:(0,m.jsx)(ej,{logoPositionIndex:c,onSelectLogoPosition:this.onSelectLogoPosition})}),(0,m.jsxs)(i.xu,{marginTop:10,paddingX:8,children:[(0,m.jsx)(i.xu,{marginBottom:2,children:(0,m.jsx)(i.xv,{size:"200",weight:"bold",children:this.props.i18n._('Color fill', 'Pick the background color', 'Pick the background color')})}),(0,m.jsx)(B.Z,{customColors:o&&o.getColorPalette(),id:"pinbuilder-editor-logo-background-color-picker",onChange:this.onSelectLogoBackgroundColor,onTransparencyChange:this.onSelectLogoTransparency,showNoFillControl:!0,showTransparencyControl:!0,transparencyIndex:d,value:u,width:96})]})]}),(0,m.jsxs)(i.xu,{column:12,direction:"column",display:"flex",children:[(0,m.jsx)(i.iz,{}),(0,m.jsx)(i.xu,{"data-test-id":"pin-builder-editor-reset-button","data-tutorial-id":"pin-builder-editor-reset-button",paddingX:8,paddingY:2,children:(0,m.jsx)(i.zx,{accessibilityLabel:this.props.i18n._('Reset', ' - ', ' -- '),color:"white",fullWidth:!0,onClick:this.onReset,text:this.props.i18n._('Reset', 'Resets all the changes.', 'Resets all the changes.')})})]})]})}}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,eD(r.key),r)}}(o.prototype,n),Object.defineProperty(o,"prototype",{writable:!1}),o}(r.Component);function ek(e){var t=(0,c.u)().logContextEvent,n=(0,u.ZP)();return(0,m.jsx)(eT,ew(ew({},e),{},{i18n:n,logContextEvent:t}))}function ez(e){return(ez="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function eR(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function eB(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?eR(Object(n),!0).forEach(function(t){eN(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):eR(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function eL(e,t){return(eL=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function eF(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function eZ(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(eZ=function(){return!!e})()}function eM(e){return(eM=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function eN(e,t,n){return(t=eH(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function eH(e){var t=function(e,t){if("object"!=ez(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=ez(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ez(t)?t:t+""}var eU={maxHeight:"516px"},eW=function(e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");a.prototype=Object.create(e&&e.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),Object.defineProperty(a,"prototype",{writable:!1}),e&&eL(a,e);var t,n,o=(t=eZ(),function(){var e,n=eM(a);return e=t?Reflect.construct(n,arguments,eM(this).constructor):n.apply(this,arguments),function(e,t){if(t&&("object"==ez(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return eF(e)}(this,e)});function a(){var e;if(!(this instanceof a))throw TypeError("Cannot call a class as a function");for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];return eN(eF(e=o.call.apply(o,[this].concat(n))),"state",{hoveredOption:null,showFlyout:!1}),eN(eF(e),"setFlyoutAnchor",function(t){e.anchor=t}),eN(eF(e),"handleTouch",function(){e.setState(function(e){return{showFlyout:!e.showFlyout}})}),eN(eF(e),"handleFlyoutClose",function(){e.setState({showFlyout:!1})}),eN(eF(e),"handleSelectOption",function(t){(0,e.props.onSelect)(t),e.handleFlyoutClose()}),eN(eF(e),"handleMouseEnter",function(t){e.setState({hoveredOption:t})}),eN(eF(e),"handleMouseLeave",function(){e.setState({hoveredOption:null})}),e}return n=[{key:"getFlyoutHeight",value:function(){if(window&&this.anchor){var e=Math.min(516,window.innerHeight-this.anchor.getBoundingClientRect().top-100);return"".concat(e,"px")}return"".concat(516,"px")}},{key:"render",value:function(){var e=this,t=this.props,n=t.placeholder,o=t.selectedOption,a=t.optionGroups,l=this.state,s=l.hoveredOption,c=l.showFlyout,u=o?a.find(function(e){return e.groupName===o.groupName}):null,d=u&&o?u.options.find(function(e){return e.optionName===o.optionName}):null;return(0,m.jsxs)(i.xu,{column:12,"data-test-id":"styled-dropdown-list",children:[(0,m.jsx)(i.iP,{onTap:this.handleTouch,rounding:2,children:(0,m.jsxs)(i.xu,{ref:this.setFlyoutAnchor,alignItems:"center",color:"secondary",display:"flex",height:40,justifyContent:"between",overflow:"hidden",paddingX:3,rounding:2,width:"100%",children:[(0,m.jsx)(i.xu,{flex:"grow",marginEnd:2,minWidth:0,overflow:"hidden",children:(0,m.jsx)(i.xv,{children:d?(0,m.jsx)("div",{style:d.style,children:d.optionLabel}):n||this.props.i18n._('Select', 'Select an option from the dropdown list', 'Select an option from the dropdown list')})}),(0,m.jsx)(i.xu,{flex:"none",children:(0,m.jsx)(i.JO,{accessibilityLabel:this.props.i18n._('Open dropdown list', 'Instructions to open the dropdown list', 'Instructions to open the dropdown list'),color:"default",icon:"arrow-down",size:12})})]})}),c&&(0,m.jsx)(i.J2,{anchor:this.anchor,idealDirection:"down",onDismiss:this.handleFlyoutClose,size:"md",children:(0,m.jsx)(i.xu,{dangerouslySetInlineStyle:{__style:eB(eB({},eU),{},{maxHeight:this.getFlyoutHeight()})},paddingY:4,width:"100%",children:a.map(function(t,n){return(0,m.jsxs)(r.Fragment,{children:[a.length>1&&n>0&&(0,m.jsx)(i.xu,{paddingX:4,paddingY:2,children:(0,m.jsx)(i.iz,{})}),a.length>1&&(0,m.jsx)(i.xu,{paddingX:4,paddingY:1,children:(0,m.jsx)(i.xv,{color:"subtle",size:"100",children:t.groupLabel})}),t.options.map(function(n){return(0,m.jsx)(i.xu,{color:d===n||s===n?"secondary":"default",padding:1,children:(0,m.jsx)(i.iP,{onMouseEnter:function(){return e.handleMouseEnter(n)},onMouseLeave:e.handleMouseLeave,onTap:function(){return e.handleSelectOption({groupName:t.groupName,optionName:n.optionName})},children:(0,m.jsx)(i.xu,{paddingX:3,paddingY:1,width:"100%",children:(0,m.jsx)(i.xv,{children:(0,m.jsx)(i.xu,{dangerouslySetInlineStyle:{__style:eB({},n.style)},children:n.optionLabel})})})})},"".concat(t.groupName,"_").concat(n.optionName))}),t.groupFooter&&(0,m.jsx)(i.xu,{paddingX:4,paddingY:1,children:t.groupFooter()})]},t.groupName)})})})]})}}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,eH(r.key),r)}}(a.prototype,n),Object.defineProperty(a,"prototype",{writable:!1}),a}(r.Component);function eV(e){var t=(0,u.ZP)();return(0,m.jsx)(eW,eB(eB({},e),{},{i18n:t}))}function eG(e){var t=e.selectedIndex,n=e.onSelect,r=(0,u.ZP)(),o=r._('Left align', 'Adjust the text to left alignment.', 'Adjust the text to left alignment.'),a=r._('Center align', 'Adjust the text to center alignment.', 'Adjust the text to center alignment.'),l=[(0,m.jsx)(i.xu,{"data-group-id":"pinbuilder-editor-text-align-button","data-test-id":"pinbuilder-editor-text-align-left-button",children:(0,m.jsx)(i.u,{text:o,children:(0,m.jsx)(i.JO,{accessibilityLabel:o,color:0===t?"default":"subtle",icon:"text-align-left",size:18})})}),(0,m.jsx)(i.xu,{"data-group-id":"pinbuilder-editor-text-align-button","data-test-id":"pinbuilder-editor-text-align-center-button",children:(0,m.jsx)(i.u,{text:a,children:(0,m.jsx)(i.JO,{accessibilityLabel:a,color:1===t?"default":"subtle",icon:"text-align-center",size:18})})})];return(0,m.jsx)(i.sY,{items:l,onChange:n,selectedItemIndex:t})}function eX(e){var t=e.selectedIndex,n=e.onSelect,r=(0,u.ZP)(),o=r._('Position text on top', 'Adjust the location of the text to top.', 'Adjust the location of the text to top.'),a=r._('Position text in middle', 'Adjust the location of the text to middle.', 'Adjust the location of the text to middle.'),l=r._('Position text on bottom', 'Adjust the location of the text to bottom.', 'Adjust the location of the text to bottom.'),s=[(0,m.jsx)(i.xu,{"data-group-id":"pinbuilder-editor-text-position-button","data-test-id":"pinbuilder-editor-text-position-top-button",children:(0,m.jsx)(i.u,{text:o,children:(0,m.jsx)(i.JO,{accessibilityLabel:o,color:0===t?"default":"subtle",icon:"align-top",size:18})})}),(0,m.jsx)(i.xu,{"data-group-id":"pinbuilder-editor-text-position-button","data-test-id":"pinbuilder-editor-text-position-middle-button",children:(0,m.jsx)(i.u,{text:a,children:(0,m.jsx)(i.JO,{accessibilityLabel:a,color:1===t?"default":"subtle",icon:"align-middle",size:18})})}),(0,m.jsx)(i.xu,{"data-group-id":"pinbuilder-editor-text-position-button","data-test-id":"pinbuilder-editor-text-position-bottom-button",children:(0,m.jsx)(i.u,{text:l,children:(0,m.jsx)(i.JO,{accessibilityLabel:l,color:2===t?"default":"subtle",icon:"align-bottom",size:18})})})];return(0,m.jsx)(i.sY,{items:s,onChange:n,selectedItemIndex:t})}function eY(e){var t=e.selectedIndex,n=e.onSelect,r=(0,u.ZP)(),o=r._('Sentence case', 'Transform the text to sentence case.', 'Transform the text to sentence case.'),a=r._('Uppercase', 'Transform the text to all uppercase.', 'Transform the text to all uppercase.'),l=[(0,m.jsx)(i.xu,{"data-group-id":"pinbuilder-editor-text-transform-button","data-test-id":"pinbuilder-editor-text-sentence-case-button",children:(0,m.jsx)(i.u,{text:o,children:(0,m.jsx)(i.JO,{accessibilityLabel:o,color:0===t?"default":"subtle",icon:"text-sentence-case",size:18})})}),(0,m.jsx)(i.xu,{"data-group-id":"pinbuilder-editor-text-transform-button","data-test-id":"pinbuilder-editor-text-all-caps-button",children:(0,m.jsx)(i.u,{text:a,children:(0,m.jsx)(i.JO,{accessibilityLabel:a,color:1===t?"default":"subtle",icon:"text-all-caps",size:18})})})];return(0,m.jsx)(i.sY,{items:l,onChange:n,selectedItemIndex:t})}function eq(e){return(eq="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function eK(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function eJ(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?eK(Object(n),!0).forEach(function(t){e2(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):eK(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function e$(e,t){return(e$=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function eQ(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function e0(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(e0=function(){return!!e})()}function e1(e){return(e1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function e2(e,t,n){return(t=e8(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function e8(e){var t=function(e,t){if("object"!=eq(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=eq(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==eq(t)?t:t+""}var e3={fontColor:{__style:{zIndex:d.v9}},fontFamily:{__style:{zIndex:d.v9+1}}},e5=function(e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");o.prototype=Object.create(e&&e.prototype,{constructor:{value:o,writable:!0,configurable:!0}}),Object.defineProperty(o,"prototype",{writable:!1}),e&&e$(o,e);var t,n,r=(t=e0(),function(){var e,n=e1(o);return e=t?Reflect.construct(n,arguments,e1(this).constructor):n.apply(this,arguments),function(e,t){if(t&&("object"==eq(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return eQ(e)}(this,e)});function o(){var e;if(!(this instanceof o))throw TypeError("Cannot call a class as a function");for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];return e2(eQ(e=r.call.apply(r,[this].concat(n))),"_getTextConfigs",function(t){var n=t.fontFamilyName,r=t.fontStyleName,o=t.fontWeight,i=t.fontSize,a=t.textColor,l=t.lineHeight,s=t.letterSpacing,c=t.transformIndex,u=t.alignmentIndex,f=t.marginIndex,p=t.backgroundColor,h=t.backgroundTransparencyIndex,y=t.positionIndex,b=e.props.fontGroups,m=(0,T.$D)(b,n);return{fontFamily:n,fontStyle:(m&&m.styles.find(function(e){return e.name===r})||{}).fontStyle,fontSize:i,fontWeight:o,textColor:a,lineHeight:l,backgroundColor:p,characterSpacing:s,transform:d.np[c],alignment:d.aj[u],margin:d.mt[f],backgroundOpacity:d.AQ[h],position:d.yb[y]}}),e2(eQ(e),"onReset",function(){var t=e.props,n=t.getDefaultTextState,r=t.pinCanvas,o=t.onReset,i=t.logContextEvent;if(o(),r){r.removeTextLayer();var a=e._getTextConfigs(n());r.addTextLayer(a)}i({event_type:101,component:13780,element:12135,aux_data:{editor_mode:"text"}})}),e2(eQ(e),"onSelectFontFamily",function(t){var n=e.props,r=n.fontGroups,o=n.pinCanvas,i=n.onSelectFontFamily,a=n.logContextEvent;if(o){var l=(0,T.$D)(r,t.optionName);if(l){var s=l.fontFamily,c=l.fontOverrides,u=l.defaultStyle,d=l.styles[u],f=d.fontStyle,p=d.fontWeight;if(c){var h=+!!c.textTransform;e.onSelectTransform({activeIndex:h}),c.lineHeight&&e.onChangeLineHeight(c.lineHeight),c.letterSpacing&&e.onChangeLetterSpacing(c.letterSpacing)}o.setFontFamily(null!=s?s:""),o.setFontStyle(f),o.setFontWeight(p)}}i(t),a({event_type:3828,component:13780,element:12151,aux_data:{value:"".concat(t.groupName,": ").concat(t.optionName)}})}),e2(eQ(e),"onSelectTextColor",function(t){var n=t.value,r=e.props,o=r.pinCanvas,i=r.onSelectTextColor,a=r.logContextEvent;o&&o.setTextColor(n),i(n),a({event_type:8721,component:13780,element:12153,aux_data:{value:n}})}),e2(eQ(e),"onChangeFontSize",function(t){var n=e.props,r=n.pinCanvas,o=n.onChangeFontSize,i=n.logContextEvent;r&&r.setFontSize(t),o(t),i({event_type:3828,component:13780,element:12152,aux_data:{value:t}})}),e2(eQ(e),"onChangeLineHeight",function(t){var n=e.props,r=n.pinCanvas,o=n.onChangeLineHeight,i=n.logContextEvent;r&&r.setTextLineHeight(t),o(t),i({event_type:3828,component:13780,element:12161,aux_data:{value:t}})}),e2(eQ(e),"onChangeLetterSpacing",function(t){var n=e.props,r=n.pinCanvas,o=n.onChangeLetterSpacing,i=n.logContextEvent;r&&r.setTextCharacterSpacing(10*t),o(t),i({event_type:3828,component:13780,element:12162,aux_data:{value:t}})}),e2(eQ(e),"onSelectTransform",function(t){var n=t.activeIndex,r=e.props,o=r.pinCanvas,i=r.onSelectTransform,a=r.logContextEvent,l=d.np[n];o&&o.setTextTransform(l),i(n),a({event_type:3828,component:13780,element:12163,aux_data:{value:l}})}),e2(eQ(e),"onSelectAlignment",function(t){var n=t.activeIndex,r=e.props,o=r.pinCanvas,i=r.onSelectAlignment,a=r.logContextEvent,l=d.aj[n];o&&o.setTextAlignment(l),i(n),a({event_type:101,component:13780,element:12154,aux_data:{value:l}})}),e2(eQ(e),"onSelectMargin",function(t){var n=t.activeIndex,r=e.props,o=r.pinCanvas,i=r.onSelectMargin,a=r.logContextEvent,l=d.mt[n];o&&o.setTextMargin(l),i(n),a({event_type:101,component:13780,element:12155,aux_data:{value:l}})}),e2(eQ(e),"onSelectBackgroundColor",function(t){var n=t.value,r=e.props,o=r.pinCanvas,i=r.onSelectBackgroundColor,a=r.logContextEvent;o&&o.setTextBackgroundColor(n),i(n),a({event_type:8721,component:13780,element:12156,aux_data:{editor_option:"color",value:n}})}),e2(eQ(e),"onSelectBackgroundTransparency",function(t){var n=t.activeIndex,r=e.props,o=r.pinCanvas,i=r.onSelectBackgroundTransparency,a=r.logContextEvent,l=d.AQ[n];o&&o.setTextBackgroundOpacity(l),i(n),a({event_type:8721,component:13780,element:12156,aux_data:{editor_option:"transparency",value:l}})}),e2(eQ(e),"onSelectPosition",function(t){var n=t.activeIndex,r=e.props,o=r.pinCanvas,i=r.onSelectPosition,a=r.logContextEvent,l=d.yb[n];o&&o.setTextPosition(l),i(n),a({event_type:101,component:13780,element:12157,aux_data:{value:l}})}),e2(eQ(e),"getFontFamilyOptions",function(){return e.props.fontGroups.map(function(e){return{groupLabel:e.groupLabel,groupName:e.groupName,groupFooter:e.groupFooter,options:e.fonts.map(function(e){var t,n;return{optionName:null!=(t=e.fontFamily)?t:"",optionLabel:null!=(n=e.fontFamily)?n:"",style:{fontFamily:e.fontFamily,fontStyle:e.styles[e.defaultStyle].fontStyle,fontWeight:e.styles[e.defaultStyle].fontWeight}}})}})}),e}return n=[{key:"componentDidMount",value:function(){var e=this.props,t=e.pinCanvas,n=e.text;if(t){var r=this._getTextConfigs(n);t.addTextLayer(r)}}},{key:"render",value:function(){var e=this.props,t=e.text,n=e.onToggleShowMoreOptions,r=e.pinCanvas,o=t.fontGroupName,a=t.fontFamilyName,l=t.fontSize,s=t.textColor,c=t.marginIndex,u=t.alignmentIndex,d=t.positionIndex,f=t.backgroundColor,p=t.backgroundTransparencyIndex,h=t.lineHeight,y=t.letterSpacing,b=t.transformIndex,g=t.showMoreOptions,v=this.getFontFamilyOptions(),_=o===C.f9,x=r?r.getColorPalette():null;return(0,m.jsxs)(i.xu,{column:12,direction:"column",display:"flex",children:[(0,m.jsxs)(i.xu,{flex:"grow",overflow:"auto",paddingY:8,children:[(0,m.jsx)(i.xu,{paddingX:8,children:(0,m.jsx)(i.X6,{size:"600",children:this.props.i18n._('Text Overlay', 'Add text to the image selected in Pin Builder.', 'Add text to the image selected in Pin Builder.')})}),(0,m.jsx)(i.xu,{marginTop:4,paddingX:8,children:(0,m.jsx)(i.xv,{children:this.props.i18n._('Add text directly onto your Pin', ' - ', ' -- ')})}),(0,m.jsx)(i.xu,{marginTop:6,paddingX:8,children:(0,m.jsx)(i.xv,{size:"200",weight:"bold",children:this.props.i18n._('Style', 'Text font style', 'Text font style')})}),(0,m.jsx)(i.xu,{dangerouslySetInlineStyle:e3.fontFamily,marginTop:4,paddingX:8,position:"relative",children:(0,m.jsx)(eV,{onSelect:this.onSelectFontFamily,optionGroups:v,placeholder:this.props.i18n._('Select font family', ' - ', ' -- '),selectedOption:{groupName:o,optionName:a}})}),(0,m.jsxs)(i.xu,{display:"flex",marginTop:4,paddingX:8,children:[(0,m.jsxs)(i.kC,{alignItems:"center",direction:"column",justifyContent:"start",width:84,children:[(0,m.jsx)(L.Z,{iconName:"text-size",id:"pinbuilder-editor-font-size-text-field",maxValue:64,minValue:18,onChange:this.onChangeFontSize,value:l}),(0,m.jsx)(i.xu,{marginTop:2,children:(0,m.jsx)(i.xv,{size:"100",children:this.props.i18n._('Size', 'Text font size', 'Text font size')})})]}),(0,m.jsxs)(i.xu,{alignItems:"center",dangerouslySetInlineStyle:e3.fontColor,direction:"column",display:"flex",marginStart:4,position:"relative",width:84,children:[(0,m.jsx)(B.Z,{customColors:x,id:"pinbuilder-editor-text-color-picker",onChange:this.onSelectTextColor,value:s}),(0,m.jsx)(i.xu,{marginTop:2,children:(0,m.jsx)(i.xv,{size:"100",children:this.props.i18n._('Color', 'Text color', 'Text color')})})]})]}),_&&(0,m.jsxs)(i.xu,{marginTop:4,paddingX:8,position:"relative",children:[(0,m.jsx)(i.iz,{}),(0,m.jsxs)(i.xu,{paddingY:4,children:[(0,m.jsx)(i.iP,{onTap:n,children:(0,m.jsx)(i.xv,{color:"subtle",size:"100",weight:"bold",children:g?"- "+(this.props.i18n._('Hide options', 'Hide text adjustment options.', 'Hide text adjustment options.')):"+ "+(this.props.i18n._('Show more options', 'Show more text adjustment options.', 'Show more text adjustment options.'))})}),g&&(0,m.jsxs)(i.xu,{display:"flex",marginTop:4,children:[(0,m.jsxs)(i.kC,{alignItems:"center",direction:"column",justifyContent:"start",width:84,children:[(0,m.jsx)(L.Z,{iconName:"text-line-height",id:"pinbuilder-editor-text-line-height",maxValue:2.5,minValue:.5,onChange:this.onChangeLineHeight,step:.1,value:h}),(0,m.jsx)(i.xu,{marginTop:2,children:(0,m.jsx)(i.xv,{size:"100",children:this.props.i18n._('Line', 'Line height of the text', 'Line height of the text')})})]}),(0,m.jsxs)(i.xu,{alignItems:"center",direction:"column",display:"flex",marginStart:3,width:84,children:[(0,m.jsx)(L.Z,{iconName:"text-spacing",id:"pinbuilder-editor-text-spacing-text-field",maxValue:50,minValue:-10,onChange:this.onChangeLetterSpacing,step:1,value:y}),(0,m.jsx)(i.xu,{marginTop:2,children:(0,m.jsx)(i.xv,{size:"100",children:this.props.i18n._('Letter', 'Letter spaceing of the text', 'Letter spaceing of the text')})})]}),(0,m.jsxs)(i.xu,{alignItems:"center",direction:"column",display:"flex",marginStart:3,width:84,children:[(0,m.jsx)(eY,{onSelect:this.onSelectTransform,selectedIndex:b}),(0,m.jsx)(i.xu,{marginTop:2,children:(0,m.jsx)(i.xv,{size:"100",children:this.props.i18n._('Transform', 'Text transform between normal and all uppercase', 'Text transform between normal and all uppercase')})})]})]})]}),(0,m.jsx)(i.iz,{})]}),(0,m.jsxs)(i.xu,{display:"flex",justifyContent:"between",marginTop:10,paddingX:8,position:"relative",children:[(0,m.jsxs)(i.kC,{direction:"column",justifyContent:"start",children:[(0,m.jsx)(i.xu,{marginBottom:2,children:(0,m.jsx)(i.xv,{size:"200",weight:"bold",children:this.props.i18n._('Alignment', 'Adjust text alignment', 'Adjust text alignment')})}),(0,m.jsx)(eG,{onSelect:this.onSelectAlignment,selectedIndex:u})]}),(0,m.jsxs)(i.kC,{direction:"column",justifyContent:"start",children:[(0,m.jsx)(i.xu,{marginBottom:2,children:(0,m.jsx)(i.xv,{size:"200",weight:"bold",children:this.props.i18n._('Margins', 'Adjust the margin.', 'Adjust the margin.')})}),(0,m.jsx)(F,{marginIndex:c,onSelectMargin:this.onSelectMargin})]})]}),(0,m.jsxs)(i.xu,{display:"flex",justifyContent:"between",marginTop:10,paddingX:8,children:[(0,m.jsxs)(i.kC,{direction:"column",justifyContent:"start",children:[(0,m.jsx)(i.xu,{marginBottom:2,children:(0,m.jsx)(i.xv,{size:"200",weight:"bold",children:this.props.i18n._('Background', 'Adjust the background of the text overlay', 'Adjust the background of the text overlay')})}),(0,m.jsx)(B.Z,{customColors:x,id:"pinbuilder-editor-text-background-color-picker",onChange:this.onSelectBackgroundColor,onTransparencyChange:this.onSelectBackgroundTransparency,showNoFillControl:!0,showTransparencyControl:!0,transparencyIndex:p,value:f,width:96})]}),(0,m.jsxs)(i.kC,{direction:"column",justifyContent:"start",children:[(0,m.jsx)(i.xu,{marginBottom:2,children:(0,m.jsx)(i.xv,{size:"200",weight:"bold",children:this.props.i18n._('Position', 'Adjust the position of the text overlay', 'Adjust the position of the text overlay')})}),(0,m.jsx)(eX,{onSelect:this.onSelectPosition,selectedIndex:d})]})]})]}),(0,m.jsxs)(i.xu,{column:12,direction:"column",display:"flex",children:[(0,m.jsx)(i.iz,{}),(0,m.jsx)(i.xu,{"data-tutorial-id":"pin-builder-editor-reset-button",paddingX:8,paddingY:2,children:(0,m.jsx)(i.zx,{accessibilityLabel:this.props.i18n._('Reset', ' - ', ' -- '),color:"white",fullWidth:!0,onClick:this.onReset,text:this.props.i18n._('Reset', 'Resets all the changes.', 'Resets all the changes.')})})]})]})}}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,e8(r.key),r)}}(o.prototype,n),Object.defineProperty(o,"prototype",{writable:!1}),o}(r.Component);function e6(e){var t=(0,c.u)().logContextEvent,n=(0,u.ZP)();return(0,m.jsx)(e5,eJ(eJ({},e),{},{i18n:n,logContextEvent:t}))}var e4=n(984993);function e9(e){return(e9="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function e7(e){return function(e){if(Array.isArray(e))return te(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return te(e,void 0);var n=({}).toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?te(e,void 0):void 0}}(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function te(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function tt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function tn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?tt(Object(n),!0).forEach(function(t){tl(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tt(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function tr(e,t){return(tr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function to(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ti(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(ti=function(){return!!e})()}function ta(e){return(ta=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function tl(e,t,n){return(t=ts(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ts(e){var t=function(e,t){if("object"!=e9(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=e9(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==e9(t)?t:t+""}var tc="#efefef",tu=function(e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");o.prototype=Object.create(e&&e.prototype,{constructor:{value:o,writable:!0,configurable:!0}}),Object.defineProperty(o,"prototype",{writable:!1}),e&&tr(o,e);var t,n,r=(t=ti(),function(){var e,n=ta(o);return e=t?Reflect.construct(n,arguments,ta(this).constructor):n.apply(this,arguments),function(e,t){if(t&&("object"==e9(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return to(e)}(this,e)});function o(e){if(!(this instanceof o))throw TypeError("Cannot call a class as a function");tl(to(t=r.call(this,e)),"_getInitialAspectRatioIndex",function(){var e=t.props,n=e.canDeselectAspectRatio,r=e.canvasJson,o=e.type;if(!r)return n?null:0;var i=(0,k.Z)(o).findIndex(function(e){var t=e.w,n=e.h;return r.aspectRatio&&t===r.aspectRatio.w&&n===r.aspectRatio.h});return -1===i?null:i}),tl(to(t),"_getToolPanes",function(e){var n=t.props.mediaType,r=[{icon:"crop",label:t.props.i18n._('Crop & rotate', 'Button to enter cropping tool', 'Button to enter cropping tool'),name:"crop"}];return"video"!==n&&(r.push({icon:"star",label:t.props.i18n._('Logo', 'Button to enter logo tool', 'Button to enter logo tool'),name:"logo"}),e.length>0&&r.push({icon:"overlay-text",label:t.props.i18n._('Text overlay', 'Button to enter text overlay tool', 'Button to enter text overlay tool'),name:"text"})),r}),tl(to(t),"_getBrandFontDefaultTextState",function(e,t){var n=t.find(function(e){return e.groupName===C.f9});if(n){var r,o=n.fonts[0];return tn(tn({},e),{},{fontFamilyName:null!=(r=o.fontFamily)?r:"",fontGroupName:o.fontGroup,fontStyleName:o.styles[0].name})}return e}),tl(to(t),"getTextState",function(e,n){var r=t.props.canvasJson;if(r&&r.text){var o,i=r.text,a=i.fontFamily,l=i.fontStyle,s=i.fontWeight,c=(0,T.$D)(n,a);if(c)return tn(tn({},e),{},{fontFamilyName:null!=(o=c.fontFamily)?o:"",fontGroupName:c.fontGroup,fontStyleName:(0,T.CP)(c,l,s)})}return t._getBrandFontDefaultTextState(e,n)}),tl(to(t),"getDefaultTextState",function(){var e=t.props.requestContext.locale;return t._getBrandFontDefaultTextState((0,T.bs)(e),t.state.fontGroups)}),tl(to(t),"onIconClick",function(e){var n=t.state.currentToolPane,r=t.props,o=r.pinCanvas,i=r.logContextEvent;e!==n&&o&&("text"===n&&o.removeTextLayer(!0),["crop","logo","text"].includes(e))&&(o.setEditingMode(e),i({event_type:101,component:13780,element:{crop:12132,logo:12133,text:12134}[e]})),t.setState({currentToolPane:e})}),tl(to(t),"onSelectAspectRatioIndex",function(e){var n=t.props,r=n.onAspectRatioChange,o=n.type;t.setState({aspectRatioIndex:e}),void 0!==e&&r(null!==e?(0,k.Z)(o)[e]:null)}),tl(to(t),"onCropReset",function(){t.setState({aspectRatioIndex:t._getInitialAspectRatioIndex()})}),tl(to(t),"onDeleteLogo",function(e){var n=t.props.invalidateStickerResource,r=t.state,o=r.logo,i=r.logoImages[e].assetId;if(i){a.Z.create("StickerAssetResource",{assetId:i}).callDelete().then(n);var l=(o||{}).logoIndex,s=l===e||null==l?null:l>e?l-1:l;t.setState(function(t){return{logo:tn(tn({},t.logo),{},{logoIndex:s}),logoImages:t.logoImages.filter(function(t,n){return n!==e})}})}}),tl(to(t),"onUploadLogos",function(e){var n=t.props,r=n.invalidateStickerResource,o=n.logContextEvent;Promise.all(e.map(function(e){return(0,e4.zp)(e.src).then(function(e){return a.Z.create("StickerAssetResource",{binary_data:e}).callCreate()})})).then(function(n){if(n){var o=n.map(function(t,n){var r=t.resource_response.data,o=e[n];return{id:r.assetId,height:o.height,width:o.width,src:o.src,type:"assetImage",assetId:r.assetId}});t.setState(function(e){return{logoImages:[].concat(e7(o),e7(e.logoImages)),logo:tn(tn({},e.logo),{},{logoIndex:0})}}),r()}}),o({event_type:101,component:13780,element:12140})}),tl(to(t),"onLogoReset",function(){t.setState({logo:{logoIndex:null,logoSize:50,logoMarginIndex:1,logoPositionIndex:0,logoBackgroundColor:"",logoTransparencyIndex:0}})}),tl(to(t),"onSelectLogo",function(e){t.setState(function(t){return{logo:tn(tn({},t.logo),{},{logoIndex:t.logo.logoIndex===e?null:e})}})}),tl(to(t),"onChangeLogoSize",function(e){t.setState(function(t){return{logo:tn(tn({},t.logo),{},{logoSize:e})}})}),tl(to(t),"onSelectLogoMargin",function(e){t.setState(function(t){return{logo:tn(tn({},t.logo),{},{logoMarginIndex:e})}})}),tl(to(t),"onSelectLogoPosition",function(e){t.setState(function(t){return{logo:tn(tn({},t.logo),{},{logoPositionIndex:e})}})}),tl(to(t),"onSelectLogoBackgroundColor",function(e){t.setState(function(t){return{logo:tn(tn({},t.logo),{},{logoBackgroundColor:e})}})}),tl(to(t),"onSelectLogoTransparency",function(e){t.setState(function(t){return{logo:tn(tn({},t.logo),{},{logoTransparencyIndex:e})}})}),tl(to(t),"onSelectFontFamily",function(e){var n=t.state.fontGroups,r=(0,T.$D)(n,e.optionName);if(r){var o=r.styles[r.defaultStyle].name,i=r.fontOverrides,a=i&&i.textTransform?1:0,l=i&&i.lineHeight||1.2,s=i&&i.letterSpacing||0;t.setState(function(t){return{text:tn(tn({},t.text),{},{fontGroupName:e.groupName,fontFamilyName:e.optionName,fontStyleName:o,letterSpacing:s,lineHeight:l,transformIndex:a})}})}}),tl(to(t),"onSelectTextColor",function(e){t.setState(function(t){return{text:tn(tn({},t.text),{},{textColor:e})}})}),tl(to(t),"onChangeFontSize",function(e){t.setState(function(t){return{text:tn(tn({},t.text),{},{fontSize:e})}})}),tl(to(t),"onChangeLineHeight",function(e){t.setState(function(t){return{text:tn(tn({},t.text),{},{lineHeight:e})}})}),tl(to(t),"onChangeLetterSpacing",function(e){t.setState(function(t){return{text:tn(tn({},t.text),{},{letterSpacing:e})}})}),tl(to(t),"onSelectTransform",function(e){t.setState(function(t){return{text:tn(tn({},t.text),{},{transformIndex:e})}})}),tl(to(t),"onSelectAlignment",function(e){t.setState(function(t){return{text:tn(tn({},t.text),{},{alignmentIndex:e})}})}),tl(to(t),"onSelectMargin",function(e){t.setState(function(t){return{text:tn(tn({},t.text),{},{marginIndex:e})}})}),tl(to(t),"onSelectBackgroundColor",function(e){t.setState(function(t){return{text:tn(tn({},t.text),{},{backgroundColor:e})}})}),tl(to(t),"onSelectBackgroundTransparency",function(e){t.setState(function(t){return{text:tn(tn({},t.text),{},{backgroundTransparencyIndex:e})}})}),tl(to(t),"onSelectPosition",function(e){t.setState(function(t){return{text:tn(tn({},t.text),{},{positionIndex:e})}})}),tl(to(t),"onToggleShowMoreOptions",function(){var e=t.props.logContextEvent;t.setState(function(t){var n=!t.text.showMoreOptions;return e({event_type:101,component:13780,element:12158,aux_data:{value:n}}),{text:tn(tn({},t.text),{},{showMoreOptions:n})}})}),tl(to(t),"onTextReset",function(){t.setState({text:t.getDefaultTextState()})});var t,n=e.canDeselectAspectRatio,i=e.canvasJson,l=e.requestContext.locale;if(t.state={aspectRatioIndex:n?null:0,brandFontsLoaded:!1,currentToolPane:"crop",fontGroups:[],isImageSelected:!1,isScalingMode:!1,logoImagesLoaded:!1,logo:{logoBackgroundColor:"",logoIndex:null,logoMarginIndex:1,logoPositionIndex:0,logoSize:50,logoTransparencyIndex:0},logoImages:[],numImages:0,text:(0,T.bs)(l)},i){if(t.state=tn(tn({},t.state),{},{aspectRatioIndex:t._getInitialAspectRatioIndex()}),i.logo){var s=i.logo,c=s.size,u=s.margin,f=s.position,p=s.backgroundColor,h=s.backgroundOpacity;t.state=tn(tn({},t.state),{},{logo:tn(tn({},t.state.logo),{},{logoBackgroundColor:p,logoMarginIndex:d.mt.indexOf(u),logoPositionIndex:d.n_.indexOf(f),logoSize:c,logoTransparencyIndex:d.AQ.indexOf(h)})})}if(i.text){var y=i.text,b=y.alignment,m=y.backgroundColor,g=y.backgroundOpacity,v=y.characterSpacing,_=y.fontSize,x=y.fontWeight,j=y.lineHeight,P=y.margin,O=y.position,w=y.textColor,S=y.transform;t.state=tn(tn({},t.state),{},{text:tn(tn({},t.state.text),{},{backgroundColor:m,fontSize:_,fontWeight:x,textColor:w,alignmentIndex:d.aj.indexOf(b),backgroundTransparencyIndex:d.AQ.indexOf(g),letterSpacing:v||t.state.text.letterSpacing,lineHeight:j||t.state.text.lineHeight,marginIndex:d.mt.indexOf(P),positionIndex:d.yb.indexOf(O),showMoreOptions:!1,transformIndex:d.np.indexOf(S)})})}}return t}return n=[{key:"componentDidMount",value:function(){var e=this;if(D.Z.enabled("systemFonts")){var t=this.props.requestContext.locale;(0,T.vK)().then(function(){return e.setState(function(n){var r=(0,T.j1)(),o=[].concat(e7(n.fontGroups.filter(function(e){return e.groupName===C.f9})),[{groupName:C.gu,groupLabel:e.props.i18n._('Suggested', 'Suggested fonts we expose to the user', 'Suggested fonts we expose to the user'),fonts:r.filter(function(e){return e.fontGroup===C.gu&&!e.localeFilter||e.localeFilter===t})},{groupName:C.Rc,groupLabel:e.props.i18n._('Additional', 'Additional fonts we expose to the user', 'Additional fonts we expose to the user'),groupFooter:function(){return(0,m.jsx)(i.xv,{color:"subtle",size:"100",children:(0,m.jsx)(i.rU,{href:"https://help.pinterest.com/article/design-a-pin",onClick:function(e){return(0,e.dangerouslyDisableOnNavigation)()},target:"blank",children:e.props.i18n._('Licence info', 'Link to legal information about system fonts', 'Link to legal information about system fonts')})})},fonts:r.filter(function(e){return e.fontGroup===C.Rc})}]);return{fontGroups:o,text:e.getTextState(n.text,o)}})})}}},{key:"componentDidUpdate",value:function(e){var t=this,n=this.props,r=n.canvasJson,o=n.pinCanvas,i=n.fontAssetResource,a=i.data,l=i.isLoaded,s=n.stickerAssetResource.data,c=this.state,u=c.brandFontsLoaded,d=c.logoImagesLoaded;if(o&&!e.pinCanvas&&o.on("after:render",this.onCanvasUpdate.bind(this)),l&&a&&a.length>0&&!u&&(0,T.KV)(a).then(function(){return t.setState(function(e){var n=[{fonts:a,groupName:C.f9,groupLabel:t.props.i18n._('Uploaded Fonts', 'fonts uploaded by the user', 'fonts uploaded by the user')}].concat(e7(e.fontGroups.filter(function(e){return e.groupName!==C.f9})));return{fontGroups:n,brandFontsLoaded:!0,text:t.getTextState(e.text,n)}})}),s&&s.length>0&&!d){var f=s.map(function(e){return{id:e.assetId,type:"assetImage",src:e.source,width:e.width,height:e.height,assetId:e.assetId}}),p=(r||{}).logo,h=p?f.findIndex(function(e){return e.assetId===p.assetId}):null;this.setState(function(e){return{logoImages:f,logoImagesLoaded:!0,logo:tn(tn({},e.logo),{},{logoIndex:h})}})}}},{key:"componentWillUnmount",value:function(){var e=this.props.pinCanvas;e&&e.off("after:render")}},{key:"onCanvasUpdate",value:function(){var e=this.props.pinCanvas;e&&this.setState({numImages:e.getNumOfImages(),isImageSelected:e.isImageSelected(),isScalingMode:e.isScalingMode()})}},{key:"render",value:function(){var e=this,t=this.state,n=t.aspectRatioIndex,r=t.currentToolPane,o=t.fontGroups,a=t.isImageSelected,l=t.isScalingMode,s=t.logo,c=t.logoImages,u=t.numImages,f=t.text,p=this.props,h=p.canDeselectAspectRatio,y=p.pinCanvas,b=p.pinDraftId,g=p.type,v=p.mediaType,_=p.videoDuration,x=p.videoStartText,j=p.videoEndText,P=p.validateStartTime,O=p.validateEndTime,w=p.handleStartTimeChange,S=p.handleEndTimeChange,A=(0,k.Z)(g),I=this._getToolPanes(o);return(0,m.jsxs)(i.xu,{color:"default",direction:"row",display:"flex",flex:"none",height:"100%",minWidth:d.wj,width:d.wj,children:[(0,m.jsx)(i.xu,{color:"default",dangerouslySetInlineStyle:{__style:{borderRight:"1px solid ".concat(tc)}},direction:"column",display:"flex",height:"100%",width:56,children:I.map(function(t,n){return(0,m.jsx)(i.xu,{dangerouslySetInlineStyle:{__style:{borderRight:r===t.name?"1px solid #fff":void 0,borderTop:0!==n&&r===t.name?"1px solid ".concat(tc):"1px solid transparent",borderBottom:r===t.name?"1px solid ".concat(tc):"1px solid transparent"}},"data-test-id":"pinbuilder-editor-".concat(t.name,"-pane-button"),"data-tutorial-id":"pinbuilder-editor-".concat(t.name,"-pane-button"),padding:2,width:56,children:(0,m.jsx)(i.u,{text:t.label,children:(0,m.jsx)(i.hU,{accessibilityLabel:t.label,icon:t.icon,iconColor:r===t.name?"darkGray":"gray",onClick:function(){return e.onIconClick(t.name)},size:"md"})})},t.name)})}),"crop"===r&&(0,m.jsx)(E,{aspectRatioIndex:n,aspectRatios:A,canDeselectAspectRatio:h,handleEndTimeChange:S,handleStartTimeChange:w,isImageSelected:a,isScalingMode:l,mediaType:v,numImages:u,onReset:this.onCropReset,onSelectAspectRatioIndex:this.onSelectAspectRatioIndex,pinCanvas:y,pinDraftId:b,validateEndTime:O,validateStartTime:P,videoDuration:_,videoEndText:j,videoStartText:x}),"logo"===r&&(0,m.jsx)(ek,{logo:s,logoImages:c,onChangeLogoSize:this.onChangeLogoSize,onDeleteLogo:this.onDeleteLogo,onReset:this.onLogoReset,onSelectLogo:this.onSelectLogo,onSelectLogoBackgroundColor:this.onSelectLogoBackgroundColor,onSelectLogoMargin:this.onSelectLogoMargin,onSelectLogoPosition:this.onSelectLogoPosition,onSelectLogoTransparency:this.onSelectLogoTransparency,onUploadLogos:this.onUploadLogos,pinCanvas:y}),"text"===r&&(0,m.jsx)(e6,{fontGroups:o,getDefaultTextState:this.getDefaultTextState,onChangeFontSize:this.onChangeFontSize,onChangeLetterSpacing:this.onChangeLetterSpacing,onChangeLineHeight:this.onChangeLineHeight,onReset:this.onTextReset,onSelectAlignment:this.onSelectAlignment,onSelectBackgroundColor:this.onSelectBackgroundColor,onSelectBackgroundTransparency:this.onSelectBackgroundTransparency,onSelectFontFamily:this.onSelectFontFamily,onSelectMargin:this.onSelectMargin,onSelectPosition:this.onSelectPosition,onSelectTextColor:this.onSelectTextColor,onSelectTransform:this.onSelectTransform,onToggleShowMoreOptions:this.onToggleShowMoreOptions,pinCanvas:y,text:f})]})}}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ts(r.key),r)}}(o.prototype,n),Object.defineProperty(o,"prototype",{writable:!1}),o}(r.Component);function td(e){var t=(0,c.u)().logContextEvent,n=(0,u.ZP)(),r=(0,o.I0)(),i=e.pinDraftId,a=e.type,l=(0,o.v9)(function(e){return e.pinbuilder.pinDrafts[i]}).pinItemIndex,s=(0,R.Z)({name:"FontAssetResource"}),d=(0,R.Z)({name:"StickerAssetResource"});return(0,m.jsx)(tu,tn(tn({},e),{},{canDeselectAspectRatio:"carousel"!==a&&("story"!==a||0!==l),fontAssetResource:s,i18n:n,invalidateStickerResource:function(){return r((0,z.jB)("StickerAssetResource"))},logContextEvent:t,requestContext:(0,f.B)(),stickerAssetResource:d}))}var tf=n(306811),tp=n(968842),th=n(32937),ty=n(341742),tb=n(632291),tm=n(507639),tg=n(250039),tv=n(250905),t_=n(25837),tx=n(937392),tj=9/16,tP=function(e){var t=e.height,n=e.onClick,o=e.selected,a=e.src,l=e.width,s=(0,u.ZP)(),c=(0,r.useRef)(null);if(!t&&!a&&!l)return null;var d=(null!=l?l:1)/(null!=t?t:1)>tj?40:20;return(0,m.jsxs)(i.xu,{"data-test-id":"pinbuilder-editor-thumbnail",flex:"grow",height:"100%",marginEnd:1,marginStart:1,maxWidth:d,minHeight:40,children:[o&&(0,m.jsx)(tx.Qp,{anchor:c.current,experienceIds:[501067],idealDirection:"up",placementId:1000135}),(0,m.jsx)(i.xu,{ref:c,children:(0,m.jsx)(ee.Z,{onClick:n,rounded:!0,selected:o,children:(0,m.jsx)(i.zd,{rounding:2,children:(0,m.jsx)(i.Ee,{alt:s._('Carousel thumbnail', 'Description text for carousel image thumbnail when editing', 'Description text for carousel image thumbnail when editing'),naturalHeight:null!=t?t:1,naturalWidth:null!=l?l:1,src:a})})})})]},"carousel-thumbnail-".concat(a))},tO=n(587468),tw=n(390556),tS=n(295182),tA=n(604756),tI=n(669019);function tE(e){return(tE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function tC(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function tD(e,t,n,r,o,i,a){try{var l=e[i](a),s=l.value}catch(e){return void n(e)}l.done?t(s):Promise.resolve(s).then(r,o)}function tT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function tk(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?tT(Object(n),!0).forEach(function(t){tF(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tT(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function tz(e,t){return(tz=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function tR(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function tB(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(tB=function(){return!!e})()}function tL(e){return(tL=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function tF(e,t,n){return(t=tZ(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function tZ(e){var t=function(e,t){if("object"!=tE(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=tE(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==tE(t)?t:t+""}var tM={__style:{zIndex:t_.fe+1e3}},tN=RegExp("\\d\\d:\\d\\d:\\d\\d"),tH=function(e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");o.prototype=Object.create(e&&e.prototype,{constructor:{value:o,writable:!0,configurable:!0}}),Object.defineProperty(o,"prototype",{writable:!1}),e&&tz(o,e);var t,n,r=(t=tB(),function(){var e,n=tL(o);return e=t?Reflect.construct(n,arguments,tL(this).constructor):n.apply(this,arguments),function(e,t){if(t&&("object"==tE(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return tR(e)}(this,e)});function o(e){if(!(this instanceof o))throw TypeError("Cannot call a class as a function");tF(tR(i=r.call(this,e)),"updateCachedItems",function(e){var t=i.state,n=t.selectedId,r=t.cachedItems,o=r[n].media,a=i.pinCanvas?tk(tk({},o),i.pinCanvas.getCanvasOutput()):o,l=i.pinCanvas?i.pinCanvas.toJSON():null;l&&"localImage"===a.type&&i.setState({selectedId:e,cachedItems:tk(tk({},r),{},tF({},n,tk(tk({},r[n]),{},{media:a,canvasJson:l})))})}),tF(tR(i),"setCarouselItem",function(e){var t=i.props.pinItemIds,n=i.state,r=n.selectedId,o=n.cachedItems,a=t[e],l=o[a],s=l.canvasJson,c=l.media;a!==r&&o&&(i.updateCachedItems(a),i.pinCanvas&&s?i.pinCanvas.loadFromJSON(s):i.pinCanvas&&c&&c.src&&i.pinCanvas.setImage(c.src))}),tF(tR(i),"onResize",function(){if(i._canvasContainer){var e=i._canvasContainer.getBoundingClientRect(),t=e.width,n=e.height;i.pinCanvas&&i.pinCanvas.resize(t,n)}}),tF(tR(i),"isVideo",function(e){return!!e&&("localVideo"===e.type||"webVideo"===e.type)}),tF(tR(i),"onSaveChanges",function(){var e,t=i.props,n=t.onDismiss,r=t.pinDraftId,o=t.updatePinItemImages,a=t.logContextEvent,l=i.state,s=l.selectedId,c=l.cachedItems,u=l.isVideoPlaying,d=l.videoStartText,f=l.videoEndText,p=(c[s]||{}).media,h=null;i.pinCanvas&&(i.pinCanvas.removeTextLayer(!0),null!=(e=i.pinCanvas)&&e.isScalingMode&&(i.pinCanvas.exitScalingMode(),h={aux_data:{editor_option:"scale_mode_exit"}}));var y=i.pinCanvas?tk(tk(tk({},p),i.pinCanvas.getCanvasOutput({width:p&&p.width||tS.IU,maxImageSize:0x5555555})),{},{signature:i.isVideo(p)&&p&&"signature"in p?p.signature:null}):p;o(r,s,c,i.isVideo(p)&&p?tk(tk({},y),{},{src:p.src,trimmedStartTime:(0,tf.SD)(d),trimmedEndTime:(0,tf.SD)(f)}):y,i.pinCanvas?i.pinCanvas.toJSON():null);var b=tR(i).pinCanvas;b&&i.isVideo(p)&&u&&b.playOrPauseVideo(),n(),a(tk(tk({},{event_type:101,component:13780,element:12130}),h))}),tF(tR(i),"onCancelChanges",function(){var e=i.props,t=e.onDismiss,n=e.logContextEvent,r=i.state,o=r.selectedId,a=r.cachedItems,l=r.isVideoPlaying,s=(a[o]||{}).media,c=tR(i).pinCanvas;c&&i.isVideo(s)&&l&&c.playOrPauseVideo(),t(),n({event_type:101,component:13780,element:12131})}),tF(tR(i),"onAspectRatioChange",function(e){var t=i.props,n=t.pinItemIds;"carousel"===t.type&&e&&(0,tw.Z)(n,i.state.cachedItems,i.props.i18n,e).then(function(e){var t=n.reduce(function(t,n,r){return tk(tk({},t),{},tF({},n,e[r]))},{});i.setState({cachedItems:t})})}),tF(tR(i),"timeFormatError",function(){return i.props.i18n._('Time must be in the format 00:00:00', 'Error message for incorrect time format', 'Error message for incorrect time format')}),tF(tR(i),"timeRangeError",function(){return i.props.i18n._('Video must be at least 4 seconds long.', 'Error message indicating that video is too short', 'Error message indicating that video is too short')}),tF(tR(i),"validateEndTime",function(e){if(!tN.test(e))return i.timeFormatError();var t=i.state.videoStartText;return tN.test(t)&&(0,tf.SD)(e)-(0,tf.SD)(t)<4?i.timeRangeError():""}),tF(tR(i),"validateStartTime",function(e){if(!tN.test(e))return i.timeFormatError();var t=i.state.videoEndText;return tN.test(t)&&(0,tf.SD)(t)-(0,tf.SD)(e)<4?i.timeRangeError():""}),tF(tR(i),"handleEndTimeChange",function(e){var t=e.value;if(i.setState({videoEndText:t}),i.props.logContextEvent({event_type:97,component:13780,element:12144,aux_data:{value:t}}),tN.test(t)){var n=i.state.videoDuration,r=(0,tf.SD)(t),o=!!n&&r>n;o&&i.setState({videoEndText:n?(0,tf.to)(n):""}),i.pinCanvas&&i.pinCanvas.setVideoTrimmerTimeRange({videoEndTime:o?n:r})}}),tF(tR(i),"handleStartTimeChange",function(e){var t=e.value;i.setState({videoStartText:t}),i.props.logContextEvent({event_type:97,component:13780,element:12143,aux_data:{value:t}}),tN.test(t)&&i.pinCanvas&&i.pinCanvas.setVideoTrimmerTimeRange({videoStartTime:(0,tf.SD)(t)})}),tF(tR(i),"onVideoTrimmerUpdate",function(){if(i.pinCanvas){var e=i.pinCanvas.getVideoTrimmerTimeRange(),t=e.videoStartTime,n=e.videoEndTime,r=(0,tf.to)(t),o=(0,tf.to)(n);i.setState({videoStartText:r,videoEndText:o}),i.props.logContextEvent({event_type:104,component:13780,element:12146,aux_data:{value:"start=".concat(r,",end=").concat(o)}})}}),tF(tR(i),"onTogglePlayState",function(){i.pinCanvas&&i.pinCanvas.playOrPauseVideo(),i.props.logContextEvent({event_type:101,component:13780,element:12145})}),tF(tR(i),"setCanvasContainerRef",function(e){i._canvasContainer=e,i.onResize()}),tF(tR(i),"handleKeyupEvents",function(e){27===e.keyCode&&i.onCancelChanges()}),tF(tR(i),"onPinCanvasLoaderLoaded",(t=regeneratorRuntime.mark(function e(t){var n,r,o,a,l,s,c;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:if(r=(n=i.state).selectedId,a=(o=n.cachedItems[r]||{}).canvasJson,s=((l=o.media)||{}).src,c=i.isVideo(l)?"video":"image",i.pinCanvas=t,t.on("trimmer:dragged",i.onVideoTrimmerUpdate),t.on("video:play",function(){return i.setState({isVideoPlaying:!0})}),t.on("video:pause",function(){return i.setState({isVideoPlaying:!1})}),!a){e.next=15;break}return e.next=13,t.loadFromJSON(a);case 13:case 18:e.next=22;break;case 15:if(!D.Z.enabled("videoEditing")){e.next=20;break}return e.next=18,t.setMedia(s,c);case 20:return e.next=22,t.setImage(s);case 22:i.forceUpdate(),i.onResize();case 24:case"end":return e.stop()}},e)}),n=function(){var e=this,n=arguments;return new Promise(function(r,o){var i=t.apply(e,n);function a(e){tD(i,r,o,a,l,"next",e)}function l(e){tD(i,r,o,a,l,"throw",e)}a(void 0)})},function(e){return n.apply(this,arguments)}));var t,n,i,a=e.pinItemId,l=e.pinItems,s=l[a].media,c=s&&"duration"in s&&s.duration?s.duration:0;return i.state={selectedId:a,cachedItems:l,videoDuration:c,videoStartText:(0,tf.to)(0),videoEndText:c?(0,tf.to)(c):(0,tf.to)(0),isVideoPlaying:!0},i}return n=[{key:"componentDidMount",value:function(){var e=this.props.footerContext,t=e.setEducationId,n=e.setPaddingRight,r=e.setZIndex;document.addEventListener("keyup",this.handleKeyupEvents,!1),window.addEventListener("resize",this.onResize),t(d.jh),n(400),r(1e3)}},{key:"componentWillUnmount",value:function(){var e=this.props.footerContext,t=e.setEducationId,n=e.setPaddingRight,r=e.setZIndex;document.removeEventListener("keyup",this.handleKeyupEvents,!1),window.removeEventListener("resize",this.onResize),t(null),n(null),r(null)}},{key:"render",value:function(){var e=this,t=this.props,n=t.pinDraftId,r=t.pinItemIds,o=t.type,a=t.isRTL,l=this.state,s=l.selectedId,c=l.cachedItems,u=l.videoDuration,f=l.videoStartText,p=l.videoEndText,h=l.isVideoPlaying,y=c[s]||{},b=y.canvasJson,g=y.media,v=this.isVideo(g)?"video":"image";return(0,m.jsx)(i.mh,{children:(0,m.jsxs)(th.Z,{allowClickAndDrag:!0,children:[(0,m.jsx)(i.xu,{bottom:!0,dangerouslySetInlineStyle:tM,left:!0,position:"fixed",right:!0,top:!0,children:(0,m.jsxs)(i.xu,{color:"secondary",direction:"row",display:"flex",height:"100%",children:[(0,m.jsxs)(i.xu,{ref:this.setCanvasContainerRef,alignItems:"center",display:"flex",flex:"grow",height:"100%",justifyContent:"center",overflow:"hidden",position:"relative",children:[(0,m.jsxs)(i.xu,{dangerouslySetInlineStyle:{__style:{zIndex:d.v9}},left:a,marginEnd:4,marginStart:4,marginTop:3,position:"absolute",right:!a,top:!0,children:[(0,m.jsx)(i.xu,{"data-test-id":"cancel-edit-button",display:"inlineBlock",marginEnd:2,marginStart:2,children:(0,m.jsx)(i.zx,{name:"cancel",onClick:this.onCancelChanges,size:"md",text:this.props.i18n._('Cancel', 'Cancel pin edit', 'Cancel pin edit')})}),(0,m.jsx)(i.xu,{"data-test-id":"save-edit-button","data-tutorial-id":"pin-builder-editor-save-edit-button",display:"inlineBlock",marginEnd:2,marginStart:2,children:(0,m.jsx)(i.zx,{color:"red",disabled:this.isVideo(g)&&(this.validateStartTime(f).length>0||this.validateEndTime(p).length>0),name:"saveChanges",onClick:this.onSaveChanges,size:"md",text:this.props.i18n._('Update changes', 'Update changes in pin edit', 'Update changes in pin edit')})})]}),(0,m.jsxs)(i.kC,{alignItems:"center",direction:"column",justifyContent:"start",children:[(0,m.jsx)(tA.Z,{onLoaded:this.onPinCanvasLoaderLoaded}),"carousel"===o&&(0,m.jsx)(i.xu,{bottom:!0,display:"flex",flex:"grow",justifyContent:"center",marginBottom:10,position:"absolute",width:196,children:r.map(function(t,n){if(!c||!c[t]||!c[t].media)return null;var r=c[t].media,o=r.height,i=r.src,a=r.width;return(0,m.jsx)(tP,{height:o,onClick:function(){return e.setCarouselItem(n)},selected:s===t,src:i,width:a},"carousel-thumbnail-".concat(t))})}),"video"===v&&(0,m.jsx)(i.xu,{bottom:!0,flex:"none",left:!0,marginBottom:6,marginStart:6,position:"absolute",rounding:"circle",children:(0,m.jsx)(i.hU,{accessibilityLabel:h?this.props.i18n._('Play', 'Play video', 'Play video'):this.props.i18n._('Pause', 'Pause video', 'Pause video'),bgColor:"white",icon:h?"pause":"play",iconColor:"darkGray",onClick:this.onTogglePlayState,size:"sm"})})]})]}),(0,m.jsx)(td,{canvasJson:b,handleEndTimeChange:this.handleEndTimeChange,handleStartTimeChange:this.handleStartTimeChange,mediaType:v,onAspectRatioChange:this.onAspectRatioChange,pinCanvas:this.pinCanvas,pinDraftId:n,type:o,validateEndTime:this.validateEndTime,validateStartTime:this.validateStartTime,videoDuration:u,videoEndText:p,videoStartText:f})]})}),(0,m.jsx)(tm.Z,{children:function(t){var n,r=function(e){if(Array.isArray(e))return e}(t)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,l=[],s=!0,c=!1;try{for(i=(n=n.call(e)).next;!(s=(r=i.call(n)).done)&&(l.push(r.value),2!==l.length);s=!0);}catch(e){c=!0,o=e}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return l}}(t,2)||function(e,t){if(e){if("string"==typeof e)return tC(e,2);var n=({}).toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?tC(e,2):void 0}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),o=r[0],i=r[1];return o===d.jh&&(0,m.jsx)(tg.Z,{onComplete:function(){return i(tb.I)},onDismiss:function(){return i(tb.I)},steps:(0,tO.Z)([{selector:'[data-tutorial-id="pinbuilder-editor-crop-pane-button"]',id:"guide-pin-builder-aspect",description:(n = e.props.i18n)._('Crop your image - a 2:3 aspect ratio works best!', 'EditingTourConfig.AspectRatioGuide', 'Text describing the cropping functionality and the best aspect ratio for it'),padding:0},{selector:'[data-tutorial-id="pinbuilder-editor-logo-pane-button"]',id:"guide-pin-builder-logo",description:n._('Add a logo to showcase your brand. Try a transparent .png file.', 'EditingTourConfig.Logo', 'Text describing ability to add logo and a best practice for adding logos'),padding:0},{selector:'[data-tutorial-id="pinbuilder-editor-text-pane-button"]',id:"guide-pin-builder-text",description:n._('Tell a story with a text overlay. Keep it snappy, and try a background color if it\'s hard to read.', 'EditingTourConfig.TextOverlay', 'Text describing the ability to add text to images and a best practice for adding text'),padding:0},{selector:'[data-tutorial-id="pin-builder-editor-reset-button"]',id:"guide-pin-builder-edit-reset",description:n._('Want a refresh? Clear any changes you\'ve made to start over.', 'EditingTourConfig.ClearChanges', 'Text describing the ability to reset changes'),padding:0},{selector:'[data-tutorial-id="pin-builder-editor-save-edit-button"]',id:"guide-pin-builder-edit-done",description:n._('Finished? Tap Update Changes to apply your changes.', 'EditingTourConfig.UpdateChanges', 'Text describing the ability to save changes'),padding:0}])})}})]})})}}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,tZ(r.key),r)}}(o.prototype,n),Object.defineProperty(o,"prototype",{writable:!1}),o}(r.Component);function tU(e){var t=(0,c.u)().logContextEvent,n=(0,tp.Z)(),r=(0,u.ZP)(),i=(0,f.B)().isRTL,a=(0,o.I0)(),l=e.pinDraftId,s=(0,o.v9)(function(e){return e.pinbuilder.pinDrafts[l].type}),d=(0,o.v9)(function(e){return e.pinbuilder.pinDrafts[l].pinItemIds}),p=d[(0,o.v9)(function(e){return e.pinbuilder.pinDrafts[l].pinItemIndex})],h=(0,o.v9)(function(e){var t=e.pinbuilder;return"story"===s?t.storyPinItems:t.pinItems}),y=h[p],b=y.canvasJson,g=y.media;return(0,ty.Z)(function(){t({event_type:120,component:13780})}),(0,m.jsx)(tH,tk(tk({},e),{},{canvasJson:b,footerContext:(0,tv.MS)(),i18n:r,isRTL:i,logContextEvent:t,media:g,pinItemId:p,pinItemIds:d,pinItems:h,type:s,updatePinItemImages:function(e,t,r,o,i){return a((0,tI.KF)({pinDraftId:e,selectedId:t,cachedItems:r,editedMedia:o,canvasJson:i,siteType:n}))}}))}},739369:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(886981);function o(e){var t=(0,r.Z)({name:"ApiResource",options:{url:"/v3/users/".concat(e),data:{fields:["user.eligible_for_ad_only_pins"]}}}).data;return!!t&&t.eligible_for_ad_only_pins}},701653:function(e,t,n){"use strict";n.d(t,{Z:function(){return _}});var r=n(586659),o=n(581722),i=n(20256),a=n(980787),l=n(19585),s=n(669019),c=n(382718);function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach(function(t){m(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function p(e,t){return(p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function h(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(y=function(){return!!e})()}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m(e,t,n){return(t=g(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function g(e){var t=function(e,t){if("object"!=u(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=u(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==u(t)?t:t+""}var v=function(e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");o.prototype=Object.create(e&&e.prototype,{constructor:{value:o,writable:!0,configurable:!0}}),Object.defineProperty(o,"prototype",{writable:!1}),e&&p(o,e);var t,n,r=(t=y(),function(){var e,n=b(o);return e=t?Reflect.construct(n,arguments,b(this).constructor):n.apply(this,arguments),function(e,t){if(t&&("object"==u(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return h(e)}(this,e)});function o(){var e;if(!(this instanceof o))throw TypeError("Cannot call a class as a function");for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];return m(h(e=r.call.apply(r,[this].concat(n))),"handleChange",function(t){var n=t.checked,r=e.props,o=r.setShareable,i=r.logContextEvent;o(n),i({event_type:101,component:13308,element:12125,aux_data:{is_checked:n}})}),e}return n=[{key:"render",value:function(){var e=this.props.checked,t="pin-draft-carousel-control";return(0,c.jsxs)(i.kC,{alignItems:"center",direction:"row",justifyContent:"start",children:[(0,c.jsx)(i.XZ,{checked:e,id:t,onChange:this.handleChange,size:"sm"}),(0,c.jsx)(i.__,{htmlFor:t,children:(0,c.jsx)(i.xu,{paddingX:2,children:(0,c.jsx)(i.xv,{size:"200",children:this.props.i18n._('Use the same text and URL for each image', 'Option to select if user wants to copy text and link to all carousel items', 'Option to select if user wants to copy text and link to all carousel items')})})})]})}}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,g(r.key),r)}}(o.prototype,n),Object.defineProperty(o,"prototype",{writable:!1}),o}(r.Component);function _(e){var t=(0,a.u)().logContextEvent,n=(0,l.ZP)(),r=(0,o.I0)(),i=(0,o.v9)(function(t){return t.pinbuilder.pinDrafts[e.pinDraftId].pinItemShareable});return(0,c.jsx)(v,f(f({},e),{},{checked:i,i18n:n,logContextEvent:t,setShareable:function(t){return r((0,s.u9)(e.pinDraftId,t))}}))}},419205:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(581722),o=n(20256),i=n(382718);function a(e){var t,n,a=e.taggedObjectId,l=(0,r.v9)(function(e){return e.pinbuilder.taggedObjects[a].media});return l?(0,i.jsx)(o.xu,{display:"inlineBlock",paddingX:1,position:"relative",children:(0,i.jsx)(o.zd,{height:90,rounding:2,wash:!0,width:90,children:l.url&&(0,i.jsx)(o.Ee,{alt:"",fit:"cover",naturalHeight:null!=(t=l.height)?t:1,naturalWidth:null!=(n=l.width)?n:1,src:l.url})})}):null}},762133:function(e,t,n){"use strict";n.d(t,{Z:function(){return O}});var r=n(586659),o=n(581722),i=n(20256),a=n(198700),l=n(90769),s=n(945467),c=n(19585),u=n(526435),d=n(341742),f=n(669019),p=n(382718);function h(e){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach(function(t){x(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function m(e,t){return(m=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function g(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(v=function(){return!!e})()}function _(e){return(_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function x(e,t,n){return(t=j(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function j(e){var t=function(e,t){if("object"!=h(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=h(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==h(t)?t:t+""}var P=function(e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");o.prototype=Object.create(e&&e.prototype,{constructor:{value:o,writable:!0,configurable:!0}}),Object.defineProperty(o,"prototype",{writable:!1}),e&&m(o,e);var t,n,r=(t=v(),function(){var e,n=_(o);return e=t?Reflect.construct(n,arguments,_(this).constructor):n.apply(this,arguments),function(e,t){if(t&&("object"==h(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return g(e)}(this,e)});function o(){var e;if(!(this instanceof o))throw TypeError("Cannot call a class as a function");for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];return x(g(e=r.call.apply(r,[this].concat(n))),"handleScheduledDateChange",function(t){var n=e.props,r=n.scheduledTime,o=n.setScheduledDate,i=n.setScheduledDateError,a=n.setScheduledTime,l=n.setScheduledTimeError,s=(t||{}).value;o(s),i(null);var c=function(){a(null),l(null)},u=new Date;if(r&&s&&s.toDateString()===u.toDateString())if(r.getHours()>u.getHours())c(),a(r);else{var d=u.getHours()+1,f=new Date(r.setHours(d));d>23&&o(f),c(),a(f)}}),x(g(e),"handleScheduledTimeChange",function(t){var n=e.props,r=n.setScheduledTime,o=n.setScheduledTimeError;r(t.value),o(null)}),x(g(e),"handleSwitchScheduleOption",function(t){return function(){var n=e.props,r=n.setDefaultDateTimeToTomorrow,o=n.setScheduledDate,i=n.setScheduledDateError,a=n.setPublishOption,l=n.setScheduledTime,s=n.setScheduledTimeError;a(t),"publish-immediately"===t?(o(null),i(null),l(null),s(null)):r()}}),e}return n=[{key:"render",value:function(){var e=this.props,t=e.disabled,n=void 0!==t&&t,r=e.displaySwitchUi,o=e.inStlToolingExp,c=e.pinDraftId,d=e.publishOption,f=e.scheduledDate,h=e.scheduledDateError,y=e.scheduledTime,b=e.scheduledTimeError,m=new Date,g=(0,l.Z)(m,u.TZ);m.getMinutes()>=30?m.setHours(m.getHours()+1,0,0,0):m.setHours(m.getHours(),30,0,0);var v=f&&f.toDateString()===m.toDateString()?m:void 0,_="pin-draft-schedule-publish-immediately-".concat(c),x="pin-draft-schedule-publish-later-".concat(c);return(0,p.jsxs)(i.xu,{children:[r?(0,p.jsxs)(i.xu,{"data-test-id":"pin-draft-switch-group",display:"flex",paddingY:6,children:[(0,p.jsx)(i.rs,{disabled:n,id:"pin-draft-switch-group",onChange:this.handleSwitchScheduleOption("publish-later"===d?"publish-immediately":"publish-later"),switched:"publish-later"===d}),(0,p.jsx)(i.xu,{marginStart:2,children:(0,p.jsx)(i.__,{htmlFor:"pin-draft-switch-group",children:(0,p.jsx)(i.xv,{color:n?"disabled":"default",children:this.props.i18n._('Publish at a later date', 'pinbuilder.switchButton.pinDraft', 'Switch label that by clicking allows user to schedule a date and time to publish the Pin later')})})})]}):(0,p.jsx)(i.FX,{direction:"row",id:"pin-draft-radio-group",legend:this.props.i18n._('Pin draft', 'pinbuilder.radioButton.pin_draft', 'Radio button legend to pin draft module'),legendDisplay:"hidden",children:(0,p.jsxs)(i.xu,{display:"flex",justifyContent:o?"between":void 0,paddingY:4,children:[(0,p.jsxs)(i.xu,{display:"flex",paddingX:1,children:[(0,p.jsx)(i.FX.RadioButton,{checked:"publish-immediately"===d,id:_,onChange:this.handleSwitchScheduleOption("publish-immediately"),size:"sm",value:"publish-immediately"}),(0,p.jsx)(i.xu,{children:(0,p.jsx)(i.__,{htmlFor:_,children:(0,p.jsx)(i.xu,{paddingX:2,children:(0,p.jsx)(i.xv,{size:"200",children:o?this.props.i18n._('Publish now', 'pinbuilder.radioButton.publishNow', 'Radio button label for publishing the pin now'):this.props.i18n._('Publish immediately', 'Radio button label for publishing the pin immediately', 'Radio button label for publishing the pin immediately')})})})})]}),(0,p.jsxs)(i.xu,{display:"flex",paddingX:1,children:[(0,p.jsx)(i.FX.RadioButton,{checked:"publish-later"===d,id:x,onChange:this.handleSwitchScheduleOption("publish-later"),size:"sm",value:"publish-later"}),(0,p.jsx)(i.xu,{children:(0,p.jsx)(i.__,{htmlFor:x,children:(0,p.jsx)(i.xu,{paddingX:2,children:(0,p.jsx)(i.xv,{size:"200",children:o?this.props.i18n._('Publish later', 'pinbuilder.radioButton.publishLater', 'Radio button label by clicking which user will schedule a date and time to publish later'):this.props.i18n._('Publish at a later date', 'Radio button label by clicking which user will schedule a date and time to publish the pin later', 'Radio button label by clicking which user will schedule a date and time to publish the pin later')})})})})]})]})}),"publish-later"===d&&(0,p.jsxs)(i.xu,{display:"flex",justifyContent:"between",marginEnd:-1,marginStart:-1,children:[(0,p.jsx)(i.xu,{column:6,"data-test-id":"pin-draft-schedule-date-field-container",paddingX:1,children:(0,p.jsx)(s.Mt,{errorMessage:h&&"string"==typeof h?h:void 0,id:"pin-draft-schedule-date-field-".concat(c),idealDirection:"up",maxDate:g,minDate:m,onChange:this.handleScheduledDateChange,value:f||void 0})}),(0,p.jsx)(i.xu,{column:6,"data-test-id":"pin-draft-schedule-time-field-container",paddingX:1,children:(0,p.jsx)(a.Z,{error:b,id:"pin-draft-schedule-time-field-".concat(c),idealDirection:"up",maxHeight:"30vh",minTime:v,onChange:this.handleScheduledTimeChange,placeholder:this.props.i18n._('Time', 'Placeholder for time field', 'Placeholder for time field'),value:y})})]})]})}}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,j(r.key),r)}}(o.prototype,n),Object.defineProperty(o,"prototype",{writable:!1}),o}(r.Component);function O(e){var t=(0,c.ZP)(),n=e.pinDraftId,r=(0,o.I0)(),i=(0,o.v9)(function(e){return e.pinbuilder.pinDrafts[n].publishOption}),a=(0,o.v9)(function(e){return e.pinbuilder.pinDrafts[n].scheduledDate}),s=(0,o.v9)(function(e){return e.pinbuilder.pinDrafts[n].scheduledDateError}),u=(0,o.v9)(function(e){return e.pinbuilder.pinDrafts[n].scheduledTime}),h=(0,o.v9)(function(e){return e.pinbuilder.pinDrafts[n].scheduledTimeError}),y=function(e){r((0,f.WT)(n)),r((0,f.$K)(n,e))},m=function(e){r((0,f.WT)(n)),r((0,f.I0)(n,e))},g=function(){var e=(0,l.Z)(new Date,1);m(e);var t=new Date(e);t.setHours(12,0,0,0),y(t)};return(0,d.Z)(function(){var e=new Date().getTime();a&&a.getTime()<e&&g()}),(0,p.jsx)(P,b(b({},e),{},{i18n:t,publishOption:i,scheduledDate:a,scheduledDateError:s,scheduledTime:u,scheduledTimeError:h,setDefaultDateTimeToTomorrow:g,setPublishOption:function(e){return r((0,f.RR)(n,e))},setScheduledDate:m,setScheduledDateError:function(e){return r((0,f.Yr)(n,e))},setScheduledTime:y,setScheduledTimeError:function(e){return r((0,f.Ve)(n,e))}}))}},257906:function(e,t,n){"use strict";n.d(t,{ZP:function(){return ei}});var r=n(586659),o=n(581722),i=n(20256),a=n(575108),l=n(980787),s=n(289032),c=n(937392),u=n(19585),d=n(302148),f=n(765533),p=n(478759),h=n.n(p),y=n(18468),b=n(382718);function m(e){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach(function(t){P(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function _(e,t){return(_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function x(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(x=function(){return!!e})()}function j(e){return(j=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function P(e,t,n){return(t=O(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function O(e){var t=function(e,t){if("object"!=m(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=m(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==m(t)?t:t+""}var w=function(e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");o.prototype=Object.create(e&&e.prototype,{constructor:{value:o,writable:!0,configurable:!0}}),Object.defineProperty(o,"prototype",{writable:!1}),e&&_(o,e);var t,n,r=(t=x(),function(){var e,n=j(o);return e=t?Reflect.construct(n,arguments,j(this).constructor):n.apply(this,arguments),function(e,t){if(t&&("object"==m(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(this,e)});function o(){if(!(this instanceof o))throw TypeError("Cannot call a class as a function");return r.apply(this,arguments)}return n=[{key:"render",value:function(){var e=this.props,t=e.value,n=e.onDelete,r=e.readOnly;return(0,b.jsxs)(i.xu,{alignItems:"center",color:"secondary",dangerouslySetInlineStyle:{__style:{userSelect:"none"}},display:"flex",justifyContent:"center",padding:2,rounding:2,children:[(0,b.jsx)(i.xv,{size:"200",weight:"bold",children:t}),!r&&(0,b.jsx)(i.xu,{marginStart:2,children:(0,b.jsx)(i.iP,{fullHeight:!1,fullWidth:!1,onTap:n,rounding:"circle",children:(0,b.jsx)(i.xu,{alignItems:"center",color:"default",display:"flex",justifyContent:"center",padding:1,rounding:"circle",children:(0,b.jsx)(i.JO,{accessibilityLabel:this.props.i18n._('Delete Tag', 'delete this tag', 'delete this tag'),color:"default",icon:"cancel",inline:!0,size:8})})})})]})}}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,O(r.key),r)}}(o.prototype,n),Object.defineProperty(o,"prototype",{writable:!1}),o}(r.PureComponent);function S(e){var t=(0,u.ZP)();return(0,b.jsx)(w,v(v({},e),{},{i18n:t}))}function A(e){return(A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function I(e,t){return(I=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function E(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function C(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(C=function(){return!!e})()}function D(e){return(D=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function T(e,t,n){return(t=k(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function k(e){var t=function(e,t){if("object"!=A(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=A(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==A(t)?t:t+""}P(w,"defaultProps",{readOnly:!1});var z=function(e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");a.prototype=Object.create(e&&e.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),Object.defineProperty(a,"prototype",{writable:!1}),e&&I(a,e);var t,n,o=(t=C(),function(){var e,n=D(a);return e=t?Reflect.construct(n,arguments,D(this).constructor):n.apply(this,arguments),function(e,t){if(t&&("object"==A(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return E(e)}(this,e)});function a(){var e;if(!(this instanceof a))throw TypeError("Cannot call a class as a function");for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];return T(E(e=o.call.apply(o,[this].concat(n))),"handleChange",function(t){(0,e.props.onChange)({value:t.target.value})}),T(E(e),"handleDeleteTag",function(t){return function(){(0,e.props.onRemoveTag)(t)}}),T(E(e),"getColor",function(){var t=e.props,n=t.errorMessage,r=t.focused,o=t.showOnBlur,i=t.value;return n?y.$rz:r?"#0074e8":i&&!o?"transparent":"rgba(142, 142, 142, 0.5)"}),e}return n=[{key:"textField",get:function(){return this._textField}},{key:"componentDidUpdate",value:function(){this._textField&&this.props.focused&&this._textField.focus()}},{key:"render",value:function(){var e=this,t=this.props,n=t.disabled,o=t.errorMessage,a=t.id,l=t.onKeyDown,s=t.placeholder,c=t.size,u=t.showOnBlur,d=t.value,f=void 0===d?"":d,p=t.tags,y=t.focused,m=y||!!o,g={__style:{boxShadow:"0 ".concat(m?"2px":"1px"," 0 0 ").concat(this.getColor()),paddingTop:8}};return(0,b.jsxs)(i.xu,{column:12,direction:"column",display:"flex",children:[(0,b.jsxs)(i.xu,{alignItems:"end",display:"flex",marginStart:-2,marginTop:-2,wrap:!0,children:[p&&p.map(function(t,n){var r=t.id,o=t.value;return(0,b.jsx)(i.xu,{marginBottom:-1,marginStart:2,marginTop:2,children:(0,b.jsx)(S,{onDelete:e.handleDeleteTag(r),value:o})},n)}),!n&&(0,b.jsx)(i.xu,{flex:"grow",marginStart:2,marginTop:2,children:(0,b.jsx)("input",{ref:function(t){e._textField=t},className:h()("TextArea__textArea",{TextArea__dark:!0,TextArea__disabled:n,TextArea__enabled:!n,TextArea__large:"lg"===c,TextArea__medium:"md"===c,TextArea__wrap:!1,TextArea__nowrap:!0}),"data-gestalt-valid-html":"TextArea",id:a,maxLength:30,onChange:this.handleChange,onKeyDown:l,placeholder:s,style:{height:"21px"},type:"text",value:f})})]}),(y||u||o||!f)&&(0,b.jsxs)(r.Fragment,{children:[(0,b.jsx)(i.xu,{column:12,dangerouslySetInlineStyle:g}),(0,b.jsx)(i.xu,{column:12,marginTop:1,minHeight:15,children:(y||u||o)&&(0,b.jsx)(i.xu,{column:12,display:"flex",justifyContent:"between",children:(0,b.jsx)(i.xu,{flex:"grow",children:(0,b.jsx)(i.xv,{color:"error",size:"100",children:o})})})})]})]})}}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,k(r.key),r)}}(a.prototype,n),Object.defineProperty(a,"prototype",{writable:!1}),a}(r.Component);function R(e){return(R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function B(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function L(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?B(Object(n),!0).forEach(function(t){H(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):B(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function F(e,t){return(F=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Z(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function M(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(M=function(){return!!e})()}function N(e){return(N=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function H(e,t,n){return(t=U(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function U(e){var t=function(e,t){if("object"!=R(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=R(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==R(t)?t:t+""}T(z,"defaultProps",{disabled:!1,size:"md",tags:[],focused:!1});var W={display:"flex",position:"relative"},V={backgroundColor:"#fff",border:"1px solid #efefef",borderRadius:"8px",boxShadow:"0px 4px 8px 0px rgba(0, 0, 0, 0.1)",boxSizing:"border-box",display:"flex",flexDirection:"column",maxHeight:220,overflow:"scroll",position:"absolute",padding:"16px 0",width:"100%"},G=function(e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");o.prototype=Object.create(e&&e.prototype,{constructor:{value:o,writable:!0,configurable:!0}}),Object.defineProperty(o,"prototype",{writable:!1}),e&&F(o,e);var t,n,r=(t=M(),function(){var e,n=N(o);return e=t?Reflect.construct(n,arguments,N(this).constructor):n.apply(this,arguments),function(e,t){if(t&&("object"==R(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return Z(e)}(this,e)});function o(){var e;if(!(this instanceof o))throw TypeError("Cannot call a class as a function");for(var t=arguments.length,n=Array(t),a=0;a<t;a++)n[a]=arguments[a];return H(Z(e=r.call.apply(r,[this].concat(n))),"state",{value:"",hoveredValue:"",flyoutHeight:0,hoveredSuggestionIndex:null,focused:!1}),H(Z(e),"handleKeyDown",function(t){var n=e.state.value,r=e.props.tags;if(t.keyCode===f.Z.BACKSPACE&&""===n&&r.length>0){var o=r[r.length-1].id;e.handleRemoveTag(o)}}),H(Z(e),"handleChange",function(t){var n=t.value,r=e.props.onChange;e.setState({value:n,hoveredValue:""}),r(n)}),H(Z(e),"handleSuggestionMouseEnter",function(t){var n=e.props.suggestions[t];e.setState({hoveredSuggestionIndex:t,hoveredValue:n.tagValue||n.value})}),H(Z(e),"handleSuggestionMouseLeave",function(){e.setState({hoveredSuggestionIndex:null,hoveredValue:""})}),H(Z(e),"handleAddTag",function(t){(0,e.props.onAddTag)(t),e.setState({value:"",hoveredValue:""}),e._textFieldRef&&e._textFieldRef.textField&&e._textFieldRef.textField.focus()}),H(Z(e),"handleRemoveTag",function(t){(0,e.props.onRemoveTag)(t)}),H(Z(e),"handleClick",function(t){if(e._componentRef&&t){var n=e.props.onChange,r=t.target instanceof Node&&e._componentRef.contains(t.target);r?e.setState({focused:r}):(e.setState({focused:r,value:"",hoveredValue:"",hoveredSuggestionIndex:null}),n(""))}}),H(Z(e),"setTextFieldRef",function(t){e._textFieldRef=t}),H(Z(e),"renderFlyout",function(t){var n=e.state,r=n.flyoutHeight,o=n.hoveredSuggestionIndex;return(0,b.jsxs)("div",{ref:function(t){e._flyoutRef=t},style:L(L({},V),{},{top:-1*r-10}),children:[(0,b.jsx)(i.xu,{marginBottom:2,paddingX:4,children:(0,b.jsx)(i.xv,{color:"subtle",size:"200",children:(0,d.nk)(e.props.i18n.ngettext('Pick relevant tags ({{ count }} result)', 'Pick relevant tags ({{ count }} results)', t.length, 'Number of matching tags to the query.', 'Number of matching tags to the query.'),{count:t.length})})}),t.map(function(t,n){var r=n===o;return(0,b.jsx)(i.iP,{onMouseEnter:function(){return e.handleSuggestionMouseEnter(n)},onMouseLeave:e.handleSuggestionMouseLeave,onTap:function(){return e.handleAddTag(t)},children:(0,b.jsx)(i.xu,{color:r?"secondary":"transparent","data-test-id":"TaggableFieldFlyout-".concat(n),paddingX:4,paddingY:2,children:(0,b.jsx)(i.xv,{size:"200",weight:"bold",children:t.value})})},n)})]})}),e}return n=[{key:"componentDidMount",value:function(){"undefined"!=typeof window&&window.document.addEventListener("mousedown",this.handleClick.bind(this))}},{key:"componentWillUnmount",value:function(){"undefined"!=typeof window&&window.document.addEventListener("mousedown",this.handleClick.bind(this))}},{key:"componentDidUpdate",value:function(e,t){if(this._flyoutRef){var n=this._flyoutRef.getBoundingClientRect().height;t.flyoutHeight!==n&&this.setState({flyoutHeight:n})}}},{key:"render",value:function(){var e=this,t=this.props,n=t.disabled,r=t.errorMessage,o=t.pinDraftId,i=t.placeholder,a=t.suggestions,l=t.tags,s=this.state,c=s.focused,u=s.hoveredValue,d=s.value,f=l.map(function(e){return{value:e.tagValue?e.tagValue:e.value,id:e.id}}),p=n||!c&&l.length>0;return(0,b.jsxs)("div",{ref:function(t){e._componentRef=t},style:W,children:[d&&!n&&c&&a.length>0&&this.renderFlyout(a),(0,b.jsx)(z,{ref:this.setTextFieldRef,disabled:p,errorMessage:r,focused:c,id:"".concat(o,"-TaggableTextField"),onChange:this.handleChange,onKeyDown:this.handleKeyDown,onRemoveTag:this.handleRemoveTag,placeholder:i,showOnBlur:!0,tags:f,value:u||d})]})}}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,U(r.key),r)}}(o.prototype,n),Object.defineProperty(o,"prototype",{writable:!1}),o}(r.Component);H(G,"defaultProps",{suggestions:[]});var X=function(e){var t=(0,u.ZP)();return(0,b.jsx)(G,L(L({},e),{},{i18n:t}))},Y=n(669019);function q(e){return(q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function K(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function J(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?K(Object(n),!0).forEach(function(t){en(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):K(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function $(e,t){return($=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Q(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ee(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(ee=function(){return!!e})()}function et(e){return(et=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function en(e,t,n){return(t=er(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function er(e){var t=function(e,t){if("object"!=q(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=q(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==q(t)?t:t+""}var eo=function(e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");o.prototype=Object.create(e&&e.prototype,{constructor:{value:o,writable:!0,configurable:!0}}),Object.defineProperty(o,"prototype",{writable:!1}),e&&$(o,e);var t,n,r=(t=ee(),function(){var e,n=et(o);return e=t?Reflect.construct(n,arguments,et(this).constructor):n.apply(this,arguments),function(e,t){if(t&&("object"==q(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return Q(e)}(this,e)});function o(){var e;if(!(this instanceof o))throw TypeError("Cannot call a class as a function");for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];return en(Q(e=r.call.apply(r,[this].concat(n))),"state",{suggestions:[],noSuggestionsFromQuery:!1,containerRef:null}),en(Q(e),"_hasStartTypingContextLogFired",!1),en(Q(e),"saveRef",function(t){e.setState({containerRef:t})}),en(Q(e),"onAddTag",function(t){(0,e.props.addInterestTag)(t),e.setState({suggestions:[],noSuggestionsFromQuery:!1})}),en(Q(e),"onRemoveTag",function(t){(0,e.props.removeInterestTag)(t)}),en(Q(e),"onChange",(0,s.Z)(function(t){if(t){var n=e.props,r=n.pinDraftId,o=n.logContextEvent;a.Z.create("InterestTaggingResource",{query:t,minLevel:1}).callGet().then(function(t){var n=t.resource_response.data.suggestions.map(function(e){return{id:e.id,value:e.name,tagValue:e.interest_name}}),r=e._getUnselectedSuggestions(n);e.setState({suggestions:n,noSuggestionsFromQuery:0===r.length})}),e._hasStartTypingContextLogFired||(e._hasStartTypingContextLogFired=!0,o({event_type:7383,component:13209,element:11449,aux_data:{pin_draft_id:r}}))}else e.setState({suggestions:[],noSuggestionsFromQuery:!1})},250)),en(Q(e),"_getUnselectedSuggestions",function(t){var n=e.props.interestTags.map(function(e){return e.id});return t.filter(function(e){return!n.includes(e.id)})}),en(Q(e),"getErrorMessage",function(){var t=e.props.interestTags,n=e.state.noSuggestionsFromQuery;return 10===t.length?e.props.i18n._('You have reached the maximum number of tags allowed.', 'The maximum number of tags user can add to a pin is reached.', 'The maximum number of tags user can add to a pin is reached.'):n?e.props.i18n._('There are no tags that match your query.', 'No suggested results found based on the user query.', 'No suggested results found based on the user query.'):""}),e}return n=[{key:"render",value:function(){var e=this.props,t=e.interestTags,n=e.pinDraftId,r=this.state,o=r.containerRef,a=r.suggestions,l=this._getUnselectedSuggestions(a),s=this.getErrorMessage(),u=t.length>0?"":this.props.i18n._('Add tags', 'text area placeholder to prompt user to tags to the pin.', 'text area placeholder to prompt user to tags to the pin.');return(0,b.jsxs)(i.xu,{ref:this.saveRef,children:[(0,b.jsx)(X,{disabled:10===t.length,errorMessage:s,onAddTag:this.onAddTag,onChange:this.onChange,onRemoveTag:this.onRemoveTag,pinDraftId:n,placeholder:u,suggestions:l,tags:t}),(0,b.jsx)(c.Qp,{anchor:o,experienceIds:[501388],flyoutSize:"lg",idealDirection:"up",placementId:1000135,textOverflow:"normal"})]})}}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,er(r.key),r)}}(o.prototype,n),Object.defineProperty(o,"prototype",{writable:!1}),o}(r.Component);function ei(e){var t=(0,l.u)().logContextEvent,n=(0,u.ZP)(),r=(0,o.v9)(function(t){return t.pinbuilder.pinDrafts[e.pinDraftId].interestTags}),i=(0,o.I0)();return(0,b.jsx)(eo,J(J({},e),{},{addInterestTag:function(t){return i((0,Y.YN)(e.pinDraftId,t))},i18n:n,interestTags:r,logContextEvent:t,removeInterestTag:function(t){return i((0,Y.Ug)(e.pinDraftId,t))}}))}},682290:function(e,t,n){"use strict";n.d(t,{Z:function(){return f}});var r=n(581722),o=n(20256),i=n(517724),a=n(19585),l=n(324307),s=n(452859),c=n(889539),u=n(382718),d={sm:{imageRepSize:147,imageSize:93},md:{imageRepSize:159,imageSize:99}};function f(e){var t,n,f,p,h=e.index,y=e.isRelatedProducts,b=e.pinTagId,m=e.size,g=e.taggedObjectId,v=(0,r.I0)(),_=(0,a.ZP)(),x=(0,c.l)().setStlHoveredTaggedObjectId,j=(null!=(t=(0,r.v9)(function(e){return e.pinbuilder.taggedObjects}))?t:{})[g],P=null!=j?j:{},O=P.media,w=P.pin,S=(0,r.v9)(function(e){return e.pinbuilder.pinTags})[b],A=S.x,I=S.y,E=null!=O?O:{},C=E.height,D=E.width,T=E.url,k=null!=w?w:{},z=k.grid_title,R=k.rich_summary,B=null!=(n=(null!=(f=(null!=(p=(null!=R?R:{}).products)?p:[])[0])?f:{}).offer_summary)?n:{},L=B.price,F=B.max_price,Z=function(e){x(e)},M=d[m].imageSize;return(0,u.jsxs)(o.xu,{"data-test-id":"stl-product-item",direction:"column",display:"flex",marginEnd:!y&&[3,7].includes(h)?0:2,marginTop:4*(!y&&h>=4),onMouseEnter:function(){return Z(g)},onMouseLeave:function(){return Z(null)},overflow:"auto",position:"relative",width:M,children:[(0,u.jsx)(o.xu,{maxHeight:M,minHeight:M,minWidth:M,overflow:"hidden",rounding:5,width:M,children:(0,u.jsx)(o.zd,{height:M,wash:!0,width:M,children:T&&(0,u.jsx)(o.Ee,{alt:"",color:"lightGray",fit:"cover",naturalHeight:C||1,naturalWidth:D||1,src:T})})}),!!(L||F)&&(0,u.jsx)(o.xu,{marginTop:2,children:(0,u.jsx)(i.Z,{productDetails:B,showSalesPrice:!0,type:"text"})}),z&&(0,u.jsx)(o.xu,{marginTop:1,children:(0,u.jsx)(o.xv,{size:"100",children:(0,l.ZP)(z,30)})}),(0,u.jsx)(o.xu,{margin:2,position:"absolute",right:!0,top:!0,children:(0,u.jsx)(o.hU,{accessibilityLabel:_._('Remove tagged product', 'shopTheLook.remove.taggedPin', 'button to remove tagged product'),bgColor:"white",icon:"cancel",iconColor:"darkGray",onClick:function(){A&&I?v((0,s.Cf)(b,"deleted")):(v((0,s.Go)(b,g)),v((0,s.Cf)(b,"edited")))},size:"sm"})})]})}},117134:function(e,t,n){"use strict";n.d(t,{Z:function(){return J}});var r=n(581722),o=n(20256),i=n(586659),a=n(672410),l=n(967308),s=n(7580),c=n(180116),u=n(19585),d=n(526435),f=n(382718),p={width:d.MN,backgroundColor:"#efefef",borderRadius:8,borderStyle:"none",boxSizing:"border-box",height:d.MN,outline:"none",padding:0};function h(){var e=(0,u.ZP)();return(0,f.jsx)(o.xu,{alignItems:"center",dangerouslySetInlineStyle:{__style:p},display:"flex",justifyContent:"center",rounding:2,children:(0,f.jsx)(o.hU,{accessibilityLabel:e._('Add product tag', 'Accessibility label for the product tag icon', 'Accessibility label for the product tag icon'),bgColor:"lightGray",icon:"add-circle",size:"xs"})})}var y=n(593310);function b(e){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach(function(t){var r,o;r=t,o=n[t],(r=function(e){var t=function(e,t){if("object"!=b(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=b(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==b(t)?t:t+""}(r))in e?Object.defineProperty(e,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[r]=o}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function v(e){var t=e.handleClick,n=e.pinTagId,r=e.taggedObjectIds;return(0,f.jsx)(o.xu,{column:12,"data-test-id":"tagged-items-grid",children:(0,f.jsxs)(o.kC,{alignItems:"stretch",justifyContent:"start",wrap:!0,children:[(0,f.jsx)(o.xu,{marginEnd:-1,marginStart:-1,padding:1,children:(0,f.jsx)(o.iP,{mouseCursor:"grab",onTap:t,rounding:2,children:(0,f.jsx)(o.xu,{"data-test-id":"add-tags-button",children:(0,f.jsx)(h,{})})})}),!!n&&r.map(function(e){return(0,f.jsx)(o.xu,{padding:1,children:(0,f.jsx)(c.Z,{disabled:!1,pinTagId:n,taggedObjectId:e})},e)})]})})}function _(e){var t=(0,y.jk)(),n=(0,r.v9)(function(n){return e.pinTagId&&n.pinbuilder.pinTags&&Object.keys(n.pinbuilder.pinTags).length>0?t(n,e):[]});return(0,f.jsx)(v,g(g({},e),{},{taggedObjectIds:n}))}var x=n(26622),j=n(884761),P=n(980787),O=n(821342),w=n(302148),S=n(15667),A=n(448505),I=n(7872);function E(e){return(E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function C(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function D(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?C(Object(n),!0).forEach(function(t){B(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):C(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function T(e,t){return(T=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function k(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function z(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(z=function(){return!!e})()}function R(e){return(R=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function B(e,t,n){return(t=L(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function L(e){var t=function(e,t){if("object"!=E(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=E(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==E(t)?t:t+""}var F=function(e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");c.prototype=Object.create(e&&e.prototype,{constructor:{value:c,writable:!0,configurable:!0}}),Object.defineProperty(c,"prototype",{writable:!1}),e&&T(c,e);var t,r,i=(t=z(),function(){var e,n=R(c);return e=t?Reflect.construct(n,arguments,R(this).constructor):n.apply(this,arguments),function(e,t){if(t&&("object"==E(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return k(e)}(this,e)});function c(){var e;if(!(this instanceof c))throw TypeError("Cannot call a class as a function");for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];return B(k(e=i.call.apply(i,[this].concat(n))),"state",{isAssetPickerOpen:!1,taggedPins:[]}),B(k(e),"handleClick",function(){e.setState({isAssetPickerOpen:!0}),e.props.logContextEvent({event_type:101,component:13308,element:12126})}),B(k(e),"handleDismiss",function(){e.setState({isAssetPickerOpen:!1})}),B(k(e),"handleAddTaggedPinsToPinDraft",function(t){var n=e.props,r=n.saveTaggedObject,o=n.removeTaggedObject,i=n.createPinTag,l=n.pinTagId,s=e.state.taggedPins,c=l||(0,a.Z)();c!==l&&i(c),t.forEach(function(e,t){t<d.Pn&&!s.includes(e)&&("pin"===e.type||"webImage"===e.type)&&r(e.id,c,e)}),s.filter(function(e){return!t.includes(e)}).forEach(function(e){o(e.id,c)}),e.setState({taggedPins:t}),e.handleDismiss()}),B(k(e),"primaryButtonText",function(t){return e.props.i18n.ngettext('Save product', 'Save products', t, 'Button text for adding/saving products to a Collections pin', 'Button text for adding/saving products to a Collections pin')}),e}return r=[{key:"componentDidMount",value:function(){var e=this.props.taggedObjects.map(function(e){var t,r,o;return n.g.isNaN(e.id)?{type:"webImage",id:e.id||"",height:(null==(t=e.media)?void 0:t.height)||1,width:(null==(r=e.media)?void 0:r.width)||1,src:(null==(o=e.media)?void 0:o.url)||"",sourceURL:e.link}:{type:"pin",id:e.id||"",images:{"474x":e.media},description:"",title:"",videos:null,link:e.link}});this.setState({taggedPins:e})}},{key:"componentDidUpdate",value:function(e){var t=this;if(e.taggedObjectIds!==this.props.taggedObjectIds){var n=this.state.taggedPins.filter(function(e){return t.props.taggedObjectIds.includes(e.id)});n&&this.setState({taggedPins:n})}}},{key:"render",value:function(){var e=this.props,t=e.pinDraftId,n=e.pinItemId,r=e.pinTagId,i=e.pinTagIds,a=e.pinTags,c=e.requestContext,u=e.unfilteredTaggedObjects,p=e.useModalWithNoLayer,h=e.taggedObjectIds,y=e.inStlToolingExp,b=e.orbacActingAs,m=e.viewer,g=this.state,v=g.isAssetPickerOpen,x=g.taggedPins,P=["product_pins","scrape"];(0,I._P)(c,m,b)&&P.push("catalog");var O=(0,j.Z)({pinTagIds:i,pinTags:a,taggedObjects:u}),S=O.length,A=h.length;return(0,f.jsxs)(o.xu,{column:12,direction:"column",display:"flex",height:"100%",children:[(0,f.jsxs)(o.xu,{flex:"none",marginBottom:6,children:[(0,f.jsx)(o.xu,{marginBottom:y?2:1,children:y?(0,f.jsx)(o.X6,{size:"400",children:this.props.i18n._('Update products', 'pinbuilder.editProducts.header', 'Edit products in the collection/STL selected in Pin Builder.')}):(0,f.jsx)(o.X6,{size:"400",children:this.props.i18n._('Add products', 'Add products to the collection/STL selected in Pin Builder.', 'Add products to the collection/STL selected in Pin Builder.')})}),(0,f.jsx)(o.xu,{marginBottom:y?2:1,children:y?(0,f.jsxs)(o.kC,{alignItems:"stretch",justifyContent:"between",children:[(0,f.jsx)(o.xv,{children:this.props.i18n._('Tag up to 8 products in the scene', 'pinbuilder.editProducts.description', 'Description of editing pins in the collection')}),(0,f.jsx)(o.xv,{size:"200",weight:"bold",children:(0,w.nk)(this.props.i18n._('{{ numXyTaggedProducts }}/8', 'pinbuilder.editProducts.taggedProducts.count', 'Text display the total number of products tagged and the max number of products that can be tagged'),{numXyTaggedProducts:S})})]}):(0,f.jsx)(o.xv,{children:this.props.i18n._('Add products to your image to build a Pin people can shop', 'Description of adding pins to a collection', 'Description of adding pins to a collection')})}),!y&&(0,f.jsx)(o.xu,{"data-test-id":"num-product-count",display:"flex",children:(0,f.jsx)(o.xv,{size:"200",weight:"bold",children:(0,w.nk)(this.props.i18n.ngettext('{{ numProducts }} product', '{{ numProducts }} products', A, 'Text displaying the total number of products across all tags on a Pin', 'Text displaying the total number of products across all tags on a Pin'),{numProducts:A})})})]}),(0,f.jsx)(o.kC,{alignItems:"stretch",direction:"column",flex:"grow",overflow:"auto",width:y?445:void 0,children:(0,f.jsxs)(o.xu,{marginBottom:5,children:[y?(0,f.jsx)(s.Z,{pinDraftId:t,pinItemId:n,pinTagId:r,taggedObjects:O}):(0,f.jsx)(_,{handleClick:this.handleClick,pinItemId:n,pinTagId:r}),v&&(0,f.jsx)(l.Z,{closeOnOutsideClick:!1,isSecondaryButtonDisabled:!1,maxAssetsToSelect:d.Pn,onDismiss:this.handleDismiss,onPrimaryAction:this.handleAddTaggedPinsToPinDraft,onSecondaryAction:this.handleDismiss,pinItemId:n,primaryButtonText:this.primaryButtonText,resetScrapeOnSelect:!0,scrapeDescription:this.props.i18n._('Pick one item from a product link\u2014it\u2019ll create a product Pin for the item, and add it to your image', 'Detail about how to pick a product from scraping a URL for a Collections pin', 'Detail about how to pick a product from scraping a URL for a Collections pin'),scrapeTitle:this.props.i18n._('Use a link', 'Prompt for scraping an image from site', 'Prompt for scraping an image from site'),secondaryButtonText:this.props.i18n._('Cancel', 'PinBuilder.Modal.PinDraftInputCollectionTagView.buttonText', 'Button text for camcelling and dismissing the asset picker modal'),selectedPins:x,shownTabs:P,useModalWithNoLayer:p})]})})]})}}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,L(r.key),r)}}(c.prototype,r),Object.defineProperty(c,"prototype",{writable:!1}),c}(i.Component);function Z(e){var t=e.pinItemId,n=e.stlTaggedCoords,r=(0,u.ZP)(),o=(0,P.u)().logContextEvent,i=(0,S.B)(),a=(0,O.Z)(),l=(0,A.Z)(),s=(0,x.Z)({pinItemId:t,stlTaggedCoords:n}),c=s.createPinTag,d=s.inStlToolingExp,p=s.pinTagId,h=s.pinTagIds,y=s.pinTags,b=s.removeTaggedObject,m=s.saveTaggedObject,g=s.taggedObjectIds,v=s.taggedObjects,_=s.unfilteredTaggedObjects;return(0,f.jsx)(F,D(D({},e),{},{createPinTag:c,i18n:r,inStlToolingExp:d,logContextEvent:o,orbacActingAs:l,pinTagId:p,pinTagIds:h,pinTags:y,removeTaggedObject:b,requestContext:i,saveTaggedObject:m,taggedObjectIds:g,taggedObjects:v,unfilteredTaggedObjects:_,viewer:a}))}var M=n(19862),N=n(406262),H=n(489529),U=n(675973),W=n(400704),V=n(889539);function G(e){return(G="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function X(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?X(Object(n),!0).forEach(function(t){var r,o;r=t,o=n[t],(r=function(e){var t=function(e,t){if("object"!=G(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=G(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==G(t)?t:t+""}(r))in e?Object.defineProperty(e,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[r]=o}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):X(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var q={__style:{paddingBottom:d.uR}};function K(e){var t=e.height,n=e.pinDraftId,r=e.pinItemId,i=e.paddingX,a=e.useModalWithNoLayer,l=(0,u.ZP)(),s=(0,O.Z)(),c=(0,V.l)().shopTheLook.stlTaggedCoords,p=(0,U.Z)().checkExperiment,h=(0,A.Z)(),y=(0,I.nl)(s,h)&&"ad_creation"!==N.Z.scenario()&&p("web_stl_tooling",{dangerouslySkipActivation:!0}).anyEnabled;return(0,f.jsxs)(o.xu,{dangerouslySetInlineStyle:q,direction:"row",display:"flex",children:[(0,f.jsxs)(o.xu,{paddingX:y?0:void 0===i?5:i,children:[(0,f.jsx)(M.Z,{height:t,pinDraftId:n,pinItemId:r,view:"collectionsTag"}),!y&&(0,f.jsx)(o.xu,{width:260,children:(0,f.jsx)(o.xv,{align:"center",size:"200",weight:"bold",children:l._('Hint: make sure products you add match items in your image! You can add up to 24.', 'Hint explaining the maximum number of products that can be added to a Collections Pin', 'Hint explaining the maximum number of products that can be added to a Collections Pin')})})]}),(0,f.jsx)(o.xu,{flex:"grow",height:t,marginStart:5*!!y,minHeight:d.sD,paddingX:5*!y,width:"100%",children:(0,f.jsx)(Z,{inStlToolingExp:y,pinDraftId:n,pinItemId:r,stlTaggedCoords:c,useModalWithNoLayer:a})})]})}function J(e){var t=(0,r.v9)(function(t){return(0,W.OK)(t,e.pinDraftId)}),n=(0,r.v9)(function(e){return e.pinbuilder.pinItems[t.pinItemIds[0]].media}),o=n?(0,H.Z)(n,271):418;return(0,f.jsx)(K,Y(Y({},e),{},{height:o}))}},26622:function(e,t,n){"use strict";n.d(t,{Z:function(){return b}});var r=n(581722),o=n(963489),i=n(821342),a=n(506662),l=n(406262),s=n(274320),c=n(448505),u=n(7872),d=n(441501),f=n(452859),p=n(780056),h=n(593310),y=n(295614);function b(e){var t=e.pinItemId,n=e.stlTaggedCoords,b=e.onSaveTag,m=e.onRemoveTag,g={pinItemId:t},v=(0,o.TH)(),_=(0,i.Z)(),x=(0,c.Z)(),j=(0,r.I0)(),P=(0,s.r)().checkExperiment,O=(0,u.nl)(_,x)&&"ad_creation"!==l.Z.scenario()&&P("web_stl_tooling").anyEnabled,w=(0,a.mY)(v),S=w?(0,y.i3)():(0,h.jk)(),A=w?(0,y.iD)():(0,h.CQ)(),I=(0,r.v9)(function(e){var t=e.pinbuilder,n=t.pinItems,r=t.storyPinItems;return(w?r:n)[g.pinItemId]}),E=(0,r.v9)(function(e){return e.pinbuilder.pinTags}),C=(0,r.v9)(function(e){return e.pinbuilder.taggedObjects}),D=(null==I?void 0:I.selectedPinTagId)||(null!=I&&I.pinTagIds&&I.pinTagIds.length>0?I.pinTagIds[0]:null),T=(0,r.v9)(function(e){return S(e,g)}),k=(0,r.v9)(function(e){return A(e,g)});return{createPinTag:function(e){return j((w?p.EH:d.oe)(g.pinItemId,e))},inStlToolingExp:O,pinTagId:D,pinTagIds:(null==I?void 0:I.pinTagIds)||[],pinTags:E,removeTaggedObject:function(e,t){j((0,f.Go)(t,e)),j((0,f.Cf)(t,"edited")),null==m||m(e,t)},saveTaggedObject:function(e,t,r){var o,i,a,l=r.type||"",s=n||{},c=s.x,u=s.y;if("webImage"===r.type&&r.sourceURL){j((0,f.mz)(t,r.sourceURL,null)),O&&j((0,f.uM)(t,c||0,u||0));var h={height:r.height,width:r.width,url:r.src};j((0,f.Dn)(t,e,{media:h,type:l,pin:r}))}else j((0,f.mz)(t,null!=(o=r.link)?o:"",null)),O&&j((0,f.uM)(t,c||0,u||0)),j((0,f.Dn)(t,e,{media:(null==(i=r.images)?void 0:i["474x"])||(null==(a=r.images)?void 0:a["345x"]),type:l,pin:r}));j((w?p.Gm:d.C_)(g.pinItemId,t)),null==b||b(e,t)},taggedObjectIds:T,taggedObjects:k,unfilteredTaggedObjects:C}}},19862:function(e,t,n){"use strict";n.d(t,{Z:function(){return ox}});var r=n(586659),o=n(581722),i=n(20256),a=n(980787),l=n(19585),s=n(669019),c=n(382718);function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach(function(t){m(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function p(e,t){return(p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function h(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(y=function(){return!!e})()}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m(e,t,n){return(t=g(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function g(e){var t=function(e,t){if("object"!=u(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=u(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==u(t)?t:t+""}var v={__style:{padding:6}},_=function(e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");o.prototype=Object.create(e&&e.prototype,{constructor:{value:o,writable:!0,configurable:!0}}),Object.defineProperty(o,"prototype",{writable:!1}),e&&p(o,e);var t,n,r=(t=y(),function(){var e,n=b(o);return e=t?Reflect.construct(n,arguments,b(this).constructor):n.apply(this,arguments),function(e,t){if(t&&("object"==u(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return h(e)}(this,e)});function o(){var e;if(!(this instanceof o))throw TypeError("Cannot call a class as a function");for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];return m(h(e=r.call.apply(r,[this].concat(n))),"handleEllipsisClick",function(t,n){return function(){var r=e.props,o=r.setCarouselItem,i=r.logContextEvent;n&&i({event_type:101,component:13308,element:11126}),o(t)}}),m(h(e),"handleBackClick",function(){var t=e.props,n=t.pinItemIndex,r=t.setCarouselItem;(0,t.logContextEvent)({event_type:101,component:13308,element:12170}),r(n-1)}),m(h(e),"handleForwardClick",function(){var t=e.props,n=t.pinItemIndex,r=t.setCarouselItem;(0,t.logContextEvent)({event_type:101,component:13308,element:12169}),r(n+1)}),e}return n=[{key:"render",value:function(){var e=this,t=this.props,n=t.pinItemIds,r=t.pinItemIndex,o=t.showAdd,a=n.length-1,l=this.props.i18n._('Back', 'Button to advance to previous carousel image', 'Button to advance to previous carousel image'),s=this.props.i18n._('Forward', 'Button to advance to next carousel image', 'Button to advance to next carousel image');return(0,c.jsxs)(i.kC,{alignItems:"center",justifyContent:"between",children:[(0,c.jsx)(i.xu,{alignItems:"center",display:"flex",marginEnd:-1,marginStart:-1,children:n.map(function(t,n){return(0,c.jsx)(i.xu,{children:n===a&&o?(0,c.jsx)(i.xu,{"data-test-id":"add-item-to-carousel-button",children:(0,c.jsx)(i.hU,{accessibilityLabel:e.props.i18n._('Add', 'Button to add image to carousel', 'Button to add image to carousel'),bgColor:"transparent",icon:"add",iconColor:n===r?"darkGray":"gray",onClick:e.handleEllipsisClick(n,!0),size:"xs"})}):(0,c.jsx)(i.xu,{"data-test-id":"carousel-control-button",paddingX:1,children:(0,c.jsx)(i.iP,{onTap:e.handleEllipsisClick(n),rounding:"circle",children:(0,c.jsx)(i.xu,{color:n===r?"dark":"tertiary",height:12,rounding:"circle",width:12})})})},t)})}),(0,c.jsxs)(i.kC,{alignItems:"stretch",justifyContent:"start",children:[r>0?(0,c.jsx)(i.hU,{accessibilityLabel:l,bgColor:"transparent",icon:"arrow-back",iconColor:"darkGray",onClick:this.handleBackClick,size:"xs"}):(0,c.jsx)(i.xu,{dangerouslySetInlineStyle:v,children:(0,c.jsx)(i.JO,{accessibilityLabel:l,color:"subtle",icon:"arrow-back",size:12})}),r<a?(0,c.jsx)(i.hU,{accessibilityLabel:s,bgColor:"transparent",icon:"arrow-forward",iconColor:"darkGray",onClick:this.handleForwardClick,size:"xs"}):(0,c.jsx)(i.xu,{dangerouslySetInlineStyle:v,children:(0,c.jsx)(i.JO,{accessibilityLabel:s,color:"subtle",icon:"arrow-forward",size:12})})]})]})}}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,g(r.key),r)}}(o.prototype,n),Object.defineProperty(o,"prototype",{writable:!1}),o}(r.Component);function x(e){var t=(0,a.u)().logContextEvent,n=(0,l.ZP)(),r=(0,o.v9)(function(t){return t.pinbuilder.pinDrafts[e.pinDraftId]}),i=r.pinItemIds,u=r.pinItemIndex,d=i[i.length-1],p=(0,o.v9)(function(e){return!e.pinbuilder.pinItems[d].media}),h=(0,o.I0)();return(0,c.jsx)(_,f(f({},e),{},{i18n:n,logContextEvent:t,pinItemIds:i,pinItemIndex:u,setCarouselItem:function(t){return h((0,s.Cj)(e.pinDraftId,t))},showAdd:p}))}var j=n(865540),P=n(967308),O=n(937392),w=n(439068),S=n(821342),A=n(406262),I=n(675973),E=n(315259),C=n(97245),D=n(830176),T=n(672410),k=n(526435);function z(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,l=[],s=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);s=!0);}catch(e){c=!0,o=e}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return R(e,t);var n=({}).toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?R(e,t):void 0}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function R(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function B(e,t){var n=e/t,r=k.hH.carousel,o=r.length,i=r[0],a=r[o-1];if(n<=a.w/a.h)return{w:e,h:t};var l=r.reduce(function(e,t){var r=t.w/t.h,o=z(e,2),i=o[0],a=o[1],l=Math.abs(r-n);return a&&a<l?[i,a]:[t,l]},[null,null]),s=z(l,1)[0];return{w:t*(s?s.w/s.h:i.w/i.h),h:t}}var L=n(390556),F=n(349361),Z=n(957010),M=n(441501),N=n(774018);function H(e){return(H="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function U(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function W(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?U(Object(n),!0).forEach(function(t){V(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):U(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function V(e,t,n){var r;return(r=function(e,t){if("object"!=H(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=H(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==H(r)?r:r+"")in e)?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function G(e){var t=e.assets,n=e.i18n,r=e.isEmployee,o=e.pinDraftId;return function(e,i){var a=i(),l=o||(0,T.Z)(),s=a.pinbuilder.pinDrafts[l]&&a.pinbuilder.pinDrafts[l].pinItemIds||[],c=s.length,u=(a.pinbuilder.pinItems[s[0]]||{}).media,d=a.pinbuilder.pinItems[s[c-1]],f=t.length>0&&"localImage"===t[0].type?t[0]:{},p=f.width,h=f.height,y=s[c-1],b=t.reduce(function(e){return e.push((0,T.Z)()),e},d?[y]:[]),m=B(u&&u.width||p,u&&u.height||h),g=0===c?c:c-1,v=t.slice(0,k.dS-g).reduce(function(e,t){return W(W({},e),{},V({},(0,T.Z)(),W(W({},N.E),{},{media:"localImage"===t.type?t:null})))},{});(0,L.Z)(Object.keys(v),v,n,m).then(function(t){var i=t.map(function(t,n){var r=b[n]||(0,T.Z)();return r===y?e((0,M.nh)(r,t)):e((0,F.Z)(l,r,t)),r});if(t.length+g<k.dS){var a=(0,T.Z)();e((0,F.Z)(l,a,null,{saveIndex:!0})),i.push(a)}o||e((0,Z.Z)({i18n:n,isEmployee:r,pinDraft:{pinItemIds:i},pinDraftId:l,storyPinPublishStopwatch:void 0}))})}}var X=n(193373),Y=n(316095);function q(e){return(q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function K(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function J(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?K(Object(n),!0).forEach(function(t){en(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):K(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function $(e,t){return($=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Q(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ee(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(ee=function(){return!!e})()}function et(e){return(et=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function en(e,t,n){return(t=er(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function er(e){var t=function(e,t){if("object"!=q(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=q(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==q(t)?t:t+""}var eo=function(e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");a.prototype=Object.create(e&&e.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),Object.defineProperty(a,"prototype",{writable:!1}),e&&$(a,e);var t,n,o=(t=ee(),function(){var e,n=et(a);return e=t?Reflect.construct(n,arguments,et(this).constructor):n.apply(this,arguments),function(e,t){if(t&&("object"==q(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return Q(e)}(this,e)});function a(){var e;if(!(this instanceof a))throw TypeError("Cannot call a class as a function");for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];return en(Q(e=o.call.apply(o,[this].concat(n))),"state",{hasFocus:!1,isAssetPickerOpen:!1,websiteLinkButtonRef:null}),en(Q(e),"setWebsiteLinkButtonRef",function(t){e.setState({websiteLinkButtonRef:t})}),en(Q(e),"setTextFieldInput",function(t){e.textFieldInput=t}),en(Q(e),"handleBlur",function(){var t=e.props,n=t.setWebsiteLink,r=t.websiteLink,o=t.i18n;r?n(r,(0,E.Z)(r,{protocolIsOptional:!0})?"":(0,D.q0)(o)):e.setState({hasFocus:!1})}),en(Q(e),"handleTouch",function(){var t=e.props,n=t.logContextEvent,r=t.setWebsiteLink,o=t.submitWebsiteLink,i=t.websiteLink,a=t.i18n;if(!i)return void r(i,null);var l=(0,E.Z)(i,{protocolIsOptional:!0})?"":(0,D.q0)(a);r(i,l),l||(o(),n({event_type:101,component:13308,element:10969,aux_data:{url:i}}))}),en(Q(e),"handleChange",function(t){var n=t.value;e.props.setWebsiteLink(n)}),en(Q(e),"handleKeyDown",function(t){"Enter"===t.event.key&&e.handleTouch()}),en(Q(e),"handleClick",function(){var t=e.props,n=t.disabledPinCreation,r=t.experience,o=t.experienceClient,i=t.logContextEvent,a=t.setShowDisabledPinCreationBanner;if(n)return void a();i({event_type:101,component:13308,element:10968}),r&&501924===r.experience_id&&o.completeExperience(1000135,501924),e.setState({hasFocus:!0})}),en(Q(e),"handleDismiss",function(){e.setState({isAssetPickerOpen:!1})}),e}return n=[{key:"componentDidUpdate",value:function(e,t){this.textFieldInput&&!t.hasFocus&&this.textFieldInput.focus()}},{key:"render",value:function(){var e=this.props,t=e.createCarouselPinDraft,n=e.createPinDrafts,o=e.websiteLink,a=e.websiteLinkError,l=this.state,s=l.hasFocus,u=l.isAssetPickerOpen,d="pin-draft-website-link";return s?(0,c.jsxs)(r.Fragment,{children:[(0,c.jsx)(i.xu,{rounding:2,children:(0,c.jsx)(i.xu,{color:"secondary",padding:1,rounding:2,children:(0,c.jsxs)(i.xu,{display:"flex",marginEnd:-1,marginStart:-1,children:[(0,c.jsx)(i.xu,{flex:"grow",paddingX:1,children:(0,c.jsx)(i.nv,{ref:this.setTextFieldInput,hasError:!!a,id:d,onBlur:this.handleBlur,onChange:this.handleChange,onKeyDown:this.handleKeyDown,placeholder:this.props.i18n._('Enter website', 'Placeholder text to enter website url', 'Placeholder text to enter website url'),size:"lg",type:"text",value:o})}),(0,c.jsx)(i.xu,{children:(0,c.jsx)(i.iP,{fullHeight:!0,onTap:this.handleTouch,children:(0,c.jsx)(i.xu,{height:"100%",paddingX:1,children:(0,c.jsx)(i.xu,{alignItems:"center","data-test-id":"website-link-submit-button",display:"flex",height:"100%",justifyContent:"center",paddingX:2,children:(0,c.jsx)(i.JO,{accessibilityLabel:this.props.i18n._('Submit', 'Submit website button to scrape images', 'Submit website button to scrape images'),icon:"arrow-forward",size:20})})})})})]})})}),!!a&&(0,c.jsx)(C.Z,{errorMessage:a,htmlFor:d})]}):(0,c.jsxs)(i.xu,{"data-test-id":"save-from-site-button",children:[(0,c.jsxs)(i.xu,{ref:this.setWebsiteLinkButtonRef,children:[(0,c.jsx)(i.zx,{fullWidth:!0,onClick:this.handleClick,size:"lg",text:this.props.i18n._('Save from site', 'Save from site button', 'Save from site button')}),u&&(0,c.jsx)(P.Z,{initialTab:"scrape",onDismiss:this.handleDismiss,onPrimaryAction:n,onSecondaryAction:A.Z.enabled("carousel")?t:void 0})]}),(0,c.jsx)(O.Qp,{anchor:this.state.websiteLinkButtonRef,experienceIds:[501924],flyoutSize:"md",idealDirection:"up",placementId:1000135})]})}}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,er(r.key),r)}}(a.prototype,n),Object.defineProperty(a,"prototype",{writable:!1}),a}(r.Component);function ei(e){var t=(0,a.u)().logContextEvent,n=(0,l.ZP)(),r=(0,j.Z)(),i=e.pinDraftId,u=(0,o.I0)(),d=(0,S.Z)(),f=d.isAuth&&d.isEmployee,p=d.isAuth?d.id:"",h=d.isAuth?d.country:"",y=(0,w.Z)(),b=(0,I.Z)().checkExperiment,m=A.Z.enabled("disabledPinCreation");return(0,c.jsx)(eo,J(J({},e),{},{createCarouselPinDraft:function(e){return u(G({assets:e,pinDraftId:void 0,isEmployee:f,i18n:n}))},createPinDrafts:function(e){return u((0,X.Z)({assets:e,checkExperiment:b,country:h,i18n:n,ideaPinRenamingEnabled:r,isEmployee:f,logContextEvent:t,userId:p}))},disabledPinCreation:m,experienceClient:y,i18n:n,logContextEvent:t,setShowDisabledPinCreationBanner:function(){return u((0,Y.setShowDisabledPinCreationBanner)(!0))},setWebsiteLink:function(e,t){return u((0,s.f9)(i,e,t))},submitWebsiteLink:function(){return u((0,s.c8)(i,"scrape"))},websiteLink:(0,o.v9)(function(e){return e.pinbuilder.pinDrafts[i].websiteLink}),websiteLinkError:(0,o.v9)(function(e){return e.pinbuilder.pinDrafts[i].websiteLinkError})}))}var ea=n(963489),el=n(302148);function es(e){var t=e.currentIndex,n=e.numPinItems,r=(0,l.ZP)();return(0,c.jsx)(i.xu,{margin:3,position:"absolute",right:!0,top:!0,children:(0,c.jsx)(i.xu,{color:"transparentDarkGray",paddingX:3,paddingY:2,rounding:"pill",children:(0,c.jsx)(i.xv,{color:"inverse",size:"200",weight:"bold",children:(0,el.nk)(r._('{{ current }}/{{ total }}', 'Text denoting the current item number a user is viewing in a carousel', 'Text denoting the current item number a user is viewing in a carousel'),{current:t,total:n})})})})}function ec(e){var t=(0,o.v9)(function(t){return t.pinbuilder.pinDrafts[e.pinDraftId]}),n=t.pinItemIds,r=t.pinItemIndex,i=(0,o.v9)(function(e){return n.filter(function(t){return!!e.pinbuilder.pinItems[t].media}).length});return(0,c.jsx)(es,{currentIndex:r+1,numPinItems:i})}var eu=n(18468),ed=n(982166),ef=n(383673),ep=n(295182);function eh(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ep.IU;return(0,ef.Z)().then(function(r){var o=new r(document.createElement("div"),t),i=e.filter(function(e){return"localImage"===e.type}).map(function(e){return e.src});return o.setImages(i).then(function(){return{media:o.getCanvasOutput({width:n}),canvasJson:o.toJSON()}})})}function ey(e){return(ey="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function eb(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function em(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?eb(Object(n),!0).forEach(function(t){ej(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):eb(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function eg(e,t){return(eg=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function ev(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function e_(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(e_=function(){return!!e})()}function ex(e){return(ex=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ej(e,t,n){return(t=eP(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function eP(e){var t=function(e,t){if("object"!=ey(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=ey(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ey(t)?t:t+""}var eO=function(e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");o.prototype=Object.create(e&&e.prototype,{constructor:{value:o,writable:!0,configurable:!0}}),Object.defineProperty(o,"prototype",{writable:!1}),e&&eg(o,e);var t,n,r=(t=e_(),function(){var e,n=ex(o);return e=t?Reflect.construct(n,arguments,ex(this).constructor):n.apply(this,arguments),function(e,t){if(t&&("object"==ey(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return ev(e)}(this,e)});function o(){var e;if(!(this instanceof o))throw TypeError("Cannot call a class as a function");for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];return ej(ev(e=r.call.apply(r,[this].concat(n))),"state",{media:null}),e}return n=[{key:"componentDidMount",value:function(){var e=this,t=this.props,n=t.assets,r=t.i18n;eh(n.filter(function(e){return"localImage"===e.type}).slice(0,5),r).then(function(t){var n=t.media;e.setState({media:n})})}},{key:"render",value:function(){var e=this.state.media,t=e?k.Uw/(e.width>e.height?e.width:e.height):0;return(0,c.jsxs)(i.xu,{alignItems:"center",direction:"column",display:"flex",height:"100%",justifyContent:"center",padding:2,children:[(0,c.jsx)(i.xu,{marginBottom:6,width:k.Uw,children:(0,c.jsx)(i.xv,{align:"center",children:this.props.i18n._('Create a collage', 'Instructing the user that all the images selected will be combined into 1 image', 'Instructing the user that all the images selected will be combined into 1 image')})}),(0,c.jsx)(i.xu,{height:"100%",children:e&&(0,c.jsx)(i.xu,{"data-test-id":"layout-picker-collage-preview",height:e.height*t,overflow:"hidden",rounding:2,width:e.width*t,children:(0,c.jsx)(i.Ee,{alt:this.props.i18n._('A collage image combined from selected images', 'Preview of how the collage would look.', 'Preview of how the collage would look.'),naturalHeight:e.height,naturalWidth:e.width,src:e.src})})})]})}}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,eP(r.key),r)}}(o.prototype,n),Object.defineProperty(o,"prototype",{writable:!1}),o}(r.Component);function ew(e){return(ew="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function eS(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function eA(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?eS(Object(n),!0).forEach(function(t){eT(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):eS(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function eI(e,t){return(eI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function eE(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function eC(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(eC=function(){return!!e})()}function eD(e){return(eD=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function eT(e,t,n){return(t=ek(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ek(e){var t=function(e,t){if("object"!=ew(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=ew(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ew(t)?t:t+""}var ez=[{component:function(e){var t=e.assets,n=(0,l.ZP)(),r=t.filter(function(e){return"localImage"===e.type}).slice(0,5);if(r.length>0){var o=r[0],a=k.Uw/(o.width>o.height?o.width:o.height);return(0,c.jsxs)(i.xu,{alignItems:"center",direction:"column",display:"flex",height:"100%",padding:2,children:[(0,c.jsx)(i.xu,{marginBottom:6,width:k.Uw,children:(0,c.jsx)(i.xv,{align:"center",children:n._('Create a carousel', 'Instructing the user that all the images selected will be combined into a carousel', 'Instructing the user that all the images selected will be combined into a carousel')})}),(0,c.jsxs)(i.xu,{"data-test-id":"layout-picker-carousel-preview",direction:"column",display:"flex",height:"100%",justifyContent:"center",children:[(0,c.jsx)(i.xu,{height:o.height*a,overflow:"hidden",rounding:2,width:o.width*a,children:(0,c.jsx)(i.Ee,{alt:n._('A carousel image.', 'Preview of how the carousel would look.', 'Preview of how the carousel would look.'),naturalHeight:o.height,naturalWidth:o.width,src:o.src,children:(0,c.jsx)(es,{currentIndex:1,numPinItems:r.length})})}),(0,c.jsx)(i.xu,{alignItems:"center",display:"flex",marginEnd:-1,marginStart:-1,marginTop:2,children:r.map(function(e,t){return(0,c.jsx)(i.xu,{paddingX:1,children:(0,c.jsx)(i.xu,{color:0===t?"dark":"tertiary",height:10,rounding:"circle",width:10})},e.src)})})]})]})}return null},name:"carousel"},{component:function(e){var t=(0,l.ZP)();return(0,c.jsx)(eO,em(em({},e),{},{i18n:t}))},name:"layout"}],eR=function(e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");o.prototype=Object.create(e&&e.prototype,{constructor:{value:o,writable:!0,configurable:!0}}),Object.defineProperty(o,"prototype",{writable:!1}),e&&eI(o,e);var t,n,r=(t=eC(),function(){var e,n=eD(o);return e=t?Reflect.construct(n,arguments,eD(this).constructor):n.apply(this,arguments),function(e,t){if(t&&("object"==ew(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return eE(e)}(this,e)});function o(){var e;if(!(this instanceof o))throw TypeError("Cannot call a class as a function");for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];return eT(eE(e=r.call.apply(r,[this].concat(n))),"state",{selectedLayout:null,hoveredLayout:null}),eT(eE(e),"handleSelect",function(t){return function(){e.setState({selectedLayout:t}),e.props.logContextEvent({event_type:101,view_type:212,component:15333,element:"carousel"===t?16249:16250})}}),eT(eE(e),"handleOnMouseEnter",function(t){return function(){e.setState({hoveredLayout:t})}}),eT(eE(e),"handleOnMouseLeave",function(){return function(){e.setState({hoveredLayout:null})}}),e}return n=[{key:"componentDidMount",value:function(){this.props.logContextEvent({event_type:13,view_type:212,component:15333})}},{key:"render",value:function(){var e=this,t=this.props,n=t.assets,r=t.onDismiss,o=t.onPrimaryAction,a=t.primaryButtonText,l=this.state,s=l.selectedLayout,u=l.hoveredLayout,d=a||this.props.i18n._('Create Pin', 'Button to create either a carousel Pin or Pin with multiple images', 'Button to create either a carousel Pin or Pin with multiple images');return(0,c.jsx)(ed.ZP,{accessibilityModalLabel:this.props.i18n._('Pick a Pin', 'Label to describe the Pin format picker', 'Label to describe the Pin format picker'),footer:(0,c.jsxs)(i.xu,{alignItems:"center",display:"flex",justifyContent:"between",paddingX:4,children:[(0,c.jsx)(i.xu,{width:"50%",children:(0,c.jsx)(i.xv,{color:"subtle",overflow:"normal",size:"200",children:this.props.i18n._('Psst...you can edit and reorder your images later', 'Information for the Pin format picker model, choosing between carousel and collage.', 'Information for the Pin format picker model, choosing between carousel and collage.')})}),(0,c.jsx)(i.xu,{"data-test-id":"layout-picker-action-button",display:"flex",flex:"none",marginEnd:-1,marginStart:-1,marginTop:1,children:(0,c.jsx)(i.zx,{color:"red",disabled:!s,onClick:function(){return o(e.state.selectedLayout)},text:d})})]}),heading:(0,c.jsx)(i.xu,{display:"flex",justifyContent:"center",paddingY:4,children:(0,c.jsx)(i.X6,{size:"600",children:this.props.i18n._('Pick a Pin', 'Label to of the Pin format picker.', 'Label to of the Pin format picker.')})}),onDismiss:r,size:912,children:(0,c.jsx)(i.xu,{display:"flex",height:460,justifyContent:"center",paddingX:4,paddingY:8,children:ez.map(function(t,r){var o=t.component,a=t.name;return(0,c.jsx)(i.xu,{color:u===a?"secondary":"default",dangerouslySetInlineStyle:{__style:{border:"2px solid",borderColor:s===a?eu.$rz:"#efefef"}},height:380,marginEnd:3*(1===r),marginStart:3*(1===r),onMouseEnter:e.handleOnMouseEnter(a),onMouseLeave:e.handleOnMouseLeave(),rounding:2,width:350,children:(0,c.jsx)(i.iP,{fullHeight:!0,onTap:e.handleSelect(a),rounding:2,children:(0,c.jsx)(i.xu,{height:"100%",paddingY:4,children:o&&(0,c.jsx)(o,{assets:n})})})},r)})})})}}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ek(r.key),r)}}(o.prototype,n),Object.defineProperty(o,"prototype",{writable:!1}),o}(r.Component);function eB(e){var t=(0,l.ZP)(),n=(0,a.u)().logContextEvent;return(0,c.jsx)(eR,eA(eA({},e),{},{i18n:t,logContextEvent:n}))}var eL=n(346955),eF=n(571045),eZ=n(15667),eM=n(886981),eN=n(694955),eH=n(594306),eU=n(767209),eW=n(70012),eV=n(315280),eG=n(382208),eX=n(473728),eY=n(25837),eq=function(e,t){return(0,eX.Z)(t.ngettext('{{ length }} px', '{{ length }} px', 200, 'PinBuilder.PinQualityDrawer.pixel', 'length in pixel'),{length:e})},eK=function(e,t,n){return(0,eX.Z)(n.ngettext('{{ min }}-{{ max }} char', '{{ min }}-{{ max }} chars', 100, 'PinBuilder.PinQualityDrawer.charsLengthRange', 'range of string length in unit of characters'),{min:e,max:t})},eJ=function(e,t){return(0,eX.Z)(t.ngettext('{{ min }}+ char', '{{ min }}+ chars', 100, 'PinBuilder.PinQualityDrawer.lengthAtLeastChars', 'string length to be at least how many characters'),{min:100})},e$=(0,r.memo)(function(e){var t=e.onDismiss,n=(0,l.ZP)(),r=n._('None', 'PinBuilder.PinQualityDrawer.none', 'there is no requirement or suggestion for this field');return(0,c.jsx)(i.mh,{zIndex:{index:function(){return eY.fe+1}},children:(0,c.jsx)(i.To,{accessibilityDismissButtonLabel:n._('Dismiss', 'PinBuilder.PinQualityDrawer.Dismiss', 'Dismiss the quality drawer'),accessibilityLabel:n._('Pin creation quality recommentations', 'PinBuilder.PinQualityDrawer.SheetLabel', 'Pin builder quality recommentations'),footer:(0,c.jsx)(i.xu,{alignItems:"end",color:"default",display:"flex",justifyContent:"end",children:(0,c.jsx)(i.zx,{accessibilityLabel:n._('Close', 'PinBuilder.PinQualityDrawer.close', 'Close'),color:"red",onClick:t,text:n._('Got it', 'PinBuilder.PinQualityDrawer.close', 'The close button of the drawer')})}),heading:n._('Maximize engagement with high quality pins.', 'PinBuilder.PinQualityDrawer.title', 'The title of the Pin Quality Drawer which introduces our recommendations for pin creation'),onDismiss:t,size:"lg",subHeading:(0,c.jsx)(i.xu,{marginStart:8,children:(0,c.jsx)(i.xv,{children:n._('Follow these recommendations to achieve the highest quality pins.', 'PinBuilder.PinQualityDrawer.description', 'The description of the Pin Quality Drawer which introduces our recommendations for pin creation')})}),children:(0,c.jsxs)(i.xu,{children:[(0,c.jsxs)(i.xu,{marginBottom:8,children:[(0,c.jsx)(i.xu,{marginBottom:3,children:(0,c.jsx)(i.X6,{size:"600",children:n._('Photo quality', 'PinBuilder.PinQualityDrawer.title.photo', 'The title of the photo section of Pin Quality Drawer')})}),(0,c.jsxs)(i.iA,{accessibilityLabel:n._('List of image qualities', 'PinQualityDrawer.image.accessibilityLabel', 'Accessibility label for table of image qualities'),children:[(0,c.jsx)(i.iA.Header,{children:(0,c.jsxs)(i.iA.Row,{children:[(0,c.jsx)(i.iA.HeaderCell,{children:(0,c.jsx)(i.xv,{size:"100",weight:"bold",children:n._('Content Attribute', 'PinBuilder.PinQualityDrawer.table.headerCell.contentAttribute', 'Header cell for column content attribute of photo quality table')})}),(0,c.jsx)(i.iA.HeaderCell,{children:(0,c.jsx)(i.xv,{size:"100",weight:"bold",children:n._('Minimum Requirement', 'PinBuilder.PinQualityDrawer.table.headerCell.minimumRequirement', 'Header cell for column Minimum Requirement of photo quality table')})}),(0,c.jsx)(i.iA.HeaderCell,{children:(0,c.jsx)(i.xv,{size:"100",weight:"bold",children:n._('Recommendation', 'PinBuilder.PinQualityDrawer.table.headerCell.Recommendation', 'Header cell for column Recommendation of photo quality table')})})]})}),(0,c.jsxs)(i.iA.Body,{children:[(0,c.jsxs)(i.iA.Row,{children:[(0,c.jsx)(i.iA.Cell,{children:(0,c.jsx)(i.xv,{size:"100",children:n._('Resolution', 'PinBuilder.PinQualityDrawer.title.resolution', 'the resolution of pin')})}),(0,c.jsx)(i.iA.Cell,{children:(0,c.jsx)(i.xv,{size:"100",children:(0,eX.Z)(n._('{{ width }} wide x {{ height }} tall', 'PinBuilder.PinQualityDrawer.resolution', 'minimum requirement of pin photo resolution'),{width:eq(200,n),height:eq(300,n)})})}),(0,c.jsx)(i.iA.Cell,{children:(0,c.jsx)(i.xv,{size:"100",children:(0,eX.Z)(n._('{{ width }} wide x {{ height }} tall (or larger)', 'PinBuilder.PinQualityDrawer.resolution.orLarger', 'recommendation of pin photo resolution'),{width:eq(1e3,n),height:eq(1500,n)})})})]}),(0,c.jsxs)(i.iA.Row,{children:[(0,c.jsx)(i.iA.Cell,{children:(0,c.jsx)(i.xv,{size:"100",children:n._('Aspect Ratio', 'PinBuilder.PinQualityDrawer.title.ratio', 'aspect ratio of photo pin')})}),(0,c.jsx)(i.iA.Cell,{children:(0,c.jsx)(i.xv,{size:"100",children:(0,eX.Z)(n._('{{ widthRatio }} wide : {{ heightRatio }} tall (or more wide, less tall)', 'PinBuilder.PinQualityDrawer.ratio', 'the aspect ratio of pin'),{widthRatio:3,heightRatio:2})})}),(0,c.jsx)(i.iA.Cell,{children:(0,c.jsx)(i.xv,{size:"100",children:(0,eX.Z)(n._('{{ widthRatio }} wide : {{ heightRatio }} tall (or less wide, more tall)', 'PinBuilder.PinQualityDrawer.ratio', 'the aspect ratio of pin'),{widthRatio:2,heightRatio:3})})})]}),(0,c.jsxs)(i.iA.Row,{children:[(0,c.jsx)(i.iA.Cell,{children:(0,c.jsx)(i.xv,{size:"100",children:n._('Title Length', 'PinBuilder.PinQualityDrawer.title.titleLength', 'the length of the title of this pin')})}),(0,c.jsx)(i.iA.Cell,{children:(0,c.jsx)(i.xv,{size:"100",children:r})}),(0,c.jsx)(i.iA.Cell,{children:(0,c.jsx)(i.xv,{size:"100",children:eK(k.bA,k.Ke,n)})})]}),(0,c.jsxs)(i.iA.Row,{children:[(0,c.jsx)(i.iA.Cell,{children:(0,c.jsx)(i.xv,{size:"100",children:n._('Description Length', 'PinBuilder.PinQualityDrawer.title.descriptionLength', 'the length of the description of this pin')})}),(0,c.jsx)(i.iA.Cell,{children:(0,c.jsx)(i.xv,{size:"100",children:r})}),(0,c.jsx)(i.iA.Cell,{children:(0,c.jsx)(i.xv,{size:"100",children:eJ(100,n)})})]}),(0,c.jsxs)(i.iA.Row,{children:[(0,c.jsx)(i.iA.Cell,{children:(0,c.jsx)(i.xv,{size:"100",children:n._('Destination Link', 'PinBuilder.PinQualityDrawer.title.link', 'the destination link of this pin')})}),(0,c.jsx)(i.iA.Cell,{children:(0,c.jsx)(i.xv,{size:"100",children:r})}),(0,c.jsx)(i.iA.Cell,{children:(0,c.jsx)(i.xv,{size:"100",children:n._('Have a destination link', 'PinBuilder.PinQualityDrawer.link.recommendation', 'Recommended to have a destination link for the pin to create')})})]})]})]})]}),(0,c.jsxs)(i.xu,{children:[(0,c.jsx)(i.xu,{marginBottom:3,children:(0,c.jsx)(i.X6,{size:"600",children:n._('Video quality', 'PinBuilder.PinQualityDrawer.title', 'The title of the video section of Pin Quality Drawer')})}),(0,c.jsxs)(i.iA,{accessibilityLabel:n._('List of video qualities', 'PinQualityDrawer.video.accessibilityLabel', 'Accessibility label for table of video qualities'),children:[(0,c.jsx)(i.iA.Header,{children:(0,c.jsxs)(i.iA.Row,{children:[(0,c.jsx)(i.iA.HeaderCell,{children:(0,c.jsx)(i.xv,{size:"100",weight:"bold",children:n._('Content Attribute', 'PinBuilder.PinQualityDrawer.table.headerCell.contentAttribute', 'Header cell for column content attribute of photo quality table')})}),(0,c.jsx)(i.iA.HeaderCell,{children:(0,c.jsx)(i.xv,{size:"100",weight:"bold",children:n._('Minimum Requirement', 'PinBuilder.PinQualityDrawer.table.headerCell.minimumRequirement', 'Header cell for column Minimum Requirement of photo quality table')})}),(0,c.jsx)(i.iA.HeaderCell,{children:(0,c.jsx)(i.xv,{size:"100",weight:"bold",children:n._('Recommendation', 'PinBuilder.PinQualityDrawer.table.headerCell.Recommendation', 'Header cell for column Recommendation of photo quality table')})})]})}),(0,c.jsxs)(i.iA.Body,{children:[(0,c.jsxs)(i.iA.Row,{children:[(0,c.jsx)(i.iA.Cell,{children:(0,c.jsx)(i.xv,{size:"100",children:n._('Resolution', 'PinBuilder.PinQualityDrawer.title.resolution', 'resolution of pin video')})}),(0,c.jsx)(i.iA.Cell,{children:(0,c.jsx)(i.xv,{size:"100",children:(0,eX.Z)(n._('{{ width }} wide x {{ height }} tall', 'PinBuilder.PinQualityDrawer.resolution', 'minimum requirement of pin photo resolution'),{width:eq(200,n),height:eq(300,n)})})}),(0,c.jsx)(i.iA.Cell,{children:(0,c.jsx)(i.xv,{size:"100",children:(0,eX.Z)(n._('{{ width }} wide x {{ height }} tall (or larger)', 'PinBuilder.PinQualityDrawer.resolution.orLarger', 'recommendation of pin photo resolution'),{width:eq(540,n),height:eq(960,n)})})})]}),(0,c.jsxs)(i.iA.Row,{children:[(0,c.jsx)(i.iA.Cell,{children:(0,c.jsx)(i.xv,{size:"100",children:n._('Duration', 'PinBuilder.PinQualityDrawer.title.duration', 'duration of the pin video')})}),(0,c.jsx)(i.iA.Cell,{children:(0,c.jsx)(i.xv,{size:"100",children:(0,eX.Z)(n.ngettext('{{ duration }} second', '{{ duration }} seconds', 4, 'PinBuilder.PinQualityDrawer.duration', 'pin video\'s duration in unit of seconds'),{duration:4})})}),(0,c.jsx)(i.iA.Cell,{children:(0,c.jsx)(i.xv,{size:"100",children:(0,eX.Z)(n.ngettext('At least {{ duration }} second', 'At least {{ duration }} seconds', 4, 'PinBuilder.PinQualityDrawer.duration.atLeast', 'pin video\'s duration at least how many seconds'),{duration:4})})})]}),(0,c.jsxs)(i.iA.Row,{children:[(0,c.jsx)(i.iA.Cell,{children:(0,c.jsx)(i.xv,{size:"100",children:n._('Aspect Ratio', 'PinBuilder.PinQualityDrawer.title.ratio', 'aspect ratio of this pin video')})}),(0,c.jsx)(i.iA.Cell,{children:(0,c.jsx)(i.xv,{size:"100",children:(0,eX.Z)(n._('{{ widthRatio }} wide : {{ heightRatio }} tall (or more wide, less tall)', 'PinBuilder.PinQualityDrawer.ratio', 'the aspect ratio of pin'),{widthRatio:3,heightRatio:2})})}),(0,c.jsx)(i.iA.Cell,{children:(0,c.jsx)(i.xv,{size:"100",children:(0,eX.Z)(n._('{{ widthRatio }} wide : {{ heightRatio }} tall (or less wide, more tall)', 'PinBuilder.PinQualityDrawer.ratio', 'the aspect ratio of pin'),{widthRatio:2,heightRatio:3})})})]}),(0,c.jsxs)(i.iA.Row,{children:[(0,c.jsx)(i.iA.Cell,{children:(0,c.jsx)(i.xv,{size:"100",children:n._('Title Length', 'PinBuilder.PinQualityDrawer.title.titleLength', 'the length of the title of this pin')})}),(0,c.jsx)(i.iA.Cell,{children:(0,c.jsx)(i.xv,{size:"100",children:r})}),(0,c.jsx)(i.iA.Cell,{children:(0,c.jsx)(i.xv,{size:"100",children:eK(k.bA,k.Ke,n)})})]}),(0,c.jsxs)(i.iA.Row,{children:[(0,c.jsx)(i.iA.Cell,{children:(0,c.jsx)(i.xv,{size:"100",children:n._('Description Length', 'PinBuilder.PinQualityDrawer.title.descriptionLength', 'the length of the description of this pin')})}),(0,c.jsx)(i.iA.Cell,{children:(0,c.jsx)(i.xv,{size:"100",children:r})}),(0,c.jsx)(i.iA.Cell,{children:(0,c.jsx)(i.xv,{size:"100",children:eJ(100,n)})})]}),(0,c.jsxs)(i.iA.Row,{children:[(0,c.jsx)(i.iA.Cell,{children:(0,c.jsx)(i.xv,{size:"100",children:n._('Destination Link', 'PinBuilder.PinQualityDrawer.title.link', 'the destination link of this pin')})}),(0,c.jsx)(i.iA.Cell,{children:(0,c.jsx)(i.xv,{size:"100",children:r})}),(0,c.jsx)(i.iA.Cell,{children:(0,c.jsx)(i.xv,{size:"100",children:n._('Have a destination link', 'PinBuilder.PinQualityDrawer.link.recommendation', 'Recommended to have a destination link for the pin to create')})})]})]})]})]})]})})})}),eQ=n(354250);function e0(e){return(e0="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function e1(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function e2(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?e1(Object(n),!0).forEach(function(t){var r,o;r=t,o=n[t],(r=function(e){var t=function(e,t){if("object"!=e0(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=e0(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==e0(t)?t:t+""}(r))in e?Object.defineProperty(e,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[r]=o}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):e1(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function e8(e){return(e8="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function e3(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function e5(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?e3(Object(n),!0).forEach(function(t){tn(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):e3(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function e6(e){return function(e){if(Array.isArray(e))return e4(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return e4(e,void 0);var n=({}).toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?e4(e,void 0):void 0}}(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function e4(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function e9(e,t){return(e9=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function e7(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function te(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(te=function(){return!!e})()}function tt(e){return(tt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function tn(e,t,n){return(t=tr(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function tr(e){var t=function(e,t){if("object"!=e8(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=e8(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==e8(t)?t:t+""}var to={__style:{zIndex:k.v9}},ti={__style:{border:"dashed 2px #dadada",borderRadius:6}},ta={__style:{border:"dashed 2px #CC0000"}},tl={color:"#6c6c6c"},ts=16/9;function tc(e,t,n){n({event_type:101,component:13308,element:12171,view_type:e,view_parameter:t})}var tu=function(e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");o.prototype=Object.create(e&&e.prototype,{constructor:{value:o,writable:!0,configurable:!0}}),Object.defineProperty(o,"prototype",{writable:!1}),e&&e9(o,e);var t,n,r=(t=te(),function(){var e,n=tt(o);return e=t?Reflect.construct(n,arguments,tt(this).constructor):n.apply(this,arguments),function(e,t){if(t&&("object"==e8(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return e7(e)}(this,e)});function o(e){var t;if(!(this instanceof o))throw TypeError("Cannot call a class as a function");return tn(e7(t=r.call(this,e)),"state",{isAssetPickerOpen:!1,isLayoutPickerOpen:!1,assets:[],isDrawerOpen:!1}),tn(e7(t),"handleAddMediaToPinDraft",function(e){var n=t.props,r=n.addMediaToPinDraft,o=n.pinDraftId;r(e,"carousel"===n.type?o:void 0)}),tn(e7(t),"handleOpenLayoutPicker",function(e){t.setState({isLayoutPickerOpen:!0,assets:e})}),tn(e7(t),"handleChange",function(e){var n=t.props,r=n.processFiles,o=n.type,i=n.logContextEvent,a=e.target.files?Array.from(e.target.files):[];A.Z.enabled("carousel")&&A.Z.enabled("layouts")&&"carousel"!==o&&a.length>1?t.openLayoutPickerForFiles(a):r(a),i({event_type:101,component:13308,element:10967,view_type:t.props.viewType,view_parameter:t.props.viewParameter,aux_data:{pin_builder_data:JSON.stringify({media_types:a.map(function(e){return e.type})})}}),e.target.value=""}),tn(e7(t),"handleClick",function(){t.props.logContextEvent({event_type:101,component:13308,element:10966,view_type:t.props.viewType,view_parameter:t.props.viewParameter})}),tn(e7(t),"handleDismiss",function(){var e=t.state,n=e.isAssetPickerOpen,r=e.isLayoutPickerOpen;n?(t.setState({isAssetPickerOpen:!1}),t.props.logContextEvent({event_type:123,component:13392,view_type:t.props.viewType,view_parameter:t.props.viewParameter})):r&&t.setState({isLayoutPickerOpen:!1})}),tn(e7(t),"handleDrawerDismiss",function(){t.setState({isDrawerOpen:!1})}),tn(e7(t),"handleDrop",function(e){var n=t.props,r=n.processFiles,o=n.logContextEvent,i=(0,eF.Z)(e.dataTransfer);o({event_type:3502,component:13308,element:10966,view_type:t.props.viewType,view_parameter:t.props.viewParameter,aux_data:{pin_builder_data:JSON.stringify({media_types:i.map(function(e){return e.type})})}}),A.Z.enabled("carousel")&&i.length>1?t.openLayoutPickerForFiles(i):r(A.Z.enabled("carousel")?i:i.slice(0,1))}),tn(e7(t),"handleLayoutSelected",function(e){if("layout"===e)(0,t.props.createLayoutPinDraft)(t.state.assets),t.setState({isLayoutPickerOpen:!1});else if("carousel"===e){var n=t.props,r=n.addMediaToPinDraft,o=n.pinDraftId;r(t.state.assets,o)}}),tn(e7(t),"getPrimaryAction",function(){var e=t.props,n=e.createPinDrafts;return"carousel"===e.type?t.handleAddMediaToPinDraft:n}),tn(e7(t),"getSecondaryAction",function(){var e=t.props.type;if(t.state.isAssetPickerOpen&&"single"===e)return t.handleOpenLayoutPicker}),tn(e7(t),"getText",function(){var e,n=t.props,r=n.type,o=n.mediaError,i=null==(e=n.userResource.data)?void 0:e.video_upload_allowed,a="carousel"===r,l=A.Z.enabled("carousel"),s=!a&&i;return o?o:a?t.props.i18n._('Upload another image to create a carousel', 'pinbuilder.pindraft.media.mediaEmptyView.carouselText', 'Label on drag and drop area for uploading a Pin.'):l&&s?t.props.i18n._('Drag and drop or click to upload images or a video', 'Label on drag and drop area for uploading a Pin.', 'Label on drag and drop area for uploading a Pin.'):l?t.props.i18n._('Drag and drop or click to upload your images', 'Label on drag and drop area for uploading a Pin.', 'Label on drag and drop area for uploading a Pin.'):s?t.props.i18n._('Drag and drop or click to upload your image or video', 'Label on drag/drop area for uploading a pin', 'Label on drag/drop area for uploading a pin'):t.props.i18n._('Drag and drop or click to upload', 'Label on drag/drop area for uploading a pin', 'Label on drag/drop area for uploading a pin')}),A.Z.enabled("layouts")&&(0,ef.Z)(),t}return n=[{key:"openLayoutPickerForFiles",value:function(e){var t=this,n=this.props,r=n.i18n,o=n.ideaPinRenamingEnabled,i=n.processFiles,a=n.pinDraftId,l=n.setPinDraftAssetError;(0,eV.Z)({i18n:r,ideaPinRenamingEnabled:o,files:e,options:{allowVideo:!1}}).then(function(n){var r=n.filter(function(e){return"error"!==e.type});r.length>1&&r.length<=5?t.setState({isLayoutPickerOpen:!0,assets:r}):r.length>5?l(a,t.props.i18n._('Uh oh, your files could not be uploaded. Please make sure to select five files or less.', 'pinbuilder.pindraft.media.mediaEmptyView.validateFiles.error', 'Error message notifying User their selected files could not be uploaded due to quantity')):i(e)})}},{key:"render",value:function(){var e,t=this,n=this.props,r=n.aspectRatio,o=n.imageFileTypes,a=n.isPartner,l=n.mediaError,s=n.type,u=n.pinDraftId,d=n.logContextEvent,f=n.checkExperiment,p=n.userResource,h=this.state,y=h.assets,b=h.isDrawerOpen,m=h.isAssetPickerOpen,g=h.isLayoutPickerOpen,v=null==(e=p.data)?void 0:e.video_upload_allowed,_=A.Z.enabled("carousel"),x="carousel"!==s&&(v||["story","storyFARLandscape","storyFARPortrait"].includes(s)),j=[].concat(e6(o),e6(x?eH.ss:[])).join(","),O=["upload","scrape"],w=f&&f("aid_exp_pin_builder_a11y_image_recommendation").anyEnabled,S=(0,el.nk)(this.props.i18n._('We recommend using high quality .jpg files less than {{max_image_size_mb}}MB', 'Pinbuilder.HelpText.Image', 'Help text on Pin creation specifying best practices for images'),{max_image_size_mb:20}),E=(0,el.nk)(this.props.i18n._('We recommend using high quality .jpg files less than {{max_image_size_mb}}MB or .mp4 files less than {{max_video_size_gb}}GB', 'Pinbuilder.HelpText.Media', 'Help text on Pin creation specifying best practices for images or videos'),{max_image_size_mb:20,max_video_size_gb:2}),C=A.Z.enabled("pinQuality");return(0,c.jsx)(eG.lE,{children:function(e){var n=e.openHelpTextInNewWindow;return(0,c.jsx)(i.xu,{height:"100%",width:"100%",children:(0,c.jsx)(eU.Z,{accept:j,accessibilityDescription:x?E.join(""):S.join(""),accessibilityLabel:t.props.i18n._('File upload', '[m10n] pinbuilder.mediaEmptyView.fileUpload.accessibilityLabel', 'Accessibility label for file upload'),allowMultipleFiles:_,experimentsClient:(0,I.Z)(),hasError:!!l,id:"media-upload-input-"+u,isAriaHidden:!1,onChange:t.handleChange,onClick:t.handleClick,onDrop:t.handleDrop,children:function(){return(0,c.jsxs)(i.xu,{alignItems:"center",column:12,"data-test-id":"media-empty-view",display:"flex",height:"100%",justifyContent:"center",overflow:"hidden",padding:4,position:"relative",rounding:3,children:[(0,c.jsxs)(i.xu,{alignItems:"center",column:12,dangerouslySetInlineStyle:l?ta:ti,direction:"column",display:"flex",height:"100%",justifyContent:w?"start":"center",margin:1,rounding:3,width:241,children:[(0,c.jsx)(i.xu,{"data-test-id":"media-empty-view-upload-error",marginTop:r>=ts?0:w?4:-12,padding:2,children:(0,c.jsx)(i.JO,{accessibilityLabel:l?t.props.i18n._('Upload error', 'Error alert icon shown when file upload fails', 'Error alert icon shown when file upload fails'):t.props.i18n._('Add an image or video', 'Add an image or video as part of the pin', 'Add an image or video as part of the pin'),color:l?"error":"subtle",icon:l?"workflow-status-problem":"arrow-circle-up",size:24})}),r<=1&&(0,c.jsx)(i.xu,{column:12,marginTop:4,paddingX:w?10:12,width:270,children:(0,c.jsx)(i.xv,{align:"center",color:"default",overflow:"normal",size:w?"400":"200",weight:"bold",children:t.getText()})})]}),r<=ts&&(0,c.jsxs)(i.xu,{bottom:!0,left:!0,margin:8,overflow:"hidden",paddingY:7*!!w,position:"absolute",right:!0,children:[(0,c.jsx)(i.xv,{align:"center",overflow:"normal",size:w?"300":"100",children:x?E:S}),a&&(0,c.jsx)(i.xu,{dangerouslySetInlineStyle:to,"data-test-id":"pin-help-link",marginBottom:w?-3:0,marginTop:w?6:2,overflow:"hidden",position:"relative",children:(0,c.jsx)(i.xv,{align:"center",color:l?"error":"default",overflow:"normal",size:"200",weight:"bold",children:C?(0,c.jsx)(i.rU,{href:eN.Moe,onClick:function(e){var r=e.event;(0,e.dangerouslyDisableOnNavigation)(),tc(t.props.viewType,t.props.viewParameter,d),n||(r.preventDefault(),t.setState({isDrawerOpen:!0}))},target:"blank",children:(0,c.jsx)(i.xv,{align:"center",inline:!0,lineClamp:2,size:w?"300":"100",underline:!0,children:t.props.i18n._('Review Pin best practices', 'PinBuilder.link.showGuidelineDrawer.full', 'The text including a link to open the drawer which introduces our guideline for creating pins. This is a concatenation of 2 strings, the first part is a bold clickable link reads "See guidelines"')})}):(0,c.jsx)(i.rU,{href:eN.Moe,onClick:function(e){(0,e.dangerouslyDisableOnNavigation)(),tc(t.props.viewType,t.props.viewParameter,d)},target:"blank",children:(0,c.jsx)("span",{style:tl,children:x?t.props.i18n._('View image and video specs', 'Link text to Pinterest product specs', 'Link text to Pinterest product specs'):t.props.i18n._('View image specs', 'Link text to Pinterest product specs', 'Link text to Pinterest product specs')})})})})]}),C&&b&&(0,c.jsx)(e$,{onDismiss:t.handleDrawerDismiss}),m&&(0,c.jsx)(P.Z,{onDismiss:t.handleDismiss,onPrimaryAction:t.getPrimaryAction(),onSecondaryAction:t.getSecondaryAction(),primaryButtonText:"carousel"===s?t.props.i18n._('Add to Pin', 'Button text for adding media to Pin like adding another image to a carousel Pin', 'Button text for adding media to Pin like adding another image to a carousel Pin'):void 0,secondaryButtonText:t.props.i18n._('Combine into 1 Pin', 'Button to create either a carousel Pin or Pin with multiple images', 'Button to create either a carousel Pin or Pin with multiple images'),shownTabs:O}),g&&(0,c.jsx)(eB,{assets:y,onDismiss:t.handleDismiss,onPrimaryAction:t.handleLayoutSelected,primaryButtonText:t.props.i18n._('Create Pin', 'Button text for create a carousel Pin or single Pin with layout image.', 'Button text for create a carousel Pin or single Pin with layout image.')})]})}})})}})}}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,tr(r.key),r)}}(o.prototype,n),Object.defineProperty(o,"prototype",{writable:!1}),o}(r.Component);function td(e){var t=(0,a.u)().logContextEvent,n=(0,l.ZP)(),r=(0,j.Z)(),i=(0,eZ.B)(),u=(0,eW.Z)(i.userAgent.browserName),d=e.pinDraftId,f=(0,o.I0)(),p=(0,S.Z)(),h=(0,I.Z)().checkExperiment,y=p.isAuth&&p.isEmployee,b=p.isAuth&&p.isPartner,m=p.isAuth?p.id:"",g=p.isAuth?p.country:"",v=(0,eM.Z)({name:"UserResource",options:{username:p.isAuth&&p.username,field_set_key:"profile"}}),_=(0,o.v9)(function(e){var t=e.pinbuilder,n=t.pinDrafts,r=t.pinItems[n[d].pinItemIds[0]].media;return r?r.width/r.height:0}),x=(0,o.v9)(function(e){return e.pinbuilder.pinDrafts[d].mediaError}),P=(0,o.v9)(function(e){return e.pinbuilder.pinDrafts[d].type}),O=(0,eL.SU)(),w=O.viewType,A=O.viewParameter;return(0,c.jsx)(tu,e5(e5({},e),{},{addMediaToPinDraft:function(e,t){return f(G({assets:e,pinDraftId:t,isEmployee:y,i18n:n}))},aspectRatio:_,checkExperiment:h,createLayoutPinDraft:function(e){var t,r,o,i;return f((r=(t={assets:e,isEmployee:y,i18n:n}).assets,o=t.i18n,i=t.isEmployee,function(e,t){var n=t(),a=n.pinbuilder.pinDraftIds;eh(r,o).then(function(t){var n=t.media,r=t.canvasJson,a=(0,T.Z)(),l=(0,T.Z)();e((0,F.Z)(a,l,{media:e2(e2({},n),{},{id:(0,T.Z)(),name:"",type:"localImage",isLayout:!0}),canvasJson:r})),e((0,Z.Z)({i18n:o,isEmployee:i,pinDraft:{pinItemIds:[l]},pinDraftId:a,storyPinPublishStopwatch:void 0}))}).then(function(){var t=a.findIndex(function(e){return!(0,Y._isPristine)(n,e)});a.slice(0,t>=0?t:void 0).forEach(function(t){return e((0,eQ.Z)(t))})})}))},createPinDrafts:function(e){return f((0,X.Z)({assets:e,checkExperiment:h,country:g,i18n:n,ideaPinRenamingEnabled:r,isEmployee:y,logContextEvent:t,userId:m}))},i18n:n,ideaPinRenamingEnabled:r,imageFileTypes:u,isPartner:b,logContextEvent:t,mediaError:x,setPinDraftAssetError:function(e,t){return f((0,s._B)(e,t))},type:P,userResource:v,viewParameter:A,viewType:w}))}var tf=n(282169),tp=n(884761),th=n(675899),ty=n(638755),tb=n(656442),tm=n(341742),tg=n(448505),tv=n(7872),t_=n(452859),tx=n(925557),tj=n(593310);function tP(e){return(tP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function tO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function tw(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?tO(Object(n),!0).forEach(function(t){var r,o;r=t,o=n[t],(r=function(e){var t=function(e,t){if("object"!=tP(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=tP(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==tP(t)?t:t+""}(r))in e?Object.defineProperty(e,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[r]=o}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tO(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function tS(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,l=[],s=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);s=!0);}catch(e){c=!0,o=e}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return tA(e,t);var n=({}).toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?tA(e,t):void 0}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function tA(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function tI(e){var t=e.addCarouselItem,n=e.isDeletable,s=e.isEditable,u=e.isEditingEnabled,d=e.isReorderable,f=e.isTaggable,p=e.mediaType,h=e.onClickDelete,y=e.onClickDeleteInterestTags,b=e.onClickReorder,m=e.onClickTag,g=e.onClickCollectionsTag,v=e.pinDraftId,_=e.showCarouselCreateButton,x=e.type,j=e.pinTagIds,P=e.pinTags,w=e.unfilteredTaggedObjects,E=e.deletePinTagTaggedObject,C=e.setPinTagStatus,D=e.setTaggedObjectStatus,T=e.deleteText,k=e.editText,z=e.reorderText,R=e.tagText,B=(0,a.u)().logContextEvent,L=(0,l.ZP)(),F=(0,S.Z)(),Z=(0,I.Z)().checkExperiment,M=(0,tg.Z)(),N=(0,tv.nl)(F,M)&&"ad_creation"!==A.Z.scenario()&&Z("web_stl_tooling",{dangerouslySkipActivation:!0}).anyEnabled,H=(0,r.useRef)(null),U=(0,o.I0)(),W=tS((0,r.useState)(!1),2),V=W[0],G=W[1],X=tS((0,r.useState)(!1),2),q=X[0],K=X[1],J=(0,eG.Pw)(),$=J.shouldRenderPinEditorStandalone,Q=J.campaignObjectiveType,ee=J.conversionTagEvent,et=s&&A.Z.enabled("editing"),en=tS((0,r.useState)(!1),2),er=en[0],eo=en[1];(0,tm.Z)(function(){return eo(!0)}),T=void 0!==T?T:L._('Delete media', 'Button to delete the media from the Pin', 'Button to delete the media from the Pin'),k=void 0!==k?k:L._('Edit Pin', 'Button for editing the Pin image', 'Button for editing the Pin image'),z=void 0!==z?z:L._('Reorder images', 'Button for reordering the images in a carousel', 'Button for reordering the images in a carousel'),R=void 0!==R?R:L._('Tag products', 'Button for tagging products in a Pin', 'Button for tagging products in a Pin');var ei=L._('Create carousel', 'pinbuilder.create.carousel', 'create carousel pins'),ea=L._('Create carousel (this removes tagged products)', 'pinbuilder.carousel.warning', 'create carousel pins with warning text'),el=(0,r.useCallback)(function(){G(!1)},[]),es=(0,r.useCallback)(function(){$?U((0,Y.setPinEditorPinDraft)(v)):G(!0)},[]),ec=(0,r.useCallback)(function(){B({event_type:101,component:13308,element:11244}),es()},[]),eu=(0,r.useCallback)(function(){switch(p){case"gif":return L._('GIFs can\'t be edited', 'Button indicating gif images cannot be edited', 'Button indicating gif images cannot be edited');case"webImage":return L._('Upload images to make edits', 'Button indicating scraped images cannot be edited', 'Button indicating scraped images cannot be edited');case"localVideo":if(A.Z.enabled("videoEditing"))return L._('Videos can be edited after upload finishes', 'Button indicating videos can be edited after uploading finishes', 'Button indicating videos can be edited after uploading finishes');return L._('Videos can\'t be edited', 'Button indicating videos cannot be edited', 'Button indicating videos cannot be edited');default:return L._('Cannot edit', 'Button indicating media cant be edited', 'Button indicating media cant be edited')}},[]),ed=(0,tp.Z)({pinTagIds:j,pinTags:P,taggedObjects:w}).concat((0,tp.n)({pinTagIds:j,pinTags:P,taggedObjects:w})),ef=function(e,t){var n=P[e],r=n.x,o=n.y;"deleted"!==n.status&&(r&&o?C(e,"deleted"):(E(e,t),C(e,"edited")))},ep=u?k:eu(),eh=ed&&q?ea:ei;return(0,c.jsx)(i.xu,{alignItems:"center",bottom:!0,display:"flex",left:!0,position:"absolute",right:!0,top:!0,children:(0,c.jsxs)(i.xu,{color:"default",dangerouslySetInlineStyle:{__style:{boxShadow:"0px 0px 20px rgba(0, 0, 0, 0.1)",marginLeft:N?-60:0}},direction:"column",display:"flex",marginStart:-6,padding:1,rounding:"pill",children:[et&&(0,c.jsxs)(i.xu,{"data-test-id":"edit-button",children:[(0,c.jsx)(i.u,{idealDirection:N?"left":"down",text:ep,children:(0,c.jsx)(i.hU,{accessibilityLabel:ep,disabled:!u,icon:"edit",iconColor:"darkGray",onClick:ec,size:"md"})}),V&&(0,c.jsx)(tf.default,{onDismiss:el,pinDraftId:v})]}),f&&A.Z.enabled("tagging")&&!N&&(0,c.jsxs)(i.xu,{"data-test-id":"tag-button",children:[(0,c.jsx)(i.xu,{children:(0,c.jsx)(i.u,{idealDirection:N?"left":"down",text:R,children:(0,c.jsx)(i.hU,{ref:H,accessibilityLabel:R,icon:"tag",iconColor:"darkGray",onClick:function(){B({event_type:101,component:13308,element:10908}),A.Z.enabled("shop_the_pin")?g():m()},size:"md"})})}),Q===th.Ob.WEB_CONVERSION&&"CHECKOUT"===ee&&(0,c.jsx)(O.a3,{eligibleIds:[505392],placementId:1000451,children:function(e){var t=e.complete,n=e.experience.display_data;return er&&(0,c.jsx)(i.mh,{children:(0,c.jsx)(i.pl,{anchor:H.current,idealDirection:"down",message:n.message,onDismiss:function(){},primaryAction:{onClick:function(){eo(!1),t()},text:n.primaryActionText}})})}}),(0,c.jsx)(O.Qp,{anchor:H.current,experienceIds:[500912],idealDirection:"down",placementId:1000135})]}),_&&N&&"image"===x&&(0,c.jsx)(i.xu,{"data-test-id":"create-carousel-button",onMouseEnter:function(){return K(!0)},onMouseLeave:function(){return K(!1)},children:(0,c.jsx)(i.xu,{ref:H,children:(0,c.jsx)(i.u,{idealDirection:N?"left":"down",text:eh,children:(0,c.jsx)(i.hU,{accessibilityLabel:eh,dangerouslySetSvgPath:{__path:ty.Z},iconColor:"darkGray",onClick:function(){B({event_type:101,component:13308,element:11123}),ed.length&&ed.forEach(function(e){ef(e.pinTagId,e.taggedObjectId),D(e.pinTagId)}),t()},size:"md"})})})}),d&&(0,c.jsx)(i.xu,{"data-test-id":"reorder-button",children:(0,c.jsx)(i.u,{idealDirection:N?"left":"down",text:z,children:(0,c.jsx)(i.hU,{accessibilityLabel:z,icon:"reorder-images",iconColor:"darkGray",onClick:function(){B({event_type:101,component:13308,element:11124}),b()},size:"md"})})}),n&&(0,c.jsx)(i.xu,{"data-test-id":"trash-button",children:(0,c.jsx)(i.u,{idealDirection:N?"left":"down",text:T,children:(0,c.jsx)(i.hU,{accessibilityLabel:T,icon:"trash-can",iconColor:"darkGray",onClick:function(){B({event_type:101,component:13308,element:11125}),"localVideo"===p&&A.Z.enabled("videoTagging")&&y(),h()},size:"md"})})})]})})}function tE(e){var t=(0,tj.vd)(),n=(0,o.v9)(function(t){return t.pinbuilder.pinDrafts[e.pinDraftId]}),r=n.mode,i=n.publishOption,a=n.type,l=n.isFirstPinCreate,u=n.view,d=(0,o.v9)(function(t){return t.pinbuilder.pinItems[e.pinItemId]}).media,f=d?(0,tb.Z)(d)||d.type:null,p=(0,o.v9)(function(t){return t.pinbuilder.pinItems[e.pinItemId]}).pinTagIds,h=(0,o.v9)(function(e){return e.pinbuilder}).pinTags,y=(0,o.v9)(function(e){return e.pinbuilder.taggedObjects}),b=(0,o.v9)(function(n){return"single"===a&&!l&&((0,tj.wc)(n,e)||t(n,e).length>0)&&!!d&&("localImage"===d.type||"localVideo"===d.type)&&"publish-immediately"===i}),m="localImage"===f||"localVideo"===f&&!!d&&"signature"in d&&A.Z.enabled("videoEditing"),g="carousel"===a&&A.Z.enabled("carousel"),v=(0,o.I0)();return(0,c.jsx)(tI,tw(tw({},e),{},{addCarouselItem:function(){return v((0,F.Z)(e.pinDraftId,(0,T.Z)()))},deletePinTagTaggedObject:function(e,t){return v((0,t_.Go)(e,t))},isDeletable:"create"===r&&"external"!==u,isEditable:!l,isEditingEnabled:m,isReorderable:g,isTaggable:b,mediaType:f,onClickCollectionsTag:function(){return v((0,s.c8)(e.pinDraftId,"collectionsTag"))},onClickDelete:function(){return v((0,s.kp)(e.pinDraftId,e.pinItemId))},onClickDeleteInterestTags:function(){return v((0,s.c_)(e.pinDraftId))},onClickReorder:function(){return v((0,s.c8)(e.pinDraftId,"reorder"))},onClickTag:function(){return v((0,s.c8)(e.pinDraftId,"tag"))},pinTagIds:p,pinTags:h,setPinTagStatus:function(e,t){return v((0,t_.Cf)(e,t))},setTaggedObjectStatus:function(e){return v((0,tx.k)(e,"deleted"))},unfilteredTaggedObjects:y}))}var tC=n(685039);function tD(e){return(tD="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function tT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function tk(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?tT(Object(n),!0).forEach(function(t){tF(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tT(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function tz(e,t){return(tz=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function tR(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function tB(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(tB=function(){return!!e})()}function tL(e){return(tL=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function tF(e,t,n){return(t=tZ(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function tZ(e){var t=function(e,t){if("object"!=tD(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=tD(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==tD(t)?t:t+""}var tM=function(e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");o.prototype=Object.create(e&&e.prototype,{constructor:{value:o,writable:!0,configurable:!0}}),Object.defineProperty(o,"prototype",{writable:!1}),e&&tz(o,e);var t,n,r=(t=tB(),function(){var e,n=tL(o);return e=t?Reflect.construct(n,arguments,tL(this).constructor):n.apply(this,arguments),function(e,t){if(t&&("object"==tD(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return tR(e)}(this,e)});function o(){var e;if(!(this instanceof o))throw TypeError("Cannot call a class as a function");for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];return tF(tR(e=r.call.apply(r,[this].concat(n))),"setTextFieldInput",function(t){e.textfieldInput=t}),tF(tR(e),"getLinkError",function(){var t=e.props,n=t.link,r=t.linksUsed,o=t.i18n;return n?r.includes(n)?o._('You can\'t tag from the same page twice.', 'Error message for using the same product link twice on a Pin tag', 'Error message for using the same product link twice on a Pin tag'):(0,E.Z)(n,{protocolIsOptional:!0})?null:(0,D.q0)(o):null}),tF(tR(e),"handleBlur",function(t){var n=t.value;(0,e.props.setLink)(n,e.getLinkError())}),tF(tR(e),"handleChange",function(t){var n=t.value;(0,e.props.setLink)(n)}),tF(tR(e),"handleClick",function(){var t=e.props,n=t.link,r=t.mode,o=t.openSelectTagView,i=t.setLink,a=e.getLinkError();i(n,a),a&&e.props.logContextEvent({event_type:7503,component:13308,element:10909,aux_data:{method:r}}),n&&!a&&(o(),e.props.logContextEvent({event_type:3811,component:13308,element:10909,aux_data:{method:r}}))}),tF(tR(e),"handleSubmit",function(t){t.preventDefault(),e.handleClick()}),e}return n=[{key:"componentDidMount",value:function(){var e=this;window.setTimeout(function(){e.textfieldInput&&e.textfieldInput.focus()},0)}},{key:"render",value:function(){var e=this.props,t=e.link,n=e.linkError,r="pin-draft-affiliate-link";return(0,c.jsxs)(i.xu,{column:12,paddingX:2,paddingY:3,children:[(0,c.jsx)("form",{autoComplete:"off","data-test-id":"form-pin-tag-flyout",noValidate:!0,onSubmit:this.handleSubmit,children:(0,c.jsxs)(i.xu,{column:12,display:"flex",children:[(0,c.jsx)(i.xu,{flex:"grow",paddingX:1,children:(0,c.jsx)(i.nv,{ref:this.setTextFieldInput,hasError:!!n,id:r,onBlur:this.handleBlur,onChange:this.handleChange,placeholder:this.props.i18n._('Enter product or affiliate link', 'Input field for a website link to a product', 'Input field for a website link to a product'),size:"lg",type:"url",value:t})}),(0,c.jsx)(i.xu,{flex:"none",paddingX:1,children:(0,c.jsx)(i.zx,{color:"red",name:"pin-draft-affiliate-link-button",onClick:this.handleClick,text:this.props.i18n._('Next', 'Button to submit affiliate link to find products', 'Button to submit affiliate link to find products')})})]})}),!!n&&(0,c.jsx)(i.xu,{column:12,paddingX:1,children:(0,c.jsx)(C.Z,{errorMessage:n,htmlFor:r})})]})}}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,tZ(r.key),r)}}(o.prototype,n),Object.defineProperty(o,"prototype",{writable:!1}),o}(r.Component);function tN(e){var t=(0,a.u)().logContextEvent,n=(0,l.ZP)(),r=(0,tC.A$)(),i=(0,o.v9)(function(t){return t.pinbuilder.pinTags[e.pinTagId].link}),u=(0,o.v9)(function(t){return t.pinbuilder.pinTags[e.pinTagId].linkError}),d=(0,o.v9)(function(t){return r(t,e).map(function(e){return t.pinbuilder.taggedObjects[e].link})}),f=(0,o.v9)(function(t){return t.pinbuilder.pinDrafts[e.pinDraftId].mode}),p=(0,o.I0)();return(0,c.jsx)(tM,tk(tk({},e),{},{i18n:n,link:i,linkError:u,linksUsed:d,logContextEvent:t,mode:f,openSelectTagView:function(){return p((0,s.c8)(e.pinDraftId,"selectTag"))},setLink:function(t,n){return p((0,t_.mz)(e.pinTagId,t,n))}}))}var tH=n(187356),tU=n(489529),tW=n(32937);function tV(e){return(tV="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function tG(e,t){return(tG=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function tX(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function tY(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(tY=function(){return!!e})()}function tq(e){return(tq=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function tK(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function tJ(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?tK(Object(n),!0).forEach(function(t){t$(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tK(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function t$(e,t,n){return(t=tQ(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function tQ(e){var t=function(e,t){if("object"!=tV(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=tV(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==tV(t)?t:t+""}var t0={cursor:"grab",transition:"opacity 0.15s ease"},t1=tJ(tJ({},t0),{},{cursor:"grabbing",opacity:.5}),t2=tJ(tJ({},t0),{},{cursor:"pointer"}),t8=function(e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");a.prototype=Object.create(e&&e.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),Object.defineProperty(a,"prototype",{writable:!1}),e&&tG(a,e);var t,n,o=(t=tY(),function(){var e,n=tq(a);return e=t?Reflect.construct(n,arguments,tq(this).constructor):n.apply(this,arguments),function(e,t){if(t&&("object"==tV(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return tX(e)}(this,e)});function a(){var e;if(!(this instanceof a))throw TypeError("Cannot call a class as a function");for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];return t$(tX(e=o.call.apply(o,[this].concat(n))),"state",{pinTagDotRef:null}),t$(tX(e),"setPinTagDotRef",function(t){e.setState({pinTagDotRef:t})}),t$(tX(e),"handleMouseDown",function(){var t=e.props,n=t.editable,r=t.isAtTaggedObjectLimit,o=t.startMoving,i=t.selectPinTag,a=t.setTagError;i(),n&&(o(),a(r?e.props.i18n._('You\'ve reached the maximum number of products for a tag.', 'Error message when user attempts to add more than 8 products to a tag', 'Error message when user attempts to add more than 8 products to a tag'):null))}),t$(tX(e),"handleMouseUp",function(t){var n=t.event,r=e.props,o=r.editable,i=r.stopMoving;n.stopPropagation(),o&&i()}),e}return n=[{key:"render",value:function(){var e=this.props,t=e.editable,n=e.isAtTaggedObjectLimit,o=e.isGrabbing,a=e.isSelected,l=e.isSelectingTag,s=e.pinDraftId,u=e.pinTagId,d=e.pinTagKey,f=e.x,p=e.y,h=this.state.pinTagDotRef,y=t?o?t1:t0:t2,b=a&&!n&&!o&&!l&&t&&!!h;return(0,c.jsxs)(r.Fragment,{children:[(0,c.jsx)(tH.Z,{ref:this.setPinTagDotRef,backdropDiameter:40,dotDiameter:k.yI,onMouseDown:this.handleMouseDown,onMouseUp:this.handleMouseUp,selected:a,style:y,text:t?d.toString():void 0,x:f,y:p}),b&&(0,c.jsx)(i.mh,{children:(0,c.jsx)(tW.Z,{children:(0,c.jsx)(i.J2,{anchor:h,idealDirection:"down",onDismiss:function(){},positionRelativeToAnchor:!1,shouldFocus:!1,size:"xl",children:(0,c.jsx)(tN,{pinDraftId:s,pinTagId:u})})})})]})}}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,tQ(r.key),r)}}(a.prototype,n),Object.defineProperty(a,"prototype",{writable:!1}),a}(r.Component);function t3(e){var t=(0,l.ZP)(),n=(0,tC.A$)(),r=(0,o.v9)(function(e){return e.pinbuilder}),i=r.pinDrafts,a=r.pinItems,s=r.pinTags,u=a[e.pinItemId],d=s[e.pinTagId],f=d.x,p=d.y,h=(0,o.v9)(function(t){return n(t,e)}),y=(0,o.I0)();return(0,c.jsx)(t8,tJ(tJ({},e),{},{i18n:t,isAtTaggedObjectLimit:h.length===k.qY,isSelected:u.selectedPinTagId===e.pinTagId,isSelectingTag:"selectTag"===i[e.pinDraftId].view,selectPinTag:function(){return y((0,M.C_)(e.pinItemId,e.pinTagId))},setTagError:function(t){return y((0,M.OD)(e.pinItemId,t))},x:f*k.LM,y:u.media?p*(0,tU.Z)(u.media):-1}))}function t5(e){return(t5="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function t6(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function t4(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?t6(Object(n),!0).forEach(function(t){nn(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):t6(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function t9(e,t){return(t9=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function t7(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ne(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(ne=function(){return!!e})()}function nt(e){return(nt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function nn(e,t,n){return(t=nr(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function nr(e){var t=function(e,t){if("object"!=t5(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=t5(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==t5(t)?t:t+""}var no=function(e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");o.prototype=Object.create(e&&e.prototype,{constructor:{value:o,writable:!0,configurable:!0}}),Object.defineProperty(o,"prototype",{writable:!1}),e&&t9(o,e);var t,n,r=(t=ne(),function(){var e,n=nt(o);return e=t?Reflect.construct(n,arguments,nt(this).constructor):n.apply(this,arguments),function(e,t){if(t&&("object"==t5(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return t7(e)}(this,e)});function o(){var e;if(!(this instanceof o))throw TypeError("Cannot call a class as a function");for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];return nn(t7(e=r.call.apply(r,[this].concat(n))),"state",{isMovingPinTag:!1}),nn(t7(e),"getAnchorCoordinates",function(e){var t=e.pageX,n=e.pageY,r=e.currentTarget.getBoundingClientRect(),o=r.height,i=r.top;return{x:(t-r.left)/r.width,y:(n-i)/o}}),nn(t7(e),"isIntersecting",function(t,n){var r=e.props,o=r.height;return r.unselectedPinTags.some(function(e){return Math.pow((t-e.x)*k.LM,2)+Math.pow((n-e.y)*o,2)<k.$4})}),nn(t7(e),"handleMouseMove",function(t){var n=e.props,r=n.editable,o=n.movePinTag,i=n.selectedPinTagId;if(r&&e.state.isMovingPinTag&&i){var a=e.getAnchorCoordinates(t),l=a.x,s=a.y;e.isIntersecting(l,s)||o(i,l,s)}}),nn(t7(e),"handleMouseUp",function(t){var n=e.props,r=n.closeTagGrid,o=n.createPinTag,i=n.deselectPinTag,a=n.editable,l=n.mode,s=n.pinTagIds,c=n.selectedPinTagId,u=n.setTagError,d=n.logContextEvent;if(c||!a)a&&r(),i();else{var f=s.length;if(f<k.YM){0===f&&d({event_type:7501,component:13308,element:10910,aux_data:{method:l}}),d({event_type:101,component:13308,element:10910,aux_data:{method:l}});var p=e.getAnchorCoordinates(t);o(p.x,p.y)}u(f>=k.YM?e.props.i18n._('You\'ve reached the maximum number of tags.', 'Error message when user attempts to add more than 8 tags to a Pin', 'Error message when user attempts to add more than 8 tags to a Pin'):null)}}),nn(t7(e),"startMovingPinTag",function(){return e.setState({isMovingPinTag:!0})}),nn(t7(e),"stopMovingPinTag",function(){return e.setState({isMovingPinTag:!1})}),e}return n=[{key:"render",value:function(){var e=this,t=this.props,n=t.editable,r=t.forwardRef,o=t.pinDraftId,a=t.pinItemId,l=t.pinTagIds,s=t.selectedPinTagId,u=this.state.isMovingPinTag;return(0,c.jsx)(i.xu,{ref:r,bottom:!!n||!!s||void 0,"data-test-id":"dot-container",left:!0,onMouseLeave:this.stopMovingPinTag,onMouseMove:this.handleMouseMove,onMouseUp:this.handleMouseUp,overflow:n?"hidden":void 0,position:"absolute",right:!0,top:!0,children:l.map(function(t,r){return(0,c.jsx)(t3,{editable:n,isGrabbing:u&&t===s,pinDraftId:o,pinItemId:a,pinTagId:t,pinTagKey:r+1,startMoving:e.startMovingPinTag,stopMoving:e.stopMovingPinTag},t)})})}}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,nr(r.key),r)}}(o.prototype,n),Object.defineProperty(o,"prototype",{writable:!1}),o}(r.Component);function ni(e){var t=(0,a.u)().logContextEvent,n=(0,l.ZP)(),r=(0,tj.vd)(),i=(0,o.v9)(function(e){return e.pinbuilder}),u=i.pinDrafts,d=i.pinItems,f=i.pinTags,p=(0,o.v9)(function(t){return(0,tj.M)(t,e)}),h=(0,o.v9)(function(t){return r(t,e)}),y=d[e.pinItemId].media,b=y?(0,tU.Z)(y):0,m=u[e.pinDraftId].mode,g=h.filter(function(e){return e!==p}).map(function(e){return f[e]}),v=(0,o.I0)();return(0,c.jsx)(no,t4(t4({},e),{},{closeTagGrid:function(){return v((0,s.c8)(e.pinDraftId,"tag"))},createPinTag:function(t,n){return v((0,M.hL)(e.pinItemId,t,n))},deselectPinTag:function(){return v((0,M.yV)(e.pinItemId))},height:b,i18n:n,logContextEvent:t,mode:m,movePinTag:function(e,t,n){return v((0,t_.uM)(e,t,n))},pinTagIds:h,selectedPinTagId:p,setTagError:function(t){return v((0,M.OD)(e.pinItemId,t))},unselectedPinTags:g}))}function na(e){return(na="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function nl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function ns(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?nl(Object(n),!0).forEach(function(t){np(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nl(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function nc(e,t){return(nc=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function nu(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function nd(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(nd=function(){return!!e})()}function nf(e){return(nf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function np(e,t,n){return(t=nh(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function nh(e){var t=function(e,t){if("object"!=na(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=na(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==na(t)?t:t+""}var ny=function(e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");o.prototype=Object.create(e&&e.prototype,{constructor:{value:o,writable:!0,configurable:!0}}),Object.defineProperty(o,"prototype",{writable:!1}),e&&nc(o,e);var t,n,r=(t=nd(),function(){var e,n=nf(o);return e=t?Reflect.construct(n,arguments,nf(this).constructor):n.apply(this,arguments),function(e,t){if(t&&("object"==na(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return nu(e)}(this,e)});function o(){var e;if(!(this instanceof o))throw TypeError("Cannot call a class as a function");for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];return np(nu(e=r.call.apply(r,[this].concat(n))),"state",{containerRef:null}),np(nu(e),"saveRef",function(t){e.setState({containerRef:t})}),e}return n=[{key:"render",value:function(){var e=this.props,t=e.editable,n=e.pinDraftId,r=e.pinItemId,o=e.showStepTwoExperience,a=e.showStepThreeExperience,l=this.state.containerRef;return(0,c.jsx)(i.xu,{bottom:!0,left:!0,position:"absolute",right:!0,top:!0,children:(0,c.jsxs)(i.xu,{column:12,height:"100%",position:"relative",children:[(0,c.jsx)(ni,{editable:t,forwardRef:this.saveRef,pinDraftId:n,pinItemId:r}),t&&o&&(0,c.jsx)(O.Qp,{anchor:l,experienceIds:[500915],idealDirection:"right",placementId:1000135}),t&&a&&(0,c.jsx)(O.Qp,{anchor:l,experienceIds:[500916],idealDirection:"right",placementId:1000135})]})})}}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,nh(r.key),r)}}(o.prototype,n),Object.defineProperty(o,"prototype",{writable:!1}),o}(r.Component);function nb(e){var t=(0,tj.vd)(),n=(0,tj.jk)(),r=(0,o.v9)(function(n){return 0===t(n,e).length}),i=(0,o.v9)(function(t){return n(t,e).length>0});return(0,c.jsx)(ny,ns(ns({},e),{},{showStepThreeExperience:i,showStepTwoExperience:r}))}var nm=n(517724),ng=n(369416),nv=n(281260),n_=n(889539);function nx(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var nj=function(){};function nP(e){var t,n,o=e.alwaysShow,l=e.closeupImageSignature,s=e.displayHeight,u=e.displayWidth,d=e.onStlFlyoutHover,f=e.taggedItem,p=e.flyoutAnimationType,h=e.onAnimationComplete,y=e.isPinbuilder,b=e.isHovering,m=(0,a.u)().logContextEvent,g=function(e){if(Array.isArray(e))return e}(t=(0,r.useState)())||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,l=[],s=!0,c=!1;try{for(i=(n=n.call(e)).next;!(s=(r=i.call(n)).done)&&(l.push(r.value),2!==l.length);s=!0);}catch(e){c=!0,o=e}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return l}}(t,2)||function(e,t){if(e){if("string"==typeof e)return nx(e,2);var n=({}).toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?nx(e,2):void 0}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),v=g[0],_=g[1];(0,r.useEffect)(function(){if(f&&!y){var e=f.pins[0];m({event_type:120,view_type:3,element:11962,aux_data:{image_signature:l,commerce_data:JSON.stringify({pin_is_shop_the_look:!0,x:f.x_percent,y:f.x_percent,product_pin_id:e.id||f.id,product_pin_image_signature:e.image_signature,pin_tag_key:f.pin_tag_key})}})}},[f,y]);var x=(0,n_.l)().shopTheLook.selectedStlItemId,j=f.x_percent/100*u,P=f.y_percent/100*s,O=f.pins,w=(void 0===O?[]:O)[0],S=null!=w?w:{},A=S.grid_title,I=S.id,E=S.images,C=S.rich_summary,D=(E||{})["236x"]||{},T=(((C||{}).products||[])[0]||{}).offer_summary||{},k=T||{},z=k.price,R=k.max_price,B=(null==w?void 0:w.id)===x;"in"===p||B?n="stelaSlideIn .3s ease-in-out forwards":"out"===p?n="stelaSlideOut .3s ease-in-out forwards":"inOut"===p?n="stelaSlideInThenOut 3s ease-in-out forwards":"none"===p&&(n="none");var L=!!T&&(!!z||!!R),F=L?124:48,Z="up",M=j<F+10,N=j+(F+10)/2>u,H=P<60;return M&&!H?Z="right":N&&!H&&(Z="left"),M&&H?(j=F/2+10,P=70):N&&H?(j=u-F/2-10,P=70):H&&!(M&&N)&&(Z="down"),(0,c.jsxs)(i.xu,{ref:function(e){e&&!v&&_(e)},dangerouslySetInlineStyle:{__style:{top:P,left:j}},"data-test-id":"stl-flyout",onMouseEnter:function(){return d(!0)},onMouseLeave:function(){return d(!1)},position:"relative",width:1,children:[(0,c.jsx)(ng.Z,{unsafeCSS:(0,nv.Z)()}),(y&&b||!y)&&(0,c.jsx)(i.mh,{children:(0,c.jsx)(i.xu,{dangerouslySetInlineStyle:{__style:o?{opacity:1}:{animation:n,opacity:"none"===n?0:void 0}},onAnimationEnd:function(){h&&"inOut"===p&&h()},children:(0,c.jsx)(i.Tg,{href:y?"":"/pin/".concat(I),onTap:y?nj:function(){if(!y){var e=f.pins[0];m({event_type:101,view_type:3,element:11962,aux_data:{image_signature:l,commerce_data:JSON.stringify({pin_is_shop_the_look:!0,x:f.x_percent,y:f.x_percent,product_pin_id:e.id||f.id,product_pin_image_signature:e.image_signature,pin_tag_key:f.pin_tag_key})}})}},children:(0,c.jsx)(i.J2,{_deprecatedShowCaret:!0,anchor:v,idealDirection:Z,onDismiss:function(){},positionRelativeToAnchor:!1,size:"flexible",children:(0,c.jsxs)(i.xu,{alignContent:"center",alignItems:"center",color:"default",display:"flex",height:48,justifyContent:"center",rounding:3,width:F,children:[(0,c.jsx)(i.xu,{direction:"row",display:"flex",height:40,marginStart:+!!L,minWidth:40,overflow:"hidden",rounding:3,width:40,children:(0,c.jsx)(i.zd,{height:40,wash:!0,width:40,children:D.url&&(0,c.jsx)(i.Ee,{alt:"",color:"lightGray",fit:"cover",naturalHeight:1,naturalWidth:1,src:D.url})})}),L&&(0,c.jsxs)(i.xu,{alignContent:"center",direction:"column",display:"flex",flex:"grow",justifyContent:"center",marginStart:1,children:[(0,c.jsx)(nm.Z,{productDetails:{maxPrice:T.max_price,minPrice:T.min_price,price:T.price,standardPrice:T.standard_price},showSalesPrice:!0,type:"text"}),A&&(0,c.jsx)(i.xv,{lineClamp:1,size:"100",children:A})]})]})})})})})]})}var nO=n(949270),nw=n(398236),nS=n(521009),nA=n(899678);function nI(e){return(nI="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function nE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function nC(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?nE(Object(n),!0).forEach(function(t){var r,o;r=t,o=n[t],(r=function(e){var t=function(e,t){if("object"!=nI(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=nI(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==nI(t)?t:t+""}(r))in e?Object.defineProperty(e,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[r]=o}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nE(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function nD(e){var t=e.alwaysShow,n=e.animationDelay,o=e.contextLogData,i=e.enablePointerEvents,a=e.isSelected,s=e.onStelaDotAnimationComplete,u=e.stelaDotAnimationType,d=(0,l.ZP)(),f=(0,nS.Z)(),p=t?{opacity:1}:{animation:"inOut"===u?"stelaGrowInAndOut 3s cubic-bezier(0, 0.15, 0.15, 0.5) ".concat(void 0===n?0:n,"s forwards"):void 0,opacity:0};return(0,tm.Z)(function(){f(nC({event_type:120,view_type:3,aux_data:nC({},o)},o))}),(0,c.jsx)(r.Fragment,{children:(0,c.jsxs)(nA.N,{enabled:void 0===i||i,children:[(0,c.jsx)(ng.Z,{unsafeCSS:(0,nv.Z)(0)}),(0,c.jsx)("div",{"aria-label":d._('Search this item', 'visualSearch.dot.label', 'accessibility label for visual search dot'),"data-test-id":"closeup-stela-dot",height:nw.b,onAnimationEnd:function(){s&&"inOut"===u&&s()},style:p,width:nw.b,children:(0,c.jsxs)("svg",{fill:"none",height:"36",viewBox:"0 0 36 36",width:"36",xmlns:"http://www.w3.org/2000/svg",children:[(0,c.jsx)("g",{filter:"url(#filter0_d)",children:(0,c.jsx)("circle",{cx:"18",cy:"18",fill:a&&t?"black":"white",r:"8"})}),(0,c.jsx)("defs",{children:(0,c.jsxs)("filter",{colorInterpolationFilters:"sRGB",filterUnits:"userSpaceOnUse",height:"36",id:"filter0_d",width:"36",x:"0",y:"0",children:[(0,c.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,c.jsx)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"}),(0,c.jsx)("feOffset",{}),(0,c.jsx)("feGaussianBlur",{stdDeviation:"5"}),(0,c.jsx)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0"}),(0,c.jsx)("feBlend",{in2:"BackgroundImageFix",mode:"normal",result:"effect1_dropShadow"}),(0,c.jsx)("feBlend",{in:"SourceGraphic",in2:"effect1_dropShadow",mode:"normal",result:"shape"})]})})]})})]})})}function nT(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function nk(e){var t,n,a=null!=(n=(0,o.v9)(function(t){return(0,tj.Bg)(t,e)}))?n:{},l=(0,n_.l)(),s=l.shopTheLook,u=l.setMostRecentTaggedObjectId,d=s.mostRecentTaggedObjectId,f=s.stlHoveredTaggedObjectId,p=e.height,h=e.isHovering,y=e.taggedObject,b=e.width,m=function(e){if(Array.isArray(e))return e}(t=(0,r.useState)("inOut"))||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,l=[],s=!0,c=!1;try{for(i=(n=n.call(e)).next;!(s=(r=i.call(n)).done)&&(l.push(r.value),2!==l.length);s=!0);}catch(e){c=!0,o=e}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return l}}(t,2)||function(e,t){if(e){if("string"==typeof e)return nT(e,2);var n=({}).toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?nT(e,2):void 0}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),g=m[0],v=m[1],_=function(){"inOut"===g&&v("none"),u(null)},x=d===y.id,j=f===y.id;(0,r.useEffect)(function(){(h||j)&&(v("none"),u(null))},[h,j]);var P=y.pins[0].closeup_image_signature||(0,nO.Z)(a.src),O=x||j?(0,c.jsx)(i.xu,{height:p,position:"absolute",width:b,children:(0,c.jsx)(nP,{closeupImageSignature:P,displayHeight:p,displayWidth:b,flyoutAnimationType:h||j?void 0:g,isHovering:!0,isPinbuilder:!0,onAnimationComplete:_,onStlFlyoutHover:function(){},taggedItem:y})}):(0,c.jsx)(i.xu,{dangerouslySetInlineStyle:{__style:{top:y.y_percent/100*p-nw.b/2,left:y.x_percent/100*b-nw.b/2}},position:"absolute",children:(0,c.jsx)(nD,{})});return(0,c.jsxs)(r.Fragment,{children:[!h&&(0,c.jsx)(i.xu,{"data-test-id":"stl-dot-or-flyout",children:O}),(0,c.jsx)(i.xu,{height:p,position:"absolute",width:b,children:(0,c.jsx)(nP,{closeupImageSignature:P,displayHeight:p,displayWidth:b,flyoutAnimationType:void 0,isHovering:h,isPinbuilder:!0,onAnimationComplete:_,onStlFlyoutHover:function(){},taggedItem:y})})]})}function nz(e){var t=e.isHovering,n=e.styleOverride,r=(0, l.ZP)()._('Click anywhere to tag', 'pinbuilder.product.tagging.icon', 'Click to tag products');return(0,c.jsx)(i.xu,{alignItems:"center",dangerouslySetInlineStyle:{__style:void 0===n?{}:n},"data-test-id":"stl-overlay-text",display:"flex",height:"100%",justifyContent:"center",position:"absolute",width:"100%",children:(0,c.jsxs)(i.xu,{alignItems:"center",dangerouslySetInlineStyle:{__style:{backgroundColor:t?void 0:"rgba(0, 0, 0, 0.4)"}},"data-test-id":"text-and-icon-wrapper",display:"flex",justifyContent:"center",paddingX:4,paddingY:4,position:"relative",rounding:"pill",children:[(0,c.jsx)(i.JO,{accessibilityLabel:r,color:"inverse",icon:"tag"}),(0,c.jsx)(i.xu,{marginStart:2,children:(0,c.jsx)(i.xv,{color:"inverse",size:"300",weight:"bold",children:r})})]})})}var nR=n(791587);function nB(e){return(nB="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function nL(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function nF(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?nL(Object(n),!0).forEach(function(t){var r,o;r=t,o=n[t],(r=function(e){var t=function(e,t){if("object"!=nB(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=nB(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==nB(t)?t:t+""}(r))in e?Object.defineProperty(e,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[r]=o}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nL(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function nZ(e){var t=e.height,n=e.isHovering,o=e.pinDraftId,l=e.pinItemId,s=e.taggedObjects,u=e.width,d=(0,a.u)().logContextEvent,f=(0,n_.l)(),p=f.setCurrentPinDraftId,h=f.setStlCallout,y=f.setStlTaggedCoord,b=f.shopTheLook.stlTaggedCoords,m=(0,r.useRef)(null);(0,r.useEffect)(function(){return function(){h({showCallout:!1})}},[]);var g=function(e){if(m.current){var t=m.current.getBoundingClientRect();return{x:e.clientX-t.left,y:e.clientY-t.top,width:t.width,height:t.height}}return{}},v=function(e){var t=g(e);return!!t&&!!(t.x<t.width-10)&&!!(t.x>10)&&!!(t.y>26)&&!!(t.y<t.height-26)},_=!!s&&s.length===nR.VX,x=function(e){if(v(e)){var t=g(e);t&&(_?h({showCallout:!0,type:"error"}):(d({event_type:101,component:13308,element:12081,view_type:212}),p(o),y({x:t.x,y:t.y,xPercent:t.x/t.width,yPercent:t.y/t.height})))}else p(null),y(null)},j={height:"calc(100% - 48px)",width:"calc(100% - 16px)"},P=!!(s&&s.length>0);return(0,c.jsx)(i.Zf,{height:"100%",children:(0,c.jsxs)("div",{ref:m,onClick:function(e){return x(e)},onKeyDown:function(){},role:"button",style:{height:"100%",position:"absolute",width:"100%",display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"center",cursor:_?"not-allowed":"pointer"},tabIndex:0,children:[n&&(0,c.jsx)(i.xu,{alignItems:"center",dangerouslySetInlineStyle:{__style:nF(nF(nF({},{border:"dashed 2px #fff",borderRadius:8,cursor:_?"not-allowed":"pointer"}),j),{},{margin:"6px"})},display:"flex",justifyContent:"center",position:"relative",width:"100%",children:!P&&n&&(0,c.jsx)(nz,{isHovering:n})}),s&&s.length>0&&s.map(function(e){return["created","saved"].includes(e.status||"")?(0,c.jsx)(nk,{height:t,isHovering:n,pinItemId:l,taggedObject:e,width:u},e.id):null}),b&&(0,c.jsxs)(r.Fragment,{children:[(0,c.jsx)(i.xu,{dangerouslySetInlineStyle:{__style:nF(nF({},j),{},{top:b.y-nw.b/2,left:b.x-nw.b/2})},position:"absolute",children:(0,c.jsx)(nD,{})}),(0,c.jsx)(i.xu,{dangerouslySetInlineStyle:{__style:nF(nF({},j),{},{top:b.y-67.5,left:b.x-67.5})},position:"absolute",children:(0,c.jsx)(i.o3,{})})]})]})})}var nM=n(705754);function nN(e){return(nN="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function nH(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function nU(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?nH(Object(n),!0).forEach(function(t){var r,o;r=t,o=n[t],(r=function(e){var t=function(e,t){if("object"!=nN(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=nN(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==nN(t)?t:t+""}(r))in e?Object.defineProperty(e,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[r]=o}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nH(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function nW(e){var t=e.isHovering,n=e.imageDims,a=e.pinDraftId,l=e.pinItemId,s=n||{},u=s.height,d=s.width,f=(0,tj.vd)(),p=(0,o.v9)(function(t){return f(t,e)})||[],h=(0,o.v9)(function(e){return e.pinbuilder})||{},y=h.pinTags||{},b=h.taggedObjects||{},m=p.filter(function(e){return(0,nM.Z)(y[e])}).map(function(e){var t=y[e],n=b[t.taggedObjectIds[0]]||{},r=n.id,o=n.media,i=n.pin,a=n.status;return{id:r||"",pin_tag_key:t.pinTagKey||"",pins:[nU(nU({},i),{},{id:(null==i?void 0:i.id)||"",images:{"236x":{url:null==o?void 0:o.url,width:null==o?void 0:o.width,height:null==o?void 0:o.height}}})],status:a,x_percent:100*t.x,y_percent:100*t.y}});return(0,c.jsxs)(r.Fragment,{children:[(0,c.jsx)(i.xu,{dangerouslySetInlineStyle:{__style:{backgroundColor:t?"rgba(0,0,0,0.4)":void 0}},height:"100%",overflow:"hidden",position:"absolute",rounding:2,width:"100%"}),!!u&&!!d&&(0,c.jsx)(nZ,{height:u,isHovering:t,pinDraftId:a,pinItemId:l,taggedObjects:m,width:d})]})}var nV=n(400737),nG={__style:{backgroundColor:"rgba(239, 245, 252, 0.92)",pointerEvents:"none"}},nX={__style:{border:"dashed 2px #dadada",borderRadius:6}};function nY(e){var t=e.type,n=(0,l.ZP)();return(0,c.jsx)(i.xu,{bottom:!0,dangerouslySetInlineStyle:nG,left:!0,padding:3,position:"absolute",right:!0,top:!0,children:(0,c.jsx)(i.xu,{alignItems:"center",column:12,dangerouslySetInlineStyle:nX,display:"flex",height:"100%",justifyContent:"center",children:(0,c.jsx)(i.xv,{align:"center",color:"shopping",overflow:"normal",children:"image"===t?n._('Replace image', 'Text that appears over image when user drags to replace', 'Text that appears over image when user drags to replace'):n._('Replace video', 'Text that appears over video when user drags to replace', 'Text that appears over video when user drags to replace')})})})}var nq=n(400704);function nK(e){return(nK="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function nJ(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function n$(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?nJ(Object(n),!0).forEach(function(t){var r,o;r=t,o=n[t],(r=function(e){var t=function(e,t){if("object"!=nK(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=nK(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==nK(t)?t:t+""}(r))in e?Object.defineProperty(e,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[r]=o}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nJ(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function nQ(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var n0=new i.Ry(1);function n1(e){var t,n=e.image,a=e.isDragging,s=e.isHovering,u=e.pinDraftId,d=e.pinItemId,f=e.showCarouselCreateButton,p=e.showCarouselControlButtons,h=e.showMediaTagOverlay,y=e.showPageNumberOverlay,b=e.view,m=e.containedHeight,g=e.setContainedHeight,v=(0,l.ZP)(),_=(0,o.I0)(),x=(0,I.Z)().checkExperiment,j=(0,r.useRef)(null),P=function(e){if(Array.isArray(e))return e}(t=(0,r.useState)())||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,l=[],s=!0,c=!1;try{for(i=(n=n.call(e)).next;!(s=(r=i.call(n)).done)&&(l.push(r.value),2!==l.length);s=!0);}catch(e){c=!0,o=e}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return l}}(t,2)||function(e,t){if(e){if("string"==typeof e)return nQ(e,2);var n=({}).toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?nQ(e,2):void 0}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),O=P[0],w=P[1],E=(0,tg.Z)();(0,r.useEffect)(function(){if(j.current){var e=j.current.getBoundingClientRect().width/n.width;g(n.height*e)}},[j.current]),(0,r.useEffect)(function(){if(O){var e,t;_((0,M.Sz)(d,{height:null!=(e=O.height)?e:0,width:null!=(t=O.width)?t:0}))}},[O]);var C=(0,S.Z)(),D=(0,tv.nl)(C,E)&&"ad_creation"!==A.Z.scenario()&&x("web_stl_tooling",{dangerouslySkipActivation:!0}).anyEnabled;return(0,c.jsxs)(r.Fragment,{children:[(0,c.jsxs)(i.xu,{height:null!=m?m:"100%",position:D?"absolute":void 0,width:"100%",children:[(0,c.jsx)(i.xu,{ref:j,dangerouslySetInlineStyle:{__style:{boxShadow:a?"0 0 0 1px #0074e8":void 0}},"data-test-id":"media-image-view",height:null!=m?m:"100%",overflow:"hidden",position:D?"absolute":void 0,rounding:2,width:"100%",children:A.Z.enabled("offsitePinCreation")?(0,c.jsx)(nV.Z,{url:n.src,children:function(e){var t,o,a=e.image;return!O&&a.length>0&&w(a[0]),(0,c.jsx)(r.Fragment,{children:a.length>0&&(0,c.jsx)(i.Ee,{alt:v._('Uploaded image', 'Label for a user uploaded image on Pin create', 'Label for a user uploaded image on Pin create'),naturalHeight:null!=(t=a[0].height)?t:1,naturalWidth:null!=(o=a[0].width)?o:1,src:n.src})})}}):(0,c.jsxs)(i.Ee,{alt:v._('Uploaded image', 'Label for a user uploaded image on Pin create', 'Label for a user uploaded image on Pin create'),naturalHeight:n.height,naturalWidth:n.width,src:n.src,children:[y&&(0,c.jsx)(ec,{pinDraftId:u}),h&&!A.Z.enabled("shop_the_pin")&&(0,c.jsx)(nb,{editable:"tag"===b,pinDraftId:u,pinItemId:d}),a&&(0,c.jsx)(nY,{type:"image"})]})}),!A.Z.enabled("offsitePinCreation")&&"tag"!==b&&"collectionsTag"!==b&&(0,c.jsx)(i.xu,{bottom:!0,height:null!=m?m:"100%",left:!0,position:"absolute",right:!0,top:!0,width:"100%",children:(0,c.jsx)(i.xu,{alignItems:"center",direction:"column",display:"flex",justifyContent:"center",marginStart:-2,children:(0,c.jsx)(tE,{deleteText:v._('Delete image', 'Button to delete the image from the Pin', 'Button to delete the image from the Pin'),pinDraftId:u,pinItemId:d,showCarouselCreateButton:f,type:"image"})})}),D&&!s&&!p&&(0,c.jsx)("div",{role:"presentation",style:{height:"100%",position:"absolute",width:"100%",display:"flex",justifyContent:"center",alignItems:"center"},children:(0,c.jsx)(i.xu,{alignItems:"center",display:"flex",justifyContent:"center",margin:2,position:"relative",width:"100%",zIndex:n0,children:(0,c.jsx)(nz,{})})})]}),D&&!p&&(0,c.jsx)(nW,{imageDims:{width:n.width,height:n.height},isHovering:s,pinDraftId:u,pinItemId:d})]})}function n2(e){var t=(0,o.v9)(function(e){return e.pinbuilder}),n=t.pinDrafts,r=t.pinItems,i=n[e.pinDraftId].type,a=r[e.pinItemId].media,l=(0,o.v9)(function(t){return(0,nq.Xe)(t,e)});return(0,c.jsx)(n1,n$(n$({},e),{},{showMediaTagOverlay:"single"===i,showPageNumberOverlay:"carousel"===i&&!!a,view:l}))}function n8(e){return(n8="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n3(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function n5(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?n3(Object(n),!0).forEach(function(t){re(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):n3(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function n6(e,t){return(n6=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function n4(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function n9(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(n9=function(){return!!e})()}function n7(e){return(n7=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function re(e,t,n){return(t=rt(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function rt(e){var t=function(e,t){if("object"!=n8(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=n8(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==n8(t)?t:t+""}var rn={__style:{backgroundColor:"rgba(241, 53, 53, 1)",borderRadius:"2px",transition:"1s transform",transformOrigin:"left"}},rr={__style:{backgroundImage:"linear-gradient(to top, rgba(0, 0, 0, 0), rgba(0, 0, 0, 0.6))"}},ro=function(e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");o.prototype=Object.create(e&&e.prototype,{constructor:{value:o,writable:!0,configurable:!0}}),Object.defineProperty(o,"prototype",{writable:!1}),e&&n6(o,e);var t,n,r=(t=n9(),function(){var e,n=n7(o);return e=t?Reflect.construct(n,arguments,n7(this).constructor):n.apply(this,arguments),function(e,t){if(t&&("object"==n8(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return n4(e)}(this,e)});function o(){var e;if(!(this instanceof o))throw TypeError("Cannot call a class as a function");for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];return re(n4(e=r.call.apply(r,[this].concat(n))),"state",{visible:!!e.props.errorMessage||100!==e.props.progress}),re(n4(e),"handleHide",function(){e.setState({visible:!1})}),re(n4(e),"getProgressText",function(){return e.props.progress<100?e.props.i18n._('Uploading...', 'Upload progress status for pin create', 'Upload progress status for pin create'):e.props.i18n._('Finishing up', 'Upload progress status for pin create', 'Upload progress status for pin create')}),e}return n=[{key:"componentDidUpdate",value:function(e){var t=e.progress,n=this.props,r=n.errorMessage,o=n.progress,i=this.state.visible;!r&&(t<100||i)&&100===o&&(this.hidingTimeout=setTimeout(this.handleHide,3e3))}},{key:"componentWillUnmount",value:function(){this.hidingTimeout&&clearTimeout(this.hidingTimeout)}},{key:"render",value:function(){var e=this.props,t=e.errorMessage,n=e.onRetryUpload,r=e.progress;return this.state.visible?(0,c.jsx)(i.xu,{dangerouslySetInlineStyle:rr,"data-test-id":"pinbuilder-media-view-progress-bar",height:72,left:!0,position:"absolute",rounding:2,top:!0,width:"100%",children:(0,c.jsxs)(i.xu,{margin:3,children:[(0,c.jsx)(i.xu,{height:6,marginBottom:2,position:"relative",children:!t&&(0,c.jsx)(i.xu,{dangerouslySetInlineStyle:rn,height:"100%",left:!0,position:"absolute",top:!0,width:"".concat(r,"%")})}),(0,c.jsxs)(i.kC,{alignItems:"center",justifyContent:"start",children:[!!t&&(0,c.jsx)(i.iP,{fullWidth:!1,onTap:n,rounding:"circle",children:(0,c.jsx)(i.xu,{marginEnd:2,children:(0,c.jsx)(i.JO,{accessibilityLabel:this.props.i18n._('Retry upload', 'Button allowing a user to retry a failed video upload', 'Button allowing a user to retry a failed video upload'),color:"inverse",icon:"refresh",size:20})})}),(0,c.jsx)(i.xv,{color:"inverse",inline:!0,weight:"bold",children:t||this.getProgressText()})]})]})}):null}}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,rt(r.key),r)}}(o.prototype,n),Object.defineProperty(o,"prototype",{writable:!1}),o}(r.Component),ri=function(e){var t=(0,l.ZP)();return(0,c.jsx)(ro,n5(n5({},e),{},{i18n:t}))},ra=n(782570);function rl(e){return(rl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function rs(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function rc(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?rs(Object(n),!0).forEach(function(t){rh(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rs(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function ru(e,t){return(ru=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function rd(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function rf(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(rf=function(){return!!e})()}function rp(e){return(rp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function rh(e,t,n){return(t=ry(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ry(e){var t=function(e,t){if("object"!=rl(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=rl(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==rl(t)?t:t+""}var rb=function(e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");o.prototype=Object.create(e&&e.prototype,{constructor:{value:o,writable:!0,configurable:!0}}),Object.defineProperty(o,"prototype",{writable:!1}),e&&ru(o,e);var t,n,r=(t=rf(),function(){var e,n=rp(o);return e=t?Reflect.construct(n,arguments,rp(this).constructor):n.apply(this,arguments),function(e,t){if(t&&("object"==rl(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return rd(e)}(this,e)});function o(){var e;if(!(this instanceof o))throw TypeError("Cannot call a class as a function");for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];return rh(rd(e=r.call.apply(r,[this].concat(n))),"state",{controls:!0,playing:!1,volume:0}),rh(rd(e),"setVideoRef",function(t){e.videoRef=t}),rh(rd(e),"handlePlay",function(){return e.setState({playing:!0})}),rh(rd(e),"handlePause",function(){return e.setState({playing:!1})}),rh(rd(e),"handleHideControls",function(){return e.setState({controls:!1})}),rh(rd(e),"handleVolumeChange",function(t){var n=t.event,r=t.volume;n.stopPropagation(),e.setState({volume:r})}),rh(rd(e),"handleMouseEnter",function(){e.controlsTimeout&&clearTimeout(e.controlsTimeout),e.setState({controls:!0})}),rh(rd(e),"handleMouseLeave",function(){e.controlsTimeout=setTimeout(e.handleHideControls,k.Hy)}),e}return n=[{key:"componentDidMount",value:function(){this.controlsTimeout=setTimeout(this.handleHideControls,k.Hy);var e,t,n=this.props.setContainedHeight;null!=(e=this.videoRef)&&null!=(t=e.video)&&t.clientHeight&&n(this.videoRef.video.clientHeight)}},{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.isSelecting,r=t.video;r.thumbnail!==e.video.thumbnail&&this.videoRef&&(this.videoRef.seek(r.thumbnail),this.setState({playing:!1})),n&&!e.isSelecting&&this.setState({playing:!1}),!n&&e.isSelecting&&this.setState({playing:!0})}},{key:"componentWillUnmount",value:function(){this.controlsTimeout&&clearTimeout(this.controlsTimeout)}},{key:"render",value:function(){var e=this.props,t=e.isDragging,n=e.isEdited,r=e.pinDraftId,o=e.pinItemId,a=e.retryUpload,l=e.video,s=e.videoError,u=e.view,d=e.containedHeight,f=this.state,p=f.controls,h=f.playing,y=f.volume,b=l.uploadProgress||0,m={__style:{boxShadow:t?"0 0 0 1px #0074e8":void 0}};return(0,c.jsxs)(i.xu,{dangerouslySetInlineStyle:m,"data-test-id":"media-video-view",height:null!=d?d:"100%",onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,overflow:"hidden",rounding:3,width:"100%",children:[(0,c.jsxs)(i.nk,{ref:this.setVideoRef,aspectRatio:l.width/l.height,autoplay:!0,controls:p,loop:!0,onControlsPause:this.handlePause,onControlsPlay:this.handlePlay,onPlay:this.handlePlay,onPlayError:this.handlePause,onVolumeChange:this.handleVolumeChange,playing:h,src:l.src,volume:y,children:[t&&(0,c.jsx)(nY,{type:"video"}),(0,c.jsx)(ri,{errorMessage:s,onRetryUpload:a,progress:b})]}),n&&(0,c.jsxs)(i.xu,{bottom:!0,color:"transparentDarkGray",dangerouslySetInlineStyle:m,left:!0,padding:3,paddingX:8,position:"absolute",right:!0,top:!0,children:[(0,c.jsx)(i.X6,{color:"inverse",size:"400",children:this.props.i18n._('Your edits are stored', 'editedVideo.overlay.title', 'Text that appears over video after it has been edited if the preview is not working properly')}),(0,c.jsx)(i.xv,{color:"inverse",children:this.props.i18n._('Your edits aren\'t showing up in this preview, but don\'t worry, they\'ve been stored and will show up in your published video. Tap back to the editing mode to see your edits. ', 'editedVideo.overlay.message', 'Text that appears over video after it has been edited if the preview is not working properly')})]}),"tag"!==u&&"collectionsTag"!==u&&(0,c.jsx)(i.xu,{bottom:!0,height:null!=d?d:"100%",left:!0,position:"absolute",top:!0,children:(0,c.jsx)(i.xu,{alignItems:"center",direction:"column",display:"flex",justifyContent:"center",marginStart:-2,children:(0,c.jsx)(tE,{deleteText:this.props.i18n._('Delete video', 'Button to delete the video from the Pin', 'Button to delete the video from the Pin'),pinDraftId:r,pinItemId:o})})})]})}}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ry(r.key),r)}}(o.prototype,n),Object.defineProperty(o,"prototype",{writable:!1}),o}(r.Component);function rm(e){var t=(0,a.u)().logContextEvent,n=(0,l.ZP)(),r=(0,j.Z)(),i=(0,S.Z)(),s=i.isAuth?i.id:"",u=i.isAuth?i.country:"",d=(0,o.I0)(),f=e.pinDraftId,p=e.pinItemId,h=(0,o.v9)(function(e){return e.pinbuilder.selectedPinDraftIds.length>0}),y=(0,o.v9)(function(e){return e.pinbuilder.pinDrafts[f].mediaError}),b=(0,o.v9)(function(t){return(0,nq.Xe)(t,e)}),m=(0,I.Z)().checkExperiment;return(0,c.jsx)(rb,rc(rc({},e),{},{i18n:n,isSelecting:h,retryUpload:function(){return d((0,ra.Z)({checkExperiment:m,country:u,i18n:n,ideaPinRenamingEnabled:r,logContextEvent:t,pinDraftId:f,pinItemId:p,userId:s}))},videoError:y,view:b}))}var rg=n(931302),rv=n(134021),r_=n(765908),rx=n(147641),rj=n(603316);function rP(e){return(rP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function rO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function rw(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?rO(Object(n),!0).forEach(function(t){var r,o;r=t,o=n[t],(r=function(e){var t=function(e,t){if("object"!=rP(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=rP(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==rP(t)?t:t+""}(r))in e?Object.defineProperty(e,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[r]=o}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rO(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function rS(e){return(rS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function rA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function rI(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?rA(Object(n),!0).forEach(function(t){rk(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rA(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function rE(e,t){return(rE=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function rC(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function rD(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(rD=function(){return!!e})()}function rT(e){return(rT=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function rk(e,t,n){return(t=rz(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function rz(e){var t=function(e,t){if("object"!=rS(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=rS(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==rS(t)?t:t+""}var rR=function(e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");o.prototype=Object.create(e&&e.prototype,{constructor:{value:o,writable:!0,configurable:!0}}),Object.defineProperty(o,"prototype",{writable:!1}),e&&rE(o,e);var t,n,r=(t=rD(),function(){var e,n=rT(o);return e=t?Reflect.construct(n,arguments,rT(this).constructor):n.apply(this,arguments),function(e,t){if(t&&("object"==rS(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return rC(e)}(this,e)});function o(){var e;if(!(this instanceof o))throw TypeError("Cannot call a class as a function");for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];return rk(rC(e=r.call.apply(r,[this].concat(n))),"handleDrop",function(t){var n=e.props,r=n.media,o=n.processFiles,i=n.logContextEvent;t.preventDefault(),t.stopPropagation();var a=(0,eF.Z)(t.dataTransfer);i({event_type:3502,component:13308,element:10966,aux_data:{pin_builder_data:JSON.stringify({media_types:a.map(function(e){return e.type})})}}),o(A.Z.enabled("carousel")&&!r?a:a.slice(0,1))}),e}return n=[{key:"renderMedia",value:function(e,t,n,r){var o=this.props,i=o.media,a=o.pinDraftId,l=o.pinItemId,s=o.isEdited,u=o.showCarouselCreateButton,d=o.showCarouselControlButtons;if(i){if("localImage"===i.type||"webImage"===i.type)return(0,c.jsx)(n2,{containedHeight:r,image:i,isDragging:e,isHovering:t,pinDraftId:a,pinItemId:l,setContainedHeight:n,showCarouselControlButtons:d,showCarouselCreateButton:u});else if("localVideo"===i.type)return(0,c.jsx)(rm,{containedHeight:r,isDragging:e,isEdited:s,isHovering:t,pinDraftId:a,pinItemId:l,setContainedHeight:n,video:i})}return null}},{key:"render",value:function(){var e=this,t=this.props,n=t.media,r=t.pinDraftId,o=t.pinItemId,i=t.processFiles;return n?(0,c.jsx)(rg.Z,{onDrop:this.handleDrop,children:function(t,n,r,o){return e.renderMedia(t,n,r,o)}}):(0,c.jsx)(td,{pinDraftId:r,pinItemId:o,processFiles:i})}}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,rz(r.key),r)}}(o.prototype,n),Object.defineProperty(o,"prototype",{writable:!1}),o}(r.Component);function rB(e){var t=e.pinDraftId,n=(0,a.u)().logContextEvent,r=(0,l.ZP)(),i=(0,j.Z)(),u=(0,o.I0)(),d=(0,S.Z)(),f=d.isAuth&&d.isPartner,p=d.isAuth?d.id:"",h=d.isAuth?d.country:"",y=(0,tg.Z)(),b=(0,tv.lJ)(d,y),m=(0,ea.TH)().search.includes("maxvideo"),g=(0,I.Z)().checkExperiment,v=(0,eZ.B)(),_=(0,eW.Z)(v.userAgent.browserName);return(0,c.jsx)(rR,rI(rI({},e),{},{logContextEvent:n,processFiles:function(e){var o,a,l,c,d,y,v,x,j,P,O,w,S,I;u((a=(o={pinDraftId:t,files:e,isPartner:f,userId:p,country:h,i18n:r,logContextEvent:n,orbacSubjectId:b,checkExperiment:g,ideaPinRenamingEnabled:i,imageFileTypes:_,isMaxVideo:m}).pinDraftId,l=o.files,c=o.isPartner,d=o.userId,y=o.country,v=o.i18n,x=o.logContextEvent,j=o.orbacSubjectId,P=o.checkExperiment,O=o.ideaPinRenamingEnabled,S=void 0===(w=o.imageFileTypes)?eH.xl:w,I=o.isMaxVideo,function(e,t){var n=t(),r=n.pinbuilder.pinDrafts[a],o=r.pinItemIds,i=r.pinItemIndex,u=r.pinItemShareable,f=r.status,p=r.type,h=r.isShowcase,b=o.length;if("story"===p)throw Error("StoryPin cannot be processed here, use storypinbuilder/processFiles");var m=(null==P?void 0:P("aid_exp_showcase_video_card_creation").anyEnabled)||!1;e((0,s.p3)(a,"processing")),e((0,s._B)(a,null));var g=function(){return new Promise(function(t){e((0,s.p3)(a,f)),t(void 0)})};return h&&!m&&l.forEach(function(t){if(eH.ss.includes(t.type)){var n=(0,D.ZP)({errorId:"SHOWCASE_UNSUPPORTED_FORMAT",i18n:v,ideaPinRenamingEnabled:O,dispatchId:o[i]});e((0,s.Ig)(a,n.message))}else e((0,s.Ig)(a,null))}),Promise.all(l.map(function(e){return(0,r_.Z)({i18n:v,file:e,options:{allowVideo:A.Z.enabled("video")&&(!h||m),forStoryPin:!1},ideaPinRenamingEnabled:O,imageFileTypes:S})})).then(function(t){var r=!1,l=[],f=[],h=o[0],m=n.pinbuilder.pinItems,_=m[h],w=_.description,S=_.media,E=_.title,C=o.length<=1&&!S;("carousel"!==p&&t.length>0&&"localVideo"===t[0].type?t.slice(0,1):t.filter(function(e){return"localVideo"!==e.type})).forEach(function(e){"localImage"===e.type?(f.push(e),(0,rj.nP)("pin_builder.media_upload.image_selected",{sampleRate:1,tags:{source:(0,rv.Z)(c)}})):"localVideo"===e.type?(f.push(e),(0,rj.nP)("pin_builder.media_upload.video_selected",{sampleRate:1,tags:{source:(0,rv.Z)(c)}})):l.push(e)}),f.length||(l.length>0&&(l.length>1?e((0,s._B)(a,v._('Uh oh, your files could not be uploaded. Please make sure the files chosen fit within our requirements', 'pinbuilder.processFiles.invalidFiles', 'Error message notifying User all of their selected files could not be uploaded'))):e((0,s._B)(a,l[l.length-1].message))),g()),l.length>0&&e((0,s._B)(a,v._('Uh oh, one or more of your files could not be uploaded', 'pinbuilder.processFiles.invalidFiles', 'Error message notifying User some of their selected files could not be uploaded')));var D="carousel"===p||"single"===p&&f.length>1,z=S||f[0],R=k.dS,L=function(t,n,l,s,c){var p=s?Object.assign(t,s.getCanvasOutput({width:c})):t,b=s?s.toJSON():null,g=m[h].link,_=o[i],j=rw(rw({},u?{description:w,link:g,title:E}:{}),{media:p,canvasJson:b});if(0===n){var S=m[_].media;r=!!S&&1===f.length,S&&"localVideo"===S.type&&e((0,rx.$Z)(a,_)),e((0,M.nh)(_,j))}else _=(0,T.Z)(),e((0,F.Z)(a,_,j));"localVideo"===p.type&&e((0,ra.Z)({pinDraftId:a,pinItemId:_,userId:d,country:y,i18n:v,logContextEvent:x,orbacSubjectId:l,checkExperiment:P,ideaPinRenamingEnabled:O,isMaxVideo:I}))},Z=function(t){return f.slice(0,R-b+1).reduce(function(e,n,r){return e.then(function(){return"localImage"===n.type&&t?(t.resize(n.width,n.height),t.setImage(n.src).then(function(){var e=z.width;if(t){var o,i,a=C&&f.length>1?B(null!=(o=z.width)?o:1,null!=(i=z.height)?i:1):{w:z.width,h:z.height};t.setAspectRatio(a)}return L(n,r,j,t,e)})):L(n,r,j)})},Promise.resolve()).then(function(){!l.length&&D&&!r&&b+f.length<=k.dS&&e((0,F.Z)(a,(0,T.Z)(),null,{saveIndex:!0})),e((0,s._B)(a,l.length?l[l.length-1].message:null)),!D&&A.Z.enabled("imageSignals")&&e((0,s.th)({pinDraftId:a}))})};D?(0,ef.Z)().then(function(e){return Z(new e(document.createElement("div"),v)).then(function(){return g()})}):Z().then(function(){return g()})})}))}}))}var rL=n(500388);function rF(e){var t=e.pinDraftId,n=(0,a.u)().logContextEvent,r=(0,l.ZP)(),s=(0,o.I0)(),u=r._('Create carousel', 'Button Text for creating Carousel Pin', 'Button Text for creating Carousel Pin');return(0,c.jsx)(i.xu,{"data-test-id":"create-carousel-button",children:(0,c.jsx)(i.zx,{accessibilityLabel:u,fullWidth:!0,iconEnd:"add",onClick:function(){n({event_type:101,component:13308,element:11123}),s((0,F.Z)(t,(0,T.Z)()))},text:u})})}function rZ(e){return(rZ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function rM(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function rN(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?rM(Object(n),!0).forEach(function(t){rG(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rM(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function rH(e,t){return(rH=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function rU(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function rW(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(rW=function(){return!!e})()}function rV(e){return(rV=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function rG(e,t,n){return(t=rX(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function rX(e){var t=function(e,t){if("object"!=rZ(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=rZ(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==rZ(t)?t:t+""}var rY={__style:{borderRadius:6}},rq={__style:{backgroundColor:"rgba(0, 0, 0, 0.3)"}},rK=function(e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");o.prototype=Object.create(e&&e.prototype,{constructor:{value:o,writable:!0,configurable:!0}}),Object.defineProperty(o,"prototype",{writable:!1}),e&&rH(o,e);var t,n,r=(t=rW(),function(){var e,n=rV(o);return e=t?Reflect.construct(n,arguments,rV(this).constructor):n.apply(this,arguments),function(e,t){if(t&&("object"==rZ(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return rU(e)}(this,e)});function o(){var e;if(!(this instanceof o))throw TypeError("Cannot call a class as a function");for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];return rG(rU(e=r.call.apply(r,[this].concat(n))),"state",{isHovering:!1}),rG(rU(e),"handleMouseEnter",function(){e.setState({isHovering:!0})}),rG(rU(e),"handleMouseLeave",function(){e.setState({isHovering:!1})}),e}return n=[{key:"render",value:function(){var e=this.props,t=e.clearCustomVideoThumbnail,n=e.coverImg,r=this.state.isHovering;return(0,c.jsx)(i.xu,{height:k.u1,onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,position:"relative",width:k.u1*n.width/n.height,children:(0,c.jsx)(i.xu,{dangerouslySetInlineStyle:rY,overflow:"hidden",children:(0,c.jsx)(i.Ee,{alt:this.props.i18n._('Uploaded cover image', 'Label for user uploaded cover image for video', 'Label for user uploaded cover image for video'),naturalHeight:n.height,naturalWidth:n.width,src:n.src,children:r&&(0,c.jsx)(i.xu,{alignItems:"center",dangerouslySetInlineStyle:rq,display:"flex",height:"100%",justifyContent:"center",children:(0,c.jsx)(i.hU,{accessibilityLabel:this.props.i18n._('Remove image', 'Button to remove cover image for video', 'Button to remove cover image for video'),bgColor:"white",icon:"trash-can",iconColor:"darkGray",onClick:t,size:"xs"})})})})})}}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,rX(r.key),r)}}(o.prototype,n),Object.defineProperty(o,"prototype",{writable:!1}),o}(r.Component);function rJ(e){var t=(0,l.ZP)(),n=(0,o.I0)();return(0,c.jsx)(rK,rN(rN({},e),{},{clearCustomVideoThumbnail:function(){return n((0,M.Sz)(e.pinItemId,{customCoverImg:void 0}))},i18n:t}))}function r$(e){return(r$="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function rQ(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function r0(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?rQ(Object(n),!0).forEach(function(t){r4(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rQ(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function r1(e){return function(e){if(Array.isArray(e))return r2(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return r2(e,void 0);var n=({}).toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r2(e,void 0):void 0}}(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r2(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function r8(e,t){return(r8=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function r3(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function r5(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(r5=function(){return!!e})()}function r6(e){return(r6=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function r4(e,t,n){return(t=r9(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r9(e){var t=function(e,t){if("object"!=r$(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=r$(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==r$(t)?t:t+""}var r7=new Map,oe=new Map,ot={__style:{opacity:.35}},on={height:"100%",width:"100%"},or=function(e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");a.prototype=Object.create(e&&e.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),Object.defineProperty(a,"prototype",{writable:!1}),e&&r8(a,e);var t,n,o=(t=r5(),function(){var e,n=r6(a);return e=t?Reflect.construct(n,arguments,r6(this).constructor):n.apply(this,arguments),function(e,t){if(t&&("object"==r$(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return r3(e)}(this,e)});function a(){var e;if(!(this instanceof a))throw TypeError("Cannot call a class as a function");for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];return r4(r3(e=o.call.apply(o,[this].concat(n))),"state",{seeking:!1,thumbnails:r7.get(e.props.video.src)||[]}),r4(r3(e),"getVideoDuration",function(){var t=e.props.video,n=t.trimmedEndTime,r=t.trimmedStartTime;return void 0===n?t.duration:n-(void 0===r?0:r)}),r4(r3(e),"getNumThumbnails",function(){var t=e.props.video,n=oe.get(t.src);if(n)return n;if(e.container){var r=Math.max(Math.ceil(e.container.getBoundingClientRect().width/e.getVideoWidth()),6);return oe.set(t.src,r),r}return 6}),r4(r3(e),"getThumbnails",function(){var t=e.props.video,n=e.getNumThumbnails(),r=0;e.videoThumbnail=document.createElement("video");var o=e.getVideoDuration(),i=function(){e.videoThumbnail.currentTime=r/n*o};e.videoThumbnail.addEventListener("canplaythrough",i),e.videoThumbnail.addEventListener("seeked",function a(){if(e.videoThumbnail.removeEventListener("canplaythrough",i),r===n)return void e.videoThumbnail.removeEventListener("seeked",a);var l=document.createElement("canvas");l.height=e.videoThumbnail.videoHeight,l.width=e.videoThumbnail.videoWidth;var s=l.getContext("2d");null==s||s.drawImage(e.videoThumbnail,0,0,l.width,l.height);var c=l.toDataURL();e.mounted&&e.setState(function(e){return{thumbnails:[].concat(r1(e.thumbnails),[c])}}),r7.set(t.src,[].concat(r1(e.state.thumbnails),[c])),r+=1,e.videoThumbnail.currentTime=r/n*o}),e.videoThumbnail.src=t.src}),r4(r3(e),"getVideoWidth",function(){var t=e.props,n=t.height,r=t.video;return(void 0===n?92:n)*r.width/r.height}),r4(r3(e),"setContainerRef",function(t){e.container=t}),r4(r3(e),"setVideoRef",function(t){e.video=t}),r4(r3(e),"mounted",!1),r4(r3(e),"handleMouseDown",function(t){(0,e.props.onFocusSlider)(),e.setState({seeking:!0});var n=t.currentTarget.getBoundingClientRect().left;e.mouseOffsetX=t.clientX-n}),r4(r3(e),"handleMouseMove",function(t){var n=r3(e).mouseOffsetX,r=e.state.seeking,o=e.props.video.trimmedStartTime,i=void 0===o?0:o;if(r&&n){var a=e.props,l=a.setThumbnail,s=a.video,c=t.currentTarget.getBoundingClientRect(),u=c.left,d=c.width,f=Math.min(Math.max(0,Math.min((t.clientX-u-n)/(d-e.getVideoWidth()),1)),.98)*s.duration,p=r3(e).video;p&&f<=e.getVideoDuration()&&(p.currentTime=i+f,l(i+f))}}),r4(r3(e),"handleMouseUp",function(){e.setState({seeking:!1}),e.mouseOffsetX=null}),e}return n=[{key:"componentDidMount",value:function(){this.mounted=!0;var e=this.props.video;this.video&&(this.video.currentTime=e.thumbnail),r7.has(e.src)||this.getThumbnails()}},{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.setThumbnail,r=t.video,o=r.trimmedEndTime,i=r.trimmedStartTime;if(r.src!==e.video.src){var a=r7.get(r.src);a?this.setState({thumbnails:a}):this.getThumbnails()}(e.video.trimmedEndTime!==o||e.video.trimmedStartTime!==i)&&(this.video&&(this.video.currentTime=i||0),n(i||0),this.setState({thumbnails:[]}),r7.set(r.src,[]),this.getThumbnails())}},{key:"componentWillUnmount",value:function(){this.mounted=!1}},{key:"render",value:function(){var e=this,t=this.props,n=t.height,o=t.showHeading,a=t.video,l=a.trimmedStartTime,s=this.state,u=s.seeking,d=s.thumbnails,f=this.getVideoWidth(),p=this.getVideoDuration(),h=Math.max(0,Math.round((a.thumbnail-(void 0===l?0:l))*100/p)/100);return(0,c.jsxs)(r.Fragment,{children:[o&&(0,c.jsx)(i.xu,{marginBottom:3,children:(0,c.jsx)(i.xv,{color:"default",lineClamp:1,weight:"bold",children:this.props.i18n._('Pick a cover image', 'Heading for slider to select video thumbnail image', 'Heading for slider to select video thumbnail image')})}),(0,c.jsxs)(i.xu,{color:"secondary",column:12,height:n,overflow:"hidden",position:"relative",rounding:1,children:[(0,c.jsx)(i.xu,{color:"default",column:12,dangerouslySetInlineStyle:ot,height:"100%",position:"relative",children:d.map(function(t,r){return(0,c.jsx)(i.xu,{dangerouslySetInlineStyle:{__style:{left:"".concat(r*(100/e.getNumThumbnails()),"%")}},height:n,position:"absolute",width:f,children:(0,c.jsx)(i.Ee,{alt:"",naturalHeight:a.height,naturalWidth:a.width,src:t})},r)})}),(0,c.jsx)(i.xu,{bottom:!0,left:!0,position:"absolute",right:!0,top:!0,children:(0,c.jsx)(i.xu,{ref:this.setContainerRef,column:12,height:"100%",onMouseLeave:this.handleMouseUp,onMouseMove:this.handleMouseMove,onMouseUp:this.handleMouseUp,position:"relative",children:(0,c.jsx)(i.xu,{dangerouslySetInlineStyle:{__style:{boxShadow:"0 0 0 3px #fff",cursor:u?"grabbing":"grab",left:"calc((100% - ".concat(f,"px) * ").concat(h>=.98?1:h,")")}},"data-test-id":"pin-draft-video-thumbnail-slider",height:n,overflow:"hidden",position:"absolute",rounding:1,width:f,children:(0,c.jsx)("video",{ref:this.setVideoRef,"data-test-id":"pin-draft-video-thumbnail",muted:!0,onMouseDown:this.handleMouseDown,src:a.src,style:on,children:(0,c.jsx)("track",{kind:"captions"})})})})})]})]})}}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r9(r.key),r)}}(a.prototype,n),Object.defineProperty(a,"prototype",{writable:!1}),a}(r.Component);function oo(e){var t=(0,l.ZP)(),n=(0,o.I0)();return(0,c.jsx)(or,r0(r0({},e),{},{i18n:t,setThumbnail:function(t){return n((0,M.Sz)(e.pinItemId,{thumbnail:t}))}}))}function oi(e){return(oi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function oa(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function ol(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?oa(Object(n),!0).forEach(function(t){of(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):oa(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function os(e,t){return(os=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function oc(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ou(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(ou=function(){return!!e})()}function od(e){return(od=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function of(e,t,n){return(t=op(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function op(e){var t=function(e,t){if("object"!=oi(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=oi(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==oi(t)?t:t+""}r4(or,"defaultProps",{height:92,showHeading:!0});var oh={__style:{border:"dashed 0.5px rgba(51, 51, 51, 0.2)",borderRadius:.7}},oy={__style:{padding:3}},ob=function(e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");o.prototype=Object.create(e&&e.prototype,{constructor:{value:o,writable:!0,configurable:!0}}),Object.defineProperty(o,"prototype",{writable:!1}),e&&os(o,e);var t,n,r=(t=ou(),function(){var e,n=od(o);return e=t?Reflect.construct(n,arguments,od(this).constructor):n.apply(this,arguments),function(e,t){if(t&&("object"==oi(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return oc(e)}(this,e)});function o(){var e;if(!(this instanceof o))throw TypeError("Cannot call a class as a function");for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];return of(oc(e=r.call.apply(r,[this].concat(n))),"state",{coverImgError:null}),of(oc(e),"logFailedAttempt",function(t){e.props.logContextEvent({event_type:7897,component:13308,aux_data:{error_message:t}})}),of(oc(e),"clearCoverImgError",function(){e.setState({coverImgError:null})}),of(oc(e),"handleDrop",function(t){var n=e.props,r=n.i18n,o=n.ideaPinRenamingEnabled;t.preventDefault(),t.stopPropagation(),e.setState({coverImgError:null});var i=(0,eF.Z)(t.dataTransfer);i.length>0&&(0,r_.Z)({i18n:r,ideaPinRenamingEnabled:o,file:i[0]}).then(function(t){return e.handleFileValidation(t)})}),of(oc(e),"handleChange",function(t){var n=e.props,r=n.i18n,o=n.ideaPinRenamingEnabled;e.setState({coverImgError:null});var i=t.target.files&&t.target.files[0];(0,r_.Z)({i18n:r,ideaPinRenamingEnabled:o,file:i}).then(function(t){return e.handleFileValidation(t)}),t.target.value=""}),of(oc(e),"handleFileValidation",function(t){var n=e.props,r=n.i18n,o=n.ideaPinRenamingEnabled,i=n.setCustomVideoThumbnail,a=n.video;switch(t.type){case"error":e.logFailedAttempt(t.id),e.setState({coverImgError:t});break;case"localVideo":var l=(0,D.ZP)({errorId:"FILE_UNRECOGNIZED_TYPE",i18n:r,ideaPinRenamingEnabled:o});e.logFailedAttempt(l.id),e.setState({coverImgError:l});break;case"localImage":if(Math.abs(a.width/a.height-t.width/t.height)>.001){var s=(0,D.ZP)({errorId:"VIDEO_COVER_INVALID_ASPECT_RATIO",i18n:r,ideaPinRenamingEnabled:o});e.logFailedAttempt(s.id),e.setState({coverImgError:s})}else i(t)}}),e}return n=[{key:"render",value:function(){var e=this,t=this.props,n=t.imageFileTypes,r=t.pinItemId,o=t.video,a=this.state.coverImgError;return(0,c.jsxs)(i.xu,{display:"flex",marginEnd:-2,marginStart:-2,wrap:!0,children:[(0,c.jsx)(i.xu,{flex:"grow",paddingX:2,children:(0,c.jsx)(oo,{height:k.u1,onFocusSlider:this.clearCoverImgError,pinItemId:r,showHeading:!1,video:o})}),(0,c.jsx)(i.xu,{display:"flex",flex:"none",justifyContent:"end",paddingX:2,children:(0,c.jsx)(eU.Z,{accept:n.join(","),allowMultipleFiles:!1,hasError:!!a,id:"video-cover-upload-input",onChange:this.handleChange,onDrop:this.handleDrop,children:function(){return(0,c.jsx)(i.xu,{dangerouslySetInlineStyle:oy,height:k.u1,overflow:"hidden",position:"relative",rounding:1,width:k.u1,children:(0,c.jsx)(i.xu,{alignItems:"center",dangerouslySetInlineStyle:oh,direction:"column",display:"flex",height:"100%",justifyContent:"center",children:(0,c.jsx)(i.JO,{accessibilityLabel:a?e.props.i18n._('Upload error', 'Error alert icon shown when image chosen is invalid', 'Error alert icon shown when image chosen is invalid'):e.props.i18n._('Choose a cover image', 'Add an image for the video poster cover', 'Add an image for the video poster cover'),color:a?"error":"subtle",icon:a?"alert":"arrow-circle-up",size:18})})})}})}),!!a&&(0,c.jsx)(i.xu,{column:12,paddingX:2,paddingY:3,children:(0,c.jsx)(i.xv,{color:"error",size:"100",children:a.message})})]})}}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,op(r.key),r)}}(o.prototype,n),Object.defineProperty(o,"prototype",{writable:!1}),o}(r.Component);function om(e){var t=(0,a.u)().logContextEvent,n=(0,l.ZP)(),r=(0,j.Z)(),i=(0,eZ.B)(),s=(0,eW.Z)(i.userAgent.browserName),u=(0,o.I0)();return(0,c.jsx)(ob,ol(ol({},e),{},{i18n:n,ideaPinRenamingEnabled:r,imageFileTypes:s,logContextEvent:t,setCustomVideoThumbnail:function(t){return u((0,M.Sz)(e.pinItemId,{customCoverImg:null!=t?t:void 0}))}}))}function og(e){var t=e.pinItemId,n=e.video,r=(0,l.ZP)();return(0,c.jsxs)(i.xu,{children:[(0,c.jsx)(i.xu,{paddingY:3,children:(0,c.jsx)(i.xv,{size:"200",children:r._('Video cover image', 'Heading for selecting a video cover image in pin builder', 'Heading for selecting a video cover image in pin builder')})}),n.customCoverImg?(0,c.jsx)(rJ,{coverImg:n.customCoverImg,pinItemId:t}):(0,c.jsx)(om,{pinItemId:t,video:n})]})}var ov=n(820731),o_=n(576538);function ox(e){var t,n=(0,l.ZP)(),a=e.height,u=e.pinDraftId,d=e.pinItemId,f=e.view,p=(0,S.Z)(),h=(0,tg.Z)(),y=(0,o.v9)(function(t){return(0,tj.jk)()(t,e).length>0}),b=(0,o.v9)(function(e){return e.pinbuilder.pinItems[d].media}),m=(0,o.v9)(function(e){return e.pinbuilder.pinItems[d].canvasJson}),g=(0,o.v9)(function(e){return e.pinbuilder.pinDrafts[u].isAdIneligible}),v=(0,o.v9)(function(e){return e.pinbuilder.pinDrafts[u].publishOption}),_=(0,o.v9)(function(e){return e.pinbuilder.pinDrafts[u].type}),j=(0,o.v9)(function(e){return b&&"ad_creation"===A.Z.scenario()?(0,o_.Qj)(e,u,d):null});b&&("carousel"!==_||!A.Z.enabled("carousel"))&&["localImage","assetImage","webImage"].includes(b.type)&&(b.width<k.FM||b.height<k.Mn?t=(0,eX.Z)(n._('We recommend an image that is at least {{ recommendedWidth }} px x {{ recommendedHeight }} px. This image is {{ actualWidth }} px x {{ actualHeight }} px.', 'pinbuilder.mediaImageView.warning', 'Warning message to notify the user that the pin does not meet our recommended dimension'),{recommendedWidth:k.FM,recommendedHeight:k.Mn,actualWidth:b?b.width:0,actualHeight:b?b.height:0}):b&&b.width/b.height>k.vk/k.NB&&(t=(0,eX.Z)(n._('We recommend using an aspect ratio that is at least {{ recommendedWidthRatio }} width x {{ recommendedHeightRatio }} tall.', 'pinbuilder.mediaView.warning', 'Warning message to notify the user that the pin does not meet our recommended dimension'),{recommendedWidthRatio:k.vk,recommendedHeightRatio:k.NB})));var P=!A.Z.enabled("offsitePinCreation")&&A.Z.enabled("pinQuality"),O=(0,I.Z)().checkExperiment,w=(0,tv.nl)(p,h)&&"ad_creation"!==A.Z.scenario()&&O("web_stl_tooling",{dangerouslySkipActivation:!0}).anyEnabled,E=(0,eG.Pw)(),C=E.campaignObjectiveType,D=E.allowCarouselPin,T=(0,o.I0)(),z=(0,r.useRef)(null),R="single"===_&&"publish-immediately"===v,B=!b&&R,L=!!b&&"localImage"===b.type&&R&&A.Z.enabled("carousel")&&"collectionsTag"!==f,F="carousel"===_&&A.Z.enabled("carousel");return(0,r.useEffect)(function(){"ad_creation"===A.Z.scenario()&&(j&&C&&!(0,rL.rt)(j,C)?z.current="objectiveType":b&&"gif"===(0,tb.Z)(b)&&(z.current="gif"),!!z.current!==g&&T((0,s.TD)(u,!0)))},[C,T,j,g,b,u]),(0,c.jsxs)(i.kC,{alignItems:"stretch",direction:"column",justifyContent:"start",width:271,children:[(0,c.jsxs)(i.xu,{direction:"column",display:"flex",height:a+k.uR,position:"relative",children:[(0,c.jsx)(i.xu,{"data-tutorial-id":"pin-builder-media-draft-view",flex:"grow",height:"100%",children:(0,c.jsx)(rB,{isEdited:!!b&&"localVideo"===b.type&&!!m&&!!(0,ov.Z)(b,m),media:b,pinDraftId:u,pinItemId:d,showCarouselControlButtons:F,showCarouselCreateButton:L})}),(0,c.jsx)(i.xu,{flex:"none",height:k.N8,marginTop:2,children:B&&(0,c.jsx)(ei,{pinDraftId:u})})]}),P&&!!t&&(0,c.jsx)(i.xu,{marginTop:3,width:"100%",children:(0,c.jsx)(i.he,{iconAccessibilityLabel:n._('Warning', 'pinbuilder.common.warningBanner.icon', 'The accessibility label for warning label\'s icon'),message:t,type:"warning"})}),"objectiveType"===z.current&&(0,c.jsx)(i.xu,{"data-test-id":"ad-media-type-warning-message",marginTop:3,width:"100%",children:(0,c.jsx)(i.he,{iconAccessibilityLabel:n._('Warning', 'pinbuilder.common.warningBanner.icon', 'The accessibility label for warning label\'s icon'),message:n._('Your file type isn\'t compatible with your campaign objective so it\'s ineligible for promotion in this campaign.', '[m10n] pinbuilder.mediaView.adWarning', 'Warning message displayed to user when a pin may not be eligible to be promoted based on media type'),primaryAction:{accessibilityLabel:n._('Learn more', 'pinbuilder.common.warningBanner.learnMore', 'Learn more link for warning banner'),href:eN.C5X,label:n._('Learn more', 'pinbuilder.common.warningBanner.learnMore', 'Learn more link for warning banner'),target:"blank",role:"link"},type:"warning"})}),"gif"===z.current&&(0,c.jsx)(i.xu,{"data-test-id":"ad-media-type-warning-message",marginTop:3,width:"100%",children:(0,c.jsx)(i.he,{iconAccessibilityLabel:n._('Warning', 'pinbuilder.common.warningBanner.icon', 'The accessibility label for warning label\'s icon'),message:n._('Your file type isn\'t eligible for promotion in any campaign.', '[m10n] pinbuilder.mediaView.adWarningGeneric', 'Warning message displayed to user when a pin may not be eligible to be promoted'),primaryAction:{accessibilityLabel:n._('Learn more', 'pinbuilder.common.warningBanner.learnMore', 'Learn more link for warning banner'),href:eN.C5X,label:n._('Learn more', 'pinbuilder.common.warningBanner.learnMore', 'Learn more link for warning banner'),target:"blank",role:"link"},type:"warning"})}),D&&L&&!y&&!w&&(0,c.jsx)(i.xu,{marginTop:2,children:(0,c.jsx)(rF,{pinDraftId:u})}),F&&(0,c.jsx)(i.xu,{marginTop:2,children:(0,c.jsx)(x,{pinDraftId:u})}),"tag"!==f&&"collectionsTag"!==f&&!!b&&"localVideo"===b.type&&(0,c.jsx)(i.xu,{marginTop:2,children:(0,c.jsx)(og,{pinItemId:d,video:b})})]})}},788445:function(e,t,n){"use strict";n.d(t,{C:function(){return H}});var r=n(586659),o=n(581722),i=n(20256),a=n(382718);function l(e){var t=e.children,n=e.text;return(0,a.jsxs)(i.xu,{children:[(0,a.jsx)(i.xu,{"aria-live":"assertive",display:"visuallyHidden",id:"operation",children:n}),(0,a.jsx)(i.xu,{"aria-describedby":"operation",children:t})]})}var s=n(19585),c=n(765533),u=n(473728);function d(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,l=[],s=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);s=!0);}catch(e){c=!0,o=e}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return f(e,t);var n=({}).toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?f(e,t):void 0}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function p(e){var t=e.children,n=e.index,o=e.onCancel,f=e.onMove,p=e.onSelected,h=e.onConfirm,y=e.totalItems,b=(0,s.ZP)(),m=d((0,r.useState)(b._('Press the spacebar to begin moving', 'Assistive text description for how to begin assistive operation', 'Assistive text description for how to begin assistive operation')),2),g=m[0],v=m[1],_=d((0,r.useState)(n),2),x=_[0],j=_[1],P=d((0,r.useState)("INIT"),2),O=P[0],w=P[1];"INIT"===O&&n!==x&&j(n);var S=function(){v((0,u.Z)(b._('Position in list updated from {{index}} to {{currentIndex}}', 'Assistive text describing current position in list', 'Assistive text describing current position in list'),{currentIndex:x+1,index:n+1})),w("CONFIRMED"),x!==n?h():o()},A=function(e){var t=x+e;("SELECTED"===O||"MOVING"===O)&&t>=0&&t<y&&(f(t),v((0,u.Z)(b._('Current position in list is {{currentIndex}} of {{totalItems}}', 'Assistive text describing current position in list', 'Assistive text describing current position in list'),{totalItems:y,currentIndex:t+1})),j(t),w("MOVING"))},I=function(){v((0,u.Z)(b._('List item {{index}} selected.', 'Assitive text describing selected item.', 'Assitive text describing selected item.'),{index:n+1})),w("SELECTED"),p(n),A(0)};return(0,a.jsx)(i.xu,{onBlur:function(){v(b._('Press the spacebar to begin moving', 'Assistive text description for how to begin assistive operation', 'Assistive text description for how to begin assistive operation')),j(n),w("INIT"),o()},onKeyUp:function(e){switch(e.keyCode){case c.Z.SPACE:case c.Z.ENTER:"SELECTED"===O||"MOVING"===O?S():I();break;case c.Z.ESCAPE:break;case c.Z.LEFT:A(-1);break;case c.Z.RIGHT:A(1)}},role:"listitem",rounding:2,tabIndex:0,children:(0,a.jsx)(l,{text:g,children:t})})}var h=n(283383),y=n(623873),b=n(526435),m=n(636208);function g(e){var t=e.show;return(0,a.jsx)(i.xu,{color:t?"primary":"transparent",display:"flex",flex:"grow",width:2})}function v(e){var t=e.pinItem,n=t.description,r=t.media,o=t.title,l=r||{},s=l.height,c=l.src,u=l.width;return(0,a.jsx)(i.zd,{height:"100%",rounding:2,width:"100%",children:(0,a.jsx)(i.xu,{direction:"column",display:"flex",rounding:2,children:(0,a.jsx)(i.Ee,{alt:o||n,color:"#FEFEFE",naturalHeight:s,naturalWidth:u,src:c,children:e.showOverlay?(0,a.jsx)(i.xu,{"data-test-id":"reorder-index-overlay",display:"flex",justifyContent:"end",position:"absolute",right:!0,top:!0,children:(0,a.jsx)(i.xu,{alignItems:"center",color:"transparentDarkGray",display:"flex",justifyContent:"center",margin:2,paddingX:2,paddingY:1,rounding:"circle",children:(0,a.jsx)(i.xv,{align:"center",color:"inverse",size:"200",weight:"bold",children:e.index})})}):null})})})}function _(e){return(_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function x(e,t){return(x=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function j(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function P(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(P=function(){return!!e})()}function O(e){return(O=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function w(e,t,n){return(t=S(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function S(e){var t=function(e,t){if("object"!=_(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=_(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==_(t)?t:t+""}var A=function(e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");o.prototype=Object.create(e&&e.prototype,{constructor:{value:o,writable:!0,configurable:!0}}),Object.defineProperty(o,"prototype",{writable:!1}),e&&x(o,e);var t,n,r=(t=P(),function(){var e,n=O(o);return e=t?Reflect.construct(n,arguments,O(this).constructor):n.apply(this,arguments),function(e,t){if(t&&("object"==_(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return j(e)}(this,e)});function o(){var e;if(!(this instanceof o))throw TypeError("Cannot call a class as a function");for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];return w(j(e=r.call.apply(r,[this].concat(n))),"state",{pinItemIds:e.props.pinItemIds,sourceIndex:-1,targetIndex:-1}),w(j(e),"handleDragCancel",function(){e.setState({sourceIndex:-1,targetIndex:-1})}),w(j(e),"handleDragBegin",function(t){e.setState({sourceIndex:t})}),w(j(e),"handleDragHover",function(t){t!==e.state.targetIndex&&e.setState({targetIndex:t})}),w(j(e),"handleDragEnd",function(){var t=e.props.updateIds,n=e.state,r=n.pinItemIds,o=n.sourceIndex,i=n.targetIndex,a=(0,m.Z)(r,o,i);t(a),e.setState({pinItemIds:a,sourceIndex:-1,targetIndex:-1})}),e}return n=[{key:"render",value:function(){var e=this,t=this.props.pinItems,n=this.state,r=n.sourceIndex,o=n.targetIndex;return(0,a.jsx)(i.xu,{alignItems:"center",direction:"row",display:"flex",justifyContent:"center",minHeight:b.DB,paddingY:6,width:"100%",children:t.map(function(n,l){return(0,a.jsxs)(i.xu,{display:"flex",width:154,children:[(0,a.jsx)(g,{show:r>o&&l===o}),(0,a.jsx)(i.xu,{padding:1}),(0,a.jsx)(p,{index:l,onCancel:e.handleDragCancel,onConfirm:e.handleDragEnd,onMove:e.handleDragHover,onSelected:e.handleDragBegin,totalItems:t.length,children:(0,a.jsx)(i.zd,{rounding:2,children:(0,a.jsx)(h.Z,{index:l,onDragBegin:e.handleDragBegin,onDragEnd:e.handleDragEnd,onDragHover:e.handleDragHover,type:h.y.CarouselItem,children:(0,a.jsx)(i.xu,{display:"flex",margin:0,rounding:2,width:b.mr,children:(0,a.jsx)(v,{index:"".concat(l+1),pinItem:n,showOverlay:r!==l})})})})}),(0,a.jsx)(i.xu,{padding:1}),(0,a.jsx)(g,{show:r<o&&l===o})]},"".concat(String(n.id),"-reorder-view"))})})}}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,S(r.key),r)}}(o.prototype,n),Object.defineProperty(o,"prototype",{writable:!1}),o}(r.Component),I=(0,y.Z)(h.y.CarouselItem)(A),E=n(980787),C=n(489529),D=n(669019);function T(e){return(T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function k(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function z(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?k(Object(n),!0).forEach(function(t){Z(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):k(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function R(e,t){return(R=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function B(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function L(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(L=function(){return!!e})()}function F(e){return(F=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Z(e,t,n){return(t=M(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function M(e){var t=function(e,t){if("object"!=T(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=T(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==T(t)?t:t+""}var N=function(e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");o.prototype=Object.create(e&&e.prototype,{constructor:{value:o,writable:!0,configurable:!0}}),Object.defineProperty(o,"prototype",{writable:!1}),e&&R(o,e);var t,n,r=(t=L(),function(){var e,n=F(o);return e=t?Reflect.construct(n,arguments,F(this).constructor):n.apply(this,arguments),function(e,t){if(t&&("object"==T(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return B(e)}(this,e)});function o(){var e;if(!(this instanceof o))throw TypeError("Cannot call a class as a function");for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];return Z(B(e=r.call.apply(r,[this].concat(n))),"state",{pinItemIds:e.props.pinItemIds}),Z(B(e),"commitChanges",function(){var t=e.props,n=t.saveChanges,r=t.logContextEvent,o=e.state.pinItemIds;r({event_type:101,component:13308,element:11127}),n(o)}),Z(B(e),"handleOnCancel",function(){var t=e.props,n=t.cancelChanges;(0,t.logContextEvent)({event_type:101,component:13308,element:11128}),n()}),Z(B(e),"updateIds",function(t){e.setState({pinItemIds:t})}),e}return n=[{key:"render",value:function(){var e=this.props,t=e.height,n=e.mapPinItems,r=e.pinDraftId,o=this.state.pinItemIds,l=t>b.sD?t:b.sD;return(0,a.jsxs)(i.xu,{direction:"column",display:"flex",marginBottom:10,minHeight:l,children:[(0,a.jsxs)(i.kC,{alignItems:"start",justifyContent:"end",children:[(0,a.jsx)(i.xu,{"data-test-id":"cancel-reorder-button",paddingX:3,children:(0,a.jsx)(i.zx,{onClick:this.handleOnCancel,text:this.props.i18n._('Cancel', 'Button Text for cancelling an changes', 'Button Text for cancelling an changes')})}),(0,a.jsx)(i.xu,{"data-test-id":"save-reorder-button",children:(0,a.jsx)(i.zx,{color:"red",onClick:this.commitChanges,text:this.props.i18n._('Done', 'Button text for accepting changes', 'Button text for accepting changes')})})]}),(0,a.jsxs)(i.xu,{alignItems:"center",direction:"column",display:"flex",justifyContent:"center",marginTop:10,children:[(0,a.jsxs)(i.kC,{alignItems:"center",direction:"column",justifyContent:"center",children:[(0,a.jsx)(i.X6,{size:"600",children:this.props.i18n._('Organize your images', 'Heading for reordering images in carousel', 'Heading for reordering images in carousel')}),(0,a.jsx)(i.xu,{paddingY:4,children:(0,a.jsx)(i.xv,{color:"subtle",children:this.props.i18n._('Drag and drop the images to change the order in which they appear in your carousel', 'Text describing how to reorder images in carousel', 'Text describing how to reorder images in carousel')})})]}),(0,a.jsx)(I,{pinDraftId:r,pinItemIds:o,pinItems:n(o),updateIds:this.updateIds})]})]})}}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,M(r.key),r)}}(o.prototype,n),Object.defineProperty(o,"prototype",{writable:!1}),o}(r.Component);function H(e){var t=(0,E.u)().logContextEvent,n=(0,s.ZP)(),r=(0,o.v9)(function(e){return e.pinbuilder}).pinItems,i=(0,o.v9)(function(t){return t.pinbuilder.pinDrafts[e.pinDraftId]}).pinItemIds,l=function(e){return e.filter(function(e){return!!r[e].media}).map(function(e){return z(z({},r[e]),{},{id:e})})},c=l(i)[0].media,u=c?(0,C.Z)(c,b.mr):b.sD,d=(0,o.I0)();return(0,a.jsx)(N,z(z({},e),{},{cancelChanges:function(){return d((0,D.c8)(e.pinDraftId,"upload"))},height:u,i18n:n,logContextEvent:t,mapPinItems:l,pinItemIds:i,saveChanges:function(t){d((0,D.XB)(e.pinDraftId,t)),d((0,D.c8)(e.pinDraftId,"upload"))}}))}},898490:function(e,t,n){"use strict";n.d(t,{Z:function(){return ep}});var r=n(20256),o=n(581722),i=n(980787),a=n(19585),l=n(302148),s=n(526435),c=n(884419),u=n(938287),d=n(586659),f=n(15667),p=n(669019),h=n(382718);function y(e){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach(function(t){var r,o;r=t,o=n[t],(r=function(e){var t=function(e,t){if("object"!=y(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=y(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==y(t)?t:t+""}(r))in e?Object.defineProperty(e,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[r]=o}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function v(e){var t,n=e.removeWebsiteMedia,o=e.media,i=o.height,l=o.width,s=o.src,c=(0,a.ZP)(),u=(0,f.B)().isRTL,p=function(e){if(Array.isArray(e))return e}(t=(0,d.useState)(!1))||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,l=[],s=!0,c=!1;try{for(i=(n=n.call(e)).next;!(s=(r=i.call(n)).done)&&(l.push(r.value),2!==l.length);s=!0);}catch(e){c=!0,o=e}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return l}}(t,2)||function(e,t){if(e){if("string"==typeof e)return g(e,2);var n=({}).toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?g(e,2):void 0}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),y=p[0],b=p[1];return(0,h.jsx)(r.iP,{onMouseEnter:function(){b(!0)},onMouseLeave:function(){b(!1)},children:(0,h.jsxs)(r.xu,{marginStart:2,position:"relative",children:[(0,h.jsx)(r.zd,{height:i>=l?64:"100%",rounding:2,wash:!0,width:64,children:(0,h.jsx)(r.Ee,{alt:"Image from ".concat(s),naturalHeight:i,naturalWidth:l,src:s})}),y&&(0,h.jsx)(r.xu,{color:"default",dangerouslySetInlineStyle:{__style:{border:"2px #FFFFFF solid"}},left:u,marginEnd:-2,marginTop:-2,position:"absolute",right:!u,rounding:"circle",top:!0,children:(0,h.jsx)(r.hU,{accessibilityLabel:c._('Unselect image', 'pinBuilder.pinDraftFooterScrapeView.pinDraftFooterScrapeViewItem.unselect.text', 'Unselect image'),bgColor:"lightGray",icon:"cancel",iconColor:"darkGray",onClick:n,size:"xs"})})]})})}function _(e){var t=(0,o.I0)();return(0,h.jsx)(v,m(m({},e),{},{removeWebsiteMedia:function(){return t((0,p.YY)(e.pinDraftId,e.media.src))}}))}function x(e){return(x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function j(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function P(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?j(Object(n),!0).forEach(function(t){var r,o;r=t,o=n[t],(r=function(e){var t=function(e,t){if("object"!=x(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=x(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==x(t)?t:t+""}(r))in e?Object.defineProperty(e,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[r]=o}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):j(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function O(e){var t=e.selected,n=e.pinDraftId,o=e.onAddToPin,d=e.width,f=e.marginStart,p=(0,i.u)().logContextEvent,y=(0,a.ZP)();return t.length>0?(0,h.jsxs)(r.xu,{alignItems:"center",dangerouslySetInlineStyle:{__style:{boxShadow:"0px -2px 10px -8px #000000"}},"data-test-id":"pin-draft-footer-scrape-view",display:"flex",flex:"none",height:96,justifyContent:"between",marginStart:null!=f?f:-10,paddingX:4,width:d||s.of,children:[(0,h.jsx)(r.xu,{overflow:"scrollX",padding:2,children:(0,h.jsx)(r.kC,{alignItems:"center",justifyContent:"start",children:t.map(function(e){return(0,h.jsx)(_,{media:e,pinDraftId:n},e.src)})})}),(0,h.jsx)(r.xu,{"data-test-id":"add-pins-from-search-container",marginStart:2,children:(0,h.jsx)(r.zx,{color:"red",onClick:function(){p({event_type:101,component:13308,element:10970}),o((0,u.Z)({url:(0,c.Z)()}).tab===s.ro?"IDEA_PIN":"PIN")},text:(0,l.nk)(y.ngettext('Add {{ numPins }} Pin', 'Add {{ numPins }} Pins', t.length, 'pinBuilder.pinDraftBodyScrapeView.pinDraftFooterScrapeView.addPinButton.text', 'Add selected image from web to Pin create'),{numPins:t.length}).join("")})})]}):null}function w(e){var t=(0,o.v9)(function(t){return t.pinbuilder.pinDrafts[e.pinDraftId].websiteMedia}),n=(0,o.I0)();return(0,h.jsx)(O,P(P({},e),{},{onAddToPin:function(t){n((0,p.q0)(e.pinDraftId,"upload",t))},selected:t}))}var S=n(93966),A=n(656013);function I(e){return(I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function E(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function C(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?E(Object(n),!0).forEach(function(t){R(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function D(e,t){return(D=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function T(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function k(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(k=function(){return!!e})()}function z(e){return(z=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function R(e,t,n){return(t=B(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function B(e){var t=function(e,t){if("object"!=I(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=I(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==I(t)?t:t+""}var L=function(e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");i.prototype=Object.create(e&&e.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),Object.defineProperty(i,"prototype",{writable:!1}),e&&D(i,e);var t,n,o=(t=k(),function(){var e,n=z(i);return e=t?Reflect.construct(n,arguments,z(this).constructor):n.apply(this,arguments),function(e,t){if(t&&("object"==I(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return T(e)}(this,e)});function i(){var e;if(!(this instanceof i))throw TypeError("Cannot call a class as a function");for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];return R(T(e=o.call.apply(o,[this].concat(n))),"handleClick",function(){var t=e.props,n=t.addWebsiteMedia,r=t.clearWebsiteMedia,o=t.removeWebsiteMedia;t.selected?o():(r(),n())}),e}return n=[{key:"render",value:function(){var e=this.props,t=e.selected,n=e.media,o=n.height,i=n.width,a=n.src;return(0,h.jsx)(A.Z,{onClick:this.handleClick,selected:t,children:(0,h.jsx)(r.zd,{rounding:2,wash:!0,width:S.yF,children:(0,h.jsx)(r.Ee,{alt:"Image from ".concat(a),naturalHeight:o,naturalWidth:i,src:a})})})}}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,B(r.key),r)}}(i.prototype,n),Object.defineProperty(i,"prototype",{writable:!1}),i}(d.Component);function F(e){var t=(0,o.v9)(function(t){return t.pinbuilder.pinDrafts[e.pinDraftId]}).websiteMedia.map(function(e){return e.src}).includes(e.media.src),n=(0,o.I0)();return(0,h.jsx)(L,C(C({},e),{},{addWebsiteMedia:function(){return n((0,p.dj)(e.pinDraftId,e.media))},clearWebsiteMedia:function(){return n((0,p.hb)(e.pinDraftId))},removeWebsiteMedia:function(){return n((0,p.YY)(e.pinDraftId,e.media.src))},selected:t}))}var Z=n(675973),M=n(473728);function N(e){return(N="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function H(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function U(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?H(Object(n),!0).forEach(function(t){var r,o;r=t,o=n[t],(r=function(e){var t=function(e,t){if("object"!=N(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=N(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==N(t)?t:t+""}(r))in e?Object.defineProperty(e,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[r]=o}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):H(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function W(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,l=[],s=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);s=!0);}catch(e){c=!0,o=e}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return V(e,t);var n=({}).toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?V(e,t):void 0}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function V(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function G(e){var t=e.media,n=t.src,o=t.height,l=t.width,s=e.pinDraftId,c=e.selected,u=e.disabled,p=e.addWebsiteMedia,y=e.removeWebsiteMedia,b=(0,i.u)().logContextEvent,m=(0,Z.Z)().checkExperiment,g=(0,a.ZP)(),v=(0,f.B)().isRTL,_=W((0,d.useState)(!1),2),x=_[0],j=_[1],P=m("web_set_crossorigin_anonymous").anyEnabled,O=W((0,d.useState)(P?"anonymous":void 0),2),w=O[0],S=O[1];return(0,h.jsx)(r.iP,{onMouseEnter:function(){j(!0)},onMouseLeave:function(){j(!1)},onTap:function(){c?(y(),b({event_type:8722,component:13308,element:12229,aux_data:{pin_draft_id:s,src_url:n}})):u||(p(),b({event_type:8721,component:13308,element:12229,aux_data:{pin_draft_id:s,src_url:n}}))},children:(0,h.jsx)(r.xu,{color:x?"secondary":"transparent",dangerouslySetInlineStyle:{__style:{padding:"2px"}},rounding:5,children:(0,h.jsx)(r.xu,{dangerouslySetInlineStyle:{__style:{padding:"2px",cursor:"pointer",boxShadow:c?"0 0 0 2px #000000":"none",borderRadius:"18px",outline:"none"}},"data-test-id":"image-from-search-container",children:(0,h.jsxs)(r.zd,{rounding:4,wash:!0,children:[(0,h.jsx)(r.Ee,{alt:(0,M.Z)(c?g._('Deselect image from {{imageSource}}', 'PinDraftMultiSelectGridItem.ImageLabel.Deselect', 'Deselect image'):g._('Select image from {{imageSource}}', 'PinDraftMultiSelectGridItem.ImageLabel.Select', 'Select image'),{imageSource:n}),crossOrigin:w,naturalHeight:o,naturalWidth:l,onError:function(){return S(void 0)},src:n}),(0,h.jsx)(r.xu,{bottom:!0,color:c?"dark":"default",height:24,left:!!v,marginBottom:3,marginEnd:3,padding:1,position:"absolute",right:!v,rounding:2,width:24,children:c&&(0,h.jsx)(r.JO,{accessibilityLabel:g._('Selected', 'pinBuilder.pinDraftInputScrapeGrid.pinDraftInputScrapeGriditem.selected.text', 'Selected image'),color:"inverse",icon:"check"})})]})})})})}function X(e){var t=(0,o.v9)(function(t){return t.pinbuilder.pinDrafts[e.pinDraftId]}).websiteMedia,n=t.map(function(e){return e.src}).includes(e.media.src),r=t.length>=10,i=(0,o.I0)();return(0,h.jsx)(G,U(U({},e),{},{addWebsiteMedia:function(){return i((0,p.dj)(e.pinDraftId,e.media))},disabled:r,removeWebsiteMedia:function(){return i((0,p.YY)(e.pinDraftId,e.media.src))},selected:n}))}var Y=n(406262);function q(e){return(q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function K(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function J(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?K(Object(n),!0).forEach(function(t){en(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):K(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function $(e,t){return($=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Q(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ee(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(ee=function(){return!!e})()}function et(e){return(et=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function en(e,t,n){return(t=er(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function er(e){var t=function(e,t){if("object"!=q(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=q(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==q(t)?t:t+""}var eo=function(e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");i.prototype=Object.create(e&&e.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),Object.defineProperty(i,"prototype",{writable:!1}),e&&$(i,e);var t,n,o=(t=ee(),function(){var e,n=et(i);return e=t?Reflect.construct(n,arguments,et(this).constructor):n.apply(this,arguments),function(e,t){if(t&&("object"==q(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return Q(e)}(this,e)});function i(){var e;if(!(this instanceof i))throw TypeError("Cannot call a class as a function");for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];return en(Q(e=o.call.apply(o,[this].concat(n))),"saveScrollContainer",function(t){e.scrollContainer=t}),en(Q(e),"renderItem",function(t){var n=t.data,r=e.props.pinDraftId;return Y.Z.enabled("multi_pin")||Y.Z.enabled("multi_pin_pinner")?(0,h.jsx)(X,{media:n,pinDraftId:r}):(0,h.jsx)(F,{media:n,pinDraftId:r})}),e}return n=[{key:"getColumnWidth",value:function(){return Y.Z.enabled("multi_pin")||Y.Z.enabled("multi_pin_pinner")?s.eZ:S.yF}},{key:"getGutterWidth",value:function(){return Y.Z.enabled("multi_pin")||Y.Z.enabled("multi_pin_pinner")?S.lX:S.P2}},{key:"render",value:function(){var e=this,t=this.props,n=t.errorMessage,o=t.media,i=t.showSpinner,a=this.scrollContainer;return(0,h.jsxs)(r.xu,{ref:this.saveScrollContainer,column:12,height:"100%",overflow:"auto",padding:Y.Z.enabled("multi_pin")||Y.Z.enabled("multi_pin_pinner")?0:2,width:s.km,children:[(0,h.jsx)(r.xH,{accessibilityLabel:this.props.i18n._('Loading images from URL...', 'loading message', 'loading message'),show:i}),a&&o.length>0?(0,h.jsx)(r.Rk,{columnWidth:this.getColumnWidth(),gutterWidth:this.getGutterWidth(),items:o,layout:"basic",minCols:S.yc,renderItem:function(t){var n=t.data;return e.renderItem({data:n})},scrollContainer:function(){return a}}):n&&(0,h.jsx)(r.xu,{"data-test-id":"pinbuilder-pin-draft-input-scrape-grid-error-message",children:(0,h.jsx)(r.xv,{align:"center",color:"subtle",size:"400",children:n})})]})}}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,er(r.key),r)}}(i.prototype,n),Object.defineProperty(i,"prototype",{writable:!1}),i}(d.Component);function ei(e){var t=(0,a.ZP)();return(0,h.jsx)(eo,J(J({},e),{},{i18n:t}))}var ea=n(162931);function el(e){return(el="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function es(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function ec(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?es(Object(n),!0).forEach(function(t){var r,o;r=t,o=n[t],(r=function(e){var t=function(e,t){if("object"!=el(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=el(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==el(t)?t:t+""}(r))in e?Object.defineProperty(e,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[r]=o}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):es(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function eu(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function ed(e){var t=e.pinDraftId,n=e.websiteLink;return(0,h.jsx)(ea.ZP,{source:"pin_create",url:n,children:function(e){var r=e.images,o=e.error,i=e.loading,a=function(e){if(Array.isArray(e))return eu(e)}(r)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(r)||function(e,t){if(e){if("string"==typeof e)return eu(e,void 0);var n=({}).toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?eu(e,void 0):void 0}}(r)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}();return a.forEach(function(e){return Object.assign(e,{src:e.url,type:"webImage",sourceURL:n})}),(0,h.jsx)(ei,{errorMessage:o,media:a,pinDraftId:t,showSpinner:i})}},n)}function ef(e){var t=(0,o.v9)(function(t){return t.pinbuilder.pinDrafts[e.pinDraftId].websiteLink}),n=(0,o.v9)(function(t){return t.pinbuilder.pinDrafts[e.pinDraftId].websiteDefaultImageUrl});return(0,h.jsx)(ed,ec(ec({},e),{},{websiteDefaultImageUrl:n,websiteLink:t}))}function ep(e){var t=e.pinDraftId,n=e.footerWidth,o=e.footerMarginStart,i=Y.Z.enabled("multi_pin")||Y.Z.enabled("multi_pin_pinner")?s.gU:s.sD+s.uR;return(0,h.jsxs)(r.kC,{alignItems:"stretch",direction:"column",flex:"grow",height:i,justifyContent:"start",children:[(0,h.jsx)(ef,{pinDraftId:t}),(Y.Z.enabled("multi_pin")||Y.Z.enabled("multi_pin_pinner"))&&(0,h.jsx)(w,{marginStart:o,pinDraftId:t,width:n})]})}},199495:function(e,t,n){"use strict";n.d(t,{Z:function(){return eS}});var r=n(581722),o=n(20256),i=n(19862),a=n(586659),l=n(672410),s=n(980787),c=n(19585),u=n(302148),d=n(526435),f=n(669019),p=n(441501),h=n(452859),y=n(382718);function b(e){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach(function(t){P(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function v(e,t){return(v=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function _(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function x(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(x=function(){return!!e})()}function j(e){return(j=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function P(e,t,n){return(t=O(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function O(e){var t=function(e,t){if("object"!=b(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=b(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==b(t)?t:t+""}var w=function(e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");i.prototype=Object.create(e&&e.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),Object.defineProperty(i,"prototype",{writable:!1}),e&&v(i,e);var t,n,r=(t=x(),function(){var e,n=j(i);return e=t?Reflect.construct(n,arguments,j(this).constructor):n.apply(this,arguments),function(e,t){if(t&&("object"==b(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return _(e)}(this,e)});function i(){var e;if(!(this instanceof i))throw TypeError("Cannot call a class as a function");for(var t=arguments.length,n=Array(t),o=0;o<t;o++)n[o]=arguments[o];return P(_(e=r.call.apply(r,[this].concat(n))),"handleTouch",function(){var t=e.props,n=t.mode,r=t.saveTaggedObject;(0,t.logContextEvent)({event_type:101,component:13308,element:10911,aux_data:{method:n}}),r()}),e}return n=[{key:"render",value:function(){var e=this.props.image,t=e.height,n=e.width,r=e.url;return(0,y.jsxs)(a.Fragment,{children:[(0,y.jsx)(o.iP,{onTap:this.handleTouch,rounding:2,children:(0,y.jsx)(o.zd,{rounding:2,wash:!0,width:d.yC,children:r&&(0,y.jsx)(o.Ee,{alt:"Image from ".concat(null!=r?r:""),naturalHeight:null!=t?t:1,naturalWidth:null!=n?n:1,src:r})})}),(0,y.jsx)(o.xu,{display:"flex",justifyContent:"center",marginTop:1,children:(0,y.jsx)(o.xv,{align:"center",children:(0,u.nk)(this.props.i18n._('{{ height }} \xD7 {{ width }}', 'Dimensions of an image separated by multiplication sign', 'Dimensions of an image separated by multiplication sign'),{height:t,width:n})})})]})}}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,O(r.key),r)}}(i.prototype,n),Object.defineProperty(i,"prototype",{writable:!1}),i}(a.PureComponent);function S(e){var t=(0,s.u)().logContextEvent,n=(0,c.ZP)(),o=(0,r.v9)(function(t){return t.pinbuilder.pinDrafts[e.pinDraftId].mode}),i=(0,r.I0)();return(0,y.jsx)(w,g(g({},e),{},{i18n:n,logContextEvent:t,mode:o,saveTaggedObject:function(){var t=e.pinId||(0,l.Z)();i((0,h.Dn)(e.pinTagId,t,{media:e.image})),i((0,p.C_)(e.pinItemId,null)),i((0,f.c8)(e.pinDraftId,"tag"))}}))}function A(e){return(A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function I(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function E(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?I(Object(n),!0).forEach(function(t){z(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):I(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function C(e,t){return(C=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function D(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function T(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(T=function(){return!!e})()}function k(e){return(k=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function z(e,t,n){return(t=R(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function R(e){var t=function(e,t){if("object"!=A(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=A(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==A(t)?t:t+""}var B=function(e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");i.prototype=Object.create(e&&e.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),Object.defineProperty(i,"prototype",{writable:!1}),e&&C(i,e);var t,n,r=(t=T(),function(){var e,n=k(i);return e=t?Reflect.construct(n,arguments,k(this).constructor):n.apply(this,arguments),function(e,t){if(t&&("object"==A(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return D(e)}(this,e)});function i(){var e;if(!(this instanceof i))throw TypeError("Cannot call a class as a function");for(var t=arguments.length,n=Array(t),o=0;o<t;o++)n[o]=arguments[o];return z(D(e=r.call.apply(r,[this].concat(n))),"saveScrollContainer",function(t){e.scrollContainer=t}),e}return n=[{key:"render",value:function(){var e=this,t=this.props,n=t.errorMessage,r=t.images,i=t.showSpinner,a=this.scrollContainer;return(0,y.jsx)(o.xu,{ref:this.saveScrollContainer,column:12,height:"100%",children:(0,y.jsxs)(o.xu,{padding:2,children:[(0,y.jsx)(o.xH,{accessibilityLabel:this.props.i18n._('Loading images from URL...', 'loading message', 'loading message'),show:i}),n&&(0,y.jsx)(o.xv,{color:"error",size:"200",children:n}),a&&r.length>0&&(0,y.jsx)(o.xu,{"data-test-id":"pin-tag-grid",children:(0,y.jsx)(o.Rk,{columnWidth:d.yC,gutterWidth:24,items:r,minCols:2,renderItem:function(t){var n=t.data;return(0,y.jsx)(S,{image:n,pinDraftId:e.props.pinDraftId,pinId:e.props.pinId,pinItemId:e.props.pinItemId,pinTagId:e.props.pinTagId})},scrollContainer:function(){return a}})})]})})}}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,R(r.key),r)}}(i.prototype,n),Object.defineProperty(i,"prototype",{writable:!1}),i}(a.Component);function L(e){var t=(0,c.ZP)();return(0,y.jsx)(B,E(E({},e),{},{i18n:t}))}var F=n(162931),Z=n(233624),M=n(481849);function N(e){return(N="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function H(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function U(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?H(Object(n),!0).forEach(function(t){Y(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):H(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function W(e,t){return(W=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function V(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function G(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(G=function(){return!!e})()}function X(e){return(X=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Y(e,t,n){return(t=q(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function q(e){var t=function(e,t){if("object"!=N(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=N(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==N(t)?t:t+""}var K=function(e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");i.prototype=Object.create(e&&e.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),Object.defineProperty(i,"prototype",{writable:!1}),e&&W(i,e);var t,n,r=(t=G(),function(){var e,n=X(i);return e=t?Reflect.construct(n,arguments,X(this).constructor):n.apply(this,arguments),function(e,t){if(t&&("object"==N(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return V(e)}(this,e)});function i(){var e;if(!(this instanceof i))throw TypeError("Cannot call a class as a function");for(var t=arguments.length,n=Array(t),o=0;o<t;o++)n[o]=arguments[o];return Y(V(e=r.call.apply(r,[this].concat(n))),"handleError",function(){var t=e.props,n=t.mode;(0,t.logContextEvent)({event_type:7580,component:13308,aux_data:{method:n}})}),e}return n=[{key:"render",value:function(){var e=this.props,t=e.closeTagGrid,n=e.pinDraftId,r=e.pinItemId,i=e.pinTagId,a=e.link,l=(0,Z.Z)(a)?/\/pin\/([\w-]+)\/?$/.exec(a):null;return(0,y.jsxs)(o.xu,{column:12,direction:"column",display:"flex",height:"100%",children:[(0,y.jsxs)(o.xu,{alignItems:"center",display:"flex",flex:"none",marginBottom:6,children:[(0,y.jsxs)(o.xu,{flex:"grow",children:[(0,y.jsx)(o.xu,{marginBottom:1,children:(0,y.jsx)(o.X6,{size:"400",children:this.props.i18n._('Pick an image for this product', 'Instructions to select an image to add as a tagged product to a Pin tag', 'Instructions to select an image to add as a tagged product to a Pin tag')})}),(0,y.jsx)(o.xv,{lineClamp:1,size:"200",children:(0,u.nk)(this.props.i18n._('Images from {{ link }}', 'Text displaying the website link where images were collected', 'Text displaying the website link where images were collected'),{link:a})})]}),(0,y.jsx)(o.xu,{flex:"none",children:(0,y.jsx)(o.hU,{accessibilityLabel:this.props.i18n._('Cancel', 'Button to cancel selecting products for a Pin tag', 'Button to cancel selecting products for a Pin tag'),icon:"cancel",iconColor:"gray",onClick:t,size:"md"})})]}),(0,y.jsx)(o.kC,{alignItems:"stretch",flex:"grow",justifyContent:"center",overflow:"auto",children:l?(0,y.jsx)(M.Z,{fieldSetKey:"images_only_item",pinId:l[1],children:function(e){var t=e.pin,o=e.error,a=e.loading;return(0,y.jsx)(L,{errorMessage:o,images:t?[t.images["474x"]]:[],pinDraftId:n,pinId:l[1],pinItemId:r,pinTagId:i,showSpinner:a})}}):(0,y.jsx)(F.ZP,{onError:this.handleError,source:"product_tags",url:a,children:function(e){var t=e.images,o=e.error,a=e.loading;return(0,y.jsx)(L,{errorMessage:o,images:t,pinDraftId:n,pinItemId:r,pinTagId:i,showSpinner:a})}})})]})}}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,q(r.key),r)}}(i.prototype,n),Object.defineProperty(i,"prototype",{writable:!1}),i}(a.PureComponent);function J(e){var t=(0,s.u)().logContextEvent,n=(0,c.ZP)(),o=(0,r.v9)(function(t){return t.pinbuilder.pinItems[e.pinItemId]}).selectedPinTagId,i=(0,r.v9)(function(e){return o?e.pinbuilder.pinTags[o].link:""}),a=(0,r.v9)(function(t){return t.pinbuilder.pinDrafts[e.pinDraftId].mode}),l=(0,r.I0)();return(0,y.jsx)(K,U(U({},e),{},{closeTagGrid:function(){return l((0,f.c8)(e.pinDraftId,"tag"))},i18n:n,link:i,logContextEvent:t,mode:a,pinTagId:o||""}))}var $=n(180116),Q=n(406262);function ee(e){return(ee="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function et(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function en(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?et(Object(n),!0).forEach(function(t){var r,o;r=t,o=n[t],(r=function(e){var t=function(e,t){if("object"!=ee(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=ee(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ee(t)?t:t+""}(r))in e?Object.defineProperty(e,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[r]=o}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):et(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function er(e){var t=e.disabled,n=e.selectPinTag,r=(0,c.ZP)(),i=Q.Z.enabled("shop_the_pin"),a=(0,y.jsx)(o.xu,{alignItems:"center",color:"secondary",display:"flex",height:i?d.MN:d.Bj,justifyContent:"center",rounding:2,width:i?d.MN:d.Bj,children:(0,y.jsx)(o.JO,{accessibilityLabel:r._('Add product', 'Accessibility label for adding a new product to a tag', 'Accessibility label for adding a new product to a tag'),color:"subtle",icon:"add",size:24})});return t?a:(0,y.jsx)(o.iP,{onTap:n,rounding:2,children:a})}function eo(e){var t=(0,r.I0)();return(0,y.jsx)(er,en(en({},e),{},{selectPinTag:function(){return t((0,p.C_)(e.pinItemId,e.pinTagId))}}))}var ei=n(685039);function ea(e){return(ea="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function el(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function es(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?el(Object(n),!0).forEach(function(t){var r,o;r=t,o=n[t],(r=function(e){var t=function(e,t){if("object"!=ea(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=ea(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ea(t)?t:t+""}(r))in e?Object.defineProperty(e,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[r]=o}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):el(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var ec={__style:{border:"solid 2px #efefef"}},eu={__style:{opacity:.4}};function ed(e){var t=(0,c.ZP)(),n=e.isSelected,r=e.pinItemId,i=e.pinTagId,a=e.pinTagKey,l=e.taggedObjectIds,s=l.length,d=!1===n;return(0,y.jsxs)(o.xu,{column:12,dangerouslySetInlineStyle:d?eu:void 0,children:[(0,y.jsxs)(o.xu,{alignItems:"center",display:"flex",marginBottom:2,children:[(0,y.jsx)(o.xu,{alignItems:"center",dangerouslySetInlineStyle:ec,display:"flex",height:24,justifyContent:"center",rounding:"circle",width:24,children:(0,y.jsx)(o.xv,{size:"100",weight:"bold",children:a})}),(0,y.jsx)(o.xu,{paddingX:2,children:(0,y.jsx)(o.xv,{size:"200",weight:"bold",children:(0,u.nk)(t.ngettext('{{ numProducts }} product', '{{ numProducts }} products', s, 'Text displaying the total number of products across a single tag on a Pin', 'Text displaying the total number of products across a single tag on a Pin'),{numProducts:s})})})]}),(0,y.jsxs)(o.xu,{display:"flex",marginEnd:-1,marginStart:-1,wrap:!0,children:[l.map(function(e){return(0,y.jsx)(o.xu,{padding:1,children:(0,y.jsx)($.Z,{disabled:d,pinTagId:i,taggedObjectId:e})},e)}),(0,y.jsx)(o.xu,{padding:1,children:(0,y.jsx)(eo,{disabled:d,pinItemId:r,pinTagId:i})})]})]})}function ef(e){var t=(0,ei.A$)(),n=(0,r.v9)(function(t){return t.pinbuilder.pinItems[e.pinItemId]}).selectedPinTagId,o=n?n===e.pinTagId:null,i=(0,r.v9)(function(n){return t(n,e)});return(0,y.jsx)(ed,es(es({},e),{},{isSelected:o,taggedObjectIds:i}))}var ep=n(734263),eh=n(593310);function ey(e){return(ey="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function eb(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function em(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?eb(Object(n),!0).forEach(function(t){var r,o;r=t,o=n[t],(r=function(e){var t=function(e,t){if("object"!=ey(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=ey(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ey(t)?t:t+""}(r))in e?Object.defineProperty(e,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[r]=o}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):eb(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function eg(e){var t=e.numProducts,n=e.pinItemId,r=e.pinTagIds,i=(0,c.ZP)(),a=r.length;return(0,y.jsxs)(o.xu,{column:12,direction:"column",display:"flex",height:"100%",children:[(0,y.jsxs)(o.xu,{flex:"none",marginBottom:6,children:[(0,y.jsx)(o.xu,{marginBottom:1,children:(0,y.jsx)(o.X6,{size:"400",children:i._('Products tagged', 'Heading for grid of products tagged to one Pin tag', 'Heading for grid of products tagged to one Pin tag')})}),(0,y.jsxs)(o.kC,{alignItems:"stretch",justifyContent:"start",children:[(0,y.jsx)(o.xv,{size:"200",children:(0,u.nk)(i.ngettext('{{ numTags }} tag', '{{ numTags }} tags', a, 'Text displaying the total number of tags on a Pin', 'Text displaying the total number of tags on a Pin'),{numTags:a})}),(0,y.jsx)(ep.Z,{}),(0,y.jsx)(o.xv,{size:"200",children:(0,u.nk)(i.ngettext('{{ numProducts }} product', '{{ numProducts }} products', t, 'Text displaying the total number of products across all tags on a Pin', 'Text displaying the total number of products across all tags on a Pin'),{numProducts:t})})]})]}),(0,y.jsx)(o.kC,{alignItems:"stretch",direction:"column",flex:"grow",justifyContent:"start",overflow:"auto",children:r.map(function(e,t){return(0,y.jsx)(o.xu,{marginBottom:5,children:(0,y.jsx)(ef,{pinItemId:n,pinTagId:e,pinTagKey:t+1})},e)})})]})}function ev(e){var t=(0,eh.vd)(),n=(0,eh.jk)(),o=(0,r.v9)(function(t){return n(t,e).length}),i=(0,r.v9)(function(n){return t(n,e)});return(0,y.jsx)(eg,em(em({},e),{},{numProducts:o,pinTagIds:i}))}var e_=n(489529);function ex(e){return(ex="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ej(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function eP(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ej(Object(n),!0).forEach(function(t){var r,o;r=t,o=n[t],(r=function(e){var t=function(e,t){if("object"!=ex(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=ex(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ex(t)?t:t+""}(r))in e?Object.defineProperty(e,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[r]=o}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ej(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var eO={__style:{paddingBottom:d.uR}};function ew(e){var t=e.height,n=e.pinDraftId,r=e.pinItemId,a=e.view,l=e.paddingX;return(0,y.jsxs)(o.xu,{dangerouslySetInlineStyle:eO,direction:"row",display:"flex",children:[(0,y.jsx)(o.xu,{paddingX:void 0===l?5:l,children:(0,y.jsx)(i.Z,{height:t,pinDraftId:n,pinItemId:r})}),(0,y.jsxs)(o.xu,{flex:"grow",height:t,minHeight:d.sD,paddingX:5,width:"100%",children:["tag"===a&&(0,y.jsx)(ev,{pinItemId:r}),"selectTag"===a&&(0,y.jsx)(J,{pinDraftId:n,pinItemId:r})]})]})}function eS(e){var t=(0,r.v9)(function(t){return t.pinbuilder.pinDrafts[e.pinDraftId]}).pinItemIds,n=(0,r.v9)(function(e){return e.pinbuilder.pinItems[t[0]]}).media,o=n?(0,e_.Z)(n):d.sD;return(0,y.jsx)(ew,eP(eP({},e),{},{height:o}))}},180116:function(e,t,n){"use strict";n.d(t,{Z:function(){return m}});var r=n(581722),o=n(20256),i=n(980787),a=n(19585),l=n(526435),s=n(406262),c=n(253374),u=n(888382),d=n(452859),f=n(382718);function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach(function(t){var r,o;r=t,o=n[t],(r=function(e){var t=function(e,t){if("object"!=p(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=p(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==p(t)?t:t+""}(r))in e?Object.defineProperty(e,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[r]=o}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function b(e){var t=e.disabled,n=e.media,r=e.removeTaggedObject,d=e.pin,p=(0,i.u)().logContextEvent,h=(0,a.ZP)(),y=n||{},b=y.height,m=y.width,g=y.url,v=s.Z.enabled("shop_the_pin"),_=d&&"pin"===d.type;return(0,f.jsxs)(o.xu,{"data-test-id":"tagged-item",position:"relative",rounding:2,children:[(0,f.jsx)(o.zd,{height:v?l.MN:l.Bj,rounding:2,wash:!0,width:v?l.MN:l.Bj,children:g&&(0,f.jsx)(o.Ee,{alt:"Image from ".concat(null!=g?g:""),fit:"cover",naturalHeight:null!=b?b:1,naturalWidth:null!=m?m:1,src:g})}),v&&_&&(0,f.jsxs)(o.xu,{children:[d&&(0,f.jsx)(u.dV,{input:{type:"Legacy",data:d},children:function(e){return!!e&&(0,f.jsx)(o.xu,{children:(0,f.jsx)(o.xu,{display:"flex",paddingY:1,children:(0,f.jsx)(c.Z,{icon:"tag",text:e})})})}}),d&&_&&(0,f.jsx)(u.v2,{input:{type:"Legacy",data:d},children:function(e){return!!e&&(0,f.jsx)(o.xu,{width:v?l.MN:l.Bj,children:(0,f.jsx)(o.xv,{overflow:"breakWord",size:"200",weight:"bold",children:e})})}})]}),(0,f.jsx)(o.xu,{"data-test-id":"remove-tagged-item-button",left:!0,margin:2,position:"absolute",top:!0,children:(0,f.jsx)(o.hU,{accessibilityLabel:h._('Remove tagged product', 'button to remove tagged product', 'button to remove tagged product'),bgColor:"white",icon:"cancel",iconColor:"gray",onClick:t?void 0:function(){r(),p({event_type:101,component:13308,element:12127})},size:"xs"})})]})}function m(e){var t=(0,r.v9)(function(t){return t.pinbuilder.taggedObjects[e.taggedObjectId].media||null}),n=(0,r.v9)(function(t){return t.pinbuilder.taggedObjects[e.taggedObjectId].pin||null}),o=(0,r.I0)();return(0,f.jsx)(b,y(y({},e),{},{media:t,pin:n,removeTaggedObject:function(){o((0,d.Go)(e.pinTagId,e.taggedObjectId)),o((0,d.Cf)(e.pinTagId,"edited"))}}))}},241454:function(e,t,n){"use strict";n.d(t,{Z:function(){return x}});var r=n(581722),o=n(20256),i=n(865540),a=n(980787),l=n(821342),s=n(19585),c=n(526435),u=n(406262),d=n(675973),f=n(72918),p=n(448505),h=n(7872),y=n(669019),b=n(441501),m=n(95517),g=n(382718);function v(e){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function x(e){var t=e.pinDraftId,n=e.pinItemId,x=(0,a.u)().logContextEvent,j=(0,d.Z)().checkExperiment,P=(0,s.ZP)(),O=(0,i.Z)(),w=(0,l.Z)(),S=w.isAuth?w.id:"",A=w.isAuth?w.country:"",I=w.isAuth&&w.isPartner,E=(0,p.Z)(),C=(0,h.lJ)(w,E),D=(0,r.I0)(),T=function(){D((0,b.C_)(n,null)),D((0,y.c8)(t,"upload")),D((0,b.b0)(n))},k=function(){D((0,b.C_)(n,null)),D((0,b.b0)(n)),D((0,m.Z)({pinDraftId:t,userId:S,orbacSubjectId:C,country:A,isPartner:I,i18n:P,logContextEvent:x,ideaPinRenamingEnabled:O})),D((0,f.jB)("PinResource"))},z=(0,r.v9)(function(e){return"selectTag"===e.pinbuilder.pinDrafts[t].view}),R=(0,r.v9)(function(e){return"edit"===e.pinbuilder.pinDrafts[t].mode}),B=(0,r.v9)(function(e){return e.pinbuilder.pinItems[n].tagError}),L=(0,r.v9)(function(e){return e.pinbuilder.closeupImageSignature}),F=(0,r.v9)(function(e){return e.pinbuilder.entryPoint}),Z=(0,h.nl)(w,E)&&"ad_creation"!==u.Z.scenario()&&j("web_stl_tooling",{dangerouslySkipActivation:!0}).anyEnabled?function(){x({event_type:101,component:13308,element:10973,aux_data:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_(Object(n),!0).forEach(function(t){var r,o;r=t,o=n[t],(r=function(e){var t=function(e,t){if("object"!=v(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=v(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==v(t)?t:t+""}(r))in e?Object.defineProperty(e,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[r]=o}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},F||L?{entry_point_source:F,image_signature:L}:{})}),k()}:k;return(0,g.jsxs)(o.kC,{alignItems:"stretch",justifyContent:B?"between":"end",children:[!!B&&(0,g.jsx)(o.xu,{alignItems:"center",display:"flex",paddingX:5,children:(0,g.jsx)(o.xu,{width:c.LM,children:(0,g.jsx)(o.xv,{color:"error",size:"200",children:B})})}),(0,g.jsx)(o.zx,{color:"red",disabled:z,name:"pin-draft-header-tag-view-done",onClick:R?Z:function(){x({event_type:101,component:13308,element:12128}),T()},text:P._('Done', 'Button to save changes to the tagging flow.', 'Button to save changes to the tagging flow.')})]})}},537838:function(e,t,n){"use strict";n.d(t,{Z:function(){return P}});var r=n(586659),o=n(581722),i=n(112892),a=n(980787),l=n(461951),s=n(656013),c=n(316095),u=n(400704),d=n(382718);function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach(function(t){v(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function y(e,t){return(y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function b(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(m=function(){return!!e})()}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function v(e,t,n){return(t=_(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _(e){var t=function(e,t){if("object"!=f(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=f(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==f(t)?t:t+""}var x=l.EvS,j=function(e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");o.prototype=Object.create(e&&e.prototype,{constructor:{value:o,writable:!0,configurable:!0}}),Object.defineProperty(o,"prototype",{writable:!1}),e&&y(o,e);var t,n,r=(t=m(),function(){var e,n=g(o);return e=t?Reflect.construct(n,arguments,g(this).constructor):n.apply(this,arguments),function(e,t){if(t&&("object"==f(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return b(e)}(this,e)});function o(){var e;if(!(this instanceof o))throw TypeError("Cannot call a class as a function");for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];return v(b(e=r.call.apply(r,[this].concat(n))),"handleClick",function(){var t=e.props,n=t.deselectPinDraft,r=t.inSelectMode,o=t.pinDraftId,i=t.pinDraftRefs,a=t.published,l=t.selected,s=t.selectPinDraft;(0,t.logContextEvent)({event_type:101,component:13395,element:11330});var c=i.get(o);c&&c.scrollIntoView({behavior:"smooth",block:"start"}),r&&!a&&(l?n():s())}),e}return n=[{key:"render",value:function(){var e=this.props,t=e.pinDraftId,n=e.published,r=e.selected,o=e.selectedColor,a=e.width,l=e.height,c=e.hasError,u=e.shouldHighlightErrors,f=c&&u;return(0,d.jsx)(s.Z,{color:f?x:o,onClick:this.handleClick,selected:f||r,children:(0,d.jsx)(i.Z,{collapsed:n,height:l,pinDraftId:t,type:"thumbnail",width:a})})}}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,_(r.key),r)}}(o.prototype,n),Object.defineProperty(o,"prototype",{writable:!1}),o}(r.Component);function P(e){var t=(0,a.u)().logContextEvent,n=(0,o.I0)(),r=(0,o.v9)(function(e){return e.pinbuilder.selectedPinDraftIds.length>0}),i=(0,o.v9)(function(t){return t.pinbuilder.selectedPinDraftIds.includes(e.pinDraftId)}),l=(0,o.v9)(function(t){return"succeeded"===t.pinbuilder.pinDrafts[e.pinDraftId].status}),s=(0,o.v9)(function(t){var n=t.pinbuilder;return(0,u.Fh)(n,e)});return(0,d.jsx)(j,h(h({},e),{},{deselectPinDraft:function(){return n((0,c.deselectPinBuilderPinDraft)(e.pinDraftId))},hasError:s,inSelectMode:r,logContextEvent:t,published:l,selected:i,selectPinDraft:function(){return n((0,c.selectPinBuilderPinDraft)(e.pinDraftId))}}))}},112892:function(e,t,n){"use strict";n.d(t,{Z:function(){return I}});var r=n(581722),o=n(19585),i=n(656442),a=n(20256),l=n(382718);function s(e){var t=e.type,n=e.height,r=e.width,i=(0,o.ZP)();return(0,l.jsx)(a.xu,{alignItems:"center",color:"lightWash",display:"flex",height:n||("thumbnail"===t?60:"100%"),justifyContent:"center",rounding:2,width:r||("thumbnail"===t?40:"100%"),children:(0,l.jsx)(a.JO,{accessibilityLabel:i._('Empty Pin', 'Label for Pin draft with no image', 'Label for Pin draft with no image'),color:"subtle",icon:"camera-roll",size:16})})}var c=n(586659),u=n(526435),d=n(489529);function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach(function(t){v(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function y(e,t){return(y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function b(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(m=function(){return!!e})()}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function v(e,t,n){return(t=_(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _(e){var t=function(e,t){if("object"!=f(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=f(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==f(t)?t:t+""}var x={video:{height:"100%",objectFit:"cover",width:"100%"},wash:{__style:{opacity:.3}},container:{__style:{transition:"height 250ms ".concat(u.rc)}}},j=function(e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");o.prototype=Object.create(e&&e.prototype,{constructor:{value:o,writable:!0,configurable:!0}}),Object.defineProperty(o,"prototype",{writable:!1}),e&&y(o,e);var t,n,r=(t=m(),function(){var e,n=g(o);return e=t?Reflect.construct(n,arguments,g(this).constructor):n.apply(this,arguments),function(e,t){if(t&&("object"==f(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return b(e)}(this,e)});function o(){var e;if(!(this instanceof o))throw TypeError("Cannot call a class as a function");for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];return v(b(e=r.call.apply(r,[this].concat(n))),"videoRef",(0,c.createRef)()),e}return n=[{key:"componentDidMount",value:function(){var e=this.props.media;"localVideo"===e.type&&this.videoRef.current&&(this.videoRef.current.currentTime=e.thumbnail)}},{key:"componentDidUpdate",value:function(e){var t=e.media,n=this.props.media;"localVideo"===n.type&&t.thumbnail!==n.thumbnail&&this.videoRef.current&&(this.videoRef.current.currentTime=n.thumbnail)}},{key:"render",value:function(){var e=this.props,t=e.collapsed,n=e.media,r=e.text,o=e.type,i=e.width,s=void 0===i?40:i,c=("localVideo"===n.type?n:{}).customCoverImg,u="square"===o?"100%":s,f=t?4:(0,d.Z)(c||n,s);return(0,l.jsxs)(a.xu,{dangerouslySetInlineStyle:x.container,height:"square"===o?"100%":f,position:"relative",rounding:2,width:u,children:[(0,l.jsx)(a.xu,{column:12,dangerouslySetInlineStyle:t?x.wash:void 0,height:"100%",children:(0,l.jsxs)(a.zd,{height:"100%",rounding:2,wash:!0,width:"100%",children:["localVideo"===n.type&&c&&(0,l.jsx)(a.Ee,{alt:this.props.i18n._('Video Pin', 'Label for Pin draft with an video', 'Label for Pin draft with an video'),fit:"square"===o?"cover":void 0,naturalHeight:c.height,naturalWidth:c.width,src:c.src}),"localVideo"===n.type&&!c&&(0,l.jsx)("video",{ref:this.videoRef,muted:!0,src:n.src,style:x.video,children:(0,l.jsx)("track",{kind:"captions"})}),("localImage"===n.type||"webImage"===n.type)&&(0,l.jsx)(a.Ee,{alt:this.props.i18n._('Image Pin', 'Label for Pin draft with an image', 'Label for Pin draft with an image'),fit:"square"===o?"cover":void 0,naturalHeight:n.height,naturalWidth:n.width,src:n.src})]})}),("localVideo"===n.type||!!r)&&(0,l.jsxs)(a.xu,{alignItems:"center",bottom:!0,display:"flex",justifyContent:"center",left:!0,position:"absolute",right:!0,top:!0,children:["localVideo"===n.type&&(0,l.jsx)(a.JO,{accessibilityLabel:this.props.i18n._('Video Pin', 'Label for Pin draft with an video', 'Label for Pin draft with an video'),color:"inverse",icon:"video-camera"}),!!r&&(0,l.jsx)(a.xv,{color:"inverse",size:"100",weight:"bold",children:r})]})]})}}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,_(r.key),r)}}(o.prototype,n),Object.defineProperty(o,"prototype",{writable:!1}),o}(c.Component);function P(e){var t=(0,o.ZP)();return(0,l.jsx)(j,h(h({},e),{},{i18n:t}))}function O(e){return(O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function S(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?w(Object(n),!0).forEach(function(t){var r,o;r=t,o=n[t],(r=function(e){var t=function(e,t){if("object"!=O(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=O(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==O(t)?t:t+""}(r))in e?Object.defineProperty(e,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[r]=o}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function A(e){var t=e.collapsed,n=e.media,r=e.text,o=e.type,i=e.height,a=e.width;return n?"localImage"===n.type||"webImage"===n.type||"localVideo"===n.type?(0,l.jsx)(P,{collapsed:t,media:n,text:r,type:o,width:a}):null:(0,l.jsx)(s,{height:i,type:o,width:a})}function I(e){var t=(0,o.ZP)(),n=(0,r.v9)(function(e){return e.pinbuilder}),a=n.pinDrafts,s=n.pinItems,c=n.storyPinItems,u=a[e.pinDraftId],d=u.pinItemIds,f=u.pinItemIndex,p=u.type,h=d[f],y=("story"===p?c[h]:s[h]).media,b="carousel"===p?"".concat(f+1,"/").concat(d.filter(function(e){return"story"===p?!!c[e].media:!!s[e].media}).length):y&&"gif"===(0,i.Z)(y)?t._('GIF', 'Overlay text for GIF images', 'Overlay text for GIF images'):void 0;return(0,l.jsx)(A,S(S({},e),{},{i18n:t,media:y,text:b}))}},298721:function(e,t,n){"use strict";n.d(t,{Z:function(){return f}});var r=n(586659),o=n(551969),i=n(980787),a=n(346955),l=n(15667),s=n(595419),c=n(382718);function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function f(e){var t=e.isFromPinBuilder,n=e.onInstall,f=void 0===n?function(){}:n,p=e.onHide,h=void 0===p?function(){}:p,y=e.onMounted,b=void 0===y?function(){}:y,m=(0,i.u)().logContextEvent,g=(0,l.B)().userAgent.browserName,v=(0,a.SU)();(0,r.useEffect)(function(){return m(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach(function(t){var r,o;r=t,o=n[t],(r=function(e){var t=function(e,t){if("object"!=u(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=u(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==u(t)?t:t+""}(r))in e?Object.defineProperty(e,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[r]=o}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({event_type:13},{view_type:438,component:13588})),b(),function(){m({event_type:13,view_type:v.viewType,view_parameter:v.viewParameter,view_data:v.viewData})}},[]);var _=function(){o.Z.handleExtensionInstall(g,function(){f()})};return(0,c.jsx)(s.Z,{installClick:function(){_(),m({event_type:101,component:7,element:456})},isFromPinBuilder:!!(void 0!==t&&t),skipClick:function(){h()}})}},517724:function(e,t,n){"use strict";n.d(t,{Z:function(){return c}});var r=n(20256),o=n(724810),i=n(19585),a=n(675973),l=n(601686),s=n(382718);function c(e){var t=e.colorOverride,n=e.inlineComponent,c=e.isSoldOut,u=e.isStale,d=e.productDetails,f=e.showSalesPrice,p=e.textSize,h=e.type,y=e.weight,b=(0,l.x4)().peekCloseupEnabled,m=(0,(0,a.Z)().checkExperiment)("closeup_web_unit_pricing").anyEnabled,g=d.maxPrice,v=d.minPrice,_=d.price,x=d.standardPrice,j=d.unitPrice,P=d.unitPricingBaseUnits,O=d.unitPricingUnitType,w=!!_&&!!x&&_!==x,S="100";"heading"!==h||b?"mobileHeading"===h?S="300":("cutout"===h||b)&&(S="200"):S="400",S=p||S;var A=(0,i.ZP)(),I=A._('See price on site', 'product.price.stale', 'Product is stale'),E=A._('Sold out', 'product.price.soldOut', 'Product is sold out');return u?(0,s.jsx)(r.xv,{color:"subtle",size:S,weight:"normal",children:I}):(0,s.jsxs)(r.kC,{alignItems:"stretch",dataTestId:"product-price",direction:"row",justifyContent:"start",children:[c&&(0,s.jsx)(r.xu,{"data-test-id":"product-sold-out-text",marginEnd:2,children:(0,s.jsx)(r.xv,{color:"subtle",size:S,weight:"normal",children:E})}),(!!_||!!v||!!g)&&(0,s.jsx)(r.xv,{color:t||(w?"shopping":"default"),dataTestId:"product-price",size:S,weight:void 0===y?"normal":y,children:(0,s.jsx)("span",{children:(0,o.Z)({maxPrice:g,minPrice:v,price:_})})}),!!j&&!!P&&!!O&&m&&(0,s.jsx)(r.xu,{marginStart:1,children:(0,s.jsx)(r.xv,{color:"subtle",size:"200",weight:"normal",children:"(".concat(j," / ").concat(P," ").concat(O,")")})}),w&&!f&&(0,s.jsx)(r.xu,{marginStart:1,children:(0,s.jsx)(r.xv,{color:"cutout"===h?"dark":"subtle",size:S,weight:["heading","mobileHeading"].includes(h)?"normal":"bold",children:(0,s.jsx)("span",{style:{textDecoration:"line-through"},children:x})})}),n||null]})}},884761:function(e,t,n){"use strict";n.d(t,{Z:function(){return l},n:function(){return s}});var r=n(705754);function o(e){return function(e){if(Array.isArray(e))return i(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return i(e,void 0);var n=({}).toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,void 0):void 0}}(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function a(e,t){var n=e.pinTagIds,i=e.pinTags,a=e.taggedObjects;return(void 0===n?[]:n).filter(function(e){var n=(0,r.Z)(i[e])&&"deleted"!==i[e].status;return t?n:!n}).map(function(e){return i[e].taggedObjectIds.map(function(t){var n;return{taggedObjectId:t,pinTagId:e,status:null==a||null==(n=a[t])?void 0:n.status}})}).reduce(function(e,t){return[].concat(o(e),o(t))},[])}function l(e){return a(e,!0)}function s(e){return a(e,!1).filter(function(e){return"saved"===e.status||"created"===e.status})}},724810:function(e,t,n){"use strict";function r(e){var t=e.maxPrice,n=e.minPrice,r=e.price;return t&&n?"".concat(n,"-").concat(t):r}n.d(t,{Z:function(){return r}})},623161:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(963489),o=n(865540),i=n(506662);function a(e){var t=e.isAdsManager,n=(0,r.TH)(),a=(0,o.Z)(!0)&&(0,i.mk)(n);return!!t||a}},402242:function(e,t,n){"use strict";n.d(t,{Z:function(){return I}});var r=n(581722),o=n(20256),i=n(586659),a=n(274320),l=n(444185);function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var c=n(980787),u=n(475498),d=n(19585),f=n(7525),p=n(382718);function h(e){var t,n,r,f,h,y=e.hideToast,b=e.isThumbnailUrlValid,m=e.pinId,g=e.text,v=e.thumbnailUrl,_=(0,d.ZP)(),x=(0,c.u)().logContextEvent;return r=(n=function(e){if(Array.isArray(e))return e}(t=(0,i.useState)(!1))||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,l=[],s=!0,c=!1;try{for(i=(n=n.call(e)).next;!(s=(r=i.call(n)).done)&&(l.push(r.value),2!==l.length);s=!0);}catch(e){c=!0,o=e}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return l}}(t,2)||function(e,t){if(e){if("string"==typeof e)return s(e,2);var n=({}).toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(e,2):void 0}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())[0],f=n[1],h=(0,(0,a.r)().checkExperiment)("closeup_dweb_blended_ui",{dangerouslySkipActivation:!0}).anyEnabled,(0,l.Z)(!r&&h?{name:"PinResource",options:{id:m,field_set_key:"auth_web_main_pin"}}:null),(0,i.useEffect)(function(){h&&!r&&f(!0)},[r,h]),(0,p.jsx)(u.Z,{duration:5e3,href:"/pin/".concat(m),onClick:function(){x({event_type:101,view_type:212,view_parameter:3228,element:13911})},onHide:y,primaryAction:{accessibilityLabel:_._('Navigate to created Pin', 'storyboard.toast.viewPublishedPin.accessibilityLabel', 'Accessibility label on a button link text on a toast that appears to confirm creation of a pin. Tapping on the button navigates user to the created pin'),label:_._('View', 'storyboard.toast.viewPublishedPin.buttonText', 'Button link text on a toast that appears to confirm creation of a pin. Tapping on the button navigates user to the created pin'),onClick:function(){}},text:g,thumbnail:b?{image:(0,p.jsx)(o.Ee,{alt:"",naturalHeight:45,naturalWidth:45,role:"presentation",src:v},v)}:void 0})}function y(e){var t=e.hideToast,n=e.thumbnailUrl,r=e.pinId,o=(0,d.ZP)(),i=(0,f.Z)(n),a=o._('Your Pin has been published!', 'storyboard.toast.viewPublishedPin.text', 'Text on a toast that appears to confirm creation of a pin');return(0,p.jsx)(h,{hideToast:t,isThumbnailUrlValid:!!i,pinId:r,text:a,thumbnailUrl:n})}var b=n(963489),m=n(654937),g=n(166379),v=n(821342),_=n(302148),x=n(15667);function j(e){return(j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function P(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function O(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?P(Object(n),!0).forEach(function(t){var r,o;r=t,o=n[t],(r=function(e){var t=function(e,t){if("object"!=j(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=j(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==j(t)?t:t+""}(r))in e?Object.defineProperty(e,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[r]=o}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):P(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function w(e){var t=e.hideToast,n=e.scheduledDate,r=e.scheduledTime,o=e.showAction,i=(0,d.ZP)(),a=(0,x.B)(),l=(0,v.Z)(),s=(0,b.s0)(),c=n&&r&&new Date(n.getFullYear(),n.getMonth(),n.getDate(),r.getHours(),r.getMinutes(),r.getSeconds()),f=n&&r&&c?(0,_.nk)(i._('Scheduled for {{ date }} at {{ scheduledTime }}', 'schedulePinConfirmation.toast.description', 'Description text for the schedule pin confirmation toast. date:date given to schedule a pin. scheduledTime:time given to schedule a pin'),{date:(0,m.ZP)(a.locale,n,g.k.SHORT_MONTH_DAY,!1),scheduledTime:c.toLocaleTimeString([a.locale],{hour:"2-digit",minute:"2-digit"})}).join(""):i._('Your Pin has been scheduled', 'schedulePinConfirmation.toast.description.fallback', 'Description text for the schedule pin confirmation toast');return(0,p.jsx)(u.Z,O(O({duration:5e3,onHide:t},o&&l.isAuth&&l.username?{primaryAction:{accessibilityLabel:i._('Navigate to scheduled Pins', 'storyboard.toast.viewScheduledPin.accessibilityLabel', 'Accessibility label on a button link text on a toast that appears to confirm scheduling of a Pin. Tapping on the button navigates user to scheduled Pins'),label:i._('View', 'storyboard.toast.viewScheduledPin.buttonText', 'Button link text on a toast that appears to confirm scheduling of a Pin. Tapping on the button navigates user to scheduled Pins'),onClick:function(){s("/".concat(l.username,"/scheduled-pins/"))}}}:{}),{},{text:f}))}var S=n(87853),A=n(400704);function I(){var e=(0,r.v9)(function(e){return{pinDrafts:(0,A.Wp)(e)}}).pinDrafts,t=(0,S.dI)();return function(n){var r=n.pinId,o=n.showActionForScheduledPin,i=void 0!==o&&o,a=Object.values(e).find(function(e){return e.pinId===r})||{},l=a.storyPin,s=a.publishOption,c=a.scheduledDate,u=a.scheduledTime,d=(null==l?void 0:l.image_square_url)||"";t.showToast(function(e){var t=e.hideToast;return"publish-later"===s?(0,p.jsx)(w,{hideToast:t,scheduledDate:c,scheduledTime:u,showAction:i}):(0,p.jsx)(y,{hideToast:t,pinId:r,thumbnailUrl:d})})}}},551969:function(e,t,n){"use strict";n.d(t,{e:function(){return c}});var r,o,i=n(293565),a=n(785873);function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t,n){var r;return(r=function(e,t){if("object"!=l(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=l(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==l(r)?r:r+"")in e)?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var c="data-pinterest-extension-installed",u={},d=(s(r={},i.oi.CHROME,{url:"https://chrome.google.com/webstore/detail/gpdjojdkbbmdfjfahjcgigfpmkopogic",newWindow:!0}),s(r,i.oi.FIREFOX,{url:"https://addons.mozilla.org/en-US/firefox/addon/pinterest/",newWindow:!1}),s(r,i.oi.SAFARI,{url:"https://apps.apple.com/us/app/save-to-pinterest/id6473649042",newWindow:!0}),s(r,i.oi.EDGE,{url:"https://microsoftedge.microsoft.com/addons/detail/pinterest-save-button/bkgoflemacdadndiohhdnphcmdhacabg/",newWindow:!0}),r);u.handleExtensionInstall=function(e,t){var n=(0,i.u$)(e),r=n?d[n].url:void 0;r&&((0,a.Z)(r,n?d[n].newWindow:void 0),t())},u.isExtensionInstalled=function(){return o},u.isBrowserExtensionSupported=function(e){return(0,i.i7)(e)||(0,i.vU)(e)||(0,i.un)(e)||(0,i.G6)(e)},u.extensionReady=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100;return new Promise(function(n){setTimeout(function(){document.body&&(o=document.body.hasAttribute(c),u.isBrowserExtensionSupported(e)||(o=!0),n(o))},t)})},u.initBrowserExtension=function(){Promise.resolve().then(n.bind(n,966872)).then(function(e){var t=e.default;t.logToServer(t.SERVER_LOG_TYPE.BROWSER_EXTENSION,t.HTTP_METHOD.POST,{browser_extension_installed:o})})},t.Z=u},187356:function(e,t,n){"use strict";n.d(t,{P:function(){return u}});var r=n(586659),o=n(20256),i=n(19585),a=n(382718);function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var u="flashlight-dot-style";t.Z=(0,r.forwardRef)(function(e,t){var n,d=e.icon,f=e.onClick,p=e.onMouseDown,h=e.onMouseEnter,y=e.onMouseLeave,b=e.onMouseUp,m=e.selected,g=e.style,v=e.text,_=e.x,x=e.y,j=e.zIndex,P=e.backdropDiameter,O=void 0===P?32:P,w=e.dotDiameter,S=void 0===w?16:w,A=function(e){if(Array.isArray(e))return e}(n=(0,r.useState)(!1))||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,l=[],s=!0,c=!1;try{for(i=(n=n.call(e)).next;!(s=(r=i.call(n)).done)&&(l.push(r.value),2!==l.length);s=!0);}catch(e){c=!0,o=e}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return l}}(n,2)||function(e,t){if(e){if("string"==typeof e)return c(e,2);var n=({}).toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(e,2):void 0}}(n,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),I=A[0],E=A[1],C=(0,i.ZP)(),D=I?O+4:O;return(0,a.jsx)(o.xu,{ref:t,dangerouslySetInlineStyle:{__style:{top:x-D/2,left:_-D/2,outline:"none"}},position:"absolute",zIndex:new o.Ry(j||0),children:(0,a.jsx)(o.iP,{accessibilityLabel:C._('Search this item', 'flashlight.dot.a11ylabel', 'accessibility label for flashlight dot'),dataTestId:"flashlight-dot",onMouseDown:p,onMouseEnter:function(e){var t=e.event;E(!0),null==h||h({event:t})},onMouseLeave:function(e){var t=e.event;E(!1),null==y||y({event:t})},onMouseUp:b,onTap:f,tabIndex:0,children:(0,a.jsxs)(o.xu,{alignItems:"center",borderStyle:"none",color:"default",dangerouslySetInlineStyle:{__style:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach(function(t){var r,o;r=t,o=n[t],(r=function(e){var t=function(e,t){if("object"!=l(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=l(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==l(t)?t:t+""}(r))in e?Object.defineProperty(e,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[r]=o}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({boxShadow:m?"0 0 0 3px #e60023":"none",borderRadius:S,top:(D-S)/2,left:(D-S)/2},g)},"data-test-id":u,display:"flex",height:S,id:u,justifyContent:"center",padding:0,position:"absolute",width:S,children:[!!v&&(0,a.jsx)(o.xv,{align:"center",color:"default",inline:!0,size:"100",weight:"bold",children:v}),d&&(0,a.jsx)(o.JO,{accessibilityLabel:C._('Tag anchor', 'accessibility label for an anchor for an object in a pin', 'accessibility label for an anchor for an object in a pin'),color:"error",icon:d,inline:!0,size:S/2})]})})})})},281260:function(e,t,n){"use strict";n.d(t,{q:function(){return o}});var r=n(398236),o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return"@keyframes shopButtonSlideInThenOut {\n  0% {\n    width: 0px;\n  }\n\n  15% {\n    width: ".concat(e+r.I,"px;\n  }\n\n  85% {\n    width: ").concat(e+r.I,"px;\n  }\n\n  100% {\n    width: 0px;\n  }\n}\n\n@keyframes shopButtonSlideOut {\n  0% {\n    width: ").concat(e+r.I,"px;\n  }\n  100% {\n    width: 0px;\n  }\n}\n\n@keyframes stelaSlideOut {\n  0% {\n    opacity: 1;\n  }\n  100% {\n    opacity: 0;\n  }\n}\n\n@keyframes revealShopText {\n  from {\n    clip-path: inset(0 100% 0 0);\n  }\n  to {\n    clip-path: inset(0 0 0 0);\n  }\n}\n\n@keyframes stelaSlideInThenOut {\n  0% {\n    opacity: 0;\n  }\n\n  15% {\n    opacity: 0;\n  }\n\n  25% {\n    opacity: 1;\n  }\n\n  50% {\n    opacity: 1;\n  }\n\n  75% {\n    opacity: 1;\n  }\n\n  85% {\n    opacity: 0;\n  }\n\n  100% {\n    opacity: 0;\n  }\n}\n\n\n@keyframes stelaGrowInAndOut {\n0% {\n  transform: scale(0);\n  opacity: 0;\n}\n\n10% {\n  transform: scale(1);\n  opacity: 1;\n}\n\n90% {\n  transform: scale(1);\n  opacity: 1;\n}\n\n100% {\n  transform: scale(0);\n  opacity: 0;\n}\n}\n\n@keyframes buttonSlideIn").concat(t," {\n  0% {\n    width: 0px;\n  }\n  15% {\n    width: ").concat(e+r.I,"px;\n  }\n  100% {\n    width: ").concat(e+r.I,"px;\n  }\n}\n\n@keyframes stelaSlideIn {\n  0% {\n    opacity: 0;\n  }\n\n  15% {\n    opacity: 0;\n  }\n\n  25% {\n    opacity: 1;\n  }\n  100% {\n    opacity: 1;\n  }\n}\n")};t.Z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return"@keyframes shopButtonSlideInThenOut {\n  0% {\n    width: 0px;\n  }\n\n  15% {\n    width: ".concat(e+r.I,"px;\n  }\n\n  85% {\n    width: ").concat(e+r.I,"px;\n  }\n\n  100% {\n    width: 0px;\n  }\n}\n\n@keyframes revealShopText {\n  from {\n    clip-path: inset(0 100% 0 0);\n  }\n  to {\n    clip-path: inset(0 0 0 0);\n  }\n}\n\n@keyframes stelaSlideInThenOut {\n  0% {\n    opacity: 0;\n  }\n\n  15% {\n    opacity: 0;\n  }\n\n  25% {\n    opacity: 1;\n  }\n\n  50% {\n    opacity: 1;\n  }\n\n  75% {\n    opacity: 1;\n  }\n\n  85% {\n    opacity: 0;\n  }\n\n  100% {\n    opacity: 0;\n  }\n}\n\n\n@keyframes stelaGrowInAndOut {\n0% {\n  transform: scale(0);\n  opacity: 0;\n}\n\n10% {\n  transform: scale(1);\n  opacity: 1;\n}\n\n90% {\n  transform: scale(1);\n  opacity: 1;\n}\n\n100% {\n  transform: scale(0);\n  opacity: 0;\n}\n}\n\n")}},398236:function(e,t,n){"use strict";n.d(t,{I:function(){return r},b:function(){return o}});var r=24,o=36},681970:function(e,t,n){"use strict";var r=n(781011),o=n(378888),i=n(669442),a=n(817998);function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var s=["campaignToolPreference"];function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach(function(t){var r,o;r=t,o=n[t],(r=function(e){var t=function(e,t){if("object"!=l(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=l(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==l(t)?t:t+""}(r))in e?Object.defineProperty(e,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[r]=o}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var d={campaignFilter:"all",adGroupFilter:"all",adFilter:"all"},f=function(e){var t={};return e&&(t={objectiveTypes:[e]}),t},p=function(e){var t=e.campaignId,n=e.objectiveType,r=e.partialCreate,o=e.catalogsFeedId,a=e.managedClientId,l=e.catalogId,s=e.productGroupId,c=e.resumeLastDraft,u={};return t&&r&&(u.campaignId=t),n&&(u.objectiveType=n),"CATALOG_SALES"===n&&o&&(u.catalogsFeedId=o),l&&(u.catalogId=l),s&&(u.productGroupId=s),a&&(u.managedClientId=a),c&&(u.resumeLastDraft=!0),(0,i.Z)("/ads/create/",u)},h=function(e){e.campaignToolPreference;var t=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if(({}).hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],-1===t.indexOf(n)&&({}).propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,s);return(0,i.Z)("/automated/ads/create/",t)},y={overview:function(){return"/"},reporting:function(e){var t=e.objectiveType||null;delete e.objectiveType;var n=u(u({},e),f(t));return(0,i.Z)("/reporting/campaigns/",n)},reportingAdGroup:function(e){var t=e.campaignId,n=e.objectiveType,r=e.showAllEntities,o=e.adGroupId,a=e.message,l=u(u(u(u({campaignIds:[t]},r?d:{}),f(n)),o?{adGroupIds:[o]}:{}),{},{message:a});return(0,i.Z)("/reporting/adgroups/",l)},campaign:function(e){var t=e.id,n=e.objectiveType;return(0,i.Z)("/reporting/adgroups/",u({campaignIds:[t]},f(n)))},editCampaign:function(e){return e.isAutomatedCampaign?y.editAutomated({campaignId:e.id,view:"campaign"}):y.editV2({campaignId:e.id,view:"campaign"})},adgroup:function(e){var t=e.id,n=e.objectiveType,r=e.showAllEntities,o=e.pinPromotionId,a=e.campaignId;return"TEMPORARY_SHOPPING"===n||"CATALOG_SALES"===n?(0,i.Z)("/reporting/productgroups/",u({adGroupIds:[t]},f(n))):(0,i.Z)("/reporting/ads/",u(u(u(u({adGroupIds:[t]},f(n)),r?d:{}),o?{pinPromotionIds:[o]}:{}),a?{campaignIds:[a]}:{}))},editAdGroup:function(e){return e.isAutomatedCampaign?y.editAutomated({campaignId:e.id,view:"campaign"}):y.editV2({adGroupId:e.id,view:"adgroup"})},pinPromotion:function(e){var t=e.id,n=e.adFilter;return(0,i.Z)("/reporting/ads/",u({pinPromotionIds:[t]},n?{adFilter:n}:{}))},editPinPromotion:function(e){var t=e.isCreatingPins?{isCreatingPins:!0}:{},n=e.pinPromotionId?{pinPromotionId:e.pinPromotionId}:{};return y.editV2(u(u({adGroupId:e.adGroupId,view:"ad"},n),t))},productGroup:function(e){var t=e.id,n=e.name;return(0,i.Z)("/reporting/productgroups/",{productGroupIds:[t],name:n})},campaigns:function(){return"/reporting/campaigns/"},adgroups:function(){return"/reporting/adgroups/"},manage_wtb_products:function(){return"/manage_products"},ads:function(){return"/reporting/ads/"},bulkEdit:function(e){var t=e.entity_level,n=e.ids;return(0,i.Z)("/ads/bulk_edit/",{entity_level:t,ids:n})},productgroups:function(){return"/reporting/productgroups/"},productitems:function(){return"/reporting/productitems/"},campaignNegativeKeywords:function(){return"/reporting/campaignNegativeKeywords/"},campaignSearchQueries:function(){return"/reporting/campaignSearchQueries/"},adGroupNegativeKeywords:function(){return"/reporting/adGroupNegativeKeywords/"},adGroupPositiveKeywords:function(){return"/reporting/adGroupPositiveKeywords/"},adGroupSearchQueries:function(){return"/reporting/adGroupSearchQueries/"},ad:function(e){return y.pinPromotion(e)},createPreferred:function(e){switch(e.campaignToolPreference){case a.k.ADS_MANAGER:return p(e);case a.k.AUTOMATED_CAMPAIGN:return h(e);default:return(0,i.Z)("/ads/campaign_mode/",e.managedClientId?{managedClientId:e.managedClientId}:void 0)}},campaignMode:function(e){return(0,i.Z)("/ads/campaign_mode/",e.managedClientId?{managedClientId:e.managedClientId}:void 0)},create:p,createAutomated:h,editV2:function(e){return(0,i.Z)("/ads/edit/",e)},editAutomated:function(e){return(0,i.Z)("/automated/ads/edit/",e)},editDraftCampaign:function(e){return(0,i.Z)("/ads/edit_draft/",{campaignId:e.campaignId,view:"campaign"})},duplicateCampaign:function(e){return(0,i.Z)("/ads/duplicate/",e)},audiences:function(e){return(0,i.Z)("/audiences/",e.managedClientId?{managedClientId:e.managedClientId}:void 0)},audience_debug:function(){return"/audience_debug/"},prepaid_spend_campaign_breakdown:function(){return"/billing/prepaid_spend_campaign_breakdown/"},billing:function(e){var t=e.page,n=e.subSection,o=e.nextStepUrl,a={};switch(n&&(a.section=n),o&&(a.next_step_link_url=o),t){case r.kM.BILLING_HISTORY:return"/billing/history/";case r.kM.ORDER_LINES:return"/billing/order_lines/";case r.kM.PROMOTIONS:return"/billing/promotions/";case r.kM.DOCUMENTS:return"/billing/documents/";case r.kM.TAX_DOCUMENTS:return"/billing/tax_documents/";case r.kM.PREPAID_CAMPAIGN_SPEND:return"/billing/prepaid_campaign_spend_summary/";case r.kM.BILLING_FORMS:return(0,i.Z)("/billing/payment_settings/",a);case r.kM.SUMMARY:default:return(0,i.Z)("/billing/",a)}},bulk:function(e){var t=e||{},n=t.subSection,o=t.page,a=t.jobStarted;switch(o){case r.fm.UPLOAD_TEMPLATE:return(0,i.Z)("/bulk_editor/upload_template/",{section:n});case r.fm.DOWNLOAD_TEMPLATE:return(0,i.Z)("/bulk_editor/download_template/",{section:n});case r.fm.HISTORY:return(0,i.Z)("/bulk_editor/history/",{section:n,job_started:a});case r.fm.BULK_ID_LIBRARY:return(0,i.Z)("/bulk_editor/bulk_id_library/",{section:n});case r.fm.RESOURCES:return(0,i.Z)("/bulk_editor/resources/",{section:n});default:return"/bulk_editor/"}},experiments:function(e){var t=e.page,n=e.id,o=e.campaigns;switch(t){case r.S9.CREATE:return"/experiments/create/";case r.S9.MANAGE:return"/experiments/manage/";case r.S9.VIEW_REPORT:return"/experiments/manage/".concat(n);case r.S9.AB_TEST_CREATE:return(0,i.Z)("/experiments/ab-test/create",o?{campaigns:o}:void 0);default:return"/experiments/"}},history:function(e){return(0,i.Z)("/history/",e)},shopping:function(e){return y.reporting(f("TEMPORARY_SHOPPING"))},pinterest_tag:function(e){var t=e.page,n=e.subSection,o=e.platform,a=e.source,l=e.origin;switch(t){case r.qp.PINTEREST_EVENTS_OVERVIEW_BEFORE_SETUP:return"/conversions/events-overview/";case r.qp.PINTEREST_EVENT_HISTORY:if(a)return(0,i.Z)("/conversions/event-history/",{source:a});return"/conversions/event-history/";case r.qp.CONVERSION_HEALTH:return"/conversions/health/";case r.qp.PINTEREST_TEST_EVENTS:return(0,i.Z)("/conversions/test-events/",{subPage:n,platform:o});case r.qp.PINTEREST_TAG:return(0,i.Z)("/conversions/tag/",{subPage:n,platform:o});case r.qp.PINTEREST_TAG_MANUAL_SETUP_FLOW:var s=(0,i.Z)("/conversions/tag_manual_setup/",{origin:l});if(o)return(0,i.Z)(s,u(u({},{platform:o}),{source:a}));return s;case r.qp.PINTEREST_TAG_HEALTH:return"/conversions/tag-health/";case r.qp.CONVERSION_UPLOAD:return(0,i.Z)("/conversions/upload/",{subPage:n});case r.qp.UPLOAD_HISTORY:return(0,i.Z)("/conversions/history/",{subPage:n});case r.qp.PCA_UPLOAD_HISTORY:return(0,i.Z)("/conversions/pca_history/",{subPage:n});case r.qp.PCA_UPLOAD:return(0,i.Z)("/conversions/pca_upload/",{subPage:n});case r.qp.CONVERSIONS_API_MANUAL_SETUP_FLOW:if(a||l)return(0,i.Z)("/conversions/api_manual_setup/",u(u({},{source:a}),{origin:l}));return"/conversions/api_manual_setup/";case r.qp.CONVERSIONS_API_PARTNER_SETUP_FLOW:if(a||l)return(0,i.Z)("/conversions/api_partner_setup/",u(u({},{source:a}),{origin:l}));return"/conversions/api_partner_setup/";case r.qp.CONVERSIONS_API_ACCESS_TOKEN:return"/conversions/access_token/";case r.qp.PINTEREST_SETUP_API:return"/conversions/setup-api/";case r.qp.CONVERSIONS_API_DEDUPLICATION:return"/conversions/deduplication/";case r.qp.PAYLOAD_HELPER:return"/conversions/payload-helper/";case r.qp.CONVERSIONS:return"/conversions/";case r.qp.NOCODE_CONVERSIONS_API_SETUP_FLOW:return"/conversions/pinterest_capi_connect/";case r.qp.PINTEREST_EVENT_HISTORY_CAPI_TAB:return"/conversions/event-history/#conversionsAPI";case r.qp.PINTEREST_EVENTS_OVERVIEW_CAPI_TAB:return"/conversions/events-overview/#conversionsAPI";default:return"/conversions/tag/"}},"pin-builder":function(e){return(0,i.Z)("/pin-builder/",e)},purchases:function(){return y.reporting(f("PURCHASE"))},awareness_reserved:function(){return y.reporting(f("IMPRESSION"))},engagement:function(){return y.reporting(f("BILLABLE_ENGAGEMENT"))},videos:function(){return y.reporting(f("TEMPORARY_BIDDED_CPM_VIDEO"))},videos_reserved:function(){return y.reporting(f("TEMPORARY_IMPRESSION_VIDEO"))},videos_cpv:function(){return y.reporting(f("TEMPORARY_MRC_CPV_VIDEO"))},conversions:function(){return y.reporting(f("WEB_CONVERSION"))},accounts_manager:function(){return"/accounts_manager/"},reporting_preferences:function(e){return(0,i.Z)("/reporting/preferences/",e)},report_builder:function(e){return(0,i.Z)("/report-center/builder/",e)},report_history:function(e){return(0,i.Z)("/report-center/history/",e)},report_unsubscribe:function(e){return(0,i.Z)("/report-center/unsubscribe/",e)},report_download:function(e){return(0,i.Z)("/report-center/download/",e)},awareness:function(){return y.reporting(f("AWARENESS"))},traffic:function(){return y.reporting(f("TRAFFIC"))},app_installs:function(){return y.reporting(f("APP_INSTALL"))},catalog_sales:function(){return y.reporting(f("CATALOG_SALES"))},web_conversion:function(){return y.reporting(f("WEB_CONVERSION"))},video_view:function(){return y.reporting(f("VIDEO_VIEW"))},recommendations:function(e){return(0,i.Z)("/recommendations/",e)},catalog_view:function(){return"/product-catalogs/data-source"},campaign_insights:function(e){var t="/campaign-insights/".concat(e.campaignId,"/");if(e.queryParams){var n=e.queryParams,r=n.start_date,i=n.end_date,a=n.comp_start_date,l=n.comp_end_date;t+="?".concat((0,o.XP)({start_date:r,end_date:i,comp_start_date:a,comp_end_date:l}))}return t},product_group_reporting:function(e){return"/campaign-insights/".concat(e.campaignId,"/product-group/").concat(e.productGroupId)},media_planner:function(e){return(0,i.Z)("/media_planner/",e)},ad_spend_optimizer:function(e){return(0,i.Z)("/msot-optimizer/",e)}};t.Z=y},213082:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(681970),o=n(694955),i=n(869273);function a(e,t,n){if(!r.Z[e])throw Error("unknown url key: ".concat(e));n||(n={});var a,l=r.Z[e](n),s=(null==(a=n)?void 0:a.advertiserId)||t||null,c=!!n.absolutify;return"string"==typeof s&&(l="/advertiser/"+s+l),c&&(l=(0,i.Z)(l,void 0,o.KUo)),l}},675899:function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t,n){var o;return(o=function(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!=r(o))return o;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==r(o)?o:o+"")in e)?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}n.d(t,{FO:function(){return u},Fv:function(){return b},HV:function(){return p},LN:function(){return f},Np:function(){return m},Ob:function(){return s},Tc:function(){return c},V$:function(){return y},mE:function(){return h},qE:function(){return g}});var a,l,s={APP_INSTALL:"TEMPORARY_APP_INSTALL_CLICKTHROUGH",APP_TRAFFIC:"TEMPORARY_TRAFFIC_CLICKTHROUGH_APP",AWARENESS:"TEMPORARY_BIDDED_CPM",VIDEO:"TEMPORARY_BIDDED_CPM_VIDEO",TRAFFIC:"CLICKTHROUGH",SHOPPING:"TEMPORARY_SHOPPING",WEB_CONVERSION:"WEB_CONVERSION",APP_INSTALL_V2:"APP_INSTALL_VARIABLE_ATTR",VIDEO_VIEW:"TEMPORARY_MRC_CPV_VIDEO"},c="CONSIDERATION",u="ALL",d=Object.freeze({CONSIDERATION:"CONSIDERATION",TRAFFIC:"TRAFFIC",AWARENESS:"AWARENESS",CATALOG_SALES:"CATALOG_SALES",WEB_CONVERSION:"WEB_CONVERSION",VIDEO_VIEW:"VIDEO_VIEW",VIDEO_COMPLETION:"VIDEO_COMPLETION",WEB_SESSIONS:"WEB_SESSIONS"}),f={TRAFFIC:"TRAFFIC",AWARENESS:"AWARENESS",APP_INSTALL:"APP_INSTALL",WEB_CONVERSION:"WEB_CONVERSION",CATALOG_SALES:"CATALOG_SALES",VIDEO_VIEW:"VIDEO_VIEW",WEB_SESSIONS:"WEB_SESSIONS",VIDEO_COMPLETION:"VIDEO_COMPLETION"};function p(e){return e.reduce(function(e,t){if(t===u||!(t in d))return e;var n=d[t];return[].concat(function(e){if(Array.isArray(e))return i(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return i(e,void 0);var n=({}).toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,void 0):void 0}}(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),[n])},[])}var h={CONSIDERATION:"CONSIDERATION",AWARENESS:"AWARENESS",WEB_CONVERSION:"WEB_CONVERSION",CATALOG_SALES:"CATALOG_SALES",VIDEO_VIEW:"VIDEO_VIEW",WEB_SESSIONS:"WEB_SESSIONS",VIDEO_COMPLETION:"VIDEO_COMPLETION"},y=Object.freeze([h.CATALOG_SALES,h.WEB_CONVERSION,h.CONSIDERATION]),b=(o(a={},f.TRAFFIC,h.CONSIDERATION),o(a,f.AWARENESS,h.AWARENESS),o(a,f.APP_INSTALL,null),o(a,f.WEB_CONVERSION,h.WEB_CONVERSION),o(a,f.CATALOG_SALES,h.CATALOG_SALES),o(a,f.VIDEO_VIEW,h.VIDEO_VIEW),o(a,f.WEB_SESSIONS,h.WEB_SESSIONS),o(a,f.VIDEO_COMPLETION,h.VIDEO_COMPLETION),a),m=(o(l={},f.TRAFFIC,h.CONSIDERATION),o(l,f.AWARENESS,h.AWARENESS),o(l,f.WEB_CONVERSION,h.WEB_CONVERSION),o(l,f.CATALOG_SALES,h.CATALOG_SALES),o(l,f.VIDEO_VIEW,h.VIDEO_VIEW),o(l,f.WEB_SESSIONS,h.WEB_SESSIONS),o(l,f.VIDEO_COMPLETION,h.VIDEO_COMPLETION),l),g=function(e){switch(e){case h.CONSIDERATION:return"CONSIDERATION";case h.AWARENESS:return"AWARENESS";case h.WEB_CONVERSION:return"WEB_CONVERSION";case h.CATALOG_SALES:return"CATALOG_SALES";case h.VIDEO_VIEW:return"VIDEO_VIEW";case h.WEB_SESSIONS:return"WEB_SESSIONS";case h.VIDEO_COMPLETION:return"VIDEO_COMPLETION";default:throw Error("Invalid ObjectiveTypeV4")}}},281218:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r="undefined"!=typeof window&&window.performance&&window.performance.now?function(){return window.performance.now()}:function(){return Date.now()};function o(e){var t=e.window,n=e.duration,o=e.run,i=r(),a=0,l=null,s=function e(){var s=r()-i,c=s-a;if(n===1/0)o(0,s,c);else{var u=s/n;if(u>=1)return void o(1,s,c);o(u,s,c)}a=s,l=t.requestAnimationFrame(e)};return{start:function(){l=t.requestAnimationFrame(s)},cancel:function(){l&&(t.cancelAnimationFrame(l),l=null)}}}},321242:function(e,t,n){"use strict";n.d(t,{C:function(){return o},N:function(){return r}});var r=1050,o=880},89819:function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e){return"object"===r(e)&&null!==e&&"url"in e&&"media"in e}n.d(t,{Z:function(){return o}})},324175:function(e,t,n){"use strict";n.d(t,{O:function(){return o},r:function(){return r}});var r="ref",o="os"},761578:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var r=n(586659);function o(e){return window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}}function i(){return window.innerWidth}function a(){return window.innerHeight}function l(){return null}function s(){var e=(0,r.useSyncExternalStore)(o,a,l),t=(0,r.useSyncExternalStore)(o,i,l);return null!==e&&null!==t?{height:e,width:t}:null}},889838:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(586659),o=n(19585),i=n(382718);function a(){var e=(0,o.ZP)();return(0,i.jsx)(r.Fragment,{children:e._('400 million', 'Business.MauText', 'number of monthly active users on pinterest')})}},654937:function(e,t,n){"use strict";n.d(t,{A5:function(){return i},ZP:function(){return a},kH:function(){return r}});var r={LONG:"long",YEAR:"year",WEEKDAY_DATE:"weekday_date",WEEKDAY_DATE_TIME_TIMEZONE:"weekday_date_time_timezone",SHORT_WEEKDAY_DATE:"short_weekday_date",LONG_MONTH_YEAR:"long_month_year",NUMERIC:"numeric",MONTH_DAY:"month_day",SHORT_MONTH:"short_month",SHORT_MONTH_DAY:"short_month_day",DAY:"day",YEAR_SHORT_MONTH_DAY:"year_short_month_day",YEAR_SHORT_MONTH_DAY_HOUR:"year_short_month_day_hour",YEAR_SHORT_MONTH_DAY_TIME_TIMEZONE:"year_short_month_day_time_timezone",TIME:"time",TIME_TIMEZONE:"time_timezone",HOUR:"hour",TWO_DIGIT:"two_digit",TWO_DIGIT_YEAR:"two_digit_year",NUMERIC_WITH_TIME:"numeric_with_time",NUMERIC_WITH_TIME_TIMEZONE:"numeric_with_time_timezone"},o=function(e){switch(e){case r.YEAR:return{year:"numeric"};case r.LONG:return{year:"numeric",month:"long",day:"numeric"};case r.NUMERIC:return{year:"numeric",month:"numeric",day:"numeric"};case r.TWO_DIGIT:return{year:"numeric",month:"2-digit",day:"2-digit"};case r.TWO_DIGIT_YEAR:return{year:"2-digit",month:"2-digit",day:"2-digit"};case r.WEEKDAY_DATE:return{weekday:"long",month:"long",day:"numeric",year:"numeric"};case r.SHORT_WEEKDAY_DATE:return{weekday:"short",month:"numeric",day:"numeric"};case r.WEEKDAY_DATE_TIME_TIMEZONE:return{weekday:"short",month:"long",day:"numeric",hour:"numeric",minute:"2-digit",timeZoneName:"short"};case r.MONTH_DAY:return{month:"long",day:"numeric"};case r.SHORT_MONTH:return{month:"short"};case r.SHORT_MONTH_DAY:return{month:"short",day:"numeric"};case r.DAY:return{day:"numeric"};case r.LONG_MONTH_YEAR:return{month:"long",year:"numeric"};case r.YEAR_SHORT_MONTH_DAY:return{year:"numeric",month:"short",day:"numeric"};case r.YEAR_SHORT_MONTH_DAY_HOUR:return{month:"short",year:"numeric",day:"numeric",hour:"numeric"};case r.YEAR_SHORT_MONTH_DAY_TIME_TIMEZONE:return{month:"short",year:"numeric",day:"numeric",hour:"numeric",minute:"2-digit",timeZoneName:"short"};case r.TIME:return{hour:"numeric",minute:"2-digit"};case r.TIME_TIMEZONE:return{hour:"numeric",minute:"2-digit",timeZoneName:"short"};case r.HOUR:return{hour:"numeric"};case r.NUMERIC_WITH_TIME:return{year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"2-digit"};case r.NUMERIC_WITH_TIME_TIMEZONE:return{year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"2-digit",timeZoneName:"short"};default:throw Error('invalid dateFormatType "'+e+'"')}};function i(){return -1!==Intl.DateTimeFormat.toString().indexOf("[native code]")}function a(e,t,n){var r=!(arguments.length>3)||void 0===arguments[3]||arguments[3],a=arguments.length>4?arguments[4]:void 0,l=o(n);return r?l.timeZone="UTC":a&&(l.timeZone=a),i()||(l.calendar="gregory"),new Intl.DateTimeFormat(e,l).format(t)}},289032:function(e,t,n){"use strict";function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function o(e,t,n){var o,i,a,l=!!(null!=n&&n.leading),s=(null==n?void 0:n.trailing)!==!1,c=null!=n&&n.maxWait?Math.max(n.maxWait,t):void 0,u=null,d=0;function f(t){var n=o;return o=void 0,d=t,n&&(i=e.apply(void 0,function(e){if(Array.isArray(e))return r(e)}(n)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(n)||function(e,t){if(e){if("string"==typeof e)return r(e,void 0);var n=({}).toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,void 0):void 0}}(n)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())),i}function p(e){var n,r=e-(null!=(n=a)?n:0),o=e-d;return void 0===a||r>=t||r<0||void 0!==c&&o>=c}function h(){var e,n,r,i,l=Date.now();p(l)?(u=null,s&&o)?f(l):o=void 0:u=setTimeout(h,(n=l-(null!=(e=a)?e:0),r=l-d,i=t-n,void 0!==c?Math.min(i,c-r):i))}function y(){null!==u&&clearTimeout(u),u=setTimeout(h,t)}function b(){for(var e=Date.now(),n=p(e),r=arguments.length,s=Array(r),b=0;b<r;b++)s[b]=arguments[b];if(o=s,a=e,n){if(null===u)return d=e,u=setTimeout(h,t),l?f(e):i;else if(void 0!==c)return y(),f(e)}return null===u&&y(),i}return b.flush=function(){if(null!==u&&o){var e=Date.now();return clearTimeout(u),u=null,f(e)}return i},b.cancel=function(){null!==u&&clearTimeout(u),d=0,o=void 0,a=void 0,u=null},b}n.d(t,{Z:function(){return o}})},283383:function(e,t,n){"use strict";n.d(t,{y:function(){return d}});var r=n(586659),o=n(513846),i=n(994345),a=n(382718);function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function c(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(c=function(){return!!e})()}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var d={Pin:"pin",Board:"board",Section:"section",CarouselItem:"carouselitem",Cutout:"cutout",CartingRetailer:"cartingretailer"},f=function(e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");o.prototype=Object.create(e&&e.prototype,{constructor:{value:o,writable:!0,configurable:!0}}),Object.defineProperty(o,"prototype",{writable:!1}),e&&s(o,e);var t,n,r=(t=c(),function(){var e,n=u(o);return e=t?Reflect.construct(n,arguments,u(this).constructor):n.apply(this,arguments),function(e,t){if(t&&("object"==l(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(this,e)});function o(){if(!(this instanceof o))throw TypeError("Cannot call a class as a function");return r.apply(this,arguments)}return n=[{key:"render",value:function(){var e=this,t=this.props,n=t.accessibilityControls,r=t.accessibilitySelected,o=t.children,i=t.connectDragSource,l=t.connectDropTarget,s=t.id,c=t.isDragging,u=t.isDraggingInternal,d=t.isDropTargetOnly,f=t.role,p=l((0,a.jsx)("div",{ref:function(t){e.targetEl=t},"aria-controls":n,"aria-selected":r,id:s,role:f,style:{opacity:c||u?0:1},children:o}));return d?p:i(p)}}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,function(e){var t=function(e,t){if("object"!=l(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=l(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==l(t)?t:t+""}(r.key),r)}}(o.prototype,n),Object.defineProperty(o,"prototype",{writable:!1}),o}(r.Component);t.Z=(0,i.compose)((0,o.DropTarget)(function(e){return e.type},{hover:function(e,t,n){var r=e.index;(0,e.onDragHover)(r,function(e,t){var n=t.targetEl;if(!(n&&n instanceof HTMLElement))return null;var r=e.getClientOffset(),o=r.x,i=r.y,a=n.getBoundingClientRect();return{positionRelativeToCenter:{x:o-(a.left+a.right)/2,y:i-(a.top+a.bottom)/2},boundingBox:{width:a.width,height:a.height}}}(t,n))}},function(e){return{connectDropTarget:e.dropTarget()}}),(0,o.DragSource)(function(e){return e.type},{beginDrag:function(e){var t=e.index;return(0,e.onDragBegin)(t),{index:t}},endDrag:function(e,t){return(0,e.onDragEnd)(t.didDrop())}},function(e,t){return{connectDragSource:e.dragSource(),isDraggingInternal:t.internalMonitor.registry.dragSources.size>0&&t.isDragging()}}))(f)},623873:function(e,t,n){"use strict";var r=n(513846),o=n(994345),i=n(788272);t.Z=function(e){return function(t){return(0,o.compose)(i.Z,(0,r.DropTarget)(e,{},function(e,t){return{connectDropTarget:e.dropTarget(),isDragWithinBounds:t.isOver()}}))(t)}}},13106:function(e,t){"use strict";t.Z=function(e){var t=(null==e?void 0:e.width)||580,n=(null==e?void 0:e.height)||400,r=[window.screen.width,window.screen.height],o=r[0],i=r[1];return["scrollbars=yes","resizable=yes","toolbar=no","location=yes","width=".concat(t),"height=".concat(n),"left=".concat(Math.round((o-t)/2)),"top=".concat(i>n?Math.round((i-n)/2):0)].join(",")}},344678:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(33357),o=n.n(r);function i(e,t){if("undefined"==typeof window)return Promise.resolve(void 0);var n=document.querySelector("#".concat(t));if(n)return Promise.resolve(void 0);(n=document.createElement("style")).setAttribute("id",t),e.filter(function(e){return!!e.fontFaceUrl}).forEach(function(e){n&&e.fontFaceUrl&&n.appendChild(document.createTextNode("@import url('".concat(e.fontFaceUrl,"');")))});var r=document.head;if(!r)return Promise.resolve(void 0);var i=document.createElement("style");i.setAttribute("id","".concat(t,"-font-faces")),r.appendChild(n),r.appendChild(i);var a=[];return e.forEach(function(e){e.styles.forEach(function(t){if(e.format&&t.fontUrl&&i&&i.sheet){var n;i.sheet.insertRule('\n            @font-face {\n              font-family: "'.concat(null!=(n=e.fontFamily)?n:"",'";\n              font-style: "').concat(t.fontStyle,'";\n              font-weight: "').concat(t.fontWeight,'";\n              src: url("').concat(t.fontUrl,'") format("').concat(e.format,'");\n            }'),0)}a.push(new(o())(e.fontFamily,{weight:t.fontWeight,style:t.fontStyle}).load())})}),Promise.all(a)}},625892:function(e,t,n){"use strict";n.d(t,{Z:function(){return b}});var r=n(586659),o=n(20256),i=n(243324),a=n(469191),l=n(19585),s=n(302148),c=n(382718);function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach(function(t){var r,o;r=t,o=n[t],(r=function(e){var t=function(e,t){if("object"!=u(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=u(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==u(t)?t:t+""}(r))in e?Object.defineProperty(e,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[r]=o}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var h={__style:{boxShadow:"0 0 0 2px #efefef inset"}},y=function(e){var t,n=e.value,l=e.id,u=e.customColors,d=e.onChange,f=e.onTransparencyChange,y=e.showExpanded,b=e.showNoFillControl,m=e.showTransparencyControl,g=void 0!==m&&m,v=e.transparencyIndex,_=void 0===v?0:v,x=e.width,j=e.i18n,P=function(e){if(Array.isArray(e))return e}(t=(0,r.useState)(!1))||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,l=[],s=!0,c=!1;try{for(i=(n=n.call(e)).next;!(s=(r=i.call(n)).done)&&(l.push(r.value),2!==l.length);s=!0);}catch(e){c=!0,o=e}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return l}}(t,2)||function(e,t){if(e){if("string"==typeof e)return p(e,2);var n=({}).toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?p(e,2):void 0}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),O=P[0],w=P[1],S=(0,r.useRef)(null),A={__style:{border:n&&"#ffffff"!==n.toLowerCase()?"none":"solid 2px #efefef",borderRadius:"16px 0 0 16px",background:n||"linear-gradient(to bottom right, white 48.5%, #e600234d 48.5%, #e600234d 51.5%, white 51.5%)"}},I=(0,s.Wc)(j._('Color {{colorSelected}}, Color picker dropdown', 'colorPicker.TapArea.accessibilityLabel', 'Open the color picker in a dropdown flyout. colorSelected: the current selected Hex color code, for example: "#FFFFFF".'),{colorSelected:n});return(0,c.jsxs)(o.xu,{"data-test-id":l,width:void 0===x?84:x,children:[(0,c.jsx)(o.iP,{ref:S,accessibilityLabel:I,fullHeight:!0,onTap:function(){w(!O)},rounding:4,children:(0,c.jsxs)(o.xu,{color:"secondary",dangerouslySetInlineStyle:h,display:"flex",height:40,justifyContent:"end",overflow:"hidden",rounding:4,children:[(0,c.jsx)(o.xu,{dangerouslySetInlineStyle:A,flex:"grow",children:n&&g&&1===_&&(0,c.jsx)(a.Z,{})}),(0,c.jsx)(o.xu,{alignItems:"center",color:"secondary","data-test-id":"gestalt-color-picker-icon",display:"flex",flex:"none",justifyContent:"center",width:28,children:(0,c.jsx)(o.JO,{accessibilityLabel:"",color:"default",icon:"arrow-down",size:8})})]})}),O&&(0,c.jsx)(i.ZP,{anchor:S.current,customColors:u,handleDismiss:function(){var e;w(!1),null==(e=S.current)||e.focus()},onColorClick:function(e){d({value:e.value})},onHexColorChange:function(e){d({value:e})},onNoColorFillChange:function(e){d({value:e.checked?"":"#ffffff"})},onTransparencyChange:f,showExpanded:void 0!==y&&y,showNoFillControl:void 0!==b&&b,showTransparencyControl:g,transparencyIndex:_,value:n})]})};function b(e){var t=(0,l.ZP)();return(0,c.jsx)(y,f(f({},e),{},{i18n:t}))}},243324:function(e,t,n){"use strict";n.d(t,{kw:function(){return h},ZP:function(){return b}});var r=n(586659),o=n(20256),i=n(469191),a=n(382718),l={border:0,clipPath:"inset(50%)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"absolute",width:"1px"},s=function(e){var t=e.size,n=e.color,r=e.isSelected,o=e.dataTestId,s=e.name,c=e.onClick,u="color-button-".concat(s,"-").concat(n.replace("#",""));return(0,a.jsxs)("label",{"data-test-id":o,htmlFor:u,style:{display:"inline-block",width:"".concat(t,"px"),height:"".concat(t,"px"),cursor:"pointer",position:"relative"},children:[(0,a.jsx)("input",{checked:r,id:u,name:s,onChange:function(){return c({value:n})},style:l,tabIndex:0,type:"radio",value:n}),(0,a.jsxs)("span",{style:{boxSizing:"border-box",border:"solid 2px ".concat("#F0F0F0"),borderRadius:"50%",backgroundColor:""===n?void 0:n,boxShadow:r?"0 0 0 2px ".concat("#f35e5f"):"none",display:"flex",alignItems:"center",justifyContent:"center",height:"".concat(t,"px"),width:"".concat(t,"px"),outline:"none",padding:0},children:[""===n&&(0,a.jsx)(i.Z,{size:6}),(0,a.jsx)("span",{style:l,children:n})]})]})};function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var u={minWidth:0,flex:1,fontSize:"16px",color:"#333",border:"0px",outline:"none",boxSizing:"border-box",padding:0},d=function(e){var t,n=e.id,i=e.width,l=e.height,s=function(e){if(Array.isArray(e))return e}(t=(0,r.useState)(e.color.toUpperCase()))||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,l=[],s=!0,c=!1;try{for(i=(n=n.call(e)).next;!(s=(r=i.call(n)).done)&&(l.push(r.value),2!==l.length);s=!0);}catch(e){c=!0,o=e}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return l}}(t,2)||function(e,t){if(e){if("string"==typeof e)return c(e,2);var n=({}).toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(e,2):void 0}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),d=s[0],f=s[1],p=(0,r.useRef)(null),h=p.current===document.activeElement?d:e.color.toUpperCase();return(0,a.jsxs)(o.xu,{alignItems:"center",borderStyle:"lg",display:"flex",height:l,paddingX:2,rounding:2,width:i,children:[(0,a.jsx)(o.xv,{color:"subtle",children:"#"}),(0,a.jsx)("input",{ref:p,"data-gestalt-valid-html":"TextArea",id:n,onChange:function(t){var n=e.onChange,r="#"+t.target.value.toUpperCase();r&&/^#([0-9a-f]{0,6})$/i.test(r)&&(f(r),r&&/^#([0-9a-f]{6})$/i.test(r)&&n(r))},style:u,value:h.replace("#","")})]})},f=n(19585),p=["#ffffff","#f15758","#e60023","#e37325","#f8b917","#0ba573","#096a56","#558dca","#0f4d8f","#7c499d","#73295E","#843922","#555555","#000000"],h=["#FFFFFF","#FCE2CF","#F7F2BB","#D8F0A8","#BEF4EE","#DCD4F7","#F9B8F2","#F65E55","#F69855","#F6E955","#79DD3C","#25E4F4","#AA6AFB","#F655C9","#C20000","#B85C00","#807500","#02882A","#0045CC","#8000BD","#97026D","#5E031A","#573700","#363F03","#01564C","#00205C","#370052","#111111"];function y(e){var t=e.colors,n=e.colorSelected,i=e.onChange,l=e.setTestColorId,c=e.title;return(0,a.jsxs)(r.Fragment,{children:[c&&(0,a.jsx)(o.xu,{marginTop:.5,paddingX:1,paddingY:.5,children:(0,a.jsx)(o.X6,{accessibilityLevel:2,size:"100",children:(0,a.jsx)(o.xv,{size:"100",children:c})})}),(0,a.jsx)(o.kC,{alignItems:"stretch",justifyContent:"start",wrap:!0,children:t.map(function(e,t){return(0,a.jsx)(o.xu,{paddingX:1,paddingY:.5,children:(0,a.jsx)(s,{color:e,dataTestId:l(t),isSelected:n.toLowerCase()===e.toLowerCase(),name:"color-picker-button",onClick:i,size:28})},e)})})]})}function b(e){var t=e.showExpanded,n=e.anchor,r=e.handleDismiss,i=e.showNoFillControl,l=e.value,s=e.onNoColorFillChange,c=e.onColorClick,u=e.customColors,b=e.showTransparencyControl,m=e.transparencyIndex,g=e.onTransparencyChange,v=e.onHexColorChange,_=(0,f.ZP)();return(0,a.jsx)(o.J2,{anchor:n,idealDirection:"left",onDismiss:r,size:"md",children:(0,a.jsxs)(o.xu,{"data-test-id":"gestalt-color-picker",direction:"column",display:"flex",justifyContent:"center",paddingY:4,width:"100%",children:[i&&s&&(0,a.jsxs)(o.xu,{marginBottom:4,children:[(0,a.jsxs)(o.xu,{alignItems:"center",direction:"row",display:"flex",marginBottom:3,paddingX:4,children:[(0,a.jsx)(o.XZ,{checked:!l,id:"no-color-fill",name:"no-color-fill",onChange:s,size:"sm"}),(0,a.jsx)(o.__,{htmlFor:"no-color-fill",children:(0,a.jsx)(o.xu,{paddingX:2,children:(0,a.jsx)(o.xv,{size:"200",children:_._('No background fill', 'Don\'t fill any background color', 'Don\'t fill any background color')})})})]}),(0,a.jsx)(o.iz,{})]}),(0,a.jsxs)(o.xu,{paddingX:4,children:[(0,a.jsxs)(o.pg,{legend:_._('Select a color from the palette', 'ColorPickerFlyout.colorRadioGroup', 'Instruction for select a color option from the color radio group.'),legendDisplay:"hidden",children:[u&&u.length>0&&(0,a.jsx)(y,{colors:u,colorSelected:l,onChange:c,setTestColorId:function(e){return"gestalt-palette-".concat(e,"-color-picker-button")},title:_._('Your image colors', 'Colors from the image being added', 'Colors from the image being added')}),(0,a.jsx)(y,{colors:void 0!==t&&t?h:p,colorSelected:l,onChange:c,setTestColorId:function(e){return"gestalt-".concat(e,"-color-picker-button")},title:null!=u&&u.length?_._('More options', 'Default colors', 'Default colors'):void 0})]}),(0,a.jsxs)(o.xu,{alignItems:"center",display:"flex",marginTop:3,children:[(0,a.jsx)(d,{color:l,height:40,onChange:v,width:94}),b&&function(){if(!b||void 0===m||!g)return null;var e=_._('Full opacity', 'Adjust the transparency to opaque,', 'Adjust the transparency to opaque,'),t=_._('Semi-transparent', 'Adjust the transparency to 75%.', 'Adjust the transparency to 75%.'),n=[(0,a.jsx)(o.xu,{"data-group-id":"gestalt-logo-transparency-button","data-test-id":"gestalt-fill-opaque-button",children:(0,a.jsx)(o.u,{text:e,children:(0,a.jsx)(o.JO,{accessibilityLabel:e,color:0===m?"default":"subtle",icon:"fill-opaque",size:20})})}),(0,a.jsx)(o.xu,{"data-group-id":"gestalt-logo-transparency-button","data-test-id":"gestalt-fill-transparent-button",children:(0,a.jsx)(o.u,{text:t,children:(0,a.jsx)(o.JO,{accessibilityLabel:t,color:1===m?"default":"subtle",icon:"fill-transparent",size:20})})})];return(0,a.jsx)(o.xu,{"data-test-id":"gestalt-logo-background-transparency",marginStart:4,children:(0,a.jsx)(o.sY,{items:n,onChange:g,selectedItemIndex:m})})}()]})]})]})})}},469191:function(e,t,n){"use strict";var r=n(382718);t.Z=function(e){var t=e.color,n=void 0===t?"rgba(0, 0, 0, 0.06)":t,o=e.size,i=void 0===o?8:o;return(0,r.jsxs)("svg",{height:"100%",preserveAspectRatio:"none",style:{display:"flex"},version:"1.1",width:"100%",xmlns:"http://www.w3.org/2000/svg",children:[(0,r.jsxs)("pattern",{height:2*i,id:"pattern",patternUnits:"userSpaceOnUse",width:2*i,x:0,y:0,children:[(0,r.jsx)("rect",{fill:n,height:i,width:i,x:0,y:0}),(0,r.jsx)("rect",{fill:n,height:i,width:i,x:i,y:i})]}),(0,r.jsx)("rect",{fill:"url(#pattern)",height:"100%",width:"100%",x:0,y:0})]})}},255191:function(e,t){"use strict";t.Z="M6 5h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1H6a1 1 0 0 1-1-1V6a1 1 0 0 1 1-1zm8 0h5a1 1 0 0 1 1 1v5a1 1 0 0 1-1 1h-5a1 1 0 0 1-1-1V6a1 1 0 0 1 1-1zm0 8h5a1 1 0 0 1 1 1v5a1 1 0 0 1-1 1h-5a1 1 0 0 1-1-1v-5a1 1 0 0 1 1-1z"},638755:function(e,t){"use strict";t.Z="M19 8C18.448 8 18 8.448 18 9V16C18 16.552 18.448 17 19 17H23C23.552 17 24 16.552 24 16V9C24 8.448 23.552 8 23 8H19ZM11 8C10.448 8 10 8.448 10 9V16C10 16.552 10.448 17 11 17H15C15.552 17 16 16.552 16 16V9C16 8.448 15.552 8 15 8H11ZM7 7H1C0.448 7 0 7.448 0 8V17C0 17.552 0.448 18 1 18H7C7.552 18 8 17.552 8 17V8C8 7.448 7.552 7 7 7Z"},334392:function(e,t,n){"use strict";n.d(t,{Cc:function(){return a},G9:function(){return s},VE:function(){return d},Ys:function(){return l},iA:function(){return i},j5:function(){return c},kq:function(){return u}});var r=n(18468),o=n(382718),i=37.8,a=277.1569,l=0,s=1,c=38,u=37.8,d=8;t.ZP=(0,o.jsxs)("svg",{height:316,style:{opacity:1,overflow:"visible",transform:"scale(.95)"},viewBox:"0 0 440 316",width:440,xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",children:[(0,o.jsxs)("defs",{children:[(0,o.jsx)("path",{d:"M15.9508 11.963c-2.2026 0-3.9877 1.7852-3.9877 3.9878 0 2.2025 1.7851 3.9877 3.9877 3.9877 2.2025 0 3.9877-1.7852 3.9877-3.9877 0-2.2026-1.7852-3.9877-3.9877-3.9877m-11.9631 0c2.2025 0 3.9877 1.7851 3.9877 3.9877 0 2.2025-1.7852 3.9877-3.9877 3.9877C1.7852 19.9385 0 18.1533 0 15.9508c0-2.2026 1.7852-3.9877 3.9877-3.9877zm23.9261 0c2.2026 0 3.9877 1.7851 3.9877 3.9877 0 2.2025-1.7851 3.9877-3.9877 3.9877-2.2025 0-3.9876-1.7852-3.9876-3.9877 0-2.2026 1.7851-3.9877 3.9876-3.9877z",id:"a"}),(0,o.jsx)("path",{d:"M8.4456.6691l1.3182 4.3182h4.3945c.8974 0 1.2824 1.153.569 1.705L11.133 9.4709l1.3475 4.4165c.2699.8827-.7398 1.5963-1.4654 1.0349l-3.466-2.6794-3.4659 2.6794c-.7266.5614-1.7363-.1522-1.4664-1.035L3.9653 9.471.37 6.6923c-.7124-.552-.3274-1.705.57-1.705h4.3935L6.6527.6691c.2727-.8921 1.5202-.8921 1.7929 0",id:"b"}),(0,o.jsx)("path",{d:"M8.0882 12.9614c-2.6756 0-4.853-2.1808-4.853-4.8606 0-2.6797 2.1774-4.8605 4.853-4.8605 2.6756 0 4.853 2.1808 4.853 4.8605 0 2.6798-2.1774 4.8606-4.853 4.8606m10.6126 2.3314l-3.444-3.4486c.5848-1.1203.9197-2.3921.9197-3.7434C16.1765 3.6268 12.5554 0 8.0882 0 3.6211 0 0 3.6267 0 8.1008s3.6211 8.1009 8.0882 8.1009c1.3492 0 2.619-.3354 3.7376-.921L15.269 18.73c.948.9494 2.4839.9494 3.4318 0 .948-.9486.948-2.4878 0-3.4372",id:"c"}),(0,o.jsx)("path",{d:"M0 39.5562c0 16.8872 10.5846 31.3054 25.4808 36.9784-.3626-3.0887-.7483-8.1815.0824-11.7548.7153-3.0722 4.6182-19.5737 4.6182-19.5737s-1.1768-2.3569-1.1768-5.8477c0-5.472 3.171-9.5594 7.1234-9.5594 3.3622 0 4.984 2.5217 4.984 5.5444 0 3.3788-2.1525 8.4288-3.2633 13.113-.9263 3.9193 1.9679 7.1167 5.8312 7.1167 6.9982 0 12.381-7.3805 12.381-18.0343 0-9.4308-6.7772-16.0202-16.452-16.0202-11.201 0-17.7772 8.4023-17.7772 17.0882 0 3.3854 1.302 7.0114 2.9305 8.9859.3197.3922.3692.7318.2736 1.1306-.3 1.246-.9659 3.9194-1.0944 4.4666-.1747.7186-.5703.8735-1.3186.524-4.9181-2.2876-7.9903-9.477-7.9903-15.2521 0-12.424 9.022-23.8293 26.0148-23.8293 13.66 0 24.2776 9.7341 24.2776 22.7415 0 13.571-8.554 24.4952-20.434 24.4952-3.992 0-7.74-2.0767-9.0255-4.526 0 0-1.9745 7.5223-2.4525 9.3617-.9295 3.5732-3.5073 8.0958-5.106 10.6637 3.6853 1.134 7.5948 1.7437 11.6493 1.7437 21.8449 0 39.5561-17.7112 39.5561-39.5561C79.1123 17.7112 61.4011 0 39.5562 0 17.7112 0 0 17.7113 0 39.5562",id:"d"})]}),(0,o.jsxs)("g",{fill:"none",fillRule:"evenodd",children:[(0,o.jsx)("path",{d:"M15.12 33.6034c-7.6878 0-13.92 6.2322-13.92 13.92V300.88c0 7.6878 6.2322 13.92 13.92 13.92h409.76c7.6878 0 13.92-6.2322 13.92-13.92V47.5234c0-7.6878-6.2322-13.92-13.92-13.92H15.12z",fill:"#FFF",stroke:"#DEDEDE",strokeWidth:"2.4"}),(0,o.jsxs)("g",{transform:"translate(0 ".concat(4*d+.441,")"),children:[(0,o.jsx)("path",{d:"M15.12 0h409.76C433.2305 0 440 6.7695 440 15.12v48.6067H0V15.12C0 6.7695 6.7695 0 15.12 0z",fill:"#DEDEDE"}),(0,o.jsx)("rect",{fill:"#FFF",height:"38.8841",rx:"19.442",width:"218.9216",x:"15.5858",y:"12.0152"}),(0,o.jsx)("use",{fill:"#FFF",transform:"translate(384.8501 15.6198)",xlinkHref:"#a"}),(0,o.jsx)("use",{fill:"#DEDEDE",transform:"translate(206.2125 24.0304)",xlinkHref:"#b"}),(0,o.jsx)("use",{fill:"#DEDEDE",transform:"translate(26.376 21.6274)",xlinkHref:"#c"})]}),(0,o.jsxs)("g",{fill:"#DEDEDE",children:[(0,o.jsx)("rect",{height:"126.3732",id:"content-morph",width:"230.7843",x:31,y:139}),(0,o.jsx)("rect",{className:"content-bar",height:"14.0415",width:"126.1765",x:"281.4706",y:"139.3346"}),(0,o.jsx)("rect",{className:"content-bar",height:"14.0415",width:"85.1961",x:"281.4706",y:"164.1772"})]}),(0,o.jsx)("ellipse",{cx:38,cy:38,fill:"#FFF",fillOpacity:"0.49",id:"pinterest-logo-pop-bg",rx:c,ry:u}),(0,o.jsxs)("g",{id:"pinterest-logo",transform:"translate(".concat(a,") scale(").concat(s,")"),children:[(0,o.jsx)("ellipse",{cx:"37.8",cy:"37.8479",fill:"#FFF",rx:i,ry:i}),(0,o.jsxs)("g",{transform:"translate(0 .0493)",children:[(0,o.jsx)("mask",{fill:"#fff",id:"e",children:(0,o.jsx)("use",{xlinkHref:"#d"})}),(0,o.jsx)("g",{fill:r.$rz,mask:"url(#e)",children:(0,o.jsx)("rect",{height:"80.1649",width:"80.1649"})})]})]})]})]})},932603:function(e,t,n){"use strict";var r=n(382718);t.Z=(0,r.jsx)("svg",{height:100,viewBox:"0 0 24 24",width:100,xmlns:"http://www.w3.org/2000/svg",children:(0,r.jsx)("path",{d:"M6 1.75l6 3.844-6 3.844 6 3.844-6 3.844-6-3.844 6-3.844-6-3.844L6 1.75zm12 0l6 3.844-6 3.844-6-3.844 6-3.844zm-6 11.532l6-3.844 6 3.844-6 3.844-6-3.844zm-6 5.124l6-3.843 6 3.843-6 3.844-6-3.844z",fill:"#0061FF"})})},603583:function(e,t,n){"use strict";var r=n(382718);t.Z=(0,r.jsx)("svg",{height:"10",viewBox:"3 3 18 18",width:"14",xmlns:"http://www.w3.org/2000/svg",children:(0,r.jsx)("path",{d:"M20.571 8.573h-3.428V12h1.714v1.715h-1.714v3.428h-1.714V6.86h5.142v1.714zM12 17.144V6.86h1.714v10.285H12zm-1.714-8.571H5.143v6.857H8.57v-1.714H6.857V12h3.429v5.143H3.429V6.86h6.857v1.714zM5.143 3.43A5.143 5.143 0 0 0 0 8.573v6.857a5.143 5.143 0 0 0 5.143 5.143h13.714A5.143 5.143 0 0 0 24 15.43V8.573a5.143 5.143 0 0 0-5.143-5.143H5.143z",fill:"#333"})})},515085:function(e,t,n){"use strict";function r(e){var t=e.userAgent.isMobile?"mobile":"desktop";return"".concat(t,".").concat(e.country,".").concat(e.userAgent.platform,".").concat(e.userAgent.browserName).replace(/ /g,"_")}n.d(t,{Z:function(){return r}})},949270:function(e,t,n){"use strict";function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function o(e){if(!e)return"";var t,n,o,i=(null!=(n=(null!=(t=e.split("?")[0])?t:"").split("#")[0])?n:"").split("/"),a=i[i.length-1];if(!a)return"";var l=a.lastIndexOf("."),s=(function(e){if(Array.isArray(e))return e}(o=(l>0?a.slice(0,l):a).split("--"))||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,l=[],s=!0,c=!1;try{for(i=(n=n.call(e)).next;!(s=(r=i.call(n)).done)&&(l.push(r.value),1!==l.length);s=!0);}catch(e){c=!0,o=e}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return l}}(o,1)||function(e,t){if(e){if("string"==typeof e)return r(e,1);var n=({}).toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,1):void 0}}(o,1)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())[0];return null!=s?s:""}n.d(t,{Z:function(){return o}})},27152:function(e,t,n){"use strict";function r(e,t,n,r,o,i,a){try{var l=e[i](a),s=l.value}catch(e){return void n(e)}l.done?t(s):Promise.resolve(s).then(r,o)}function o(e){return function(){var t=this,n=arguments;return new Promise(function(o,i){var a=e.apply(t,n);function l(e){r(a,o,i,l,s,"next",e)}function s(e){r(a,o,i,l,s,"throw",e)}l(void 0)})}}function i(){return(i=o(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(e,n){var r=document.createElement("img");r.onerror=function(){return n(Error("Image failed to load with src ".concat(t)))},r.onload=function(){return e(!0)},r.src=t}));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function a(e){return l.apply(this,arguments)}function l(){return(l=o(regeneratorRuntime.mark(function e(t){var n,r,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(t,{method:"HEAD"});case 3:return n=e.sent,e.next=6,n.blob();case 6:r=e.sent.type.startsWith("image/"),e.next=12;break;case 12:return e.next=14,function(e){return i.apply(this,arguments)}(t);case 14:return o=e.sent,e.abrupt("return",r&&o);case 16:e.next=21;break;case 18:return e.prev=18,e.t0=e.catch(0),e.abrupt("return",!1);case 21:case"end":return e.stop()}},e,null,[[0,18]])}))).apply(this,arguments)}n.d(t,{Z:function(){return a}})},55543:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(603316);function o(e,t){return new Promise(function(n,o){if(document.querySelector('script[src="'.concat(e,'"]'))){var i=0;if("FACEBOOK"===t)if(window.FB)n();else var a=setInterval(function(){window.FB||20===i?(clearInterval(a),n()):(i+=1,(0,r.nP)("mweb.loadScript.facebook.tries_".concat(i),{sampleRate:.01}))},100);else if("GSI"===t)if(window.google)n();else var l=setInterval(function(){window.google||20===i?(clearInterval(l),n()):(i+=1,(0,r.nP)("mweb.loadScript.gsi.tries_".concat(i),{sampleRate:.01}))},100);else n()}else{var s=document.createElement("script");s.src=e,s.async=!0,s.addEventListener("load",function(){return n()}),s.addEventListener("error",o),document.getElementsByTagName("head")[0].appendChild(s)}})}},951908:function(e,t,n){"use strict";n.d(t,{i:function(){return a},x:function(){return l}});var r=n(2420);function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t,n){var r;return(r=function(e,t){if("object"!=o(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=o(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==o(r)?r:r+"")in e)?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var a=["shopping_rec_disabled","featureMap","comments_disabled","allow_mentions","messaging_permissions","opt_in_private_account","ads_customize_from_conversion","personalize_from_offsite_browsing","third_party_marketing_tracking_enabled","ccpa_opted_out","third_party_ads_personalization","video_rec_enabled"];function l(e){var t,n=e.apiErrorCode,o=e.onShowMessage,a=e.onPassCodeRequired,l=e.onPassCodeSkipConfirmation;n&&((i(t={},r.RR,o),i(t,r.mX,a),i(t,r.q6,l),t)[n]||o)()}},400737:function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function i(e,t){return(i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function a(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function l(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(l=function(){return!!e})()}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t,n){return(t=u(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u(e){var t=function(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!=r(o))return o;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==r(t)?t:t+""}n.d(t,{Z:function(){return d}});var d=function(e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");f.prototype=Object.create(e&&e.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),Object.defineProperty(f,"prototype",{writable:!1}),e&&i(f,e);var t,n,d=(t=l(),function(){var e,n=s(f);return e=t?Reflect.construct(n,arguments,s(this).constructor):n.apply(this,arguments),function(e,t){if(t&&("object"==r(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return a(e)}(this,e)});function f(e){var t;if(!(this instanceof f))throw TypeError("Cannot call a class as a function");return c(a(t=d.call(this,e)),"onImageLoad",function(e){t.mounted&&("number"==typeof e.width&&"number"==typeof e.height&&e.width>119&&e.height>119?t.setState(function(t){var n;return{loadedItems:[].concat(function(e){if(Array.isArray(e))return o(e)}(n=t.loadedItems)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(n)||function(e,t){if(e){if("string"==typeof e)return o(e,void 0);var n=({}).toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(e,void 0):void 0}}(n)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),[e])}}):t.setState(function(e){return{errors:e.errors+1}}))}),c(a(t),"onImageError",function(){t.mounted&&t.setState(function(e){return{errors:e.errors+1}})}),c(a(t),"mounted",!1),c(a(t),"loadImages",function(e){var n=new Image;n.onload=function(){return t.onImageLoad({height:n.naturalHeight,url:e,width:n.naturalWidth})},n.onerror=function(){return t.onImageError()},n.src=e}),t.state={errors:0,loadedItems:[]},t}return n=[{key:"componentDidMount",value:function(){this.mounted=!0;var e=this.props.url;this.loadImages(e||"")}},{key:"componentWillUnmount",value:function(){this.mounted=!1}},{key:"render",value:function(){return(0,this.props.children)({image:this.state.loadedItems})}}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,u(r.key),r)}}(f.prototype,n),Object.defineProperty(f,"prototype",{writable:!1}),f}(n(586659).Component)},162931:function(e,t,n){"use strict";n.d(t,{ZP:function(){return g}});var r=n(586659),o=n(19585),i=n(886981),a=n(382718);function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach(function(t){y(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function d(e,t){return(d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function f(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(p=function(){return!!e})()}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function y(e,t,n){return(t=b(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function b(e){var t=function(e,t){if("object"!=l(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=l(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==l(t)?t:t+""}var m=function(e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");o.prototype=Object.create(e&&e.prototype,{constructor:{value:o,writable:!0,configurable:!0}}),Object.defineProperty(o,"prototype",{writable:!1}),e&&d(o,e);var t,n,r=(t=p(),function(){var e,n=h(o);return e=t?Reflect.construct(n,arguments,h(this).constructor):n.apply(this,arguments),function(e,t){if(t&&("object"==l(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return f(e)}(this,e)});function o(e){var t;if(!(this instanceof o))throw TypeError("Cannot call a class as a function");return y(f(t=r.call(this,e)),"onImageLoad",function(e){t.mounted&&("number"==typeof e.width&&"number"==typeof e.height&&e.width>119&&e.height>119?t.setState(function(t){var n;return{loadedItems:[].concat(function(e){if(Array.isArray(e))return u(e)}(n=t.loadedItems)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(n)||function(e,t){if(e){if("string"==typeof e)return u(e,void 0);var n=({}).toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(e,void 0):void 0}}(n)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),[e])}}):t.setState(function(e){return{errors:e.errors+1}}))}),y(f(t),"onImageError",function(){t.mounted&&t.setState(function(e){return{errors:e.errors+1}})}),y(f(t),"mounted",!1),y(f(t),"loadImages",function(e){e.forEach(function(e){var n=new Image;n.onload=function(){return t.onImageLoad({height:n.naturalHeight,url:e.url,width:n.naturalWidth})},n.onerror=function(){return t.onImageError()},n.src=e.url})}),t.state={errors:0,loadedItems:[]},t}return n=[{key:"componentDidMount",value:function(){this.mounted=!0;var e=(this.props.images.data||{}).items;this.loadImages(e||[])}},{key:"componentDidUpdate",value:function(e){var t=e.images,n=t.data,r=t.error,o=e.url,i=this.props,a=i.onError,l=i.images,s=l.isLoaded,c=l.data,u=l.error,d=i.url;if(!r&&u&&a&&a(),o!==d&&this.setState({loadedItems:[]}),s&&c){var f=(n||{}).items,p=((c||{}).items||[]).slice((f||[]).length);this.loadImages(p)}}},{key:"componentWillUnmount",value:function(){this.mounted=!1}},{key:"render",value:function(){var e=this.props,t=e.children,n=e.images,r=n.data,o=n.error,i=n.isLoaded,a=e.url,l=r||{},s=l.items,c=l.title,u=this.state,d=u.errors,f=u.loadedItems,p=o?o.message_detail||o.message:this.props.i18n._('No images found. Check your URL and try again.', 'No images are found at the URL submitted', 'No images are found at the URL submitted'),h=i&&0===f.length&&d===(s||[]).length&&a?p:void 0;return h&&a.includes("?")&&(h=this.props.i18n._('No images found. Remove any tracking parameters in this URL to try again.', 'No images are found at the URL submitted. The url may contain tracking parameters', 'No images are found at the URL submitted. The url may contain tracking parameters')),t({loading:!i||0===f.length&&d!==(s||[]).length,title:c,error:h,images:f})}}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,b(r.key),r)}}(o.prototype,n),Object.defineProperty(o,"prototype",{writable:!1}),o}(r.Component);function g(e){var t,n,r,l=(0,o.ZP)(),s=(n=(t={url:e.url,source:e.source}).url,r=t.source,(0,i.Z)({name:"FindPinImagesResource",options:{url:n,source:r||"pin_create",appendItems:!1,followRedirects:!0,scrapeMetric:"www_url_scrape"}}));return(0,a.jsx)(m,c(c({},e),{},{i18n:l,images:s}))}},640785:function(e,t,n){"use strict";n.d(t,{NC:function(){return i},Rc:function(){return l},WK:function(){return c},X9:function(){return o},b9:function(){return r},f9:function(){return s},gu:function(){return a}});var r="pin-builder-font-faces",o="system-font-faces",i="pin-builder-education-font-faces",a="licensed",l="system",s="brand",c=4},114767:function(e,t,n){"use strict";n.d(t,{$D:function(){return u},CP:function(){return c},KV:function(){return d},Wt:function(){return l},a2:function(){return p},bs:function(){return h},j1:function(){return s},vK:function(){return f}});var r=n(344678),o=n(640785);function i(e){return function(e){if(Array.isArray(e))return a(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return a(e,void 0);var n=({}).toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(e,void 0):void 0}}(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var l=[{fontGroup:o.gu,fontFamily:"A-FRAME",defaultStyle:0,format:"truetype",fontOverrides:{letterSpacing:0,lineHeight:.9,textTransform:!0},styles:[{name:"Black",fontStyle:"",fontWeight:"normal",fontUrl:"https://s.pinimg.com/font/Graphik XCond-Black.otf"}]},{fontGroup:o.gu,fontFamily:"Cross-stitch",defaultStyle:0,format:"truetype",fontOverrides:{letterSpacing:0,lineHeight:1,textTransform:!1},styles:[{name:"Black",fontStyle:"normal",fontWeight:"normal",fontUrl:"https://s.pinimg.com/font/Produkt-Medium.otf"}]},{fontGroup:o.gu,fontFamily:"Lagoon",defaultStyle:0,format:"truetype",fontOverrides:{letterSpacing:0,lineHeight:.9,textTransform:!1},styles:[{name:"Black",fontStyle:"",fontWeight:"normal",fontUrl:"https://s.pinimg.com/font/Gabriello-Black.otf"}]},{fontGroup:o.gu,fontFamily:"Lava lamp",defaultStyle:0,format:"truetype",fontOverrides:{letterSpacing:0,lineHeight:.9,textTransform:!1},styles:[{name:"Black",fontStyle:"",fontWeight:"normal",fontUrl:"https://s.pinimg.com/font/Publico Banner-Ultra Italic.otf"}]},{fontGroup:o.gu,fontFamily:"Marathon",defaultStyle:0,format:"truetype",fontOverrides:{letterSpacing:0,lineHeight:1,textTransform:!1},styles:[{name:"Black",fontStyle:"",fontWeight:"normal",fontUrl:"https://s.pinimg.com/font/Produkt-Super Italic.otf"}]},{fontGroup:o.gu,fontFamily:"Sourdough",defaultStyle:0,format:"truetype",fontOverrides:{letterSpacing:0,lineHeight:.9,textTransform:!1},styles:[{name:"Black",fontStyle:"",fontWeight:"normal",fontUrl:"https://s.pinimg.com/font/Publico Banner-Bold.otf"}]},{fontGroup:o.gu,fontFamily:"Superglue",format:"truetype",fontOverrides:{letterSpacing:0,lineHeight:.9,textTransform:!1},defaultStyle:0,styles:[{name:"Bold Italic",fontStyle:"",fontWeight:"normal",fontUrl:"https://s.pinimg.com/font/Graphik-Bold+Italic.otf"}]},{fontGroup:o.Rc,fontFamily:"Merriweather",fontFaceUrl:"https://fonts.googleapis.com/css?family=Merriweather:700",fontOverrides:{letterSpacing:0,lineHeight:1.2,textTransform:!1},defaultStyle:0,styles:[{name:"Bold Italic",fontStyle:"italic",fontWeight:"700"}]},{fontGroup:o.gu,fontFamily:"Noto Serif SC",fontFaceUrl:"https://fonts.googleapis.com/css?family=Noto+Serif+SC:400&display=swap&subset=chinese-simplified",fontOverrides:{letterSpacing:0,lineHeight:1,textTransform:!1},defaultStyle:0,styles:[{name:"Regular",fontStyle:"",fontWeight:"400"}],localeFilter:"zh-CN"},{fontGroup:o.gu,fontFamily:"Noto Sans SC",fontFaceUrl:"https://fonts.googleapis.com/css?family=Noto+Sans+SC:400&display=swap&subset=chinese-simplified",fontOverrides:{letterSpacing:0,lineHeight:1,textTransform:!1},defaultStyle:0,styles:[{name:"Regular",fontStyle:"",fontWeight:"400"}],localeFilter:"zh-CN"},{fontGroup:o.gu,fontFamily:"Noto Serif TC",fontFaceUrl:"https://fonts.googleapis.com/css?family=Noto+Serif+TC:400&display=swap&subset=chinese-traditional",fontOverrides:{letterSpacing:0,lineHeight:1,textTransform:!1},defaultStyle:0,styles:[{name:"Regular",fontStyle:"",fontWeight:"400"}],localeFilter:"zh-TW"},{fontGroup:o.gu,fontFamily:"Noto Sans TC",fontFaceUrl:"https://fonts.googleapis.com/css?family=Noto+Sans+TC:400&display=swap&subset=chinese-traditional",fontOverrides:{letterSpacing:0,lineHeight:1,textTransform:!1},defaultStyle:0,styles:[{name:"Regular",fontStyle:"",fontWeight:"400"}],localeFilter:"zh-TW"},{fontGroup:o.gu,fontFamily:"Noto Serif KR",fontFaceUrl:"https://fonts.googleapis.com/css?family=Noto+Serif+KR:400&display=swap&subset=korean",fontOverrides:{letterSpacing:0,lineHeight:1,textTransform:!1},defaultStyle:0,styles:[{name:"Regular",fontStyle:"",fontWeight:"400"}],localeFilter:"ko-KR"},{fontGroup:o.gu,fontFamily:"Noto Sans KR",fontFaceUrl:"https://fonts.googleapis.com/css?family=Noto+Sans+KR:400&display=swap&subset=korean",fontOverrides:{letterSpacing:0,lineHeight:1,textTransform:!1},defaultStyle:0,styles:[{name:"Regular",fontStyle:"",fontWeight:"400"}],localeFilter:"ko-KR"},{fontGroup:o.gu,fontFamily:"Noto Serif JP",fontFaceUrl:"https://fonts.googleapis.com/css?family=Noto+Serif+JP:400&display=swap&subset=japanese",fontOverrides:{letterSpacing:0,lineHeight:1,textTransform:!1},defaultStyle:0,styles:[{name:"Regular",fontStyle:"",fontWeight:"400"}],localeFilter:"ja"},{fontGroup:o.gu,fontFamily:"Noto Sans JP",fontFaceUrl:"https://fonts.googleapis.com/css?family=Noto+Sans+JP:400&display=swap&subset=japanese",fontOverrides:{letterSpacing:0,lineHeight:1,textTransform:!1},defaultStyle:0,styles:[{name:"Regular",fontStyle:"",fontWeight:"400"}],localeFilter:"ja"},{fontGroup:o.gu,fontFamily:"Noto Serif",fontFaceUrl:"https://fonts.googleapis.com/css?family=Noto+Serif:400&display=swap",fontOverrides:{letterSpacing:0,lineHeight:1,textTransform:!1},defaultStyle:0,styles:[{name:"Regular",fontStyle:"",fontWeight:"400"}],localeFilter:"hi-IN"},{fontGroup:o.gu,fontFamily:"Noto Sans",fontFaceUrl:"https://fonts.googleapis.com/css?family=Noto+Sans:400&display=swap",fontOverrides:{letterSpacing:0,lineHeight:1,textTransform:!1},defaultStyle:0,styles:[{name:"Regular",fontStyle:"",fontWeight:"400"}],localeFilter:"hi-IN"},{fontGroup:o.Rc,fontFamily:"Playfair Display",fontFaceUrl:"https://fonts.googleapis.com/css?family=Playfair+Display:400",fontOverrides:{letterSpacing:0,lineHeight:1.2,textTransform:!1},defaultStyle:0,styles:[{name:"Regular",fontStyle:"",fontWeight:"400"}]},{fontGroup:o.Rc,fontFamily:"Raleway",fontFaceUrl:"https://fonts.googleapis.com/css?family=Raleway:900",fontOverrides:{letterSpacing:0,lineHeight:1.2,textTransform:!1},defaultStyle:0,styles:[{name:"Black",fontStyle:"",fontWeight:"900"}]},{fontGroup:o.Rc,fontFamily:"Roboto Condensed",fontFaceUrl:"https://fonts.googleapis.com/css?family=Roboto+Condensed:700i",fontOverrides:{letterSpacing:0,lineHeight:1.2,textTransform:!1},defaultStyle:0,styles:[{name:"Bold Italic",fontStyle:"italic",fontWeight:"700"}]},{fontGroup:o.Rc,fontFamily:"Suez One",fontFaceUrl:"https://fonts.googleapis.com/css?family=Suez+One&display=swap",fontOverrides:{letterSpacing:0,lineHeight:.9,textTransform:!1},defaultStyle:0,styles:[{name:"Regular",fontStyle:"",fontWeight:"400"}]},{fontGroup:o.Rc,fontFamily:"Domine",fontFaceUrl:"https://fonts.googleapis.com/css?family=Domine&display=swap",fontOverrides:{letterSpacing:0,lineHeight:1,textTransform:!1},defaultStyle:0,styles:[{name:"Regular",fontStyle:"",fontWeight:"400"}]},{fontGroup:o.Rc,fontFamily:"Overlock",fontFaceUrl:"https://fonts.googleapis.com/css?family=Overlock:900i&display=swap",fontOverrides:{letterSpacing:-1,lineHeight:1,textTransform:!1},defaultStyle:0,styles:[{name:"Black Italic",fontStyle:"",fontWeight:"400"}]},{fontGroup:o.Rc,fontFamily:"Satisfy",fontFaceUrl:"https://fonts.googleapis.com/css?family=Satisfy&display=swap",fontOverrides:{letterSpacing:0,lineHeight:1,textTransform:!1},defaultStyle:0,styles:[{name:"Regular",fontStyle:"",fontWeight:"400"}]}];function s(){return l}function c(e,t,n){var r=e.styles.find(function(e){return e.fontStyle===t&&e.fontWeight===n});return r?r.name:""}function u(e,t){return e.reduce(function(e,t){return[].concat(i(e),i(t.fonts))},[]).find(function(e){return e.fontFamily===t})||null}function d(e){return(0,r.Z)(e,o.b9)}function f(){return(0,r.Z)(l,o.X9)}function p(){return(0,r.Z)([l[o.WK]],o.NC)}function h(e){var t=function(e){if(e){var t=l.findIndex(function(t){return t.localeFilter===e});if(t>=0)return l[t]}return l[6]}(e),n=t.defaultStyle,r=t.styles[n],i=t.fontFamily,a=t.fontOverrides,s=a&&a.textTransform?1:0,c=a&&a.lineHeight||1.2,u=a&&a.letterSpacing||0;return{fontGroupName:o.gu,fontFamilyName:null!=i?i:"",fontStyleName:r.name,fontWeight:r.fontWeight,fontSize:50,textColor:"#FFFFFF",marginIndex:1,alignmentIndex:1,positionIndex:2,backgroundColor:"",backgroundTransparencyIndex:0,lineHeight:c,letterSpacing:u,transformIndex:s,showMoreOptions:!1}}},600222:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(526435);function o(e){return r.hH[e]}},656442:function(e,t,n){"use strict";function r(e){var t=e.lastIndexOf("."),n=e.toLocaleLowerCase();return n.substr(t).includes("gif")||n.startsWith("data:image/gif")}function o(e){if("localVideo"===e.type)return"localVideo";if("localImage"===e.type)return"image/gif"===(e.fileSrc&&e.fileSrc.type)?"gif":null;if("webImage"===e.type)return r(e.src)?"gif":null;if("dropboxFile"===e.type)return r(e.name)?"gif":null;if("pin"===e.type){var t=e.images;if(e.videos)return"localVideo";if(null!=t&&t.orig&&t.orig.url&&r(t.orig.url))return"gif"}return null}n.d(t,{Z:function(){return o}})},500388:function(e,t,n){"use strict";n.d(t,{PG:function(){return o},Sl:function(){return i},nx:function(){return a},rt:function(){return s}});var r=n(526435);function o(e){return e.width>=r.FM&&e.height>=r.Mn}function i(e){return!!e&&("localImage"===e.type||"webImage"===e.type||"assetImage"===e.type)}function a(e,t){var n,r,o="number"==typeof e?e:null!=(n=e.width)?n:0,i="number"==typeof e?null!=t?t:0:null!=(r=e.height)?r:0;if(o<=0||i<=0)return!1;var a=o/i;return a>=1&&a<=16/9}var l={STATIC:["TRAFFIC","CONSIDERATION","AWARENESS","WEB_CONVERSION","WEB_SESSIONS"],CAROUSEL:["TRAFFIC","CONSIDERATION","AWARENESS","WEB_CONVERSION","WEB_SESSIONS"],VIDEO:["TRAFFIC","CONSIDERATION","AWARENESS","WEB_CONVERSION","VIDEO_VIEW","WEB_SESSIONS","VIDEO_COMPLETION"],COLLECTIONS:["TRAFFIC","CONSIDERATION","AWARENESS","WEB_CONVERSION","WEB_SESSIONS"]};function s(e,t){return!!e&&!!t&&(l[e]||[]).includes(t)}},571045:function(e,t,n){"use strict";function r(e){var t=[];return e.items?Array.from(e.items).forEach(function(e){if("file"===e.kind){var n=e.getAsFile();n&&t.push(n)}}):t.concat(Array.from(e.files)),t}n.d(t,{Z:function(){return r}})},811860:function(e,t,n){"use strict";n.d(t,{J:function(){return x}});var r,o=n(697063),i=n(13106),a=n(515085),l=n(177119),s=n(324845),c=n(694955),u=n(941404);function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach(function(t){h(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function h(e,t,n){return(t=y(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function y(e){var t=function(e,t){if("object"!=d(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=d(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==d(t)?t:t+""}function b(e,t,n,r,o,i,a){try{var l=e[i](a),s=l.value}catch(e){return void n(e)}l.done?t(s):Promise.resolve(s).then(r,o)}function m(){var e;return e=regeneratorRuntime.mark(function e(t,n){var r,o,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,s.Px)(void 0,n||void 0);case 2:(i=null==(r=window.google)||null==(o=r.accounts)?void 0:o.oauth2)&&i.initCodeClient({client_id:c.v3o,scope:"https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile",ux_mode:"popup",callback:t}).requestCode();case 4:case"end":return e.stop()}},e)}),(m=function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){b(i,r,o,a,l,"next",e)}function l(e){b(i,r,o,a,l,"throw",e)}a(void 0)})}).apply(this,arguments)}var g=Object.freeze({}),v=function(e){var t=e.network;if(r&&(clearInterval(r),r=void 0),g[t]){var n=g,o=n[t],i=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if(({}).hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],-1===t.indexOf(n)&&({}).propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(n,[t].map(y)),a=o||{},l=a.error,s=a.success,c=a.complete;g=p({},i),"error"===e.type?null==l||l(Object.freeze({message:"Please do not close the window when claiming your account!"})):null==s||s("facebook"===e.network?{id:e.profile.id}:{one_time_code:e.one_time_code,redirect_uri:e.redirect_uri}),null==c||c()}},_=function(e){var t=window.innerHeight-100;switch(e){case"dropbox":return"width=600,height=800";case"instagram":return(0,i.Z)({width:720,height:t});case"etsy":return(0,i.Z)({width:580,height:775});case"youtube":return(0,i.Z)({width:605,height:640});default:return(0,i.Z)()}},x=function(e){var t=e.i18n,n=e.network,i=e.callbacks,s=e.requestContext;if(i=p({error:function(){},complete:function(){}},i),(0,u.My)("auth_web.social_connect.".concat(n,".").concat((0,a.Z)(s))),"gplus"===n||"google"===n)(0,u.My)("auth_web.social_connect.google.migration"),function(e,t){m.apply(this,arguments)}(function(e){i.success({one_time_code:e.code,redirect_uri:"postmessage"})},s.language);else if("line"===n){var c=s.locale;(0,l.Z)(c,i)}else{var d=window.open("/connect/"+n+"/","",_(n));if(!d){o.Z.showError(t._('You must enable popups!', ' - ', ' -- ')),i.error&&i.error(Object.freeze({}));return}r&&clearInterval(r),r=window.setInterval(function(){try{d.closed&&(clearInterval(r),r=void 0,i.complete&&i.complete(!0))}catch(e){}},500),g=p(p({},g),{},h({},n,i))}},j=function(e){var t=window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:"");if(e.origin===t){var n=e.data;if(n&&"social-connect-complete"===n.type){var r=e.data;r.network&&v(r)}}};"BroadcastChannel"in window?new BroadcastChannel("social_channel").onmessage=j:window.addEventListener("message",j)},261449:function(e,t,n){"use strict";n.d(t,{k:function(){return y}});var r=n(586659),o=n(581722),i=n(575108),a=n(657043),l=n(686319),s=n(821342),c=n(46641),u=n(811860),d=n(15667),f=n(72918);function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var h=function(){var e;function t(e){var n=e.invalidateResource,r=e.requestContext,o=e.viewer;if(!(this instanceof t))throw TypeError("Cannot call a class as a function");this.getUserId=function(){return o.isAuth?o.id:""},this.getUsername=function(){return o.isAuth?o.username:""},this.isLimitedLogin=function(){return o.isLimitedLogin},this.invalidateResource=n,this.requestContext=r}return e=[{key:"handleConnect",value:function(e,t,n,r,o){var s=this,d=function(t){("connect"===t.type?(0,c.Z)({network:e,data:t.data,requestContext:s.requestContext,forceGoogle:null!=o&&o}):(0,l.Z)({url:"/v3/connect/".concat(e,"/"),method:"DELETE"})).then(function(e){var t,r={user_id:s.getUserId(),username:s.getUsername(),field_set_key:"social_connect"};s.invalidateResource("UserResource",r),i.Z.create("UserResource",r).callGet(),null==(t=n.success)||t.call(n,e)},function(e){if(e&&"object"===p(e)){var t,r,o;null==(t=n.error)||t.call(n,{api_error_code:(0,a.Z)(e,"api_error_code"),code:(0,a.Z)(e,"code"),message:null!=(r=(0,a.Z)(e,"message"))?r:"",data:null!=(o=(0,a.Z)(e,"data"))?o:{}})}}).finally(function(){var e;null==(e=n.complete)||e.call(n)})};t?this.isLimitedLogin()?d({type:"connect"}):(0,u.J)({network:e,callbacks:{success:function(e){return d({type:"connect",data:e})},error:n.error,complete:n.complete},i18n:r,requestContext:this.requestContext}):d({type:"disconnect"})}}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,function(e){var t=function(e,t){if("object"!=p(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=p(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==p(t)?t:t+""}(r.key),r)}}(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}();function y(){var e=(0,o.I0)(),t=(0,d.B)(),n=(0,s.Z)();return(0,r.useMemo)(function(){return new h({invalidateResource:function(t,n){return e((0,f.jB)(t,n))},requestContext:t,viewer:n})},[e,t,n])}},177119:function(e,t,n){"use strict";n.d(t,{Z:function(){return y}});var r=n(255581),o=n(111330),i=n(464332),a=n(753143),l=n(694955),s=n(378888),c=n(403135);function u(e,t,n,r,o,i,a){try{var l=e[i](a),s=l.value}catch(e){return void n(e)}l.done?t(s):Promise.resolve(s).then(r,o)}var d="undefined"!=typeof window,f=d?"".concat(window.location.origin,"/oauth/line/redirect"):"",p=function(e){var t=e.origin,n=e.data;return n&&t===window.location.origin?String(n):null},h=function(e){var t=e.url,n=e.key;if(!t.startsWith(window.location.origin)||n!==o.MM)return null;var r=(0,a.M0)().getItem(o.MM);return(0,a.M0)().removeItem(o.MM),r};function y(e,t){if(!d){null==(a=t.error)||a.call(t,{message:"Window is undefined"});return}var n,o,a,y,b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5,t="abcdefghijklmnopqrstuvwxyz1234567890";return Array(e).fill("").map(function(){return t[Math.floor(Math.random()*t.length)]}).join("")}(10),m=(n=regeneratorRuntime.mark(function e(n){var o,a,l,u,d,g,v,_,x,j,P;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n.isTrusted){e.next=2;break}return e.abrupt("return");case 2:if(o=n instanceof MessageEvent?p(n):h(n),!((a=(0,s.mB)(o)).state&&a.code&&a.state===b)){e.next=28;break}return null==(l=t.fetching)||l.call(t),y&&!y.closed&&y.close(),e.prev=7,e.next=10,fetch("/oauth/line/verify",{headers:{"Content-type":"application/x-www-form-urlencoded; charset=UTF-8","x-csrftoken":"".concat(String(i.U2(r.fS)))},method:"POST",body:(0,c.Z)({code:a.code,redirect_uri:f})});case 10:return u=e.sent,e.next=13,u.json();case 13:g=(d=e.sent).id_token,v=d.access_token,g&&v?t.success({line_id_token:g,line_access_token:v}):null==(_=t.error)||_.call(t,{message:"No tokens returned"}),e.next=22;break;case 18:e.prev=18,e.t0=e.catch(7),j=e.t0,null==(x=t.error)||x.call(t,j);case 22:return e.prev=22,y&&!y.closed&&y.close(),window.removeEventListener("message",m),window.removeEventListener("storage",m),null==(P=t.complete)||P.call(t),e.finish(22);case 28:case"end":return e.stop()}},e,null,[[7,18,22,28]])}),o=function(){var e=this,t=arguments;return new Promise(function(r,o){var i=n.apply(e,t);function a(e){u(i,r,o,a,l,"next",e)}function l(e){u(i,r,o,a,l,"throw",e)}a(void 0)})},function(e){return o.apply(this,arguments)});window.addEventListener("message",m),window.addEventListener("storage",m),y=window.open("https://access.line.me/oauth2/v2.1/authorize?response_type=code"+"&client_id=".concat(l.zal)+"&redirect_uri=".concat(encodeURIComponent(f))+"&state=".concat(b)+"&ui_locales=".concat(e)+"&scope=profile%20openid%20email","_blank")}},640452:function(e,t,n){"use strict";var r=n(575108);t.Z=function(e){return r.Z.create("UserPasswordResource",e).callUpdate({showError:!1})}},46641:function(e,t,n){"use strict";n.d(t,{Z:function(){return u},t:function(){return d}});var r=n(575108),o=n(686319);function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach(function(t){var r,o;r=t,o=n[t],(r=function(e){var t=function(e,t){if("object"!=i(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=i(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==i(t)?t:t+""}(r))in e?Object.defineProperty(e,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[r]=o}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var s=["etsy","facebook","microsoft","twitter","google","instagram","youtube","dropbox"],c=function(e,t,n,r){var o;switch(e){case"facebook":var i=n.facebookToken;o=t?{facebook_id:t.id,facebook_token:i}:Object.freeze({});break;case"gplus":o=t?{one_time_code:t.one_time_code,redirect_uri:t.redirect_uri||void 0}:Object.freeze({}),r&&(o=l(l({},o),{},{force:!0}));break;case"line":o=t?{line_id_token:t.line_id_token,line_access_token:t.line_access_token}:Object.freeze({});break;default:o=Object.freeze({})}return o};function u(e){var t=e.network,n=e.data,i=e.requestContext,a=e.forceGoogle;if(s.includes(t))return r.Z.create("UserSocialNetworkResource",{network:t,data:n}).callCreate();var l="/v3/connect/".concat(t,"/"),u=c(t,n,i,a);return(0,o.Z)({url:l,method:"PUT",data:u})}function d(e){switch(e){case"facebook":return 68;case"gplus":return 208;case"line":return 12277;default:return}}},324845:function(e,t,n){"use strict";n.d(t,{Fm:function(){return a},OY:function(){return s},PL:function(){return u},Px:function(){return l},mK:function(){return d},ru:function(){return c}});var r=n(55543),o=n(694955),i=n(941404),a=function(){var e,t,n;return null==(e=window)||null==(t=e.google)||null==(n=t.accounts)?void 0:n.id},l=function(e,t){return(0,r.Z)("https://accounts.google.com/gsi/client"+(t?"?hl=".concat(t):""),null!=e&&e.unsafe?null:"GSI")},s=function(e,t){var n,r=e.autoSelect,i=e.useContinueForContext,l=e.useFedCMForButton,s={auto_select:null!=r&&r,button_auto_select:null!=l&&l,client_id:o.v3o,callback:t,cancel_on_tap_outside:!1,context:i?"continue":"use",itp_support:!0,use_fedcm_for_prompt:!0,use_fedcm_for_button:null!=l&&l};null==(n=a())||n.initialize(s)},c=function(e){var t=e.buttonRef,n=e.isDesktop,r=e.locale,o=e.logo_alignment,l=e.onClick,s=e.onTouch,c=a();if(c&&t.current){var u=t.current.offsetWidth;c.renderButton(t.current,{locale:r,size:"large",shape:"rectangular",text:"continue_with",theme:"outline",width:u+"px",logo_alignment:o,click_listener:function(){l&&l(),s&&s(),(0,i.EX)({event:"start",provider:"google"})}})}else(0,i.My)((n?"unauth_web":"unauth_mweb")+".gsi_button.not_initialized")},u=function(e){return"auto"===e||"fedcm_auto"===e?"AUTO_LOGIN":e.startsWith("btn")||e.startsWith("fedcm_button")?"SIGN_IN_WITH_GOOGLE_BUTTON":"ONE_TAP_PROMPT"},d=function(e){switch(e){case"SIGN_IN_WITH_GOOGLE_BUTTON":return"gsi_btn";case"ONE_TAP_PROMPT":return"onetap_btn";default:return"other"}}},594414:function(e,t,n){"use strict";n.d(t,{A:function(){return s},Z:function(){return c}});var r=n(586659),o=n(20256),i=n(382718);function a(e){return function(e){if(Array.isArray(e))return l(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return l(e,void 0);var n=({}).toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?l(e,void 0):void 0}}(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var s=function(e){var t=e.fill,n="half"===t?(0,i.jsxs)(r.Fragment,{children:[(0,i.jsx)(o.xu,{position:"absolute",children:(0,i.jsx)(o.JO,{accessibilityLabel:"","aria-hidden":!0,color:"default",icon:"star-half",size:15})}),(0,i.jsx)(o.JO,{accessibilityLabel:"",color:"subtle",icon:"star",size:15})]}):(0,i.jsx)(o.JO,{accessibilityLabel:"","aria-hidden":!0,color:"full"===t?"default":"subtle",icon:"star",size:15});return(0,i.jsx)(o.xu,{dangerouslySetInlineStyle:{__style:{marginRight:"".concat(3,"px")}},"data-test-id":"rating-star-".concat(t),display:"inlineBlock",children:n})};function c(e){var t,n=e.max_rating,r=e.rating,l=e.display;if(!r)return null;var c=[],u=parseFloat(n)||5,d=5*(t=(t=parseFloat(r)||0)<=u?t:u)/u;if(Number.isNaN(d))return null;var f=Math.floor(d),p=d-f;return a(Array(f).keys()).forEach(function(e){return c.push((0,i.jsx)(s,{fill:"full"},e))}),p>=.75?c.push((0,i.jsx)(s,{fill:"full"},c.length)):p>=.25&&c.push((0,i.jsx)(s,{fill:"half"},c.length)),a(Array(5-c.length).keys()).forEach(function(){return c.push((0,i.jsx)(s,{fill:"empty"},c.length))}),(0,i.jsx)(o.xu,{"aria-label":"Rating ".concat(String(d)," stars out of 5"),"data-test-id":"rating-stars",display:l?"flex":"inlineBlock",position:"relative",role:"img",width:18*u,children:c})}},636208:function(e,t,n){"use strict";function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function o(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;if(-1===t||-1===n||t===n)return e;var i=n+o,a=t+o;if(i<0||i>=e.length||a<0||a>=e.length)return e;for(var l=function(e){if(Array.isArray(e))return r(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return r(e,void 0);var n=({}).toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,void 0):void 0}}(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),s=l[a],c=a<i?1:-1,u=a;u!==i;u+=c)l[u]=e[u+c];return l[i]=s,l}n.d(t,{Z:function(){return o}})},166282:function(e,t,n){"use strict";n.d(t,{Z:function(){return u}});var r=n(281218);function o(e){var t=e.scrollPosition,n=e.containerSize,r=e.contentSize,o=e.intendedDistance,i=e.extendToEdgeDistance,a=void 0===i?0:i,l=r-n,s=o;return s=Math.max(s=Math.min(s,l-t),-t),o>0&&l-(t+s)<=a?s=l-t:o<0&&t+s<=a&&(s=-t),s}function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach(function(t){var r,o;r=t,o=n[t],(r=function(e){var t=function(e,t){if("object"!=i(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=i(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==i(t)?t:t+""}(r))in e?Object.defineProperty(e,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[r]=o}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var s={easingFunction:"ease-in-out",extendToEdgeDistanceX:0,extendToEdgeDistanceY:0,scrollSpeedPxPerMs:1.2,minScrollDuration:200},c={linear:function(e){return e},"ease-in":function(e){return e*e},"ease-out":function(e){return e*(2-e)},"ease-in-out":function(e){return e<.5?2*e*e:-1+(4-2*e)*e}};function u(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=l(l({},s),i),u=e.scrollLeft,d=e.scrollTop,f=e.scrollWidth,p=e.scrollHeight,h=e.clientWidth,y=e.clientHeight,b=o({scrollPosition:u,containerSize:h,contentSize:f,intendedDistance:t,extendToEdgeDistance:a.extendToEdgeDistanceX}),m=o({scrollPosition:d,containerSize:y,contentSize:p,intendedDistance:n,extendToEdgeDistance:a.extendToEdgeDistanceY}),g=Math.max(Math.abs(Math.floor(b/a.scrollSpeedPxPerMs)),Math.abs(Math.floor(m/a.scrollSpeedPxPerMs)));a.minScrollDuration&&(g=Math.max(g,a.minScrollDuration));var v=c[a.easingFunction]||c["ease-in-out"];return(0,r.Z)({window:window,duration:g,run:function(t){e.scrollLeft=u+b*v(t),e.scrollTop=d+m*v(t),1===t&&a.onAnimationComplete&&setTimeout(a.onAnimationComplete,0)}})}},607001:function(e,t,n){"use strict";var r=n(417162),o=n(929915);function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}t.Z=function(){var e=(0,r.g)(),t=(0,o.l)();return function(n){var r,o=n.mobileOptions,l=n.desktopOptions,s=n.reason,c=n.attributionLabel,u=n.pinId,d=n.savePinImageUrl;e?e.showDesktopSignupModal(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach(function(t){var r,o;r=t,o=n[t],(r=function(e){var t=function(e,t){if("object"!=i(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=i(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==i(t)?t:t+""}(r))in e?Object.defineProperty(e,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[r]=o}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({signupFlow:(null==l?void 0:l.modalType)==="login"?{type:"login"}:{type:"signup"},reason:s,attributionLabel:c,savePinId:u,savePinImageUrl:d},null==l?void 0:l.modalOptions)):t&&t.showMobileSignupModal({reason:s,attributionLabel:c,headingType:null!=(r=null==o?void 0:o.headingType)?r:"none",pinId:u,savePinImageUrl:d})}}},724084:function(e,t,n){"use strict";n.d(t,{RC:function(){return h},Hx:function(){return y},Wr:function(){return p}});var r=n(586659),o=n(729434),i=n(496406),a=n(914071),l=n(382718);function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var c=function(){return Promise.resolve().then(n.bind(n,496406))},u=(0,o.Z)("IdeaPinVideoPlayer"),d=u.Provider,f=u.get;function p(e){var t,n=e.children,o=function(e){if(Array.isArray(e))return e}(t=(0,a.Z)(c,i.initialState))||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,l=[],s=!0,c=!1;try{for(i=(n=n.call(e)).next;!(s=(r=i.call(n)).done)&&(l.push(r.value),2!==l.length);s=!0);}catch(e){c=!0,o=e}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return l}}(t,2)||function(e,t){if(e){if("string"==typeof e)return s(e,2);var n=({}).toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(e,2):void 0}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),u=o[0],f=o[1],p=(0,r.useMemo)(function(){return{dispatch:f,ideaPinVideoPlayerControls:u}},[f,u]);return(0,l.jsx)(d,{value:p,children:n})}function h(){var e=f().dispatch;return(0,r.useMemo)(function(){return{updateSeekTime:function(t,n){e({type:"UPDATE_SEEK_TIME",payload:{seekTime:t,pinId:n||""}})},clearSeekTime:function(t){e({type:"CLEAR_SEEK_TIME",payload:{seekTime:void 0,pinId:t||""}})}}},[e])}function y(){return f().ideaPinVideoPlayerControls}},496406:function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach(function(t){a(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function a(e,t,n){var o;return(o=function(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!=r(o))return o;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==r(o)?o:o+"")in e)?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.r(t),n.d(t,{default:function(){return s},initialState:function(){return l}});var l={seekTimes:{},currentProgressInfo:{currentTime:0,duration:0}};function s(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"UPDATE_SEEK_TIME":return i(i({},e),{},{seekTimes:i(i({},e.seekTimes),{},a({},t.payload.pinId,t.payload.seekTime))});case"CLEAR_SEEK_TIME":return i(i({},e),{},{seekTimes:{}});default:return e}}},123317:function(e,t,n){"use strict";n.d(t,{Cc:function(){return b},DL:function(){return f},Gf:function(){return v},LX:function(){return l},Lc:function(){return _},Ls:function(){return m},Rf:function(){return d},YL:function(){return u},ap:function(){return s},h8:function(){return h},pE:function(){return p},s5:function(){return g},tQ:function(){return y},yR:function(){return c}});var r=n(20256);function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach(function(t){var r,i;r=t,i=n[t],(r=function(e){var t=function(e,t){if("object"!=o(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=o(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==o(t)?t:t+""}(r))in e?Object.defineProperty(e,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[r]=i}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var l={w:9,h:16},s=l.w/l.h,c=8,u=10,d=5e3,f=2e3;function p(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return{x:(null!=e?e:24)/5,y:(null!=e?e:24)*(t-1)}}var h={COMMENT_REPLY_STICKER:"story_pin_comment_reply_block",GENERIC_STICKER:"story_pin_generic_interactive_sticker_block",HEADING:"story_pin_heading_block",IMAGE:"story_pin_image_block",INGREDIENT:"story_pin_ingredient_block",LINK:"story_pin_link_block",MENTION_STICKER:"story_pin_mention_sticker_block",MUSIC:"story_pin_music_block",PARAGRAPH:"story_pin_paragraph_block",PRODUCT_STICKER:"story_pin_product_sticker_block",SUPPLY:"story_pin_supply_block",VIDEO:"story_pin_video_block",VTO_MAKEUP_STICKER:"story_pin_virtual_try_on_makeup_sticker_block"},y=[h.IMAGE,h.VIDEO],b=a(a({},{alignment:1,hex_color:"#111111",highlight_color:"#FFFFFF",vertical_alignment:1}),{},{font:{default_size:28,id:"1",key:"Graphik-Regular.otf",letter_spacing:-.4,line_height:1.25,name:"Teaspoon",url:"https://s.pinimg.com/story_pins/fonts/Graphik-Regular.otf"},font_size:28}),m=new r.Ry(1),g=new r.H3([m]),v=new r.H3([g]),_=function(e){var t=Math.floor(e||0),n=Math.floor(t/60),r=t-60*n;return"".concat(n<10?"".concat(n):n,":").concat(r<10?"0".concat(r):r)}},656013:function(e,t,n){"use strict";n.d(t,{Z:function(){return h}});var r=n(586659),o=n(18468),i=n(382718);function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function s(e,t){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function c(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(u=function(){return!!e})()}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t,n){return(t=p(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function p(e){var t=function(e,t){if("object"!=a(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=a(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==a(t)?t:t+""}var h=function(e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");o.prototype=Object.create(e&&e.prototype,{constructor:{value:o,writable:!0,configurable:!0}}),Object.defineProperty(o,"prototype",{writable:!1}),e&&s(o,e);var t,n,r=(t=u(),function(){var e,n=d(o);return e=t?Reflect.construct(n,arguments,d(this).constructor):n.apply(this,arguments),function(e,t){if(t&&("object"==a(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return c(e)}(this,e)});function o(){var e;if(!(this instanceof o))throw TypeError("Cannot call a class as a function");for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];return f(c(e=r.call.apply(r,[this].concat(n))),"handleKeyPress",function(t){var n=e.props.onClick;n&&(32===t.charCode||13===t.charCode)&&(t.preventDefault(),n())}),e}return n=[{key:"render",value:function(){var e=this.props,t=e.selected,n=e.rounded,r=e.color,o=e.onClick,a=e.children,s=e.style,c=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach(function(t){f(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({cursor:o?"pointer":"default",borderRadius:n?"8px":0,boxShadow:t?"0 0 0 2px ".concat(r):"none",outline:"none"},s);return(0,i.jsx)("div",{onClick:o,onKeyPress:this.handleKeyPress,role:"button",style:c,tabIndex:0,children:a})}}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,p(r.key),r)}}(o.prototype,n),Object.defineProperty(o,"prototype",{writable:!1}),o}(r.Component);f(h,"defaultProps",{selected:!1,rounded:!0,color:o.$rz})},253374:function(e,t,n){"use strict";n.d(t,{Z:function(){return p}});var r=n(20256),o=n(865540),i=n(255191),a=n(603583),l=n(19585),s=n(594414),c=n(886981),u=n(382718);function d(e){var t=e.pinId,n=(0,l.ZP)(),i=(0,o.Z)(),a=(0,c.Z)({name:"PinResource",options:{id:t,field_set_key:"detailed"}}).data,s=a&&a.story_pin_data?a.story_pin_data.page_count:null;return(0,u.jsxs)(r.kC,{alignItems:"center",height:20,justifyContent:"start",children:[(0,u.jsx)(r.JO,{accessibilityLabel:i?n._('Pin Icon', 'legacyPinTypeIdentifier.ideaPinAccessibilityLabel.sce', 'Icon indicating this Pin was created with expressive tools (fka Idea Pins)'):n._('Idea Pin Icon', 'legacyPinTypeIdentifier.ideaPinAccessibilityLabel', 'Icon indicating this Pin is an Idea Pin'),color:"default",icon:"idea-pin",size:12}),s&&(0,u.jsx)(r.xu,{marginStart:1,children:(0,u.jsx)(r.xv,{inline:!0,size:"100",weight:"bold",children:s})})]})}var f=function(e){var t=e.icon,n=e.i18n,r=e.ideaPinRenamingEnabled;switch(t){case"arrow-up-right":return n._('Promoted Pin', 'Icon indicating this Pin is promoted', 'Icon indicating this Pin is promoted');case"play":return n._('Video Pin', 'Icon indicating this Pin is a video', 'Icon indicating this Pin is a video');case"gif":return n._('GIF Pin', 'Icon indicating this Pin is a GIF', 'Icon indicating this Pin is a GIF');case"tag":return n._('Product Pin', 'Icon indicating this Pin is a product', 'Icon indicating this Pin is a product');case"star":return n._('Recipe Pin', 'Icon indicating this Pin is a recipe', 'Icon indicating this Pin is a recipe');case"story-pin":return r?n._('Pin', 'legacyPinTypeIdentifier.getLabel.ideaPinLabel.sce', 'Icon indicating this Pin was created with expressive tools (fka Idea Pins)'):n._('Idea Pin', 'legacyPinTypeIdentifier.getLabel.ideaPinLabel', 'Icon indicating this Pin is an Idea Pin');case"collage":return n._('Collage Pin', 'Icon indicating this Pin is a collage', 'Icon indicating this Pin is a collage');default:return""}};function p(e){var t,n=e.max_rating,c=e.icon,p=e.text,h=e.rating,y=e.pinId,b=(0,l.ZP)(),m=(0,o.Z)();if(c)switch(c){case"star":t=(0,u.jsx)(s.Z,{max_rating:n,rating:h||""});break;case"gif":t=a.Z;break;case"story-pin":t=(0,u.jsx)(d,{pinId:y||""});break;default:t=(0,u.jsx)(r.xu,{alignItems:"center",display:"flex",marginEnd:1,children:(0,u.jsx)(r.JO,{accessibilityLabel:f({icon:c,i18n:b,ideaPinRenamingEnabled:m}),color:"default",dangerouslySetSvgPath:"collage"===c?{__path:i.Z}:void 0,icon:"collage"===c?void 0:c,inline:!0,size:10})})}return(0,u.jsxs)(r.kC,{alignItems:"center",justifyContent:"start",children:[t,p&&(0,u.jsx)(r.xu,{marginStart:1,children:(0,u.jsx)(r.xv,{inline:!0,size:"200",children:p.trim().substring(0,25)})})]})}},96101:function(e,t){"use strict";t.Z=function(){return window.location.pathname}},938287:function(e,t,n){"use strict";var r=n(510928);t.Z=function(e){var t=e.url;if(t){var n=t.split("?");if(n[1])return(0,r.Z)(n[1])}return(0,r.Z)()}},43454:function(e,t){"use strict";t.Z=function(e){var t=e.url;return new RegExp(/http(s?):/).test(t)?t:"http://"+t}},914071:function(e,t,n){"use strict";n.d(t,{Z:function(){return l}});var r=n(586659);function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,l=[],s=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);s=!0);}catch(e){c=!0,o=e}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return l}}(e,t)||i(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){if(e){if("string"==typeof e)return a(e,t);var n=({}).toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(e,t):void 0}}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function l(e,t){var n=(0,r.useRef)([]),l=o((0,r.useState)(),2),s=l[0],c=l[1],u=o((0,r.useReducer)(null!=s?s:function(){return t},t),2),d=u[0],f=u[1],p=(0,r.useCallback)(function(t){if(s)f(t);else{var r;n.current.length||e().then(function(e){c(function(){return e.default})}),n.current=[].concat(function(e){if(Array.isArray(e))return a(e)}(r=n.current)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(r)||i(r)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),[t])}},[e,s]);return(0,r.useEffect)(function(){s&&(n.current.forEach(f),n.current=[])},[s]),[d,p]}},7525:function(e,t,n){"use strict";n.d(t,{Z:function(){return l}});var r=n(586659),o=n(27152);function i(e,t,n,r,o,i,a){try{var l=e[i](a),s=l.value}catch(e){return void n(e)}l.done?t(s):Promise.resolve(s).then(r,o)}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function l(e){var t,n=function(e){if(Array.isArray(e))return e}(t=(0,r.useState)(null))||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,l=[],s=!0,c=!1;try{for(i=(n=n.call(e)).next;!(s=(r=i.call(n)).done)&&(l.push(r.value),2!==l.length);s=!0);}catch(e){c=!0,o=e}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return l}}(t,2)||function(e,t){if(e){if("string"==typeof e)return a(e,2);var n=({}).toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(e,2):void 0}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),l=n[0],s=n[1];return(0,r.useEffect)(function(){function t(){var n;return n=regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,o.Z)(e);case 2:s(t.sent);case 4:case"end":return t.stop()}},t)}),(t=function(){var e=this,t=arguments;return new Promise(function(r,o){var a=n.apply(e,t);function l(e){i(a,r,o,l,s,"next",e)}function s(e){i(a,r,o,l,s,"throw",e)}l(void 0)})}).apply(this,arguments)}!function(){t.apply(this,arguments)}()},[e]),l}},46568:function(e,t,n){"use strict";var r=n(586659),o=n(899196),i=n(20256),a=n(521009),l=n(821342),s=n(369416),c=n(675973),u=n(15667),d=n(400963),f=n(237711),p=n(651097),h=n(239728),y=n(104659),b=n(601686),m=n(995449),g=n(382718),v=["clientTrackingParams","component","durationNs","element","objectId","pairId","viewData","view","viewParameter"];function _(e,t){return(_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function x(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function j(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(j=function(){return!!e})()}function P(e){return(P=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function O(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function w(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?O(Object(n),!0).forEach(function(t){S(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function S(e,t,n){return(t=A(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function A(e){var t=function(e,t){if("object"!=I(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=I(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==I(t)?t:t+""}function I(e){return(I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var E=function(e){return"string"==typeof e?e:Array.isArray(e)?e[0].src?[w(w({},e[0]),{},{src:e[0].src})]:e:e},C=function(e){var t=e.split("/"),n=t[t.length-1];return(null==n?void 0:n.split(".")[0])||void 0},D=function(e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");a.prototype=Object.create(e&&e.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),Object.defineProperty(a,"prototype",{writable:!1}),e&&_(a,e);var t,n,r=(t=j(),function(){var e,n=P(a);return e=t?Reflect.construct(n,arguments,P(this).constructor):n.apply(this,arguments),function(e,t){if(t&&("object"==I(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return x(e)}(this,e)});function a(){var e;if(!(this instanceof a))throw TypeError("Cannot call a class as a function");for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];return S(x(e=r.call.apply(r,[this].concat(n))),"state",{canPlayVideo:!1,isManifestParsed:!1,playbackState:h.Cy.DEFAULT,videoStartTime:e.props.seekTime||0}),S(x(e),"errorRetryCount",1),S(x(e),"firstFragBuffered",!1),S(x(e),"hasPlaybackStarted",!1),S(x(e),"hasVideoSessionStarted",!1),S(x(e),"hasVideoSessionEnded",!1),S(x(e),"hls",null),S(x(e),"fragStartupTime",{}),S(x(e),"lastLevelSwitchKbps",null),S(x(e),"lastStallTime",null),S(x(e),"lastPauseTime",null),S(x(e),"logSessionStartOnNextPlay",!1),S(x(e),"playerId",""),S(x(e),"videoSessionId",""),S(x(e),"videoVisibleTime",null),S(x(e),"playbackPerformance",{canPlayTime:null,detailedErrors:"",downloadedKiloBytes:0,errorCode:0,errorName:"",errorReason:"",hasFatalError:!1,loadStartTime:null,numberOfStalls:0,numberOfSeeks:0,playbackStartTimestamp:null,segments:[],srcString:"string"==typeof e.props.src?e.props.src:e.props.src&&e.props.src.length>0?e.props.src[0].src:"",totalStallDurationMs:0,totalPauseDurationMs:0,userAgent:e.props.userAgent,videoCreatedTime:null,webBrowser:e.props.webBrowser,webBrowserVersion:e.props.webBrowserVersion}),S(x(e),"initializeHls",function(){e.destroyHls();var t=e.props,n=t.src,r=t.hlsConfig,i=new o.ZP(r),a=E(n);i.loadSource(a),e.videoPlayerRef&&i.attachMedia(e.videoPlayerRef.video),i.on(o.ZP.Events.FRAG_BUFFERED,e.handleHlsFragBuffered),i.on(o.ZP.Events.FRAG_CHANGED,e.handleHlsFragChanged),i.on(o.ZP.Events.FRAG_LOADING,e.handleHlsFragLoading),i.on(o.ZP.Events.FRAG_LOADED,e.handleHlsFragLoaded),i.on(o.ZP.Events.MANIFEST_PARSED,function(){e.setState({isManifestParsed:!0})}),i.on(o.ZP.Events.LEVEL_SWITCHED,e.handleHlsLevelSwitched),i.on(o.ZP.Events.ERROR,e.handleHlsError),e.hls=i}),S(x(e),"destroyHls",function(){var t=x(e).hls;t&&t.destroy()}),S(x(e),"addSegment",function(t){var n=e.playbackPerformance.segments,r=n&&n[n.length-1];if(e.hls&&n.length&&r&&r.uri!==t.url){e.updateWatchDurationForCurrentSegment();var o=e.videoPlayerRef&&e.videoPlayerRef.video,i=e.hls&&e.hls.levels||{},a="number"==typeof t.level?i[t.level]:{},l=e.fragStartupTime[t.url],s=-1;l&&l.startLoadTime&&l.endLoadTime&&(s=l.endLoadTime-l.startLoadTime);var c={indicatedKbps:a.bitrate/h.bR,duration:t.duration,level:t.level,lastStartPlayTime:e.getCurrentVideoTime(),numServerAddressChange:-1,observedKbps:e.hls&&e.hls.bandwidthEstimate/h.bR||-1,playbackStartDate:Date.now(),serverAddress:"",sn:t.sn,sourceWidth:a.width,sourceHeight:a.height,startupTimeMs:s,switchBitrateKbps:e.lastLevelSwitchKbps||-1,uri:t.url,viewportWidth:o&&o.clientWidth||-1,viewportHeight:o&&o.clientHeight||-1,watchedDurationMs:0};n.push(c)}}),S(x(e),"initializeSegments",function(t){var n=e.props.contextLogData,r=(void 0===n?{}:n).is_closeup_video,o=e.playbackPerformance.segments;if(!o.length){if(!e.hls||!e.videoPlayerRef||!e.videoPlayerRef.video||!t)return void(0,p.tE)("initializeSegmentsFailed",!0,void 0!==r&&r);if(!o.length&&"number"==typeof t.level){var i=e.videoPlayerRef&&e.videoPlayerRef.video,a=e.hls.levels,l="number"==typeof t.level?a[t.level]:{},s=e.fragStartupTime[t.url],c=-1;s&&s.startLoadTime&&s.endLoadTime&&(c=s.endLoadTime-s.startLoadTime),e.lastLevelSwitchKbps=e.hls.bandwidthEstimate/h.bR;var u={indicatedKbps:l.bitrate/h.bR,duration:t.duration,level:t.level,lastStartPlayTime:null,numServerAddressChange:-1,observedKbps:e.hls.bandwidthEstimate/h.bR||-1,playbackStartDate:null,serverAddress:"",sn:t.sn,sourceWidth:l.width,sourceHeight:l.height,startupTimeMs:c,switchBitrateKbps:e.lastLevelSwitchKbps||-1,uri:t.url,viewportWidth:i.clientWidth,viewportHeight:i.clientHeight,watchedDurationMs:0};o.push(u)}}}),S(x(e),"getCurrentVideoTime",function(){return e.videoPlayerRef&&e.videoPlayerRef.video?e.videoPlayerRef.video.currentTime*h.gJ:null}),S(x(e),"handleCanPlayVideo",function(t){var n=e.props,r=n.contextLogData,o=n.onReady,i=n.playing,a=(void 0===r?{}:r).is_closeup_video,l=e.state.canPlayVideo;(0,p.tE)("handleCanPlayVideo",!0,void 0!==a&&a,{firstCanPlayEvent:!l,playing:i}),e.playbackPerformance.hasFatalError=!1,l||(e.playbackPerformance.canPlayTime=new Date),e.setState({canPlayVideo:!0}),o&&o(t)}),S(x(e),"handleEnded",function(t){var n=e.props,r=n.loop,o=n.onEnded,i=e.playbackPerformance.segments,a=i&&i[i.length-1];r&&e.videoPlayerRef&&e.videoPlayerRef.video?(e.updateWatchDurationForCurrentSegment(),a&&(a.lastStartPlayTime=0),e.fragStartupTime={}):r||e.logPlaybackPerformance(h.$f,{initiator:"videoEnded",loop:r}),e.setState({playbackState:h.Cy.ENDED}),o&&o(t)}),S(x(e),"handleHlsError",function(t,n){var r=e.props.contextLogData,i=(void 0===r?{}:r).is_closeup_video;if(e.playbackPerformance.detailedErrors=(null==(l=n.err)?void 0:l.message)||"unknown",n.fatal){e.playbackPerformance.hasFatalError=!0,e.playbackPerformance.errorName=n.type,e.playbackPerformance.errorReason=n.details,e.playbackPerformance.errorCode=n.response&&n.response.code?n.response.code:0;var a={errorName:n.type,errorReason:n.details,errorRetryCount:e.errorRetryCount,errorMessage:(null==(c=n.err)||null==(u=c.message)?void 0:u.slice(0,50))||"unknown",errorResponse:(null==(d=n.response)||null==(f=d.text)?void 0:f.slice(0,50))||"unknown",playbackState:e.state.playbackState};if((0,p.tE)("fatalError",!0,void 0!==i&&i,a),e.errorRetryCount>0)switch(e.errorRetryCount-=1,n.type){case o.ZP.ErrorTypes.NETWORK_ERROR:if(n.details===o.ZP.ErrorDetails.MANIFEST_LOAD_ERROR||n.details===o.ZP.ErrorDetails.MANIFEST_LOAD_TIMEOUT||n.details===o.ZP.ErrorDetails.MANIFEST_LOAD_PARSING_ERROR){var l,s,c,u,d,f,y,b,m=E(e.props.src);null==(b=e.hls)||b.loadSource(m)}else null==(y=e.hls)||y.startLoad();break;case o.ZP.ErrorTypes.MEDIA_ERROR:null==(s=e.hls)||s.recoverMediaError()}}e.updateWatchDurationForCurrentSegment(),e.setState({playbackState:h.Cy.FAILED})}),S(x(e),"handleHlsFragBuffered",function(t,n){e.firstFragBuffered||(e.initializeSegments(n.frag),e.firstFragBuffered=!0)}),S(x(e),"handleHlsFragChanged",function(t,n){e.addSegment(n.frag)}),S(x(e),"handleHlsFragLoading",function(t,n){var r,o=null==(r=n.frag)?void 0:r.url;o&&!e.fragStartupTime[o]&&(e.fragStartupTime[o]={startLoadTime:new Date})}),S(x(e),"handleHlsFragLoaded",function(t,n){n.frag&&n.frag.loaded&&(e.playbackPerformance.downloadedKiloBytes+=n.frag.loaded/h.Fm);var r,o=null==(r=n.frag)?void 0:r.url;o&&e.fragStartupTime[o]&&e.fragStartupTime[o].startLoadTime&&(e.fragStartupTime[o].endLoadTime=new Date)}),S(x(e),"handleHlsLevelSwitched",function(){e.hls&&e.hls.bandwidthEstimate&&(e.lastLevelSwitchKbps=e.hls.bandwidthEstimate/h.bR)}),S(x(e),"handleLoadedMetadata",function(){e.setState({playbackState:h.Cy.LOADED_METADATA})}),S(x(e),"handleLoadStart",function(){e.playbackPerformance.loadStartTime=new Date,e.setState({playbackState:h.Cy.LOAD_START})}),S(x(e),"handleLoadedData",function(){e.setState({playbackState:h.Cy.LOADED_DATA})}),S(x(e),"handlePlaying",function(t){e.playbackPerformance.hasFatalError=!1,e.setPlaybackStartTime(),e.setLastSegmentStartPlayTime(),e.setLastSegmentPlaybackStartDate(),e.updateStallDuration(),e.updatePauseDuration(),e.setState({playbackState:h.Cy.PLAYING}),e.props.clearSeekTime&&e.props.clearSeekTime(),e.props.onPlaying&&e.props.onPlaying(t)}),S(x(e),"handleUserPause",function(t){var n=e.props.onControlsPause;e.lastPauseTime=new Date,n&&n(t)}),S(x(e),"handleVideoPause",function(){e.state.playbackState!==h.Cy.STALLING&&e.state.playbackState!==h.Cy.SEEKING&&(e.updateWatchDurationForCurrentSegment(),e.lastPauseTime||e.updateStallDuration()),e.setState({playbackState:h.Cy.PAUSED})}),S(x(e),"handleSeeking",function(){e.playbackPerformance.numberOfSeeks+=1;var t=e.playbackPerformance.segments,n=t&&t[t.length-1];n&&(n.lastStartPlayTime=null),e.state.playbackState!==h.Cy.ENDED&&e.setState({playbackState:h.Cy.SEEKING})}),S(x(e),"handleStalled",function(){null===e.lastStallTime&&e.state.playbackState!==h.Cy.ENDED&&(e.lastStallTime=new Date,e.playbackPerformance.numberOfStalls+=1),e.setState({playbackState:h.Cy.STALLING})}),S(x(e),"handleTimeUpdate",function(t){var n=e.props.onTimeChange;n&&n(t),e.state.playbackState===h.Cy.PLAYING&&(e.updateWatchDurationForCurrentSegment(),e.setLastSegmentStartPlayTime())}),S(x(e),"resetPlaybackMetrics",function(){e.hasPlaybackStarted=!1,e.hasVideoSessionStarted=!1,e.hasVideoSessionEnded=!0,e.lastLevelSwitchKbps=null,e.lastStallTime=null,e.lastPauseTime=null,e.videoSessionId="",e.videoVisibleTime=null,e.logSessionStartOnNextPlay=!1;var t=w(w({},e.playbackPerformance.segments[e.playbackPerformance.segments.length-1]),{},{lastStartPlayTime:null,playbackStartDate:null,switchBitrateKbps:-1,watchedDurationMs:0});e.playbackPerformance.detailedErrors="",e.playbackPerformance.downloadedKiloBytes=0,e.playbackPerformance.errorCode=0,e.playbackPerformance.errorName="",e.playbackPerformance.errorReason="",e.playbackPerformance.hasFatalError=!1,e.playbackPerformance.numberOfStalls=0,e.playbackPerformance.numberOfSeeks=0,e.playbackPerformance.playbackStartTimestamp=null,e.playbackPerformance.totalStallDurationMs=0,e.playbackPerformance.segments=[t]}),S(x(e),"setLastSegmentStartPlayTime",function(){var t=e.playbackPerformance.segments,n=t&&t[t.length-1];n&&null===n.lastStartPlayTime&&(n.lastStartPlayTime=e.getCurrentVideoTime())}),S(x(e),"setLastSegmentPlaybackStartDate",function(){var t=e.playbackPerformance.segments,n=t&&t[t.length-1];n&&null===n.playbackStartDate&&(n.playbackStartDate=Date.now())}),S(x(e),"setPlaybackStartTime",function(){e.hasPlaybackStarted||(e.playbackPerformance.playbackStartTimestamp=Date.now(),e.hasPlaybackStarted=!0)}),S(x(e),"setVideoPlayerRef",function(t){var n=e.props.setVideoRef;if(t&&(n&&n(t),e.videoPlayerRef=t,e.videoPlayerRef.video)){var r=e.videoPlayerRef.video;r.addEventListener("loadedmetadata",e.handleLoadedMetadata),r.addEventListener("loadeddata",e.handleLoadedData),r.addEventListener("pause",e.handleVideoPause),r.readyState>=3&&(e.setState({canPlayVideo:!0}),e.playbackPerformance.canPlayTime=new Date)}}),S(x(e),"updateStallDuration",function(){null!==e.lastStallTime&&(e.playbackPerformance.totalStallDurationMs+=Date.now()-e.lastStallTime.getTime(),e.lastStallTime=null)}),S(x(e),"updatePauseDuration",function(){if(null!==e.lastPauseTime){var t=x(e).lastPauseTime;e.playbackPerformance.totalPauseDurationMs+=Date.now()-t.getTime(),e.lastPauseTime=null}}),S(x(e),"updateWatchDurationForCurrentSegment",function(){var t=e.playbackPerformance.segments,n=t&&t[t.length-1],r=n?n.lastStartPlayTime:null,o=e.getCurrentVideoTime();if(n&&null!==r&&"number"==typeof o&&"number"==typeof r){var i=o-r;i>0&&(n.watchedDurationMs+=i,n.lastStartPlayTime=null)}}),S(x(e),"logPlaybackPerformance",function(t,n){var r=e.props,o=r.contextLogData,i=void 0===o?{}:o,a=r.userId,l=r.isAutoPlay,s=r.logContextEvent,c=r.preload,u=r.userAgent,y=r.webBrowser,b=r.webBrowserVersion,m=i.is_closeup_video,g=void 0!==m&&m,_=e.playbackPerformance,x=_.canPlayTime,j=_.detailedErrors,P=_.downloadedKiloBytes,O=_.errorCode,S=_.errorName,A=_.errorReason,I=_.hasFatalError,E=_.playbackStartTimestamp,C=_.totalPauseDurationMs,D=_.totalStallDurationMs,T=_.segments,k=_.srcString,z=_.loadStartTime,R=_.numberOfStalls,B=_.numberOfSeeks,L=e.videoPlayerRef&&e.videoPlayerRef.video,F=t===h.DR,Z=F&&!e.hasVideoSessionStarted,M=!F&&!e.hasVideoSessionEnded&&e.hasVideoSessionStarted;if(e.hls&&L&&(Z||M)){var N,H=-1;x&&z&&(H=x>z?x.getTime()-z.getTime():0);var U=-1;x&&e.videoVisibleTime&&(U=x>e.videoVisibleTime?x.getTime()-e.videoVisibleTime.getTime():0),F&&(e.videoSessionId=(0,f.Z)(a),e.playerId=e.playerId||(0,d.Z)());var W={autoplaying:l,averageVideoKbps:-1,detailedErrors:j,downloadedKiloBytes:P,isCellular:!1,errorCode:O,errorName:S,errorReason:A,fatalError:I,nativeVideoDurationMs:L.duration*h.gJ||-1,numberOfStalls:R,numberOfSeeks:B,overallPausedDurationMs:C,overallBufferDurationMs:D,overallWatchedDurationMs:-1,rebufferRate:-1,playbackSessionId:e.videoSessionId,playbackStartTimestamp:E||-1,segments:[],sessionMark:t,screenPixelScale:null!=(N=window)&&N.devicePixelRatio?window.devicePixelRatio:-1,startupPlayerWidth:L.clientWidth,startupPlayerHeight:L.clientHeight,startupTimeMs:H,startupLatencyMs:U,startupVariantKbps:-1,startupVariantWatchedDurationMs:-1,startupVariantWidth:L.videoWidth,startupVariantHeight:L.videoHeight,videoUrl:k,wasVideoPreloaded:"auto"===c};if(!F&&T.length){var V=e.hls.levels,G=T[0];e.updateWatchDurationForCurrentSegment(),e.updateStallDuration();var X=T.reduce(function(e,t){return t&&"number"==typeof t.level&&V&&V.length>0?e+(V[t.level]||{}).bitrate*(t.watchedDurationMs||0)/h.gJ:e},0),Y=T.reduce(function(e,t){return e+(t.watchedDurationMs||0)},0),q=null,K=0,J=0;do K+=T[J].watchedDurationMs,q=q||T[J].level,J+=1;while(J<T.length&&T[J].level===q);W.startupVariantKbps=G.indicatedKbps,W.startupVariantWatchedDurationMs=K,W.startupVariantWidth=G.sourceWidth,W.startupVariantHeight=G.sourceHeight,W.startupPlayerWidth=G.viewportWidth,W.startupPlayerHeight=G.viewportHeight,W.overallWatchedDurationMs=Y,Y>0?(W.averageVideoKbps=X/(Y/h.gJ),W.rebufferRate=e.playbackPerformance.totalStallDurationMs/Y):0===Y&&(W.averageVideoKbps=-1,W.rebufferRate=-1,W.errorName="invalid_watch_duration"),W.segments=T}else W.errorName="invalid_watch_duration";(0,p.ZP)(W,!0,g,w({playbackState:e.state.playbackState},n));var $=i.clientTrackingParams,Q=i.component,ee=i.durationNs,et=i.element,en=i.objectId,er=i.pairId,eo=i.viewData,ei=i.view,ea=i.viewParameter;s({aux_data:w(w({},function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if(({}).hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],-1===t.indexOf(n)&&({}).propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(i,v)),{},{is_closeup_video:g,playback_session_id:e.videoSessionId,user_agent:u,web_browser:y,web_browser_version:b}),clientTrackingParams:$,component:Q,duration_ns:ee,element:et,event_data:{videoPerformanceData:W},event_type:3606,object_id_str:en,pair_id:er,view_data:eo,view_parameter:ea,view_type:ei}),F?(e.hasVideoSessionStarted=!0,e.hasVideoSessionEnded=!1):e.resetPlaybackMetrics(),(0,p.tE)(F?"sessionStart":"sessionEnd",!0,g,w({playbackState:e.state.playbackState},n))}}),e}return n=[{key:"componentDidMount",value:function(){var e=this.props,t=e.contextLogData,n=e.playing,r=(void 0===t?{}:t).is_closeup_video;this.playbackPerformance.videoCreatedTime=new Date,this.initializeHls(),(0,p.tE)("videoMounted",!0,void 0!==r&&r),n&&(this.videoVisibleTime=new Date,this.logPlaybackPerformance(h.DR,{initiator:"mount"}))}},{key:"componentDidUpdate",value:function(e){var t,n,r,o=this.props,i=o.loop,a=o.playing,l=o.src,s=o.visible,c=o.appInFocus,u=o.seekTime,d=o.captionsEnabled,f=null==(n=this.videoPlayerRef)||null==(r=n.video)?void 0:r.textTracks[0];f&&(d?f.mode="showing":f.mode="disabled",f.addEventListener("cuechange",function(){var e=f.activeCues&&f.activeCues.length>0&&f.activeCues[0];e&&e.line&&(e.line=-6,e.size=88)})),u&&u!==e.seekTime&&this.setState({videoStartTime:u}),e.src&&l&&(t=e.src,I(t)!==I(l)||(Array.isArray(l)?t.length!==l.length||l.some(function(e,n){return!Array.isArray(t)||e.type!==t[n].type||e.src!==t[n].src}):l!==t))&&this.initializeHls(),e.appInFocus&&!c&&(this.logPlaybackPerformance(h.$f,{initiator:"update",loop:i}),this.logSessionStartOnNextPlay=!0),e.visible&&!1===s&&(this.logSessionStartOnNextPlay=!1,this.updatePauseDuration(),this.logPlaybackPerformance(h.$f,{initiator:"update",loop:i})),!1===e.visible&&!0===s&&(this.videoVisibleTime=this.videoVisibleTime||new Date,a?(this.setPlaybackStartTime(),this.setLastSegmentStartPlayTime(),this.setLastSegmentPlaybackStartDate(),this.logPlaybackPerformance(h.DR,{initiator:"update"})):this.logSessionStartOnNextPlay=!0),a&&c&&this.logSessionStartOnNextPlay&&(this.setPlaybackStartTime(),this.setLastSegmentStartPlayTime(),this.setLastSegmentPlaybackStartDate(),this.logPlaybackPerformance(h.DR,{initiator:"update"}),this.logSessionStartOnNextPlay=!1)}},{key:"componentWillUnmount",value:function(){var e=this.props.loop;this.updatePauseDuration(),this.logPlaybackPerformance(h.$f,{initiator:"unmount",loop:e}),this.destroyHls()}},{key:"render",value:function(){var e,t=this.props,n=t.aspectRatio,r=t.backgroundColor,o=t.captions,a=t.closeupWithinMasonryEnabled,l=t.controls,c=t.loop,u=t.loopOverride,d=t.maxHeight,f=t.maxWidth,p=t.fiftyPercentHeight,h=t.objectFit,y=t.onDurationChange,b=t.onFullscreenChange,v=t.onLoadedChange,_=t.onControlsPlay,x=t.onPlayheadDown,j=t.onPlayheadUp,P=t.onSeek,O=t.onVolumeChange,w=t.peekCloseupEnabled,S=t.playbackRate,A=t.playing,I=t.playsInline,D=t.poster,T=t.preload,k=t.src,z=t.styleOverrides,R=t.viewportSize,B=t.volume,L=t.variant,F=this.state,Z=F.canPlayVideo,M=F.isManifestParsed,N=F.videoStartTime,H=E(k),U=a?d:void 0;return w&&(U="sm"===R?p:d),"media-viewer"===L&&(U="inherit"),(0,g.jsxs)(i.xu,{alignItems:a?"center":void 0,"data-video-signature":k&&null!=(e=C(H))?e:void 0,display:a?"flex":void 0,height:a?"inherit":void 0,maxHeight:U,maxWidth:f,children:[(0,g.jsx)(s.Z,{unsafeCSS:m.P+z}),(0,g.jsx)(i.nk,{ref:this.setVideoPlayerRef,aspectRatio:n,backgroundColor:r,captions:o,controls:l,loop:void 0===u?c:u,objectFit:h,onControlsPause:this.handleUserPause,onControlsPlay:_,onDurationChange:y,onEnded:this.handleEnded,onFullscreenChange:b,onLoadedChange:v,onLoadStart:this.handleLoadStart,onPlay:function(){},onPlayError:function(){},onPlayheadDown:x,onPlayheadUp:j,onPlaying:this.handlePlaying,onReady:this.handleCanPlayVideo,onSeek:P,onSeeking:this.handleSeeking,onStalled:this.handleStalled,onTimeChange:this.handleTimeUpdate,onVolumeChange:O,onWaiting:this.handleStalled,playbackRate:S,playing:M&&Z&&A,playsInline:I,poster:D,preload:T,src:H,startTime:N,volume:B})]})}}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,A(r.key),r)}}(a.prototype,n),Object.defineProperty(a,"prototype",{writable:!1}),a}(r.PureComponent);t.Z=(0,r.memo)(function(e){var t=(0,u.B)(),n=t.country,r=t.isAuthenticated,o=t.isBot,i=t.isSocialBot,s=t.unauthId,d=t.userAgent,f=(0,a.Z)(),h=(0,l.Z)(),m=(0,b.x4)(),v=m.closeupWithinMasonryEnabled,_=m.peekCloseupEnabled,x=m.viewportSize,j=d.browserName,P=d.browserVersion,O=d.isMobile,S=d.raw,A=e.contextLogData,I=void 0===A?{}:A,E=I.is_closeup_video,C=I.view,T=I.viewParameter,k=(0,c.Z)().checkExperiment,z=(0,y.G)().appUI,R=k("web_video_fail_to_start_fix").anyEnabled?z.appInFocus:e.appInFocus;return(0,p.r$)({browserName:j,browserVersion:P,country:n,isAuthenticated:r,isBot:o,is_closeup_video:void 0!==E&&E,isMobile:O,isSocialBot:i,view:C,viewParameter:T}),(0,g.jsx)(D,w(w({},e),{},{appInFocus:R,closeupWithinMasonryEnabled:v,logContextEvent:f,peekCloseupEnabled:_,userAgent:S,userId:h.isAuth&&h.id||s,variant:e.variant,viewportSize:x,webBrowser:j,webBrowserVersion:P}))})},400963:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(672410);function o(){return(0,r.Z)()}},237711:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(672410);function o(e){return e+"-"+(0,r.Z)()}},651097:function(e,t,n){"use strict";n.d(t,{ZP:function(){return y},r$:function(){return p},tE:function(){return h}});var r=n(942230),o=n(239728),i=n(603316);function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach(function(t){var r,o;r=t,o=n[t],(r=function(e){var t=function(e,t){if("object"!=a(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=a(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==a(t)?t:t+""}(r))in e?Object.defineProperty(e,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[r]=o}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var u=["isCellular","videoUrl","sessionMark"],d={},f="",p=function(e){var t=e.browserName,n=e.browserVersion,o=e.country,i=e.isAuthenticated,a=e.isBot,l=e.isMobile,s=e.isSocialBot,c=e.view,u=e.viewParameter;f=s&&"socialBot"||a&&"bot"||"nonbot";var p=(0,r.Z)(o);d={browserName:t,browserVersion:(null==n?void 0:n.split(".")[0])||"0",isAuthenticated:i,isMobile:l,region:p,view:void 0===c?"unknown":c,viewParameter:void 0===u?"unknown":u}};function h(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=c(c({},r),d),a="web.video.".concat(t?"hls":"nonHls",".").concat(f,".").concat(n?"closeup":"nonCloseup",".").concat(e);"nonbot"===f&&(0,i.nP)(a,{sampleRate:1,tags:o})}function y(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=n?"closeup":"nonCloseup",s=t?"hls":"nonHls",p=e.sessionMark===o.DR?"sessionStart":"sessionEnd",h=c(c({},r),d);if("nonbot"===f&&(Object.entries(e).forEach(function(t){var n=function(e){if(Array.isArray(e))return e}(t)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,l=[],s=!0,c=!1;try{for(i=(n=n.call(e)).next;!(s=(r=i.call(n)).done)&&(l.push(r.value),2!==l.length);s=!0);}catch(e){c=!0,o=e}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return l}}(t,2)||function(e,t){if(e){if("string"==typeof e)return l(e,2);var n=({}).toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?l(e,2):void 0}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),r=n[0],o=n[1],d="web.video.".concat(s,".").concat(f,".").concat(a,".").concat(p,".").concat(r),y=parseInt(o,10),b="number"==typeof y?y:-1;if(!u.includes(r))if(r.includes("fatalError")&&!0===o){var m=e.errorCode,g=e.errorName,v=e.errorReason;(0,i.nP)(d,{sampleRate:1,tags:c({errorCode:m,errorName:g,errorReason:v},h)})}else if(r.includes("Width")||r.includes("Height")){var _=b<0?"negative":0===b?"zero":b<200?"xs":b<400?"s":b<600?"m":b<800?"l":b<1e3?"xl":b<1200?"xxl":"over1200";(0,i.nP)(d,{sampleRate:1,tags:c({dimensionBucket:_},h)})}else if("numberOfStalls"===r){var x=o;b>1e3?x="over1000":b>10?x="over10":b<0&&(x="negative"),(0,i.nP)(d,{sampleRate:1,tags:c({numberOfStalls:x},h)})}else"screenPixelScale"===r?(0,i.nP)(d,{sampleRate:1,tags:c({screenPixelScale:o||-1},h)}):b>=0?(0===b&&(0,i.nP)("".concat(d,".zero"),{sampleRate:1,tags:h}),(0,i.LY)(d,b,{sampleRate:1})):b<0&&(0,i.nP)("".concat(d,".negative"),{sampleRate:1,tags:h})}),e.sessionMark!==o.DR)){var y=e.rebufferRate,b=e.screenPixelScale,m=e.startupLatencyMs,g=e.startupVariantWidth,v=e.startupPlayerWidth,_="web.video.".concat(s,".").concat(f,".").concat(a,".").concat(p);"number"==typeof g&&"number"==typeof v&&"number"==typeof b&&(0,i.nP)("".concat(_,".upscaled.").concat(1.5*g>b*v?"good":"bad"),{sampleRate:1,tags:h}),"number"==typeof m&&(0,i.nP)("".concat(_,".startupLatency.").concat(m<500?"good":"bad"),{sampleRate:1,tags:h}),"number"==typeof y&&(0,i.nP)("".concat(_,".rebufferRate.").concat(y<.01?"good":"bad"),{sampleRate:1,tags:h})}}},239728:function(e,t,n){"use strict";n.d(t,{$f:function(){return o},Cy:function(){return s},DR:function(){return r},Fm:function(){return l},bR:function(){return a},gJ:function(){return i},lG:function(){return c}});var r=1,o=2,i=1e3,a=1e3,l=1e3,s=Object.freeze({DEFAULT:0,LOAD_START:1,LOADED_METADATA:2,LOADED_DATA:3,PLAYING:4,PAUSED:5,SEEKING:6,STALLING:7,FAILED:8,ENDED:9}),c=Object.freeze({MEDIA_ERR_ABORTED:1,MEDIA_ERR_NETWORK:2,MEDIA_ERR_DECODE:3,MEDIA_ERR_SRC_NOT_SUPPORTED:4})},70012:function(e,t,n){"use strict";var r=n(293565),o=n(594306);function i(e){return function(e){if(Array.isArray(e))return a(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return a(e,void 0);var n=({}).toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(e,void 0):void 0}}(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}t.Z=function(e){return(0,r.G6)(e)?[].concat(i(o.xl),["image/heic"]):i(o.xl)}},315280:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(765908);function o(e){var t=e.i18n,n=e.files,o=e.options,i=e.ideaPinRenamingEnabled;return Promise.all(n.map(function(e){return(0,r.Z)({i18n:t,file:e,options:o,ideaPinRenamingEnabled:i})}))}},817998:function(e,t,n){"use strict";n.d(t,{T:function(){return o},k:function(){return r}});var r={ADS_MANAGER:"ADS_MANAGER",AUTOMATED_CAMPAIGN:"AUTOMATED_CAMPAIGN"},o=function(e){return Object.values(r).includes(e)}},108809:function(e,t,n){"use strict";var r=n(20256),o=n(678213),i=n(19585),a=n(694955),l=n(382718);t.Z=function(e){var t=e.pinDraftId,n=e.onChange,s=e.pinIsAdsOnly,c=(0,i.ZP)(),u="".concat(t,"--ads-only-pin-switch");return(0,l.jsxs)(r.kC,{alignItems:"center",direction:"row",justifyContent:"start",children:[(0,l.jsx)(r.rs,{id:u,name:"is-ads-only-toggle",onChange:n,switched:s}),(0,l.jsxs)(r.xu,{alignItems:"center",direction:"row",display:"flex",paddingX:2,children:[(0,l.jsx)(r.__,{htmlFor:u,children:(0,l.jsx)(r.xv,{size:"200",children:c._('Ad-only Pin', 'storyboard.editor.adsOnlyPinSwitch.adOnlyText', 'Text complementing ad-only pin')})}),(0,l.jsx)(r.xu,{marginStart:2,children:(0,l.jsx)(r.MG,{accessibilityLabel:c._('Click to learn more about Ad-only Pins', 'adsOnlyPinSwitch.adOnlyHelpButton.accessibilityLabel.text', 'accessibilityLabel to learn more about ad-only pin'),accessibilityPopoverLabel:c._('Expanded information about Ad-only Pins', 'adsOnlyPinSwitch.adOnlyHelpButton.accessibilityPopoverLabel.text', 'accessibilityPopoverLabel to expand information about ad-only pin'),idealDirection:"up",isWithinFixedContainer:!0,link:{href:a.Dm$,text:c._('Learn more', '[m10n] createFlow.adForm.promotedPinRepDetails.adsOnlyPinHelperText.learnMoreCta', '[m10n] Link with call to action to help center article ')},text:c._('Ad-only Pins don\u2019t distribute an organic Pin and can\u2019t be saved by people who see them', 'adsOnlyPinSwitch.adOnlyTooltip.text', 'Tooltip text explaining ad-only pin'),zIndex:o.b7})})]})]})}},322888:function(e,t,n){"use strict";n.d(t,{F0:function(){return s},GI:function(){return a},WX:function(){return c},oo:function(){return l}});var r=n(213082),o=n(694955),i=n(253464),a=function(e){var t,n;return!e||"ENTERPRISE"!==("segmentMetadata"in e?null==(t=e.segmentMetadata)?void 0:t.salesChannel:null==(n=e.segment_metadata)?void 0:n.sales_channel)},l=function(e,t){return e===i.$o.APPROVED&&t},s=function(e,t){var n=t?"?pinId=".concat(t):"";return a(e)?o.auO+(0,r.Z)("createAutomated")+n:o.auO+(0,r.Z)("create")+n},c=function(e,t){return((null==t?void 0:t.integration_platforms)||[]).includes("SHOPIFY")&&e.checkExperiment("aid_exp_acf_conversion_eligibility_shopify").anyEnabled}},507639:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(586659),o=n(161343);function i(e){return(0,e.children)((0,r.useContext)(o.Z))}},161343:function(e,t,n){"use strict";t.Z=(0,n(586659).createContext)([null,function(){}])},250039:function(e,t,n){"use strict";n.d(t,{Z:function(){return A}});var r=n(586659),o=n(20256),i=n(767439),a=n(761578),l=n(980787),s=n(289032),c=n(19585),u=n(302148),d=n(765533),f=n(341742);function p(e){return{type:"UPDATE_STATUS",payload:{status:e}}}var h=n(382718);function y(e){var t=e.anchor,n=e.children,r=e.footer,i=e.onDismiss,a=e.size,l=e.idealDirection,s=(0,c.ZP)();return(0,h.jsx)(o.pl,{anchor:t,idealDirection:l,onDismiss:function(){},size:void 0===a?"sm":a,children:(0,h.jsxs)(o.xu,{direction:"column",display:"flex",height:"100%",padding:4,width:"100%",children:[(0,h.jsx)(o.xu,{margin:4,position:"absolute",right:!0,top:!0,children:(0,h.jsx)(o.hU,{accessibilityLabel:s._('End tour', 'Icon button to end the education tour', 'Icon button to end the education tour'),dataTestId:"guide-end-tour",icon:"cancel",iconColor:"white",onClick:i,size:"xs"})}),(0,h.jsx)(o.xu,{display:"flex",marginTop:2,padding:2,children:n}),(0,h.jsx)(o.xu,{children:r})]})})}function b(e){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach(function(t){var r,o;r=t,o=n[t],(r=function(e){var t=function(e,t){if("object"!=b(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=b(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==b(t)?t:t+""}(r))in e?Object.defineProperty(e,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[r]=o}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var v={content:null,selector:null,index:-1,left:0,right:0,bottom:0,top:0,width:0,height:0,status:"INIT"};function _(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"START_TOUR":var n=t.payload,r=n.content,o=n.selector;return g(g(g({},v),e),{},{selector:o,content:r,status:"IN_PROGRESS",index:0});case"NEXT_STEP":var i=t.payload,a=i.content,l=i.index,s=i.selector;return g(g(g({},v),e),{},{content:a,selector:s,index:l});case"UPDATE_RECT":return g(g(g({},v),e),t.payload);case"UPDATE_STATUS":var c=t.payload.status;return g(g(g({},v),e),{},{status:c});default:return e}}var x={__style:{color:"#000"}};function j(e){var t=e.padding,n=void 0===t?16:t,r=e.bottomMargin,i=e.targetLeft,l=e.targetTop,s=e.targetWidth,c=e.targetHeight,u=e.showMask,d=(0,a.Z)()||{width:0,height:0},f=d.width,p=d.height,y=l-n,b=i-n,m=c+2*n+(void 0===r?0:r),g=s+2*n;return y<0?null:(0,h.jsx)(o.xu,{dangerouslySetInlineStyle:x,height:"100%",left:!0,opacity:.7,position:"fixed",top:!0,width:"100%",children:(0,h.jsxs)("svg",{"data-gestalt-valid-html":"Pulsar",height:p,width:f,xmlns:"http://www.w3.org/2000/svg",children:[(0,h.jsxs)("defs",{children:[(0,h.jsxs)("mask",{id:"mask-main",children:[(0,h.jsx)("rect",{fill:"white",height:p,width:f,x:0,y:0}),(0,h.jsx)("rect",{fill:"black",height:m,rx:8,ry:8,width:g,x:b,y:y})]}),(0,h.jsxs)("clipPath",{id:"clip-path",children:[(0,h.jsx)("rect",{height:y,width:f,x:0,y:0}),(0,h.jsx)("rect",{height:m,width:b,x:0,y:y}),(0,h.jsx)("rect",{height:m,width:f-g-b,x:b+g,y:y}),(0,h.jsx)("rect",{height:p-m-y,width:f,x:0,y:y+m})]})]}),(0,h.jsx)("rect",{fill:"currentColor",height:p,mask:"url(#mask-main)",width:f,x:0,y:0}),(void 0===u||u)&&(0,h.jsx)("rect",{clipPath:"url(#clip-path)",fill:"currentColor",height:p,pointerEvents:"auto",width:f,x:0,y:0}),(0,h.jsx)("rect",{display:"block",fill:"transparent",height:c,pointerEvents:"auto",width:s,x:i,y:l})]})})}function P(e){var t=e.keyCode,n=e.handler;(0,r.useEffect)(function(){function e(e){e.keyCode===t&&n()}return window.addEventListener("keyup",e),function(){return window.removeEventListener("keyup",e)}},[t,n])}var O=n(309314);function w(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,l=[],s=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);s=!0);}catch(e){c=!0,o=e}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return S(e,t);var n=({}).toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?S(e,t):void 0}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function S(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function A(e){var t,n,b,m,g=e.onComplete,x=e.onDismiss,S=e.scrollOffset,A=e.steps,I=e.zIndex,E=(0,l.u)().logContextEvent,C=(0,c.ZP)(),D=w((0,i.Z)(),2),T=D[0],k=D[1],z=w((0,r.useReducer)(_,v),2),R=z[0],B=z[1],L=w((0,r.useState)(null),2),F=L[0],Z=L[1],M=(0,a.Z)()||{width:0,height:0},N=M.width,H=M.height,U=function(e){var t;return(null==(t=A[R.index])?void 0:t.height)||e},W=function(e){var t=function(e){var t=e.getBoundingClientRect();B(p("IN_PROGRESS")),Z(e),B({type:"UPDATE_RECT",payload:{bottom:t.bottom,left:t.left,right:t.right,top:t.top,width:t.width,height:U(t.height)}})};if(e){var n=e.getBoundingClientRect();if((0,O.Z)({left:n.left,right:n.right,top:n.top,bottom:n.bottom,windowHeight:H,windowWidth:N,threshold:25}))t(e);else{var r,o,i,a,l,s,c,u,d=S||(U(n.height)>H?-25:-(H/2)+U(n.height)/2);B(p("SCROLLING")),i=void 0===(o=(r={offset:d,callback:t}).duration)?660:o,a=r.offset,l=r.callback,s=window.pageYOffset,c=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.getBoundingClientRect().top+window.pageYOffset+t}(e,a),u=performance.now(),function t(){var n,r=performance.now()-u,o=r>i?c:s+(c-s)*((n=r/i)<.5?2*n*n:-1+(4-2*n)*n);window.scroll(0,o),r>i?"function"==typeof l&&l(e):window.requestAnimationFrame(t)}()}}},V=function(){var e;E({event_type:101,component:13472,element:11556,aux_data:{education_active_guide_id:null==(e=A[R.index])?void 0:e.id}}),k(),g()},G=function(){var e;E({event_type:101,component:13472,element:11557,aux_data:{education_active_guide_id:null==(e=A[R.index])?void 0:e.id}}),k(),x()},X=(0,r.useCallback)(function(){var e=(A[R.index]||{}).onNext;e&&e();var t=A[R.index+1]||{},n=t.content,r=t.selector;R.index<A.length-1?(E({event_type:101,component:13472,element:11559}),B({type:"NEXT_STEP",payload:{content:n,selector:r,index:R.index+1}})):V()},[E,A,R.index,V]);P({keyCode:d.Z.RIGHT,handler:X}),P({keyCode:d.Z.ESCAPE,handler:G}),(0,f.Z)(function(){T();var e=A[0]||{};B({type:"START_TOUR",payload:{content:e.content,selector:e.selector}})}),(0,r.useLayoutEffect)(function(){if(void 0===R.selector)return function(){};var e="string"==typeof R.selector?document.querySelector(R.selector):R.selector;W(e);var t=(0,s.Z)(function(){return W(e)},25);return window.addEventListener("resize",t),function(){window.removeEventListener("resize",t)}},[R.index,R.selector]);var Y=R.left,q=R.top,K=R.height,J=R.width,$=U(K);return(0,h.jsxs)(o.mh,{children:[(0,h.jsxs)(o.xu,{bottom:!0,dangerouslySetInlineStyle:{__style:{zIndex:I||999}},left:!0,position:"absolute",right:!0,top:!0,children:[(0,h.jsx)(j,{bottomMargin:null==(t=A[R.index])?void 0:t.bottomMargin,padding:null==(n=A[R.index])?void 0:n.padding,showMask:"IN_PROGRESS"===R.status,targetHeight:$,targetLeft:Y,targetTop:q,targetWidth:J}),"IN_PROGRESS"===R.status&&(0,h.jsx)(y,{anchor:F,footer:(0,h.jsxs)(o.kC,{alignItems:"center",justifyContent:"start",children:[(0,h.jsx)(o.xu,{display:"flex",flex:"grow",paddingX:2,children:(0,h.jsx)(o.xv,{color:"inverse",size:"200",weight:"bold",children:(0,u.nk)(C._('{{ index }} of {{totalSteps}}', 'Footer text indicating position in tour (e.g. 1 of 3)', 'Footer text indicating position in tour (e.g. 1 of 3)'),{index:R.index+1,totalSteps:A.length})})}),(0,h.jsx)(o.xu,{children:(0,h.jsx)(o.zx,{color:"gray",dataTestId:"guide-next-button",fullWidth:!0,onClick:X,text:R.index<A.length-1?C._('Next', 'Button text to go to next guide', 'Button text to go to next guide'):C._('Done', 'Button text to end education tour', 'Button text to end education tour')})})]}),idealDirection:null==(b=A[R.index])?void 0:b.idealDirection,onDismiss:G,size:null==(m=A[R.index])?void 0:m.size,children:R.content})]}),(0,h.jsx)(o.xu,{dangerouslySetInlineStyle:{__style:{left:Y-20,top:q-20}},height:$+40,position:"absolute",width:J+40})]})}},632291:function(e,t,n){"use strict";n.d(t,{I:function(){return r}});var r="completed-in-product-education"},309314:function(e,t,n){"use strict";function r(e){var t=e.top,n=e.right,r=e.bottom,o=e.left,i=e.windowHeight,a=e.windowWidth,l=e.threshold,s=void 0===l?0:l;return t>=0+s&&o>=0+s&&r<=i-s&&n<=a-s}n.d(t,{Z:function(){return r}})},250905:function(e,t,n){"use strict";n.d(t,{HW:function(){return d},MS:function(){return m},i3:function(){return g},o2:function(){return b}});var r=n(586659),o=n(729434),i=n(25837),a=n(382718);function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach(function(t){var r,o;r=t,o=n[t],(r=function(e){var t=function(e,t){if("object"!=l(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=l(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==l(t)?t:t+""}(r))in e?Object.defineProperty(e,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[r]=o}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var d=i.fe+1,f={educationId:null,paddingRight:0,zIndex:d};function p(e,t){switch(t.type){case"FOOTER_SET_EDUCATION_ID":var n=t.payload.educationId;return u(u({},e),{},{educationId:n});case"FOOTER_SET_PADDING_RIGHT":var r=t.payload.paddingRight;return u(u({},e),{},{paddingRight:r});case"FOOTER_SET_Z_INDEX":var o=t.payload.zIndex;return u(u({},e),{},{zIndex:o});default:return e}}var h=(0,o.Z)("footerContext"),y=h.Provider,b=h.Consumer,m=h.get;function g(e){var t,n=e.children,o=function(e){if(Array.isArray(e))return e}(t=(0,r.useReducer)(p,f))||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,l=[],s=!0,c=!1;try{for(i=(n=n.call(e)).next;!(s=(r=i.call(n)).done)&&(l.push(r.value),2!==l.length);s=!0);}catch(e){c=!0,o=e}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return l}}(t,2)||function(e,t){if(e){if("string"==typeof e)return s(e,2);var n=({}).toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(e,2):void 0}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),i=o[0],l=o[1],c=(0,r.useCallback)(function(e){return l({type:"FOOTER_SET_PADDING_RIGHT",payload:{paddingRight:e}})},[]),d=(0,r.useCallback)(function(e){return l({type:"FOOTER_SET_EDUCATION_ID",payload:{educationId:e}})},[]),h=(0,r.useCallback)(function(e){return l({type:"FOOTER_SET_Z_INDEX",payload:{zIndex:e}})},[]),b=(0,r.useMemo)(function(){return u(u({},i),{},{setEducationId:d,setPaddingRight:c,setZIndex:h})},[i,d,c,h]);return(0,a.jsx)(y,{value:b,children:n})}},230543:function(e,t,n){"use strict";n.d(t,{c:function(){return o},t:function(){return i}});var r=n(598849);function o(e){return(0,e.children)((0,r.Z)().height)}function i(){return(0,r.Z)().height}},481849:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(886981);function o(e){var t=e.children,n=e.fieldSetKey,o=e.pinId,i=(0,r.Z)({name:"PinResource",options:{id:o,field_set_key:n}}),a=i.data,l=i.error;return t({pin:a,loading:!i.isLoaded,error:(l||{}).message})}},889539:function(e,t,n){"use strict";n.d(t,{l:function(){return h},j:function(){return y}});var r=n(586659),o=n(729434);function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach(function(t){var r,o;r=t,o=n[t],(r=function(e){var t=function(e,t){if("object"!=i(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=i(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==i(t)?t:t+""}(r))in e?Object.defineProperty(e,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[r]=o}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var s={currentPinDraftId:null,mostRecentTaggedObjectId:null,selectedStlItemId:null,stlCallout:{showCallout:!1},stlTaggedCoords:null,stlHoveredTaggedObjectId:null},c=function(e,t){switch(e=e||s,t.type){case"STL_SELECT":return l(l({},e),{},{selectedStlItemId:t.payload.selectedStlItemId});case"STL_SHEET":return l(l({},e),{},{currentPinDraftId:t.payload.currentPinDraftId});case"STL_TAGGED_PIN":return l(l({},e),{},{stlTaggedCoords:t.payload.stlTaggedCoords});case"STL_ERROR_STATE":return l(l({},e),{},{stlCallout:{showCallout:t.payload.stlCallout.showCallout,type:t.payload.stlCallout.type}});case"STL_MOST_RECENT_TAGGED_OBJECT_ID":return l(l({},e),{},{mostRecentTaggedObjectId:t.payload.mostRecentTaggedObjectId});case"SET_STL_HOVERED_TAGGED_OBJECT_ID":return l(l({},e),{},{stlHoveredTaggedObjectId:t.payload.stlHoveredTaggedObjectId});default:return e}},u=n(382718);function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var f=(0,o.Z)("ShopTheLook"),p=f.Provider,h=f.get;function y(e){var t,n=e.children,o=function(e){if(Array.isArray(e))return e}(t=(0,r.useReducer)(c,s))||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,l=[],s=!0,c=!1;try{for(i=(n=n.call(e)).next;!(s=(r=i.call(n)).done)&&(l.push(r.value),2!==l.length);s=!0);}catch(e){c=!0,o=e}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return l}}(t,2)||function(e,t){if(e){if("string"==typeof e)return d(e,2);var n=({}).toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?d(e,2):void 0}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),i=o[0],a=o[1],l=(0,r.useMemo)(function(){return{shopTheLook:i,setStlSelection:function(e){a({type:"STL_SELECT",payload:{selectedStlItemId:e}})},setCurrentPinDraftId:function(e){a({type:"STL_SHEET",payload:{currentPinDraftId:e}})},setStlTaggedCoord:function(e){a({type:"STL_TAGGED_PIN",payload:{stlTaggedCoords:e}})},setStlCallout:function(e){a({type:"STL_ERROR_STATE",payload:{stlCallout:{showCallout:e.showCallout,type:e.type}}})},setMostRecentTaggedObjectId:function(e){a({type:"STL_MOST_RECENT_TAGGED_OBJECT_ID",payload:{mostRecentTaggedObjectId:e}})},setStlHoveredTaggedObjectId:function(e){a({type:"SET_STL_HOVERED_TAGGED_OBJECT_ID",payload:{stlHoveredTaggedObjectId:e}})}}},[i]);return(0,u.jsx)(p,{value:l,children:n})}},253464:function(e,t,n){"use strict";n.d(t,{$o:function(){return a},GW:function(){return r},Jo:function(){return i},MS:function(){return m},Q8:function(){return y},VX:function(){return p},Zo:function(){return s},aD:function(){return c},b2:function(){return d},g2:function(){return f},s4:function(){return l},tK:function(){return b},ym:function(){return u},zQ:function(){return h}});var r="/business/hub/?show_vmp=true",o=["FR"],i=["US","GB","CA","AU","DE","FR"].concat(["ES","IT","AT","CH","NL","BR","MX"]).filter(function(e){return!o.includes(e)}),a={APPROVED:"approved",PENDING:"pending",DISAPPROVED:"declined",APPEAL_PENDING:"appeal_pending"},l=Object.freeze({APPLIED:"APPLIED",ACCEPTED:"ACCEPTED",NON_COMPLIANT:"NON_COMPLIANT",SUSPENDED:"SUSPENDED",CANCELLED:"CANCELLED"}),s=Object.freeze({UNSTARTED:"workflow-status-unstarted",IN_PROGRESS:"workflow-status-in-progress",ACCEPTED:"check-circle",ATTENTION:"workflow-status-warning",REJECTED:"workflow-status-problem",RECOMMENDED:"info-circle"}),c=Object.freeze({UNSTARTED:"dark",IN_PROGRESS:"success",ACCEPTED:"success",ATTENTION:"warning",REJECTED:"error",RECOMMENDED:"subtle"}),u="Verified merchant program not yet available in this country",d=2e3,f={can_appeal:!0,is_appeal:!1,appeal_count:0,appeal_comment:"",shipping_policy_url:"",return_policy_url:"",review_status:2,review_reasons:[]},p=Object.freeze({ACCOUNT_AGE:"ACCOUNT_AGE",DOMAIN_AGE:"DOMAIN_AGE",PROFILE_IMAGE:"PROFILE_IMAGE",PROFILE_COVER_IMAGE:"PROFILE_COVER_IMAGE",BIO:"BIO",SHOP_TAB:"SHOP_TAB",PINNER_FEEDBACK:"PINNER_FEEDBACK"}),h=[p.ACCOUNT_AGE,p.DOMAIN_AGE,p.PROFILE_IMAGE,p.PROFILE_COVER_IMAGE,p.BIO,p.SHOP_TAB,p.PINNER_FEEDBACK],y=Object.freeze({PASS:"PASS",FAIL:"FAIL"}),b=30,m=.5},97781:function(e,t,n){"use strict";n.d(t,{Z:function(){return c}});var r=n(20256),o=n(980787),i=n(475498),a=n(19585),l=n(302148),s=n(382718);function c(e){var t,n=e.boardName,c=e.boardUrl,u=e.isBoardlessPin,d=e.isFromPinBuilder,f=e.hasNewPin,p=e.onChangeButtonClick,h=e.onVisitButtonClick,y=e.onHide,b=e.onUndo,m=e.pinImageUrl,g=(0,a.ZP)(),v=(0,o.u)().logContextEvent;return d?t={accessibilityLabel:g._('Visit Pin', 'PostSavedPinToast.a11yVisitButton', 'Accessibility label for Visit Pin saved from PinBuilder'),label:g._('Visit', 'PostSavedPinToast.VisitButton', 'Visit Pin saved from PinBuilder'),size:"lg",onClick:void 0===h?function(){}:h}:(p||b)&&(t={accessibilityLabel:f&&u&&p?g._('Change Pin destination', 'PostSavedPinToast.a11yChangeButton', 'Change saved pin to a different destination'):g._('Undo Saved Pin', 'PostSavedPinToast.a11yUndoButton', 'Undo Saved Pin'),label:f&&u&&p?g._('Change', 'PostSavedPinToast.ChangeButton', 'Change saved pin to a different destination'):g._('Undo', 'PostSavedPinToast.UndoButton', 'Undo Saved Pin'),size:"lg",onClick:f&&u&&p?function(){return p()}:b}),(0,s.jsx)(i.Z,{duration:u?6e3:3e3,imageUrl:m,onHide:y,primaryAction:t,text:(0,s.jsx)(r.xv,{overflow:"normal",size:"200",children:(0,l.nk)(g._('Saved to {{ destination }}', 'PostSavedPinToast.SavedToBoardLabel', 'Saved to label for better save'),{destination:(0,s.jsx)(r.rU,{href:u?"/me/":null!=c?c:"",onClick:function(){f&&u&&p&&v({event_type:101,component:14409})},children:(0,s.jsx)(r.xv,{lineClamp:1,size:"200",weight:"bold",children:n},"PostSavedPinToastBoardName")})})}),thumbnail:u?{icon:(0,s.jsx)(r.JO,{accessibilityLabel:g._('Saved to profile thumbnail', 'PostSavedPinToast.thumbnail.accessibilityLabel', 'Thumbnail for saved to profile.'),color:"default",icon:"history",size:24})}:void 0})}},595419:function(e,t,n){"use strict";n.d(t,{Z:function(){return k}});var r=n(20256),o=n(19585),i=n(586659),a=n(961780),l=n(334392),s=n(382718);function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){return(u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function d(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(d=function(){return!!e})()}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach(function(t){y(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function y(e,t,n){return(t=b(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function b(e){var t=function(e,t){if("object"!=c(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=c(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==c(t)?t:t+""}var m=function(e,t,n){return e-t/2*(n-1)},g=m(l.Cc,2*l.iA,1.4),v=m(l.Ys,2*l.iA,1.4),_=m(279,2*l.j5,2.1),x=m(2,2*l.kq,2.1),j={targets:".simplePopExtensionContent",opacity:[0,1],duration:500,easing:"easeInOutQuad"},P={targets:["#content-morph",".content-bar"],opacity:[0,1]},O={targets:"#content-morph",width:30,height:30,x:220,y:203,rx:20},w={targets:".content-bar",width:0,height:0,x:215,y:218},S={targets:"#content-morph",x:301,y:24},A={targets:"#pinterest-logo",translateX:[l.Cc,g],translateY:v,scale:1.4,direction:"alternate"},I={targets:"#pinterest-logo",translateX:[g,l.Cc],translateY:l.Ys,scale:l.G9,direction:"alternate"},E={targets:"#pinterest-logo-pop-bg",translateX:[279,_],translateY:[2,x],scale:2.1,direction:"alternate"},C={targets:"#pinterest-logo-pop-bg",translateX:[_,279],translateY:[x,2],scale:1},D=function(e){var t=500+750*!e,n=t+300,r=n+280,o=n+210,i=a.Z.timeline({easing:"easeInOutQuad",loop:e,direction:"normal",autoplay:!1});return i.add(h(h({},P),{},{duration:500})),e||i.add({duration:750}),i.add(h(h({},O),{},{duration:300}),t).add(h(h({},w),{},{duration:300}),t).add(h(h({},S),{},{duration:300}),n).add(h(h({},A),{},{duration:280}),n).add(h(h({},E),{},{duration:210}),n).add(h(h({},I),{},{duration:190,easing:"cubicBezier(0, 0, 0.23, 0.8)"}),r).add(h(h({},C),{},{duration:300}),o).add({duration:1400}),i},T=function(e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");i.prototype=Object.create(e&&e.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),Object.defineProperty(i,"prototype",{writable:!1}),e&&u(i,e);var t,n,o=(t=d(),function(){var e,n=f(i);return e=t?Reflect.construct(n,arguments,f(this).constructor):n.apply(this,arguments),function(e,t){if(t&&("object"==c(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(this,e)});function i(){if(!(this instanceof i))throw TypeError("Cannot call a class as a function");return o.apply(this,arguments)}return n=[{key:"componentDidMount",value:function(){var e=this.props.isLooping;window.requestAnimationFrame(function(){var t=D(e);(0,a.Z)(j).finished.then(function(){return t.play()})})}},{key:"render",value:function(){return(0,s.jsx)(r.xu,{alignItems:"center",display:"flex",flex:"grow",justifyContent:"center",marginTop:l.VE,children:l.ZP})}}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,b(r.key),r)}}(i.prototype,n),Object.defineProperty(i,"prototype",{writable:!1}),i}(i.PureComponent);y(T,"defaultProps",{isLooping:!1});var k=function(e){var t=e.header,n=e.installClick,i=e.isFromPinBuilder,a=e.skipClick,l=e.subheader,c=(0,o.ZP)(),u=c._('Get the Pinterest browser button', 'extensionUpsell.modal.defaultHeader', 'Heading for downloading Pinterest chrome extension app'),d=c._('Save creative ideas from around the web', 'extensionUpsell.modal.defaultSubheader', 'Subheader text for downloading Pinterest chrome extension app'),f=c._('Install the Pinterest browser extension to save inspo from all your favorite sites in one place.', 'extensionUpsell.modal.fromPinbuilderSubheader', 'Subheader text for downloading Pinterest chrome extension plugin'),p=c._('Find it. Love it. Save it.', 'extensionUpsell.modal.fromPinbuilderHeader', 'Header text for downloading Pinterest chrome extension plugin');return i?(0,s.jsxs)(r.xu,{children:[(0,s.jsx)(r.zd,{height:"100%",rounding:2,wash:!0,width:"100%",children:(0,s.jsx)(r.nk,{aspectRatio:540/364,autoplay:!0,loop:!0,onPlay:function(){},onPlayError:function(){},src:"https://v1.pinimg.com/videos/iht/hevcMp4V2/c2/44/72/c24472337e413d5444ff0c6a59ae176a_t3.mp4",children:(0,s.jsx)(r.xu,{display:"block",height:40,marginEnd:4,marginStart:4,marginTop:4,position:"absolute",right:!0,top:!0,width:40,children:(0,s.jsx)(r.hU,{accessibilityLabel:c._('Close', 'extensionUpsell.cancelLabel', 'Accesibility label to close modal for Browser Extension upsell'),icon:"cancel",iconColor:"darkGray",onClick:a,size:"md"})})})}),(0,s.jsxs)(r.xu,{direction:"column",display:"flex",margin:"auto",width:500,children:[(0,s.jsx)(r.xu,{marginTop:8,children:(0,s.jsx)(r.X6,{align:"start",children:t||p})}),(0,s.jsx)(r.xu,{marginTop:4,children:(0,s.jsx)(r.xv,{align:"start",children:l||f})}),(0,s.jsx)(r.xu,{direction:"row",display:"flex",justifyContent:"end",marginBottom:8,marginTop:8,children:(0,s.jsx)(r.zx,{accessibilityLabel:c._('Get the Pinterest browser extension', 'extensionUpsell.button.getItNowLabel', 'Accesibility label for the Pinterest browser extension'),color:"red",onClick:n,size:"lg",text:c._('Install now', 'extensionUpsell.button.installNow', 'Get the Pinterest browser extension')})})]})]}):(0,s.jsxs)(r.xu,{padding:8,children:[(0,s.jsx)(r.X6,{align:"center",size:"600",children:t||d}),(0,s.jsx)(r.xu,{marginTop:4,children:(0,s.jsx)(r.xv,{align:"center",children:l||u})}),(0,s.jsx)(r.xu,{display:"flex",flex:"grow",marginTop:8,paddingY:8,children:(0,s.jsx)(T,{isLooping:!0})}),(0,s.jsxs)(r.kC,{alignItems:"stretch",justifyContent:"end",children:[(0,s.jsx)(r.xu,{"data-test-id":"cancel-extension-upsell",display:"inlineBlock",marginEnd:2,children:(0,s.jsx)(r.zx,{accessibilityLabel:c._('Cancel', 'extensionUpsell.button.cancelLabel', 'Accesibility label for cancel install Pinterest browser extension'),fullWidth:!0,onClick:a,size:"lg",text:c._('Cancel', 'extensionUpsell.button.cancel', 'Cancel button text for install browser extension upsell')})}),(0,s.jsx)(r.zx,{accessibilityLabel:c._('Get the Pinterest browser extension', 'extensionUpsell.button.getItNowLabel', 'Accesibility label for the Pinterest browser extension'),color:"red",onClick:n,size:"lg",text:c._('Get it now', 'extensionUpsell.button.getItNow', 'Get the Pinterest browser extension')})]})]})}},73899:function(e,t,n){"use strict";n.d(t,{Z:function(){return lt}});var r=n(586659),o=n(581722),i=n(963489),a=n(672410),l=n(20256),s=n(865540),c={instant:85,short:250,medium:420,semiLong:500,long:800},u={easeIn:"0.9, 0.025, 0.75, 0.625",easeOut:"0.25, 0.375, 0.1, 0.975",easeInOut:"0.66, 0.025, 0.33, 0.975",linear:"0.5, 0.5, 1.0, 1.0",spring:"1, 100, 17, 8"};function d(e){var t=e.property,n=e.duration,r=e.timingFunction,o=e.delay,i="number"==typeof n?"".concat(n,"ms"):"".concat(c[n],"ms");return"".concat(t," ").concat(i," cubic-bezier(").concat(u[r],")").concat(o?" ".concat(o,"ms"):"")}function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach(function(t){var r,o;r=t,o=n[t],(r=function(e){var t=function(e,t){if("object"!=f(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=f(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==f(t)?t:t+""}(r))in e?Object.defineProperty(e,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[r]=o}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function y(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{execution:"sequential"},n=t.execution;return e.reduce(function(e,t){var r=e.combinedTransitions,o=e.totalDelay,i=t.delay||0,a="sequential"===n?o+i:t.delay;return{combinedTransitions:0===r.length?d(t):"".concat(r,", ").concat(d(h(h({},t),{},{delay:a}))),totalDelay:o+i}},{combinedTransitions:"",totalDelay:0}).combinedTransitions}var b=n(19585),m=n(640785),g=n(114767),v=n(382718);function _(e){return(_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function x(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function j(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?x(Object(n),!0).forEach(function(t){var r,o;r=t,o=n[t],(r=function(e){var t=function(e,t){if("object"!=_(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=_(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==_(t)?t:t+""}(r))in e?Object.defineProperty(e,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[r]=o}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):x(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function P(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,l=[],s=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);s=!0);}catch(e){c=!0,o=e}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return O(e,t);var n=({}).toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?O(e,t):void 0}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function O(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var w={property:"opacity",duration:1600,timingFunction:"easeInOut",delay:500},S={opacity:1},A={opacity:0},I=[{property:"height",duration:400,timingFunction:"easeInOut",delay:500},{property:"width",duration:400,timingFunction:"easeInOut",delay:500},{property:"left",duration:400,timingFunction:"easeInOut",delay:500},{property:"top",duration:400,timingFunction:"easeInOut",delay:500},{property:"box-shadow",duration:500,timingFunction:"easeInOut",delay:900}],E={boxShadow:"0 0 0 500px rgba(197, 226, 238, 0)",top:"0%",left:"0%",height:"100%",width:"100%"},C={boxShadow:"0 0 0 500px rgba(197, 226, 238, 1)",left:"8%",top:"8%",height:"84%",width:"84%"},D=[{property:"opacity",duration:200,timingFunction:"easeInOut",delay:1500},{property:"left",duration:800,timingFunction:"easeInOut",delay:2e3}],T={opacity:0,left:"0px"},k={left:"164px",opacity:1},z={property:"background-color",duration:"medium",timingFunction:"easeIn",delay:4200},R={backgroundColor:"rgba(17, 82, 194, 0)",marginLeft:"8px"},B={backgroundColor:"rgba(17, 82, 194, 1)"};function L(e){var t=e.onStart,n=(0,b.ZP)(),o=(0,r.useRef)(null),i=(0,r.useRef)(0),a=(0,r.useRef)(null),s=P((0,r.useState)({cropper:!1,font:!1,image:!1,logo:!1}),2),c=s[0],u=s[1],f=P((0,r.useState)(null),2),p=f[0],h=f[1],_=P((0,r.useState)(!1),2),x=_[0],O=_[1],L=P((0,r.useState)(E),2),F=L[0],Z=L[1],M=P((0,r.useState)(T),2),N=M[0],H=M[1],U=P((0,r.useState)(S),2),W=U[0],V=U[1],G=P((0,r.useState)(R),2),X=G[0],Y=G[1],q=P((0,r.useState)(" "),2),K=q[0],J=q[1],$=n._('Picture-perfect outdoor seating', 'Sample text describing an image of visually-appealing outdoor seating', 'Sample text describing an image of visually-appealing outdoor seating');(0,r.useEffect)(function(){c.font||(0,g.a2)().then(function(){h(g.Wt[m.WK]),u(j(j({},c),{},{font:!0}))}),Object.keys(c).reduce(function(e,t){return e&&c[t]},!0)&&O(!0)},[c]),(0,r.useEffect)(function(){return x&&(Z(C),H(k),V(A),Y(B),t&&t(),o.current=setTimeout(function(){return setInterval(function(){var e;return e=i.current,void(J($.substr(0,e)),e>$.length&&a.current&&(clearInterval(a.current),a.current=null),i.current=e+1)},500/$.length)},3200)),function(){o.current&&clearTimeout(o.current),a.current&&clearInterval(a.current),o.current=null,a.current=null}},[x,t]);var Q=[n._('Crop images or use a preset size', 'Text describing editing images', 'Text describing editing images'),n._('Add a logo to showcase your brand', 'Text describing adding a logo to images', 'Text describing adding a logo to images'),n._('Use fonts and colors to make text pop', 'Text describing the text overlay feature in Pin creation', 'Text describing the text overlay feature in Pin creation')];return(0,v.jsxs)(l.xu,{bottom:!0,"data-test-id":"pinbuilder-education-editing-screen",display:"flex",height:"100%",left:!0,overflow:"hidden",position:"absolute",right:!0,top:!0,width:"100%",children:[(0,v.jsx)(l.xu,{alignItems:"center",dangerouslySetInlineStyle:{__style:{backgroundColor:"#c5e2ee"}},display:"flex",justifyContent:"center",minWidth:342,padding:8,position:"relative",width:342,children:(0,v.jsxs)(l.xu,{height:"100%",overflow:"hidden",position:"relative",rounding:2,width:"100%",children:[(0,v.jsx)(l.xu,{bottom:!0,left:!0,position:"absolute",right:!0,rounding:2,top:!0,children:(0,v.jsx)(l.Ee,{alt:n._('Sample image of a Pin of outdoor furniture', 'Alt text describing image of outdoor furniture', 'Alt text describing image of outdoor furniture'),fit:"contain",naturalHeight:568,naturalWidth:804,onLoad:function(){u(j(j({},c),{},{image:!0}))},src:"https://s.pinimg.com/webapp/pin-87a15a9f.png"})}),(0,v.jsxs)(l.xu,{bottom:!0,dangerouslySetInlineStyle:{__style:j(j({},F),{},{transition:y(I,{execution:"parallel"})})},position:"absolute",right:!0,rounding:2,children:[(0,v.jsx)(l.xu,{bottom:!0,dangerouslySetInlineStyle:{__style:j(j({},W),{},{transition:d(w)})},left:!0,position:"absolute",right:!0,top:!0,children:(0,v.jsx)(l.Ee,{alt:"Cropper",fit:"contain",naturalHeight:804,naturalWidth:568,onLoad:function(){u(j(j({},c),{},{cropper:!0}))},src:"https://s.pinimg.com/webapp/cropper-e71fa1c6.png"})}),(0,v.jsx)(l.xu,{dangerouslySetInlineStyle:{__style:j(j({},N),{},{transition:y(D,{execution:"parallel"})})},height:36,margin:4,position:"relative",top:!0,width:36,children:(0,v.jsx)(l.Ee,{alt:n._('A sample logo on an image to demonstrate editing on Pinterest', 'A sample logo on an image to demonstrate image editing features on Pinterest', 'A sample logo on an image to demonstrate image editing features on Pinterest'),color:"transparent",fit:"contain",naturalHeight:70,naturalWidth:60,onLoad:function(){u(j(j({},c),{},{logo:!0}))},src:"https://s.pinimg.com/webapp/logo-34fec719.png"})}),(0,v.jsx)(l.xu,{alignItems:"center",bottom:!0,dangerouslySetInlineStyle:{__style:j(j({},X),{},{borderRadius:"0 0 8px 8px",transition:d(z)})},display:"flex",justifyContent:"center",left:!0,padding:4,position:"absolute",right:!0,children:(0,v.jsx)(l.xu,{dangerouslySetInlineStyle:{__style:j(j({},p),{},{color:"white",fontSize:"21px",textAlign:"center"})},children:K})})]})]})}),(0,v.jsx)(l.xu,{alignItems:"center",display:"flex",flex:"grow",paddingX:10,children:(0,v.jsxs)(l.xu,{children:[(0,v.jsx)(l.X6,{children:n._('New ways to edit', 'Heading for describing ways to edit Pins', 'Heading for describing ways to edit Pins')}),(0,v.jsx)(l.xu,{paddingY:4,children:Q.map(function(e,t){return(0,v.jsxs)(l.xu,{alignItems:"center",display:"flex",flex:"none",paddingY:1,children:[(0,v.jsx)(l.xu,{color:"selected",display:"flex",height:8,rounding:"circle",width:8}),(0,v.jsx)(l.xu,{paddingX:2,children:(0,v.jsx)(l.xv,{overflow:"normal",size:"400",children:e})})]},"editing-screen-point-".concat(t))})})]})})]})}function F(e){return(F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Z(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function M(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Z(Object(n),!0).forEach(function(t){var r,o;r=t,o=n[t],(r=function(e){var t=function(e,t){if("object"!=F(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=F(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==F(t)?t:t+""}(r))in e?Object.defineProperty(e,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[r]=o}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Z(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function N(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,l=[],s=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);s=!0);}catch(e){c=!0,o=e}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return H(e,t);var n=({}).toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?H(e,t):void 0}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function H(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var U={top:474},W={top:-276},V={property:"top",duration:8e3,timingFunction:"easeOut",delay:250};function G(e){var t=e.onStart,n=(0,b.ZP)(),o=N((0,r.useState)(!1),2),i=o[0],a=o[1],s=N((0,r.useState)(!1),2),c=s[0],u=s[1],f=N((0,r.useState)(U),2),p=f[0],h=f[1];(0,r.useEffect)(function(){c&&(a(!0),t&&t()),i&&h(W)},[i,c,t]);var y=[n._('Make multiple Pins at a time', 'Text describing that multiple Pins can be at once', 'Text describing that multiple Pins can be at once'),n._('Create any format, from video to carousel', 'Text describing the different Pin formats that can be used', 'Text describing the different Pin formats that can be used'),n._('See how Pins look before you publish', 'Text describing the Pin preview feature', 'Text describing the Pin preview feature')];return(0,v.jsxs)(l.xu,{bottom:!0,"data-test-id":"pinbuilder-education-publish-screen",display:"flex",height:"100%",left:!0,overflow:"hidden",position:"absolute",right:!0,top:!0,width:"100%",children:[(0,v.jsx)(l.xu,{dangerouslySetInlineStyle:{__style:{backgroundColor:"#fbcccd"}},minWidth:342,position:"relative",width:342,children:(0,v.jsx)(l.xu,{dangerouslySetInlineStyle:{__style:M(M({},p),{},{transition:d(V)})},height:"100%",paddingX:8,position:"relative",width:"100%",children:(0,v.jsx)(l.Ee,{alt:n._('Example Pins', 'Alt text for an image showing example Pins', 'Alt text for an image showing example Pins'),naturalHeight:1660,naturalWidth:606,onLoad:function(){return u(!0)},src:"https://s.pinimg.com/webapp/onboarding_multiPin-1d44baaf.png"})})}),(0,v.jsx)(l.xu,{alignItems:"center",display:"flex",flex:"grow",paddingX:10,children:(0,v.jsxs)(l.xu,{children:[(0,v.jsx)(l.X6,{children:n._('Why stop at one?', 'A heading text for describing creating multiple Pins at once', 'A heading text for describing creating multiple Pins at once')}),(0,v.jsx)(l.xu,{paddingY:4,children:y.map(function(e,t){return(0,v.jsxs)(l.xu,{alignItems:"center",display:"flex",paddingY:1,children:[(0,v.jsx)(l.xu,{color:"selected",display:"flex",flex:"none",height:8,rounding:"circle",width:8}),(0,v.jsx)(l.xu,{paddingX:2,children:(0,v.jsx)(l.xv,{size:"400",children:e})})]},"publish-screen-point-".concat(t))})})]})})]})}function X(e){return(X="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function q(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Y(Object(n),!0).forEach(function(t){var r,o;r=t,o=n[t],(r=function(e){var t=function(e,t){if("object"!=X(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=X(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==X(t)?t:t+""}(r))in e?Object.defineProperty(e,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[r]=o}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Y(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function K(e){return function(e){if(Array.isArray(e))return Q(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||$(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function J(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,l=[],s=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);s=!0);}catch(e){c=!0,o=e}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return l}}(e,t)||$(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $(e,t){if(e){if("string"==typeof e)return Q(e,t);var n=({}).toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Q(e,t):void 0}}function Q(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var ee={property:"top",timingFunction:"easeInOut",duration:3700,delay:1725},et=[{property:"opacity",duration:500,timingFunction:"easeInOut",delay:4200},{property:"margin-top",duration:500,timingFunction:"easeInOut",delay:4200}],en=[{src:"https://s.pinimg.com/webapp/examplePins_01-125ae6f6.png",keyframe:{start:{top:-77},end:{top:-663}},naturalHeight:1684,naturalWidth:360},{src:"https://s.pinimg.com/webapp/examplePins_02-c1b9595c.png",keyframe:{start:{top:-1},end:{top:-636}},naturalHeight:1684,naturalWidth:360},{src:"https://s.pinimg.com/webapp/examplePins_03-434ea5a7.png",keyframe:{start:{top:-121},end:{top:-654}},naturalHeight:1684,naturalWidth:360},{src:"https://s.pinimg.com/webapp/examplePins_04-d8206ce6.png",keyframe:{start:{top:-5},end:{top:-646}},naturalHeight:1684,naturalWidth:360},{src:"https://s.pinimg.com/webapp/examplePins_05-4c1f579d.png",keyframe:{start:{top:-142},end:{top:-650}},naturalHeight:1684,naturalWidth:360}],er={marginTop:24,maxWidth:500,opacity:0},eo={marginTop:0,maxWidth:500,opacity:1};function ei(e){var t=e.onStart,n=(0,b.ZP)(),o=J((0,r.useState)(!1),2),i=o[0],a=o[1],s=J((0,r.useState)([]),2),c=s[0],u=s[1],f=J((0,r.useState)(er),2),p=f[0],h=f[1],m=J((0,r.useState)(en.reduce(function(e,t){return[].concat(K(e),[t.keyframe.start])},[])),2),g=m[0],_=m[1];return(0,r.useEffect)(function(){u(en.map(function(){return!0}))},[]),(0,r.useEffect)(function(){0===c.filter(function(e){return e}).length&&(a(!0),t&&t()),i&&(h(eo),_(en.reduce(function(e,t){return[].concat(K(e),[t.keyframe.end])},[])))},[i,c,t]),(0,v.jsxs)(l.xu,{bottom:!0,"data-test-id":"pinbuilder-welcome-screen",display:"flex",height:"100%",left:!0,overflow:"hidden",position:"absolute",right:!0,top:!0,width:"100%",children:[en.map(function(e,t){var r=en[t],o=r.src,i=r.naturalHeight,a=r.naturalWidth,s=t>en.length/2?4:void 0,f=t<en.length/2-1?4:void 0;return(0,v.jsx)(l.xu,{dangerouslySetInlineStyle:{__style:q(q({},g[t]),{},{transition:d(ee)})},height:240,marginEnd:f,marginStart:s,position:"relative",width:164,children:(0,v.jsx)(l.Ee,{alt:n._('Column of example Pins', 'Image alt text describing a column of example Pins', 'Image alt text describing a column of example Pins'),color:"transparent",naturalHeight:i,naturalWidth:a,onLoad:function(){var e=K(c);e[t]=!1,u(e)},src:o})},"education-image-strip-".concat(t))}),(0,v.jsx)(l.xu,{alignItems:"center",bottom:!0,display:"flex",justifyContent:"center",left:!0,position:"absolute",right:!0,top:!0,children:(0,v.jsxs)(l.xu,{alignItems:"center",dangerouslySetInlineStyle:{__style:q(q({},p),{},{transition:"".concat(y(et,{execution:"parallel"}))})},direction:"column",display:"flex",justifyContent:"center",padding:12,children:[(0,v.jsx)(l.X6,{children:n._('Great Pins made easy', 'In-product education heading text for creating Pins', 'In-product education heading text for creating Pins')}),(0,v.jsx)(l.xu,{paddingY:4,children:(0,v.jsx)(l.xv,{align:"center",size:"400",children:n._('Add text and logos, make multiple Pins at once and edit like a pro. New tools let you create Pins your way.', 'Text describing how to make Pins on Pinterest', 'Text describing how to make Pins on Pinterest')})})]})})]})}var ea=n(29859),el=n(980787),es=n(982166),ec=n(302148),eu=n(526435),ed=n(325671),ef=n(316095),ep=n(576538);function eh(e){return(eh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ey(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function eb(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ey(Object(n),!0).forEach(function(t){ex(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ey(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function em(e,t){return(em=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function eg(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ev(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(ev=function(){return!!e})()}function e_(e){return(e_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ex(e,t,n){return(t=ej(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ej(e){var t=function(e,t){if("object"!=eh(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=eh(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==eh(t)?t:t+""}var eP=function(e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");o.prototype=Object.create(e&&e.prototype,{constructor:{value:o,writable:!0,configurable:!0}}),Object.defineProperty(o,"prototype",{writable:!1}),e&&em(o,e);var t,n,r=(t=ev(),function(){var e,n=e_(o);return e=t?Reflect.construct(n,arguments,e_(this).constructor):n.apply(this,arguments),function(e,t){if(t&&("object"==eh(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return eg(e)}(this,e)});function o(){var e;if(!(this instanceof o))throw TypeError("Cannot call a class as a function");for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];return ex(eg(e=r.call.apply(r,[this].concat(n))),"state",{description:e.props.initialDescription,descriptionFocused:!1,dirtyFields:new Set,link:e.props.initialLink,linkError:null,publishOption:e.props.initialPublishOption,scheduledDate:e.props.initialScheduledDate,scheduledTime:e.props.initialScheduledTime,selectedItem:e.props.initialSelectedItem,title:e.props.initialTitle,titleFocused:!1}),ex(eg(e),"mounted",!1),ex(eg(e),"handleDescriptionFocus",function(){e.setState({descriptionFocused:!0})}),ex(eg(e),"handleDescriptionBlur",function(){e.setState({descriptionFocused:!1})}),ex(eg(e),"handleTitleFocus",function(){e.setState({titleFocused:!0})}),ex(eg(e),"handleTitleBlur",function(){e.setState({titleFocused:!1})}),ex(eg(e),"handleLinkBlur",function(t){var n=t.value,r=e.props,o=r.i18n,i=r.ideaPinRenamingEnabled;(0,ed.qi)({i18n:o,ideaPinRenamingEnabled:i,link:n}).then(function(t){if(t&&t.length>0&&e.mounted){var n=t[0].message;e.setState({linkError:n})}})}),ex(eg(e),"handleDescriptionChange",function(t){var n=t.value;e.setState(function(e){return{description:n.substring(0,eu.JO),dirtyFields:e.dirtyFields.add("description")}})}),ex(eg(e),"handleLinkChange",function(t){var n=t.value;e.setState(function(e){return{link:n,linkError:null,dirtyFields:e.dirtyFields.add("link")}})}),ex(eg(e),"handleTitleChange",function(t){var n=t.value;e.setState(function(e){return{title:n.substring(0,eu.Ke),dirtyFields:e.dirtyFields.add("title")}})}),ex(eg(e),"handleBoardItemChosen",function(t){e.setState(function(e){return{selectedItem:t,dirtyFields:e.dirtyFields.add("board")}})}),ex(eg(e),"handleSubmitClick",function(){var t=e.props,n=t.i18n,r=t.ideaPinRenamingEnabled,o=t.onDismiss,i=t.onSubmit,a=e.state,l=a.description,s=a.link,c=a.publishOption,u=a.scheduledDate,d=a.scheduledTime,f=a.selectedItem,p=a.title;e.props.logContextEvent({event_type:101,component:13396,element:11331}),(0,ed.qi)({i18n:n,ideaPinRenamingEnabled:r,link:s}).then(function(t){if(!t||t&&0===t.length)i(eb(eb(eb(eb(eb(eb(eb({},null!=l?{description:l}:Object.freeze({})),null!=s?{link:s}:Object.freeze({})),null!=c?{publishOption:c}:Object.freeze({})),void 0!==u?{scheduledDate:u}:Object.freeze({})),void 0!==d?{scheduledTime:d}:Object.freeze({})),void 0!==f?{selectedItem:f}:Object.freeze({})),null!=p?{title:p}:Object.freeze({}))),o();else if(t&&e.mounted){var n=t[0].message;e.setState({linkError:n})}})}),e}return n=[{key:"componentDidMount",value:function(){this.mounted=!0}},{key:"componentWillUnmount",value:function(){this.mounted=!1}},{key:"render",value:function(){var e=this.props,t=e.numPins,n=e.onDismiss,r=this.state,o=r.description,i=r.descriptionFocused,a=r.dirtyFields,s=r.link,c=r.linkError,u=r.selectedItem,d=r.title,f=r.titleFocused,p=this.props.i18n._('Field updated', 'Icon symbolizing that the value for a field will be updated', 'Icon symbolizing that the value for a field will be updated');return(0,v.jsx)(es.ZP,{accessibilityModalLabel:this.props.i18n._('Edit Pin info', 'Label to describe the bulk Pin edit modal', 'Label to describe the bulk Pin edit modal'),footer:(0,v.jsxs)(l.xu,{alignItems:"center",display:"flex",justifyContent:"between",padding:1,children:[(0,v.jsx)(l.xu,{paddingX:3,children:(0,v.jsx)(l.xv,{color:"subtle",size:"200",children:(0,ec.nk)(this.props.i18n.ngettext('Editing info for {{ numPins }} Pin', 'Editing info for {{ numPins }} Pins', t, 'Number of Pins selected for bulk edit', 'Number of Pins selected for bulk edit'),{numPins:t})})}),(0,v.jsx)(l.xu,{"data-test-id":"pin-builder-edit-modal-save-button",children:(0,v.jsx)(l.zx,{color:"red",disabled:0===a.size,onClick:this.handleSubmitClick,text:this.props.i18n._('Update info', 'Button to save info to selected Pins', 'Button to save info to selected Pins')})})]}),heading:this.props.i18n._('Edit info', 'Heading for the bulk Pin info edit modal', 'Heading for the bulk Pin info edit modal'),onDismiss:n,size:"md",children:(0,v.jsxs)(l.xu,{column:12,"data-test-id":"pinbuilder-bulk-edit-modal",paddingX:8,paddingY:6,children:[(0,v.jsxs)(l.xu,{marginBottom:6,children:[(0,v.jsx)(l.__,{htmlFor:"pin-builder-edit-modal-board",children:(0,v.jsxs)(l.xu,{alignItems:"center",display:"flex",marginBottom:1,children:[(0,v.jsx)(l.xv,{children:this.props.i18n._('Board', 'Label for bulk apply board dropdown', 'Label for bulk apply board dropdown')}),a.has("board")&&(0,v.jsx)(l.xu,{paddingX:1,children:(0,v.jsx)(l.JO,{accessibilityLabel:p,color:"success",icon:"check-circle",size:12})})]})}),(0,v.jsx)(ea.Z,{flyoutSize:480,onItemChosen:this.handleBoardItemChosen,placeholder:void 0===u?this.props.i18n._('Multiple', 'Placeholder text for board dropdown with multiple boards', 'Placeholder text for board dropdown with multiple boards'):this.props.i18n._('Select', 'Placeholder text for board dropdown to select board', 'Placeholder text for board dropdown to select board'),selectedItem:u,showButton:!1,showCreateBoardButton:!1,showFlyoutSaveButton:!1,showSectionSaveButton:!1,useLayer:!1})]}),(0,v.jsxs)(l.xu,{marginBottom:6,children:[(0,v.jsx)(l.__,{htmlFor:"pin-builder-edit-modal-title",children:(0,v.jsxs)(l.xu,{alignItems:"center",display:"flex",marginBottom:1,children:[(0,v.jsx)(l.xv,{children:this.props.i18n._('Title', 'Label for bulk apply title text field', 'Label for bulk apply title text field')}),a.has("title")&&(0,v.jsx)(l.xu,{paddingX:1,children:(0,v.jsx)(l.JO,{accessibilityLabel:p,color:"success",icon:"check-circle",size:12})})]})}),(0,v.jsx)(l.nv,{id:"pin-builder-edit-modal-title",onBlur:this.handleTitleBlur,onChange:this.handleTitleChange,onFocus:this.handleTitleFocus,onKeyDown:this.handleTitleChange,placeholder:void 0===d?this.props.i18n._('Multiple', 'Placeholder text for title field with multiple titles', 'Placeholder text for title field with multiple titles'):void 0,size:"lg",value:d||""}),(0,v.jsx)(l.xu,{column:12,marginTop:1,minHeight:15,children:f&&(0,v.jsxs)(l.xu,{column:12,display:"flex",justifyContent:"between",children:[(0,v.jsx)(l.xu,{flex:"grow",children:(0,v.jsx)(l.xv,{color:"subtle",size:"100",children:this.props.i18n._('Your first 40 characters are what usually show up in feeds', 'pinbuilder.header.editModal.title.helper', 'Helper education text for title on Pin creation')})}),(0,v.jsx)(l.xu,{flex:"none",children:(0,v.jsx)(l.xv,{color:"default",size:"100",children:eu.Ke-(d||"").length})})]})})]}),(0,v.jsxs)(l.xu,{marginBottom:6,children:[(0,v.jsx)(l.__,{htmlFor:"pin-builder-edit-modal-description",children:(0,v.jsxs)(l.xu,{alignItems:"center",display:"flex",marginBottom:1,children:[(0,v.jsx)(l.xv,{children:this.props.i18n._('Description', 'Label for bulk apply description text field', 'Label for bulk apply description text field')}),a.has("description")&&(0,v.jsx)(l.xu,{paddingX:1,children:(0,v.jsx)(l.JO,{accessibilityLabel:p,color:"success",icon:"check-circle",size:12})})]})}),(0,v.jsx)(l.Kx,{id:"pin-builder-edit-modal-description",onBlur:this.handleDescriptionBlur,onChange:this.handleDescriptionChange,onFocus:this.handleDescriptionFocus,onKeyDown:this.handleDescriptionChange,placeholder:void 0===o?this.props.i18n._('Multiple', 'Placeholder text for description field with multiple descriptions', 'Placeholder text for description field with multiple descriptions'):void 0,rows:4,value:o||""}),(0,v.jsx)(l.xu,{column:12,marginTop:1,minHeight:15,children:i&&(0,v.jsxs)(l.xu,{column:12,display:"flex",justifyContent:"between",children:[(0,v.jsx)(l.xu,{flex:"grow",children:(0,v.jsx)(l.xv,{color:"subtle",size:"100",children:this.props.i18n._('People will usually see the first 50 characters when they click on your Pin', 'pinbuilder.header.editModal.description.helper', 'Helper education text for description on Pin creation')})}),(0,v.jsx)(l.xu,{flex:"none",children:(0,v.jsx)(l.xv,{color:"default",size:"100",children:eu.JO-(o||"").length})})]})})]}),(0,v.jsxs)(l.xu,{children:[(0,v.jsx)(l.__,{htmlFor:"pin-builder-edit-modal-link",children:(0,v.jsxs)(l.xu,{alignItems:"center",display:"flex",marginBottom:1,children:[(0,v.jsx)(l.xv,{children:this.props.i18n._('Link', 'Label for bulk apply link text field', 'Label for bulk apply link text field')}),(a.has("link")||!!c)&&(0,v.jsx)(l.xu,{paddingX:1,children:(0,v.jsx)(l.JO,{accessibilityLabel:p,color:c?"error":"success",icon:c?"alert":"check-circle",size:12})})]})}),(0,v.jsx)(l.nv,{hasError:!!c,id:"pin-builder-edit-modal-link",onBlur:this.handleLinkBlur,onChange:this.handleLinkChange,onKeyDown:this.handleLinkChange,placeholder:void 0===s?this.props.i18n._('Multiple', 'Placeholder text for link field with multiple links', 'Placeholder text for link field with multiple links'):void 0,size:"lg",value:s||""}),(0,v.jsx)(l.xu,{column:12,marginTop:1,minHeight:15,children:!!c&&(0,v.jsx)(l.xu,{column:12,display:"flex",justifyContent:"between",children:(0,v.jsx)(l.xv,{color:"error",size:"100",children:c})})})]})]})})}}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ej(r.key),r)}}(o.prototype,n),Object.defineProperty(o,"prototype",{writable:!1}),o}(r.Component);function eO(e){var t=(0,el.u)().logContextEvent,n=(0,b.ZP)(),r=(0,s.Z)(),i=(0,o.v9)(ep.p),a=(0,o.v9)(function(e){return(0,ep.xA)(e).length}),l=(0,o.I0)();return(0,v.jsx)(eP,eb(eb(eb({},e),{},{i18n:n,ideaPinRenamingEnabled:r,logContextEvent:t},i),{},{numPins:a,onSubmit:function(e){return l((0,ef.setPinBuilderSharedData)(e))}}))}function ew(e){return(ew="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function eS(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function eA(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?eS(Object(n),!0).forEach(function(t){eT(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):eS(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function eI(e,t){return(eI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function eE(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function eC(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(eC=function(){return!!e})()}function eD(e){return(eD=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function eT(e,t,n){return(t=ek(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ek(e){var t=function(e,t){if("object"!=ew(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=ew(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ew(t)?t:t+""}var ez=function(e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");i.prototype=Object.create(e&&e.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),Object.defineProperty(i,"prototype",{writable:!1}),e&&eI(i,e);var t,n,o=(t=eC(),function(){var e,n=eD(i);return e=t?Reflect.construct(n,arguments,eD(this).constructor):n.apply(this,arguments),function(e,t){if(t&&("object"==ew(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return eE(e)}(this,e)});function i(){var e;if(!(this instanceof i))throw TypeError("Cannot call a class as a function");for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];return eT(eE(e=o.call.apply(o,[this].concat(n))),"state",{showModal:!1}),eT(eE(e),"handleShowModal",function(){e.props.logContextEvent({event_type:101,component:13208,element:11325}),e.setState({showModal:!0})}),eT(eE(e),"handleHideModal",function(){e.setState({showModal:!1})}),e}return n=[{key:"render",value:function(){var e=this.state.showModal;return(0,v.jsxs)(r.Fragment,{children:[(0,v.jsx)(l.hU,{accessibilityLabel:this.props.i18n._('Edit', 'Button to bulk edit Pin images', 'Button to bulk edit Pin images'),icon:"edit",iconColor:"gray",onClick:this.handleShowModal,size:"md"}),e&&(0,v.jsx)(eO,{onDismiss:this.handleHideModal})]})}}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ek(r.key),r)}}(i.prototype,n),Object.defineProperty(i,"prototype",{writable:!1}),i}(r.Component);function eR(e){var t=(0,el.u)().logContextEvent,n=(0,b.ZP)();return(0,v.jsx)(ez,eA(eA({},e),{},{i18n:n,logContextEvent:t}))}var eB=n(821342),eL=n(675973),eF=n(448505),eZ=n(7872),eM=n(111330),eN=n(753143);function eH(e){return(eH="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function eU(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function eW(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?eU(Object(n),!0).forEach(function(t){eq(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):eU(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function eV(e,t){return(eV=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function eG(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function eX(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(eX=function(){return!!e})()}function eY(e){return(eY=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function eq(e,t,n){return(t=eK(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function eK(e){var t=function(e,t){if("object"!=eH(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=eH(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==eH(t)?t:t+""}var eJ=function(e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");o.prototype=Object.create(e&&e.prototype,{constructor:{value:o,writable:!0,configurable:!0}}),Object.defineProperty(o,"prototype",{writable:!1}),e&&eV(o,e);var t,n,r=(t=eX(),function(){var e,n=eY(o);return e=t?Reflect.construct(n,arguments,eY(this).constructor):n.apply(this,arguments),function(e,t){if(t&&("object"==eH(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return eG(e)}(this,e)});function o(){var e;if(!(this instanceof o))throw TypeError("Cannot call a class as a function");for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];return eq(eG(e=r.call.apply(r,[this].concat(n))),"state",{checked:!1}),eq(eG(e),"handleChange",function(t){var n=t.checked;e.setState({checked:n})}),eq(eG(e),"handleButtonClick",function(t){var n=t.event;(0,e.props.onButtonClick)({event:n,checked:e.state.checked})}),e}return n=[{key:"render",value:function(){var e=this.props,t=e.alertText,n=e.buttonText,r=e.headingText,o=e.id,i=e.onDismiss,a=this.state.checked;return(0,v.jsx)(l.u_,{accessibilityModalLabel:this.props.i18n._('Alert modal', 'Alert modal to confirm action', 'Alert modal to confirm action'),footer:(0,v.jsxs)(l.xu,{display:"flex",marginEnd:-1,marginStart:-1,children:[(0,v.jsx)(l.xu,{flex:"grow",paddingX:1,children:(0,v.jsx)(l.zx,{fullWidth:!0,onClick:i,size:"lg",text:this.props.i18n._('Cancel', 'Button to close alert modal', 'Button to close alert modal')})}),(0,v.jsx)(l.xu,{flex:"grow",paddingX:1,children:(0,v.jsx)(l.zx,{color:"red",fullWidth:!0,onClick:this.handleButtonClick,size:"lg",text:n})})]}),heading:(0,v.jsx)(l.xu,{alignItems:"center",display:"flex",justifyContent:"center",marginTop:6,children:(0,v.jsx)(l.X6,{size:"600",children:r})}),onDismiss:i,role:"alertdialog",size:"sm",children:(0,v.jsxs)(l.xu,{children:[(0,v.jsx)(l.xv,{align:"center",children:t}),(0,v.jsxs)(l.xu,{alignItems:"center",display:"flex",justifyContent:"center",marginTop:4,children:[(0,v.jsx)(l.XZ,{checked:a,id:o,onChange:this.handleChange,size:"sm"}),(0,v.jsx)(l.__,{htmlFor:o,children:(0,v.jsx)(l.xu,{paddingX:2,children:(0,v.jsx)(l.xv,{children:this.props.i18n._('Do not show this message again', 'Checkbox option to never show alert modal again', 'Checkbox option to never show alert modal again')})})})]})]})})}}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,eK(r.key),r)}}(o.prototype,n),Object.defineProperty(o,"prototype",{writable:!1}),o}(r.Component);function e$(e){var t=(0,b.ZP)();return(0,v.jsx)(eJ,eW(eW({},e),{},{i18n:t}))}var eQ=n(819340);function e0(e){return(e0="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function e1(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function e2(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?e1(Object(n),!0).forEach(function(t){e4(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):e1(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function e8(e,t){return(e8=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function e3(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function e5(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(e5=function(){return!!e})()}function e6(e){return(e6=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function e4(e,t,n){return(t=e9(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function e9(e){var t=function(e,t){if("object"!=e0(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=e0(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==e0(t)?t:t+""}var e7=function(e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");i.prototype=Object.create(e&&e.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),Object.defineProperty(i,"prototype",{writable:!1}),e&&e8(i,e);var t,n,o=(t=e5(),function(){var e,n=e6(i);return e=t?Reflect.construct(n,arguments,e6(this).constructor):n.apply(this,arguments),function(e,t){if(t&&("object"==e0(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return e3(e)}(this,e)});function i(){var e;if(!(this instanceof i))throw TypeError("Cannot call a class as a function");for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];return e4(e3(e=o.call.apply(o,[this].concat(n))),"state",{showModal:!1}),e4(e3(e),"handleShowModal",function(){e.setState({showModal:!0})}),e4(e3(e),"handleHideModal",function(){e.setState({showModal:!1})}),e4(e3(e),"handleButtonClick",function(){var t=e.props,n=t.onClickDelete,r=t.logContextEvent,o=eN.ZP.getItem(eM.Lj);r({event_type:101,component:13208,element:11327}),o?n():e.handleShowModal()}),e4(e3(e),"handleAlertButtonClick",function(t){var n=t.checked,r=e.props.onClickDelete;n&&eN.ZP.setItem(eM.Lj,!0),r()}),e}return n=[{key:"render",value:function(){var e=this.state.showModal;return(0,v.jsxs)(r.Fragment,{children:[(0,v.jsx)(l.hU,{accessibilityLabel:this.props.i18n._('Delete', 'Button to bulk delete selected Pin drafts', 'Button to bulk delete selected Pin drafts'),bgColor:"transparent",icon:"trash-can",iconColor:"gray",onClick:this.handleButtonClick,size:"md"}),e&&(0,v.jsx)(e$,{alertText:this.props.i18n._('This will delete your entire Pin canvas. This action cannot be undone', 'Warning message shown before Pin drafts are deleted', 'Warning message shown before Pin drafts are deleted'),buttonText:this.props.i18n._('Delete', 'Button to bulk delete selected Pin drafts', 'Button to bulk delete selected Pin drafts'),headingText:this.props.i18n._('Are you sure?', 'Alert modal to confirm action', 'Alert modal to confirm action'),id:"pin-builder-delete-menu-alert-modal",onButtonClick:this.handleAlertButtonClick,onDismiss:this.handleHideModal})]})}}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,e9(r.key),r)}}(i.prototype,n),Object.defineProperty(i,"prototype",{writable:!1}),i}(r.Component);function te(e){var t=(0,el.u)().logContextEvent,n=(0,b.ZP)(),r=(0,o.I0)(),i=(0,eB.Z)(),a=i.isAuth&&i.isEmployee;return(0,v.jsx)(e7,e2(e2({},e),{},{i18n:n,logContextEvent:t,onClickDelete:function(){return r((0,eQ.Z)({i18n:n,isEmployee:a}))}}))}var tt=n(506939);function tn(e){return(tn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function tr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function to(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?tr(Object(n),!0).forEach(function(t){tc(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tr(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function ti(e,t){return(ti=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function ta(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function tl(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(tl=function(){return!!e})()}function ts(e){return(ts=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function tc(e,t,n){return(t=tu(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function tu(e){var t=function(e,t){if("object"!=tn(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=tn(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==tn(t)?t:t+""}var td=function(e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");o.prototype=Object.create(e&&e.prototype,{constructor:{value:o,writable:!0,configurable:!0}}),Object.defineProperty(o,"prototype",{writable:!1}),e&&ti(o,e);var t,n,r=(t=tl(),function(){var e,n=ts(o);return e=t?Reflect.construct(n,arguments,ts(this).constructor):n.apply(this,arguments),function(e,t){if(t&&("object"==tn(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return ta(e)}(this,e)});function o(){var e;if(!(this instanceof o))throw TypeError("Cannot call a class as a function");for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];return tc(ta(e=r.call.apply(r,[this].concat(n))),"handleSelectAllClick",function(){var t=e.props,n=t.onSelectAll;(0,t.logContextEvent)({event_type:101,component:13208,element:11323}),n()}),tc(ta(e),"handleClearAllClick",function(){var t=e.props,n=t.onClickClear;(0,t.logContextEvent)({event_type:101,component:13208,element:11324}),n()}),tc(ta(e),"handlePublishClick",function(){var t=e.props,n=t.numSelected,r=t.onClickPublish;(0,t.logContextEvent)({event_type:101,component:13208,element:11328,aux_data:{pin_builder_data:JSON.stringify({publish_count:n})}}),r()}),e}return n=[{key:"render",value:function(){var e=this.props,t=e.allSelected,n=e.numSelected;return(0,v.jsxs)(l.xu,{alignItems:"center",color:"default",display:"flex",height:"100%",justifyContent:"between",children:[(0,v.jsxs)(l.kC,{alignItems:"center",justifyContent:"start",children:[(0,v.jsx)(l.xu,{paddingX:6,children:(0,v.jsx)(l.xv,{color:"default",children:(0,ec.nk)(this.props.i18n.ngettext('{{ numSelected }} Pin selected', '{{ numSelected }} Pins selected', n, 'Number of Pins selected for bulk edit or save', 'Number of Pins selected for bulk edit or save'),{numSelected:n})})}),(0,v.jsx)(l.xu,{color:"secondary",height:32,width:1}),(0,v.jsx)(l.xu,{"data-test-id":"pin-builder-select-all",paddingX:4,children:(0,v.jsx)(l.zx,{color:"white",onClick:t?this.handleClearAllClick:this.handleSelectAllClick,text:t?this.props.i18n._('Deselect all', 'Button to deselect all Pin drafts for bulk actions', 'Button to deselect all Pin drafts for bulk actions'):this.props.i18n._('Select all', 'Button to select all Pin drafts for bulk actions', 'Button to select all Pin drafts for bulk actions')})})]}),(0,v.jsxs)(l.kC,{alignItems:"center",justifyContent:"start",children:[(0,v.jsxs)(l.xu,{alignItems:"center",display:"flex",paddingX:5,children:[(0,v.jsx)(l.xu,{"data-test-id":"pin-builder-edit-selected",paddingX:1,children:(0,v.jsx)(eR,{})}),(0,v.jsx)(l.xu,{"data-test-id":"pin-builder-delete-selected",paddingX:1,children:(0,v.jsx)(te,{})}),(0,v.jsx)(l.xu,{"data-test-id":"pin-builder-publish-all",paddingX:1,children:(0,v.jsx)(l.zx,{color:"red",name:"publish",onClick:this.handlePublishClick,text:this.props.i18n._('Publish', 'Button to publish all selected Pins', 'Button to publish all selected Pins')})})]}),(0,v.jsx)(l.xu,{color:"secondary",height:32,width:1}),(0,v.jsx)(l.xu,{paddingX:6,children:(0,v.jsx)(l.hU,{accessibilityLabel:this.props.i18n._('Cancel changes', 'Button to deselect all Pins', 'Button to deselect all Pins'),bgColor:"transparent",icon:"cancel",iconColor:"gray",onClick:this.handleClearAllClick,size:"md"})})]})]})}}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,tu(r.key),r)}}(o.prototype,n),Object.defineProperty(o,"prototype",{writable:!1}),o}(r.Component);function tf(e){var t=(0,el.u)().logContextEvent,n=(0,b.ZP)(),r=(0,o.I0)(),i=(0,eB.Z)(),a=(0,eF.Z)(),l=(0,eZ.lJ)(i,a),s=i.isAuth?i.id:"",c=i.isAuth?i.country:"",u=i.isAuth&&i.isPartner,d=(0,o.v9)(function(e){return e.pinbuilder.selectedPinDraftIds.length}),f=(0,o.v9)(function(e){var t=e.pinbuilder,n=t.pinDrafts,r=t.pinDraftIds,o=t.selectedPinDraftIds;return r.filter(function(e){return!eu.x1.includes(n[e].status)}).length===o.length}),p=(0,eL.Z)().checkExperiment;return(0,v.jsx)(td,to(to({},e),{},{allSelected:f,i18n:n,logContextEvent:t,numSelected:d,onClickClear:function(){return r((0,ef.clearSelectedPinBuilderPinDrafts)())},onClickPublish:function(){return r((0,tt.Z)({country:c,i18n:n,isPartner:u,logContextEvent:t,orbacSubjectId:l,userId:s,checkExperiment:p}))},onSelectAll:function(){return r((0,ef.selectAllPinBuilderPinDrafts)())}}))}var tp=n(117134),th=n(19862),ty=n(324175),tb=n(489529),tm=n(15667),tg=n(789302),tv=n(215710),t_=n(251426),tx=n(669019),tj=n(95517),tP=n(169053),tO=n(603316);function tw(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,l=[],s=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);s=!0);}catch(e){c=!0,o=e}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return tS(e,t);var n=({}).toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?tS(e,t):void 0}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function tS(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var tA=(0,n(78762).Z)(function(){return Promise.all([n.e("18188"),n.e("15195"),n.e("68298")]).then(n.bind(n,326171))},void 0,function(e){return 326171},"app-packages-desktopLoginModal-FullPageSignup",function(e){return ["18188","15195","68298"]}),tI={__style:{paddingTop:eu.XB}};function tE(e){var t,n,a,c=e.pinDraftId,u=e.pinItemId,d=(0,b.ZP)(),f=(0,s.Z)(),p=(0,el.u)().logContextEvent,h=(0,o.I0)(),y=(0,tm.B)(),m=(0,i.s0)(),g=(0,eB.Z)(),_=g.isAuth?g.id:"",x=g.isAuth?g.country:"",j=g.isAuth&&g.isPartner,P=tw((0,r.useState)(!1),2),O=P[0],w=P[1],S=tw((0,r.useState)(null),2),A=S[0],I=S[1],E=tw((0,r.useState)(""),2),C=E[0],D=E[1],T=(0,o.v9)(function(e){var t=e.pinbuilder,n=t.pinDrafts,r=t.pinItems[n[c].pinItemIds[0]].media;return r?(0,tb.Z)(r):eu.sD}),k=(0,o.v9)(function(e){return e.pinbuilder.pinDrafts[c].pinId}),z=(0,tP.S6)()(null!=k?k:""),R=(0,o.v9)(function(e){var t=e.pinbuilder.pinDrafts;return k&&"create"===t[c].mode?z:null});(0,r.useEffect)(function(){if(R){var e=setTimeout(window.close,1e4);return function(){e&&clearTimeout(e)}}},[R]);var B=function(e){h((0,tx.Nv)(c,e)),h((0,tj.Z)({pinDraftId:c,userId:_,orbacSubjectId:void 0,country:x,isPartner:j,i18n:d,logContextEvent:p,ideaPinRenamingEnabled:f})),(0,tO.nP)("offsite_pin_creation.create_pin",{sampleRate:1})},L=function(){I(null),w(!1)};return(0,v.jsxs)(l.xu,{"data-test-id":"pindraft-external-body",direction:"row",display:"flex",marginTop:0,children:[(0,v.jsx)(l.xu,{alignItems:"center",direction:"column",display:"flex",justifyContent:"center",paddingX:5,children:(0,v.jsx)(th.Z,{height:T,pinDraftId:c,pinItemId:u})}),(0,v.jsx)(l.xu,{color:"secondary",marginTop:-5,width:2}),y.isAuthenticated?R?(n=R?null==(t=R.board)?void 0:t.name:"",(0,v.jsxs)(l.kC,{alignItems:"center",direction:"column",height:530,justifyContent:"center",width:"100%",children:[(0,v.jsx)(l.xu,{padding:6,children:(0,v.jsx)(l.xv,{lineClamp:1,weight:"bold",children:(0,ec.nk)(d._('Saved 1 idea to {{ boardName }}! ', 'Tell user number of pins that he/she saved in a board', 'Tell user number of pins that he/she saved in a board'),{boardName:n})})}),(0,v.jsx)(l.xu,{padding:2,width:300,children:(0,v.jsx)(l.zx,{color:"red",fullWidth:!0,onClick:function(){return k?m("/pin/".concat(k,"/")):m("/pins/")},size:"lg",text:d._('See it now', 'Button label for navigating to the scheduled pins', 'Button label for navigating to the scheduled pins')})}),(0,v.jsx)(l.xu,{padding:2,width:300,children:(0,v.jsx)(l.zx,{color:"gray",fullWidth:!0,onClick:function(){return k?m("/pin/".concat(k,"/?share=true")):m("/pins/")},size:"lg",text:d._('Share this pin', 'Button label for sharing this pin', 'Button label for sharing this pin')})})]})):(0,v.jsxs)(r.Fragment,{children:[(0,v.jsx)(l.xu,{dangerouslySetInlineStyle:tI,flex:"grow",minHeight:Math.max(T,eu.sD),paddingX:5,width:"100%",children:(0,v.jsxs)(l.kC,{alignItems:"stretch",direction:"column",justifyContent:"start",children:[(0,v.jsx)(l.xu,{paddingY:1,children:(0,v.jsx)(l.xv,{lineClamp:1,weight:"bold",children:d._('Choose a board', 'pinbuilder.PinDraftBodyExternalView.renderBoardPicker', 'Board picker title for saving images from offsite')})}),(0,v.jsx)(tv.uC,{displayShortlistMostRecentBoard:!0,onBoardCreate:function(e){D(e.title),w(!0)},onItemChosen:B,paneWidth:430,setBoardWithSection:function(e){I(e)},useLegoLayout:!1})]})}),O&&!A&&(0,v.jsx)(tg.Z,{boardCreateSource:"pin_builder",onBoardCreate:function(e){h((0,tv.DR)(g)),B({boardId:e.id,url:e.url,title:e.name||""}),L()},onClose:L,suggestedBoardName:C}),O&&!!A&&(0,v.jsx)(t_.default,{onClose:L,onSectionCreate:function(e){A&&B({boardId:A.id,title:e.title||"",sectionId:e.id}),L()},selectedBoard:A})]}):(0,v.jsx)(l.xu,{"data-test-id":"unauth-offsite-pin-creation-signup",children:(0,v.jsx)(tA,{container:"pinBookmarklet",nextUrlParam:"undefined"!=typeof window?(a="".concat(ty.r,"=").concat(ty.O),encodeURIComponent("".concat(window.location.href,"&").concat(a))):"",signupFlow:{type:"login"},signupSource:"pinBookmarklet"})})]})}var tC=n(788445),tD=n(898490),tT=n(199495),tk=n(550035),tz=n(7580),tR=n(701653),tB=n(478759),tL=n.n(tB),tF=n(18468),tZ=n(406262),tM=n(218119);function tN(e){return(tN="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function tH(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function tU(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?tH(Object(n),!0).forEach(function(t){tY(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tH(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function tW(e,t){return(tW=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function tV(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function tG(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(tG=function(){return!!e})()}function tX(e){return(tX=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function tY(e,t,n){return(t=tq(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function tq(e){var t=function(e,t){if("object"!=tN(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=tN(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==tN(t)?t:t+""}var tK=function(e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");o.prototype=Object.create(e&&e.prototype,{constructor:{value:o,writable:!0,configurable:!0}}),Object.defineProperty(o,"prototype",{writable:!1}),e&&tW(o,e);var t,n,r=(t=tG(),function(){var e,n=tX(o);return e=t?Reflect.construct(n,arguments,tX(this).constructor):n.apply(this,arguments),function(e,t){if(t&&("object"==tN(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return tV(e)}(this,e)});function o(){var e;if(!(this instanceof o))throw TypeError("Cannot call a class as a function");for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];return tY(tV(e=r.call.apply(r,[this].concat(n))),"state",{focused:!1}),tY(tV(e),"handleBlur",function(t){e.setState({focused:!1});var n=e.props.onBlur;n&&n(t)}),tY(tV(e),"handleFocus",function(){e.setState({focused:!0});var t=e.props.onFocus;t&&t()}),tY(tV(e),"getColor",function(){var t=e.props,n=t.errorMessage,r=t.warningMessage,o=t.showOnBlur,i=t.showWarningOnBlur,a=t.value,l=e.state.focused;return n?tF.$rz:l||i&&r?"#0074e8":a&&!o?"transparent":"rgba(142, 142, 142, 0.5)"}),tY(tV(e),"handleTextChange",function(t){var n=t.text,r=t.mentions;e.props.onChange({value:n,userMentionTags:r})}),e}return n=[{key:"render",value:function(){var e=this.props,t=e.bold,n=e.disabled,r=e.errorMessage,o=e.warningMessage,i=e.height,a=e.helperMessage,s=e.id,c=e.instanceId,u=e.maxLength,d=e.placeholder,f=e.requestContext,p=e.size,h=e.showOnBlur,y=e.showWarningOnBlur,b=e.value,m=void 0===b?"":b,g=e.viewer,_=e.wrap,x=e.logContextEvent,j=e.orbacActingAs,P=this.state.focused,O=P||!!r||y&&!!o,w={__style:{boxShadow:"0 ".concat(O?"2px":"1px"," 0 0 ").concat(this.getColor()),paddingTop:8}},S=(0,eZ.nl)(g,j)&&"ad_creation"!==tZ.Z.scenario()&&f.experimentsClient.checkExperiment("web_stl_tooling").anyEnabled;return(0,v.jsxs)(l.xu,{column:12,direction:"column",display:"flex",children:[(0,v.jsx)(l.xu,{column:12,"data-test-id":s,position:"relative",children:(0,v.jsx)("div",{className:tL()("TextArea__".concat(S?"experimentalTextArea":"textArea"),"TextArea__dark",{TextArea__bold:t,TextArea__large:"lg"===p,TextArea__medium:"md"===p,TextArea__wrap:_,TextArea__nowrap:!_,TextArea__smHeight:"sm"===i,TextArea__mdHeight:"md"===i}),"data-gestalt-valid-html":"TextArea",id:s,children:(0,v.jsx)(tM.Z,{initialMentions:[],initialText:m,instanceId:c,onAddMention:function(){x({event_type:8905,element:116,aux_data:{tag_type:1}})},onBlur:this.handleBlur,onChange:this.handleTextChange,onFocus:this.handleFocus,onSearchMentionCancel:function(){x({event_type:8908,element:116,aux_data:{tag_type:1}})},onSuggestionsPopoverOpen:function(){x({event_type:8907,element:116,aux_data:{tag_type:1}})},placeholder:d,readOnly:n})})}),(0,v.jsxs)("div",{className:P||h||r||y&&o||!m?"":"TextArea__hidden",children:[!S&&(0,v.jsx)(l.xu,{column:12,dangerouslySetInlineStyle:w}),(0,v.jsx)(l.xu,{column:12,marginTop:+!S,minHeight:15,children:(P||h||!!r||y&&!!o)&&(0,v.jsxs)(l.xu,{column:12,display:"flex",justifyContent:"between",children:[!!r&&(0,v.jsx)(l.xu,{"data-test-id":"text-area-error",flex:"grow",children:(0,v.jsx)(l.xv,{color:"error",size:"100",children:r})}),(y||P)&&!r&&!!o&&(0,v.jsx)(l.xu,{"data-test-id":"text-area-warning",flex:"grow",children:(0,v.jsx)(l.xv,{color:"subtle",size:"100",children:o})}),(h||P)&&!r&&!o&&(0,v.jsx)(l.xu,{"data-test-id":"text-area-helper",flex:"grow",children:(0,v.jsx)(l.xv,{color:"subtle",size:"100",children:a})}),P&&null!=u&&(0,v.jsx)(l.xu,{flex:"none",children:(0,v.jsx)(l.xv,{color:r?"error":"default",size:"100",children:u-m.length})})]})})]})]})}}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,tq(r.key),r)}}(o.prototype,n),Object.defineProperty(o,"prototype",{writable:!1}),o}(r.Component);function tJ(e){var t=(0,el.u)().logContextEvent;return(0,v.jsx)(tK,tU(tU({},e),{},{logContextEvent:t,orbacActingAs:(0,eF.Z)(),requestContext:(0,tm.B)(),viewer:(0,eB.Z)()}))}tY(tK,"defaultProps",{bold:!1,disabled:!1,size:"md",wrap:!0,value:"",orbacActingAs:{}});var t$=n(473728),tQ=n(790424),t0=n(830176),t1=n(780056);function t2(e){return(t2="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function t8(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function t3(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?t8(Object(n),!0).forEach(function(t){t7(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):t8(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function t5(e,t){return(t5=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function t6(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function t4(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(t4=function(){return!!e})()}function t9(e){return(t9=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function t7(e,t,n){return(t=ne(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ne(e){var t=function(e,t){if("object"!=t2(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=t2(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==t2(t)?t:t+""}var nt=function(e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");o.prototype=Object.create(e&&e.prototype,{constructor:{value:o,writable:!0,configurable:!0}}),Object.defineProperty(o,"prototype",{writable:!1}),e&&t5(o,e);var t,n,r=(t=t4(),function(){var e,n=t9(o);return e=t?Reflect.construct(n,arguments,t9(this).constructor):n.apply(this,arguments),function(e,t){if(t&&("object"==t2(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return t6(e)}(this,e)});function o(){var e;if(!(this instanceof o))throw TypeError("Cannot call a class as a function");for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];return t7(t6(e=r.call.apply(r,[this].concat(n))),"defaultHelperMessage",e.props.i18n._('People will usually see the first 50 characters when they click on your Pin', 'pinbuilder.input.pinDraftDescription.helper', 'Helper education text for description on Pin creation')),t7(t6(e),"defaultPlaceholder",e.props.i18n._('Tell everyone what your Pin is about', 'pinbuilder.input.pinDraftDescription.placeholder', 'Placehold text for description on Pin creation')),t7(t6(e),"handleChange",function(t){var n=t.value,r=t.userMentionTags,o=void 0===r?[]:r,i=e.props,a=i.i18n,l=i.ideaPinRenamingEnabled,s=i.logContextEvent,c=i.setDescriptionData,u=i.setStoryPinDescription,d=i.setStoryPinDescriptionError,f=i.setUserMentionTags,p=i.type;o.length<e.props.userMentionTags.length&&s({event_type:8906,element:116,aux_data:{tag_type:1}});var h=null;n.length>eu.JO?h=(0,t0.ZP)({errorId:"DESCRIPTION_OVER_MAX_CHARACTER_LIMIT",i18n:a,ideaPinRenamingEnabled:l}).message:o&&o.length>eu.iR&&(h=(0,t0.ZP)({errorId:"DESCRIPTION_OVER_MAX_USER_MENTION_LIMIT",i18n:a,ideaPinRenamingEnabled:l}).message),"story"===p?(u(n),d(h)):(c({description:n,descriptionError:h}),o&&f({userMentionTags:o}))}),e}return n=[{key:"render",value:function(){var e=this.props,t=e.helperMessage,n=void 0===t?this.defaultHelperMessage:t,r=e.description,o=e.descriptionError,i=e.disabled,a=e.editorInstanceId,l=e.pinDraftId,s=e.placeholder,c=void 0===s?this.defaultPlaceholder:s,u=e.pinType,d=e.requestContext,f=e.viewer,p=e.orbacActingAs,h=(0,eZ.nl)(f,p)&&"ad_creation"!==tZ.Z.scenario()&&d.experimentsClient.checkExperiment("web_stl_tooling").anyEnabled,y=tZ.Z.enabled("pinQuality");return"carousel"!==u?(0,v.jsx)(tJ,{disabled:i,errorMessage:o,height:h?"md":void 0,helperMessage:n||this.defaultHelperMessage,id:"pin-draft-description-".concat(l),instanceId:a,maxLength:eu.JO,onChange:this.handleChange,placeholder:c||this.defaultPlaceholder,value:r,warningMessage:y&&r.length<eu.G9?(0,t$.Z)(this.props.i18n.ngettext('We recommend at least {{ length }} character', 'We recommend at least {{ length }} characters', eu.G9, 'pinbuilder.input.pinDraftDescription.warning', 'Warning message to notify user our recommendation for description length of pin'),{length:eu.G9}):null}):(0,v.jsx)(tQ.Z,{disabled:i,errorMessage:o,height:h?"md":void 0,helperMessage:n||this.defaultHelperMessage,id:"pin-draft-description-".concat(l),maxLength:eu.JO,onChange:this.handleChange,placeholder:c||this.defaultPlaceholder,value:r,viewer:f,warningMessage:y&&r.length<eu.G9?(0,t$.Z)(this.props.i18n.ngettext('We recommend at least {{ length }} character', 'We recommend at least {{ length }} characters', eu.G9, 'pinbuilder.input.pinDraftDescription.warning', 'Warning message to notify user our recommendation for description length of pin'),{length:eu.G9}):null})}}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ne(r.key),r)}}(o.prototype,n),Object.defineProperty(o,"prototype",{writable:!1}),o}(r.Component);function nn(e){var t=(0,el.u)().logContextEvent,n=(0,b.ZP)(),r=(0,s.Z)(),i=e.pinDraftId,a=e.pinItemId,l=(0,o.I0)(),c=(0,o.v9)(function(e){return e.pinbuilder}),u=c.pinDrafts,d=c.pinItems,f=c.storyPinItems,p=u[i],h=p.type,y=p.mode,m="story"===h,g=m?f[a]:d[a],_=g.description,x=g.descriptionError,j=[],P="";return m||(j=d[a].userMentionTags,P=d[a].editorInstanceId),(0,v.jsx)(nt,t3(t3({},e),{},{description:_,descriptionError:x,disabled:"create"!==y,editorInstanceId:P,i18n:n,ideaPinRenamingEnabled:r,logContextEvent:t,orbacActingAs:(0,eF.Z)(),pinType:h,requestContext:(0,tm.B)(),setDescriptionData:function(e){return l((0,tx.to)(i,e))},setStoryPinDescription:function(e){return l((0,t1.kh)(a,e))},setStoryPinDescriptionError:function(e){return l((0,t1.j8)(a,e))},setUserMentionTags:function(e){return l((0,tx.to)(i,e))},userMentionTags:j,viewer:(0,eB.Z)()}))}var nr=n(294887),no=n(289032),ni=n(686319),na=n(441501),nl=n(382294);function ns(e){return(ns="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function nc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function nu(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?nc(Object(n),!0).forEach(function(t){ny(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nc(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function nd(e,t){return(nd=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function nf(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function np(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(np=function(){return!!e})()}function nh(e){return(nh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ny(e,t,n){return(t=nb(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function nb(e){var t=function(e,t){if("object"!=ns(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=ns(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ns(t)?t:t+""}var nm=function(e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");o.prototype=Object.create(e&&e.prototype,{constructor:{value:o,writable:!0,configurable:!0}}),Object.defineProperty(o,"prototype",{writable:!1}),e&&nd(o,e);var t,n,r=(t=np(),function(){var e,n=nh(o);return e=t?Reflect.construct(n,arguments,nh(this).constructor):n.apply(this,arguments),function(e,t){if(t&&("object"==ns(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return nf(e)}(this,e)});function o(){var e;if(!(this instanceof o))throw TypeError("Cannot call a class as a function");for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];return ny(nf(e=r.call.apply(r,[this].concat(n))),"_debouncedCheckLinkIsTaggable",(0,no.Z)(function(t){var n=e.props,r=n.advertiser,o=n.orbacActingAs,i=n.viewer,a=(0,eZ.lJ)(i,o);(0,ni.Z)({url:"/v3/visual_links/can_tag/",data:nu({url:t,is_native:!t,for_advertiser_id:r&&r.owner_user_id},a?{orbac_subject_id:a}:Object.freeze({}))}).then(function(t){(0,e.props.setTaggable)(t.resource_response.data)})},300)),ny(nf(e),"handleChange",function(t){var n=t.value,r=e.props,o=r.setLink,i=r.setLinkError;o(n),i(null),n&&n.match(nr.Z)&&e._debouncedCheckLinkIsTaggable(n)}),ny(nf(e),"handleFocus",function(){e.props.logContextEvent({event_type:101,component:13308,element:11616})}),e}return n=[{key:"render",value:function(){var e=this.props,t=e.disabled,n=e.link,r=e.linkError,o=e.media,i=e.pinDraftId,a=e.requestContext,l=e.validateLink,s=e.viewer,c=e.orbacActingAs,u=(0,eZ.nl)(s,c)&&"ad_creation"!==tZ.Z.scenario()&&a.experimentsClient.checkExperiment("web_stl_tooling").anyEnabled,d={disabled:t,id:"pin-draft-link-".concat(i),errorMessage:r,onChange:this.handleChange,onFocus:this.handleFocus,onBlur:l,placeholder:u?this.props.i18n._('www.website.com', 'pinbuilder.destinationLink.label', 'label for destination link input'):this.props.i18n._('Add a destination link', 'Placeholder text for link on Pin creation', 'Placeholder text for link on Pin creation'),spellCheck:!1,value:n,wrap:!1},f=tZ.Z.enabled("pinQuality");return(0,v.jsx)(tQ.Z,nu(nu({},d),{},{height:u?"sm":void 0,hideScrollbars:!0,showOnBlur:!0,viewer:s,warningMessage:f&&o&&!n?this.props.i18n._('We recommend a destination link', 'pinbuilder.input.pinDraftLink.warning', 'Warning message to notify user our recommendation for having a link for pin'):null}))}}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,nb(r.key),r)}}(o.prototype,n),Object.defineProperty(o,"prototype",{writable:!1}),o}(r.Component);function ng(e){var t=(0,el.u)().logContextEvent,n=(0,b.ZP)(),r=(0,s.Z)(),i=e.pinDraftId,a=e.pinItemId,l=(0,o.I0)(),c=(0,o.v9)(function(e){return e.advertiser}),u=(0,o.v9)(function(e){return e.pinbuilder}),d=u.pinDrafts,f=u.pinItems,p=d[i].mode,h=f[a],y=h.link,m=h.linkError,g=h.media,_=(0,eF.Z)();return(0,v.jsx)(nm,nu(nu({},e),{},{advertiser:c,disabled:"create"!==p||!!g&&"webImage"===g.type,i18n:n,link:y,linkError:m,logContextEvent:t,media:g,orbacActingAs:_,requestContext:(0,tm.B)(),setLink:function(e){return l((0,tx.to)(i,{link:e}))},setLinkError:function(e){return l((0,na.lZ)(a,e))},setTaggable:function(e){return l((0,na.kf)(a,e))},validateLink:function(){return l((0,nl.Z)({pinDraftId:i,validationKey:"link",i18n:n,ideaPinRenamingEnabled:r,logContextEvent:t}))},viewer:(0,eB.Z)()}))}var nv=n(212994),n_=n(419205),nx=n(593310),nj=n(685039);function nP(e){return(nP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function nO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function nw(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?nO(Object(n),!0).forEach(function(t){var r,o;r=t,o=n[t],(r=function(e){var t=function(e,t){if("object"!=nP(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=nP(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==nP(t)?t:t+""}(r))in e?Object.defineProperty(e,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[r]=o}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nO(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function nS(e){var t=e.taggedObjectIds,n=(0,b.ZP)();return(0,v.jsxs)(r.Fragment,{children:[(0,v.jsx)(l.xu,{marginBottom:3,children:(0,v.jsx)(l.xv,{color:"default",lineClamp:1,weight:"bold",children:(0,ec.nk)(n.ngettext('{{ numProducts }} product', '{{ numProducts }} products', t.length, 'Heading for carousel of products you\u2019ve tagged with count', 'Heading for carousel of products you\u2019ve tagged with count'),{numProducts:t.length})})}),(0,v.jsx)(l.xu,{marginEnd:-1,marginStart:-1,children:(0,v.jsx)(nv.Z,{children:(0,v.jsx)(l.kC,{alignItems:"stretch",justifyContent:"start",children:t.map(function(e){return(0,v.jsx)(n_.Z,{taggedObjectId:e},e)})})})})]})}function nA(e){var t=(0,nx.jk)(),n=(0,nj.A$)(),r=(0,o.v9)(function(t){return(0,nx.M)(t,e)}),i=(0,o.v9)(function(o){return r?n(o,{pinTagId:r}):t(o,e)});return(0,v.jsx)(nS,nw(nw({},e),{},{taggedObjectIds:i}))}var nI=n(762133);function nE(e){return(nE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function nC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function nD(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?nC(Object(n),!0).forEach(function(t){var r,o;r=t,o=n[t],(r=function(e){var t=function(e,t){if("object"!=nE(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=nE(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==nE(t)?t:t+""}(r))in e?Object.defineProperty(e,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[r]=o}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nC(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function nT(e){var t=e.setTitleData,n=e.setStoryPinTitle,r=e.setStoryPinTitleError,o=e.type,i=e.disabled,a=e.helperMessage,c=e.pinDraftId,u=e.placeholder,d=e.title,f=e.titleError,p=(0,b.ZP)(),h=(0,s.Z)(),y=(0,eB.Z)(),m=(0,eL.Z)().checkExperiment,g=(0,eF.Z)(),_=(0,eZ.nl)(y,g)&&"ad_creation"!==tZ.Z.scenario()&&m("web_stl_tooling",{dangerouslySkipActivation:!0}).anyEnabled,x=p._('Your first 40 characters are what usually show up in feeds', 'pinbuilder.input.pinDraftTitle.helper', 'Helper education text for title on Pin creation'),j=p._('Add your title', 'pinbuilder.input.pinDraftTitle.placeholder', 'Placeholder text for title on Pin creation'),P=p._('Pin title', 'pinbuilder.input.title.placeholder', 'Experimental placeholder text for title on Pin creation'),O=tZ.Z.enabled("pinQuality");return(0,v.jsx)(l.xu,{"data-test-id":"pin-draft-title-text-area-container",children:(0,v.jsx)(tQ.Z,{bold:!_||void 0,disabled:i,errorMessage:f,height:_?"sm":void 0,helperMessage:a||x,id:"pin-draft-title-".concat(c),maxLength:eu.Ke,onChange:function(e){var i=e.value.replace(/\n/g," "),a=i.length>eu.Ke?(0,t0.ZP)({errorId:"TITLE_OVER_MAX_CHARACTER_LIMIT",i18n:p,ideaPinRenamingEnabled:h}).message:null;"story"===o?(n(i),r(a)):t({title:i,titleError:a})},placeholder:u||(_?P:j),size:_?"md":"lg",value:d,viewer:y,warningMessage:O&&d.length<eu.bA?(0,t$.Z)(p.ngettext('We recommend at least {{ length }} character', 'We recommend at least {{ length }} characters', eu.bA, 'pinbuilder.input.pinDraftTitle.warning', 'Warning message to notify user our recommendation for title length of pin'),{length:eu.bA}):null})})}function nk(e){var t=(0,b.ZP)(),n=(0,s.Z)(),r=(0,el.u)().logContextEvent,i=(0,o.v9)(function(t){return t.pinbuilder.pinDrafts[e.pinDraftId]}),a=i.mode,l=i.type,c=(0,o.v9)(function(t){return"story"===l?t.pinbuilder.storyPinItems[e.pinItemId]:t.pinbuilder.pinItems[e.pinItemId]}),u=c.title,d=c.titleError,f=(0,o.I0)();return(0,v.jsx)(nT,nD(nD({},e),{},{disabled:"create"!==a,i18n:t,ideaPinRenamingEnabled:n,logContextEvent:r,setStoryPinTitle:function(t){return f((0,t1.Dt)(e.pinItemId,t))},setStoryPinTitleError:function(t){return f((0,t1.h4)(e.pinItemId,t))},setTitleData:function(t){return f((0,tx.to)(e.pinDraftId,t))},title:u,titleError:d}))}var nz=n(900675),nR=n(285491);function nB(e){var t=e.userGridItemRef,n=(0,o.v9)(function(e){return e.advertiser}),r=(0,eB.Z)(),i=(0,nz.Z)(t).data||{},a=i.full_name,s=i.image_medium_url,c=i.verified_identity,u=a||(n?n.name:r.isAuth&&r.fullName)||"",d=s||(n?"":r.isAuth&&r.imageMediumUrl)||"",f=c&&c.verified;return(0,v.jsx)(l.xu,{"data-test-id":"pin-draft-user",children:(0,v.jsx)(nR.Z,{fullName:u,imageUrl:d,verified:f})})}var nL=n(257906),nF=n(884761),nZ=n(769970);function nM(e){return(nM="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function nN(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function nH(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?nN(Object(n),!0).forEach(function(t){var r,o;r=t,o=n[t],(r=function(e){var t=function(e,t){if("object"!=nM(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=nM(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==nM(t)?t:t+""}(r))in e?Object.defineProperty(e,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[r]=o}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nN(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function nU(e){var t=e.pinDraftId,n=e.pinItemId,r=e.pinTagId,o=e.pinTags,i=e.pinTagIds,a=e.showCarouselControl,s=e.showProductCarousel,c=e.showScheduleControl,u=e.showVideoTagging,d=e.unfilteredTaggedObjects,f=e.userGridItemRef,p=(0,b.ZP)(),h=(0,eB.Z)(),y=(0,eF.Z)(),m=(0,eL.Z)().checkExperiment,g=(0,eZ.nl)(h,y)&&"ad_creation"!==tZ.Z.scenario()&&m("web_stl_tooling",{dangerouslySkipActivation:!0}).anyEnabled,_=p._('Destination link', 'pinbuilder.destination.link.label', 'label for destination link input'),x=(0,nF.Z)({pinTagIds:i,pinTags:o,taggedObjects:d}),j=(0,tm.B)(),P=(0,tk.Yd)(j).country;return(0,v.jsx)(l.Zf,{overflow:"visible",children:(0,v.jsxs)(l.xu,{column:12,direction:"column",display:"flex",height:"100%",overflow:"visible",children:[(0,v.jsxs)(l.xu,{"data-tutorial-id":"pin-builder-title-and-description",height:g?void 0:"100%",width:"100%",children:[(0,v.jsxs)(l.xu,{column:12,marginTop:8,children:[g&&(0,v.jsx)(l.xu,{marginBottom:1,marginStart:1,children:(0,v.jsx)(l.xv,{color:"default",size:"100",children:p._('Title', 'pinbuilder.title.input.label', 'label for title input')})}),(0,v.jsx)(nk,{pinDraftId:t,pinItemId:n})]}),!g&&(0,v.jsx)(l.xu,{column:12,marginTop:4,children:(0,v.jsx)(nB,{userGridItemRef:f})}),g&&(0,v.jsx)(l.xu,{marginBottom:1,marginStart:1,marginTop:6,children:(0,v.jsx)(l.xv,{color:"default",size:"100",children:p._('Description', 'pinbuilder.descriptoin.input.label', 'label for description input')})}),(0,v.jsx)(l.xu,{column:12,display:"flex",flex:"grow",marginTop:6*!g,children:(0,v.jsx)(nn,{pinDraftId:t,pinItemId:n})}),(0,v.jsx)(nZ.Z,{pinDraftId:t})]}),s&&!g&&(0,v.jsx)(l.xu,{column:12,marginTop:6,children:(0,v.jsx)(nA,{pinItemId:n})}),s&&g&&(0,v.jsx)(tz.Z,{pinDraftId:t,pinItemId:n,pinTagId:r,taggedObjects:x}),u&&(0,v.jsx)(l.xu,{column:12,marginTop:4,children:(0,v.jsx)(nL.ZP,{pinDraftId:t})}),(0,v.jsxs)(l.xu,{column:12,"data-test-id":"pin-draft-link","data-tutorial-id":"pin-builder-destination-link",marginTop:g?"auto":4,children:[g&&(0,v.jsx)(l.xu,{marginBottom:1,marginStart:1,children:(0,v.jsx)(l.xv,{color:"default",size:"100",children:_})}),(0,v.jsx)(ng,{pinDraftId:t,pinItemId:n})]}),a&&(0,v.jsx)(l.xu,{column:12,marginTop:6,children:(0,v.jsx)(tR.Z,{pinDraftId:t})}),c&&(0,v.jsx)(l.xu,{column:12,marginTop:4,children:(0,v.jsx)(nI.Z,{inStlToolingExp:g,pinDraftId:t})}),"KR"===P&&(0,v.jsx)(l.xu,{"data-test-id":"pin-draft-korea-disclaimer",paddingY:4,children:(0,v.jsx)(l.xv,{color:"subtle",size:"200",children:p._('If you post illegally filmed content, etc. we may remove or block access to the content pursuant to Article 22-5(1) of the Korean Telecommunications Business Act, and you may be subject to punishment pursuant to relevant laws and regulations.', 'pinbuilder.pindraft.pinDraftInputView.koreanWarningDisclaimer', 'For Korean users only, show a disclaimer about uploading illegal content.')})})]})})}function nW(e){var t=(0,nx.jk)(),n=(0,nx.vd)(),r=(0,o.v9)(function(t){return(0,nx.Bg)(t,e)}),i=(0,o.v9)(function(t){return n(t,e)}),a=(0,o.v9)(function(t){return t.pinbuilder.pinDrafts[e.pinDraftId].type}),l=tZ.Z.enabled("scheduling"),s=(0,o.v9)(function(e){return e.pinbuilder.taggedObjects}),c=(0,o.v9)(function(e){return e.pinbuilder.pinTags}),u=(null==r?void 0:r.type)==="localVideo"&&tZ.Z.enabled("videoTagging"),d="single"===a&&l&&(!r||0===i.length&&("localImage"===r.type||"localVideo"===r.type)),f=(0,o.v9)(function(t){return t.pinbuilder.pinItems[e.pinItemId].selectedPinTagId||i.length>0?i[0]:null}),p=(0,o.v9)(function(n){return t(n,e).length>0});return(0,v.jsx)(nU,nH(nH({},e),{},{pinTagId:f,pinTagIds:i,pinTags:c,showCarouselControl:"carousel"===a,showProductCarousel:p,showScheduleControl:d,showVideoTagging:u,unfilteredTaggedObjects:s}))}var nV=n(500388);function nG(e){return(nG="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function nX(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function nY(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?nX(Object(n),!0).forEach(function(t){var r,o;r=t,o=n[t],(r=function(e){var t=function(e,t){if("object"!=nG(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=nG(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==nG(t)?t:t+""}(r))in e?Object.defineProperty(e,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[r]=o}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nX(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function nq(e){var t=e.height,n=e.pinDraftId,o=e.pinItemId,i=e.userGridItemRef;return(0,v.jsx)(r.Fragment,{children:(0,v.jsxs)(l.xu,{dangerouslySetInlineStyle:{__style:{paddingBottom:eu.uR}},display:"flex",children:[(0,v.jsx)(l.xu,{paddingX:5,children:(0,v.jsx)(th.Z,{height:t,pinDraftId:n,pinItemId:o})}),(0,v.jsx)(l.xu,{flex:"grow",minHeight:Math.max(t,418),paddingX:5,width:"100%",children:(0,v.jsx)(nW,{pinDraftId:n,pinItemId:o,userGridItemRef:i})})]})})}function nK(e){var t=(0,o.v9)(function(t){return t.pinbuilder.pinDrafts[e.pinDraftId]}).pinItemIds,n=(0,o.v9)(function(e){return e.pinbuilder.pinItems[t[0]]}).media,r=n?(0,tb.Z)(n,271,(0,nV.Sl)(n)&&(0,nV.PG)(n)?0:3):418;return(0,v.jsx)(nq,nY(nY({},e),{},{height:r}))}var nJ=n(93966),n$=n(886981),nQ=n(968842),n0=n(87853),n1=n(742723),n2=n(97781),n8=n(354250),n3=n(879459);function n5(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,l=[],s=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);s=!0);}catch(e){c=!0,o=e}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return n6(e,t);var n=({}).toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?n6(e,t):void 0}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n6(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var n4={__style:{paddingTop:eu.XB}};function n9(e){var t=e.pinDraftId,n=(0,el.u)().logContextEvent,i=(0,b.ZP)(),a=(0,s.Z)(),c=(0,o.I0)(),u=(0,eB.Z)(),d=(0,n1.Z)(),f=(0,eZ.lJ)(u,d),p=(0,nQ.Z)(),h=(0,eL.Z)().checkExperiment,y=u.isAuth?u.id:"",m=u.isAuth?u.country:"",g=u.isAuth&&u.isPartner,_=n5((0,r.useState)(!1),2),x=_[0],j=_[1],P=n5((0,r.useState)(null),2),O=P[0],w=P[1],S=n5((0,r.useState)(""),2),A=S[0],I=S[1],E=(0,o.v9)(function(e){var n=e.pinbuilder.pinDrafts[t].websiteMedia;return n.length>0?n:[]}),C=(0,o.v9)(function(e){var n=e.pinbuilder,r=n.pinDrafts,o=n.pinItems[r[t].pinItemIds[0]].media;return o?(0,tb.Z)(o):eu.sD}),D=function(e){c((0,tx.Nv)(t,e)),E.length>1?c((0,tx.m_)({pinDraftId:t,userId:y,country:m,isPartner:g,i18n:i,logContextEvent:n,orbacSubjectId:f,checkExperiment:h,siteType:p,ideaPinRenamingEnabled:a})):c((0,tj.Z)({pinDraftId:t,userId:y,orbacSubjectId:f,country:m,isPartner:g,i18n:i,logContextEvent:n,ideaPinRenamingEnabled:a}))},T=function(){w(null),j(!1)};return(0,v.jsxs)(r.Fragment,{children:[(0,v.jsx)(l.xu,{dangerouslySetInlineStyle:n4,flex:"grow",minHeight:Math.max(C,eu.sD),paddingX:5,width:"100%",children:(0,v.jsxs)(l.kC,{alignItems:"stretch",direction:"column",justifyContent:"start",children:[(0,v.jsx)(l.xu,{paddingY:1,children:(0,v.jsx)(l.xv,{align:"center",lineClamp:1,weight:"bold",children:i._('Choose a board', 'pinbuilder.PinDraftBoardView.boardPickerTitle', 'Board picker title for saving images from site')})}),(0,v.jsx)(tv.sR,{displayShortlistMostRecentBoard:!0,onBoardCreate:function(e){I(null==e?void 0:e.title),j(!0)},onItemChosen:D,paneWidth:430,setBoardWithSection:function(e){w(e)},useLegoLayout:!1})]})}),x&&!O&&(0,v.jsx)(tg.Z,{boardCreateSource:"pin_builder",onBoardCreate:function(e){var t,n,r;c((0,tv.DR)(u,d)),D({boardId:null!=(t=null==e?void 0:e.id)?t:"",url:null!=(n=null==e?void 0:e.url)?n:"",title:null!=(r=null==e?void 0:e.name)?r:""}),T()},onClose:T,suggestedBoardName:A}),x&&!!O&&(0,v.jsx)(t_.default,{onClose:T,onSectionCreate:function(e){O&&D({boardId:O.id,title:e.title||"",sectionId:e.id}),T()},selectedBoard:O})]})}function n7(e){var t=e.data,n=(0,b.ZP)();return(0,v.jsx)(l.xu,{dangerouslySetInlineStyle:{__style:{padding:"2px"}},"data-test-id":"media-image-view",children:(0,v.jsx)(l.zd,{rounding:4,wash:!0,children:(0,v.jsx)(l.Ee,{alt:n._('Image saved from site', 'pinbuilder.PinDraftBoardView.savedImage', 'Label for a saved image from site on Pin create'),naturalHeight:t.height,naturalWidth:t.width,src:t.src})})})}function re(e){var t,n=e.pinDraftId,i=(0,o.v9)(function(e){return e.pinbuilder.pinDrafts[n].websiteLink}),a=(0,n$.Z)({name:"DomainResource",options:{domain:i,field_set_key:"owner"}}),s=a.data,c=a.isLoaded,u=(0,n$.Z)(c?{name:"UserResource",options:{user_id:(null==s||null==(t=s.official_user)?void 0:t.id)||""}}:null),d=u.data,f=u.refresh;return((0,r.useEffect)(function(){f()},[c,f]),d)?(0,v.jsxs)(l.xu,{padding:2,children:[(0,v.jsx)(n3.Z,{userKey:{type:"Legacy",data:d}}),";"]}):null}function rt(e){var t=e.pinDraftId,n=(0,b.ZP)(),i=(0,o.I0)(),a=(0,r.useRef)(null),s=i((0,tx.By)(t)),c=eu.LM,u=function(e,t){return e>=t?{width:350/e*t,height:350}:{width:c,height:c/t*e}};if(1!==s.length)return(0,v.jsx)(l.xu,{ref:a,height:420,marginTop:2,overflow:"auto",children:a&&(0,v.jsx)(l.Rk,{columnWidth:eu.eZ,gutterWidth:nJ.lX,items:s,layout:"flexible",minCols:2,renderItem:function(e){var t=e.data;return(0,v.jsx)(n7,{data:t})},scrollContainer:function(){return a.current||window},virtualize:!0})});var d=s[0];return(0,v.jsx)(l.xu,{"data-test-id":"media-image-view",height:u(d.height,d.width).height,marginEnd:"auto",marginStart:"auto",overflow:"hidden",rounding:4,width:u(d.height,d.width).width,children:(0,v.jsx)(l.Ee,{alt:n._('Image saved from site', 'pinbuilder.PinDraftBoardView.savedImage', 'Label for a saved image from site on Pin create'),fit:"contain",naturalHeight:d.height,naturalWidth:d.width,src:d.src})})}function rn(e){var t=e.pinDraftId,n=e.pinItemId,a=(0,o.I0)(),s=(0,i.s0)(),c=(0,n0.dI)(),u=a((0,tx.By)(t)),d=(0,o.v9)(function(e){return e.pinbuilder.pinDrafts[t].pinId}),f=(0,tP.S6)()(null!=d?d:""),p=(0,o.v9)(function(e){var n=e.pinbuilder.pinDrafts;return d&&"create"===n[t].mode?f:null}),h=.1*eu.sD;(0,r.useEffect)(function(){if(p){var e=setTimeout(window.close,1e4);return function(){e&&clearTimeout(e)}}},[p]);var y=function(){if(1===u.length)d?s("/pin/".concat(d,"/")):s("/");else if(p){var e=p.board?p.board.url:"";s("".concat(e||""))}else s("/")};return p&&function(){if(p&&p.board){var e=p.board.name,n=p.board.url,r=p.images?p.images["236x"]:null,o=r?r.url:"";a((0,n8.Z)(t)),c.showOneToast(function(t){var r=t.hideToast;return(0,v.jsx)(n2.Z,{boardName:e,boardUrl:n,isFromPinBuilder:!0,onHide:r,onVisitButtonClick:y,pinImageUrl:o||""})}),s("/")}}(),(0,v.jsxs)(l.kC,{alignItems:"stretch",direction:"row",justifyContent:"start",children:[(0,v.jsxs)(l.xu,{alignItems:"center",direction:"column",display:"flex",paddingX:5,children:[(0,v.jsx)(l.xu,{height:h,children:(0,v.jsx)(re,{pinDraftId:t,pinItemId:n})}),(0,v.jsx)(l.xu,{height:450,marginTop:4,width:344,children:(0,v.jsx)(rt,{pinDraftId:t,pinItemId:n})})]}),(0,v.jsx)(l.xu,{color:"secondary",marginTop:-5,width:2}),!p&&(0,v.jsx)(n9,{pinDraftId:t,pinItemId:n})]})}var rr=n(315259);function ro(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,l=[],s=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);s=!0);}catch(e){c=!0,o=e}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return ri(e,t);var n=({}).toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ri(e,t):void 0}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ri(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function ra(e){var t=e.pinDraftId,n=(0,b.ZP)(),i=(0,o.I0)(),a=ro((0,r.useState)(""),2),s=a[0],c=a[1],u=ro((0,r.useState)(""),2),d=u[0],f=u[1],p=(0,o.v9)(function(e){return e.pinbuilder.pinDrafts[t].view}),h=(0,o.v9)(function(e){return e.pinbuilder.pinDrafts[t].websiteLink}),y=n._('Enter a website link', 'pinbuilder.searchView.placeholdertext', 'Placeholder text for searching for a website to save ideas from');return(0,v.jsxs)(l.xu,{height:"scrape"===p?eu.i2:eu.UU,paddingY:2,children:[(0,v.jsx)(l.xu,{position:"relative",children:(0,v.jsx)(l.Um,{accessibilityClearButtonLabel:n._('Clear search field', '[m10n] pinbuilder.searchView.clearButton.accessibilityLabel', 'Accessibility label for clear button'),accessibilityLabel:h?n._('Enter a website link', '[m10n] pinbuilder.searchView.searchField.accessibilityLabel', 'Accessibility label for search field'):"",errorMessage:""!==d?n._('No images found. Please check your URL and try again.', 'pinbuilder.searchView.errorMessage', 'Error message for invalid URL entered by user'):"",id:"save-from-site",onChange:function(e){c(e.value)},onKeyDown:function(e){"Enter"===e.event.key&&(f(""===s||(0,rr.Z)(s,{protocolIsOptional:!0})?"":(0,t0.q0)(n)),i((0,tx.f9)(t,s,d)),""!==s&&""===d&&i((0,tx.c8)(t,"scrape")))},placeholder:h||y,size:"lg",value:s})}),"search"===p&&(0,v.jsx)(l.xu,{padding:2,children:(0,v.jsx)(l.xv,{color:"subtle",size:"100",children:n._('Example: http://www.websitename.com', 'pinbuilder.PinDraftSearchView.searchFieldExample', 'Example of website URL to guide user search')})})]})}var rl=n(400704);function rs(e){return(rs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function rc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function ru(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?rc(Object(n),!0).forEach(function(t){var r,o;r=t,o=n[t],(r=function(e){var t=function(e,t){if("object"!=rs(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=rs(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==rs(t)?t:t+""}(r))in e?Object.defineProperty(e,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[r]=o}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rc(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function rd(e){var t=e.pinDraftId,n=e.pinItemId,r=e.view,o=e.userGridItemRef;switch(r){case"upload":return(0,v.jsx)(nK,{pinDraftId:t,pinItemId:n,userGridItemRef:o});case"search":return(0,v.jsx)(ra,{pinDraftId:t});case"scrape":return(0,v.jsx)(tD.Z,{pinDraftId:t});case"board":return(0,v.jsx)(rn,{pinDraftId:t,pinItemId:n});case"tag":case"selectTag":return(0,v.jsx)(tT.Z,{pinDraftId:t,pinItemId:n,view:r});case"collectionsTag":return(0,v.jsx)(tp.Z,{pinDraftId:t,pinItemId:n});case"reorder":return(0,v.jsx)(tC.C,{pinDraftId:t});case"external":return(0,v.jsx)(tE,{pinDraftId:t,pinItemId:n});default:return null}}function rf(e){var t=(0,rl.nL)(),n=(0,o.v9)(function(t){return(0,rl.Xe)(t,e)}),r=(0,o.v9)(function(n){return t(n,e)});return(0,v.jsx)(rd,ru(ru({},e),{},{pinItemId:r,view:n}))}function rp(e){return(rp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function rh(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function ry(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?rh(Object(n),!0).forEach(function(t){var r,o;r=t,o=n[t],(r=function(e){var t=function(e,t){if("object"!=rp(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=rp(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==rp(t)?t:t+""}(r))in e?Object.defineProperty(e,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[r]=o}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rh(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function rb(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,l=[],s=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);s=!0);}catch(e){c=!0,o=e}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return rm(e,t);var n=({}).toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?rm(e,t):void 0}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function rm(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function rg(e){var t,n=e.websiteLink,o=e.setWebsiteLink,i=(0,el.u)().logContextEvent,a=(0,b.ZP)(),s=(0,tm.B)().isRTL,c=rb((0,r.useState)(!1),2),u=c[0],d=c[1],f=rb((0,r.useState)(n),2),p=f[0],h=f[1],y=rb((0,r.useState)(""),2),m=y[0],g=y[1],_=function(e,n,r){if(u){var l=e&&!(0,rr.Z)(e,{protocolIsOptional:!0})?(0,t0.q0)(a):"";g(l),e&&!l&&(o(e,l),d(n),t&&(t.style.background="#EFEFEF"),i({event_type:r,component:13308,element:10969,aux_data:{url:e}}))}else h(""),t&&t.focus()};return(0,v.jsxs)(l.xu,{position:"relative",children:[(0,v.jsx)(l.nv,{ref:function(e){(t=e)&&(t.style.height="44px",t.style.borderRadius="24px",t.style.paddingRight="48px",t.style.background=u?"":"#EFEFEF")},errorMessage:m,id:"scrape-view-website-link",onChange:function(e){h(e.value)},onFocus:function(){d(!0),t&&(t.style.background="")},onKeyDown:function(e){"Enter"===e.event.key&&_(p,!0,97)},placeholder:a._('Enter website', 'pinBuilder.pinDraftHeaderScrapeView.pinDraftWebsiteLinkButton.placeholder.text', 'Placeholder text to enter website url'),size:"lg",type:"url",value:p}),(0,v.jsx)(l.xu,{left:s,margin:2,position:"absolute",right:!s,top:!0,children:(0,v.jsx)(l.hU,{accessibilityLabel:a._('Submit', 'pinBuilder.pinDraftHeaderScrapeView.pinDraftWebsiteLinkButton.submit.text', 'Submit website button to scrape images'),bgColor:"lightGray",icon:u?"arrow-forward":"cancel",iconColor:"darkGray",onClick:function(){_(p,!1,101)},size:"sm"})})]})}function rv(e){var t=(0,o.v9)(function(t){return t.pinbuilder.pinDrafts[e.pinDraftId].websiteLink}),n=(0,o.I0)();return(0,v.jsx)(rg,ry(ry({},e),{},{setWebsiteLink:function(t,r){return n((0,tx.f9)(e.pinDraftId,t,r))},websiteLink:t}))}var r_=n(390843),rx=n(884419),rj=n(938287);function rP(e){var t=e.pinDraftId,n=(0,el.u)().logContextEvent,r=(0,b.ZP)(),a=(0,s.Z)(),c=(0,tm.B)(),u=(0,o.I0)(),d=(0,i.s0)(),f=(0,r_.ou)().previous,p=function(){var e=(0,rj.Z)({url:(0,rx.Z)()}).tab;u((0,tx.q0)(t,"upload",e===eu.ro?"IDEA_PIN":"PIN"))},h=function(){(0,rj.Z)({url:(0,rx.Z)()}).tab===eu.ro?0===f.length?d(a?"/pin-creation-tool":"/idea-pin-builder"):d(-1):(u((0,tx.hb)(t)),u((0,tx.f9)(t,"")),u((0,tx.c8)(t,"upload")))},y=0===(0,o.v9)(function(e){return e.pinbuilder.pinDrafts[t].websiteMedia}).length,m=!!c.isRTL;return tZ.Z.enabled("multi_pin")||tZ.Z.enabled("multi_pin_pinner")?(0,v.jsxs)(l.xu,{alignItems:"center",direction:"column",display:"flex",paddingX:2,children:[(0,v.jsx)(l.xu,{"data-test-id":"scrape-view-cancel-button",left:!m,marginStart:8,marginTop:8,position:"absolute",right:m,top:!0,children:(0,v.jsx)(l.hU,{accessibilityLabel:r._('Cancel', 'pinBuilder.pinDraftHeaderScrapeView.cancel.text', 'Cancel selection of images from web on Pin create'),icon:"directional-arrow-left",iconColor:"gray",onClick:h,size:"lg"})}),(0,v.jsx)(l.X6,{size:"400",children:r._('Save ideas from website', 'pinBuilder.pinDraftHeaderScrapeView.multiselect.header.text', 'Directions to select scraped image on Pin creation')}),(0,v.jsx)(l.xu,{marginTop:1,children:(0,v.jsx)(l.xv,{size:"200",children:r._('Select up to ten images', 'pinBuilder.pinDraftHeaderScrapeView.multiselect.subheader.text', 'Limit the number of scraped images that can be selected')})}),(0,v.jsx)(l.xu,{marginTop:6,paddingX:8,width:"90%",children:(0,v.jsx)(rv,{pinDraftId:t})})]}):(0,v.jsxs)(l.kC,{alignItems:"center",justifyContent:"between",children:[(0,v.jsx)(l.X6,{size:"400",children:r._('Upload from the web', 'pinBuilder.pinDraftHeaderScrapeView.header.text', 'Directions to select scraped image on Pin creation')}),(0,v.jsxs)(l.kC,{alignItems:"stretch",justifyContent:"start",children:[(0,v.jsx)(l.xu,{"data-test-id":"scrape-view-cancel-button",paddingX:5,children:(0,v.jsx)(l.zx,{onClick:h,text:r._('Cancel', 'pinBuilder.pinDraftHeaderScrapeView.cancel.text', 'Cancel selection of images from web on Pin create')})}),(0,v.jsx)(l.xu,{"data-test-id":"scrape-view-add-button",children:(0,v.jsx)(l.zx,{color:"red",disabled:y,onClick:function(){n({event_type:101,component:13308,element:10970}),p()},text:r._('Add to Pin', 'pinBuilder.pinDraftHeaderScrapeView.addToPin.text', 'Add selected image from web to Pin create')})})]})]})}var rO=n(241454),rw=n(739369),rS=n(134021),rA=n(108809),rI=n(107653);function rE(e){return(rE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function rC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function rD(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?rC(Object(n),!0).forEach(function(t){rB(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rC(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function rT(e,t){return(rT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function rk(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function rz(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(rz=function(){return!!e})()}function rR(e){return(rR=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function rB(e,t,n){return(t=rL(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function rL(e){var t=function(e,t){if("object"!=rE(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=rE(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==rE(t)?t:t+""}var rF=function(e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");o.prototype=Object.create(e&&e.prototype,{constructor:{value:o,writable:!0,configurable:!0}}),Object.defineProperty(o,"prototype",{writable:!1}),e&&rT(o,e);var t,n,r=(t=rz(),function(){var e,n=rR(o);return e=t?Reflect.construct(n,arguments,rR(this).constructor):n.apply(this,arguments),function(e,t){if(t&&("object"==rE(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return rk(e)}(this,e)});function o(){var e;if(!(this instanceof o))throw TypeError("Cannot call a class as a function");for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];return rB(rk(e=r.call.apply(r,[this].concat(n))),"handleSaveClick",function(){var t=e.props,n=t.logContextEvent,r=t.orbacActingAs,o=t.savePinDraft,i=t.viewerId;n({event_type:101,component:13308,element:10973}),o(r.id&&r.id!==i?r.id:void 0)}),rB(rk(e),"handleItemChosen",function(t){var n=e.props,r=n.selectItem,o=n.isPartner;(0,n.logContextEvent)({event_type:101,component:13308,element:10965}),(0,tO.nP)("pin_builder.board_picker.board_selected",{sampleRate:1,tags:{source:(0,rS.Z)(o)}}),r(t)}),rB(rk(e),"handleAdOnlyPinSwitch",function(t){var n=t.value,r=e.props,o=r.updateIsAdOnlyPin,i=r.selectItem;(0,r.logContextEvent)({event_type:101,component:13308,element:13834,aux_data:{is_ads_only_pin:n}}),i(null),o(n)}),e}return n=[{key:"render",value:function(){var e=this,t=this.props,n=t.altTextError,r=t.boardError,o=t.hasErrors,i=t.isPartner,a=t.pinDraftId,s=t.selectedItem,c=t.pinIsAdsOnly,u=t.isAdsOnlyPinCreationEnabled,d=function(t){return(0,v.jsx)(ea.Z,{accessibilityLabelText:i?e.props.i18n._('Publish', 'pinbuilder.pindraft.upload.dropdown.button.accessibilityLabel.partner', 'Accessibility label text to create new Pin for Partners'):e.props.i18n._('Save', 'pinbuilder.pindraft.upload.dropdown.button.accessibilityLabel.pinner', 'Accessibility label text to create new Pin for Pinners'),buttonText:i?e.props.i18n._('Publish', 'pinbuilder.pindraft.upload.dropdown.button.partner', 'Button text to create new Pin for Partners'):e.props.i18n._('Save', 'pinbuilder.pindraft.upload.dropdown.button.pinner', 'Button text to create new Pin for Pinners'),disabled:t,disabledBoardPicker:c,disableDefaultBoard:c,hasError:!!r,onItemChosen:e.handleItemChosen,onSaveClick:e.handleSaveClick,placeholder:c?e.props.i18n._('Ad-only board', 'pinbuilder.pindraft.upload.dropdown.placeholder.adOnlyPinsBoard', 'Placeholder text for board dropdown to indicate pin will be saved in the Ad-only Pins board'):e.props.i18n._('Select', 'pinbuilder.pindraft.upload.dropdown.placeholder', 'Placeholder text for board dropdown to select board'),selectedItem:c?null:s})},f=tZ.Z.enabled("pinQuality");return(0,v.jsxs)(l.kC,{alignItems:"center",justifyContent:"between",children:[(0,v.jsx)(l.kC,{alignItems:"center",justifyContent:"start",minWidth:311,children:(tZ.Z.enabled("multi_pin")||tZ.Z.enabled("multi_pin_pinner"))&&(0,v.jsx)(rI.Z,{pinDraftId:a})}),(0,v.jsxs)(l.xu,{alignItems:"center","data-tutorial-id":"pin-builder-publish-to-board",display:"flex",flex:"grow",justifyContent:u?"between":"end",minHeight:40,paddingX:5,children:[u&&(0,v.jsx)(rA.Z,{onChange:this.handleAdOnlyPinSwitch,pinDraftId:a,pinIsAdsOnly:c}),(0,v.jsxs)(l.xu,{position:"relative",width:236,children:[f&&o||n?(0,v.jsx)(l.u,{text:this.props.i18n._('You must fix the highlighted issues before publishing the pin.', 'pinbuilder.pindraft.upload.dropdown.tooltip', 'Tooltip text for disabled board dropdown and save button due to errors in pin draft'),children:d(!0)}):d(!1),!!r&&(0,v.jsx)(l.xu,{left:!0,marginTop:1,position:"absolute",right:!0,children:(0,v.jsx)(l.xv,{color:"error",size:"100",children:r})})]})]})]})}}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,rL(r.key),r)}}(o.prototype,n),Object.defineProperty(o,"prototype",{writable:!1}),o}(r.PureComponent);function rZ(e){var t=(0,el.u)().logContextEvent,n=(0,b.ZP)(),i=(0,s.Z)(),a=e.pinDraftId,l=e.pinItemId,c=(0,eB.Z)(),u=c.isAuth?c.id:"",d=c.isAuth?c.country:"",f=c.isAuth&&c.isPartner,p=(0,o.I0)(),h=(0,eF.Z)(),y=(0,eL.Z)().checkExperiment,m=(0,nQ.Z)(),g=h.id&&h.id!==u?h.id:u,_=(0,rw.Z)(g),x=(0,r.useCallback)(function(e){return p((0,tx.Nv)(a,e))},[p,a]),j=(0,o.v9)(function(e){return e.pinbuilder.pinDrafts[a].altTextError}),P=(0,o.v9)(function(e){return e.pinbuilder.pinDrafts[a].boardError}),O=(0,o.v9)(function(e){return e.pinbuilder.pinDrafts[a].showcaseBannerError}),w=(0,o.v9)(function(e){return e.pinbuilder.pinDrafts[a].selectedItem}),S=(0,o.v9)(function(e){return e.pinbuilder.pinDrafts[a].pinIsAdsOnly}),A=(0,o.v9)(function(e){var t=e.pinbuilder,n=t.pinDrafts,r=t.pinItems,o=n[a],i=o.mediaError,s=o.scheduledDateError,c=o.scheduledTimeError,u=r[l];return[i,s,c,u.titleError,u.descriptionError,u.linkError].some(function(e){return!!e})});return(0,v.jsx)(rF,rD(rD({},e),{},{altTextError:j,boardError:P,hasErrors:A,i18n:n,isAdsOnlyPinCreationEnabled:_,isPartner:c.isAuth&&c.isPartner,logContextEvent:t,orbacActingAs:h,pinIsAdsOnly:S,savePinDraft:function(e){return p((0,tj.Z)({pinDraftId:a,userId:u,orbacSubjectId:e,country:d,isPartner:f,i18n:n,logContextEvent:t,checkExperiment:y,siteType:m,ideaPinRenamingEnabled:i}))},selectedItem:w,selectItem:x,showcaseBannerError:O,updateIsAdOnlyPin:function(e){return p((0,tx.rS)(a,e))},viewerId:c.isAuth?c.id:""}))}function rM(e){return(rM="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function rN(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function rH(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?rN(Object(n),!0).forEach(function(t){var r,o;r=t,o=n[t],(r=function(e){var t=function(e,t){if("object"!=rM(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=rM(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==rM(t)?t:t+""}(r))in e?Object.defineProperty(e,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[r]=o}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rN(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function rU(e){var t=e.pinDraftId,n=e.pinItemId;switch(e.view){case"upload":return(0,v.jsx)(l.xu,{marginBottom:5,children:(0,v.jsx)(rZ,{pinDraftId:t,pinItemId:n})});case"scrape":return(0,v.jsx)(l.xu,{marginBottom:5,children:(0,v.jsx)(rP,{pinDraftId:t})});case"tag":case"selectTag":case"collectionsTag":return(0,v.jsx)(l.xu,{marginBottom:5,children:(0,v.jsx)(rO.Z,{pinDraftId:t,pinItemId:n})});default:return null}}function rW(e){var t=(0,rl.nL)(),n=(0,o.v9)(function(t){return(0,rl.Xe)(t,e)}),r=(0,o.v9)(function(n){return t(n,e)});return(0,v.jsx)(rU,rH(rH({},e),{},{pinItemId:r,view:n}))}var rV=n(682290),rG=n(791587),rX=n(889539);function rY(e){var t=e.children,n=e.showTooltip,r=(0,b.ZP)();return n?(0,v.jsx)(l.u,{inline:!0,text:r._('Collection product limit reached. To add another item, remove one or more products.', 'PinDraftFooter.AddRelatedProductsButton.tooltipText', 'Tooltip text that appears when user hovers over "Add related products" button and has already added the maximum number of related products allowed'),children:t}):t}function rq(e){var t,n,i,a=(0,b.ZP)(),s=e.pinDraftId,c=(0,rX.l)().setCurrentPinDraftId,u=(0,nx.vd)(),d=(0,o.v9)(function(t){return u(t,e)})||[],f=null!=(t=(0,o.v9)(function(e){return e.pinbuilder}))?t:{},p=null!=(n=f.pinTags)?n:{},h=null!=(i=f.taggedObjects)?i:{},y=(0,nF.n)({pinTagIds:d,pinTags:p,taggedObjects:h}),m=y.length,g=m>6,_=m>0,x=m>=rG.tN;return(0,v.jsx)(r.Fragment,{children:(0,v.jsxs)(l.kC,{alignItems:"stretch",direction:"column",justifyContent:"center",maxWidth:606,width:606,children:[(0,v.jsx)(l.xu,{"data-test-id":"collections-button",marginBottom:5,marginEnd:"auto",marginStart:"auto",marginTop:5,children:(0,v.jsx)(rY,{showTooltip:x,children:(0,v.jsx)(l.zx,{disabled:x,onClick:function(){return c(s)},text:a._('Make a collection', 'PinDraftInputView.addCollection', 'Button text to make a collection Pin')})})}),(0,v.jsxs)(l.xu,{display:"flex",justifyContent:"center",marginBottom:5,paddingX:6,width:"100%",children:[(0,v.jsx)(l.xu,{marginStart:_?"auto":0,children:(0,v.jsx)(l.xv,{size:"100",children:a._('Add up to 24 products to be displayed below your image', 'pinbuilder.relatedproducts.max.tagProducts', 'The maximum number of related products the user can tag')})}),_&&(0,v.jsx)(l.xu,{marginStart:"auto",children:(0,v.jsx)(l.xv,{size:"100",children:"".concat(m,"/24")})})]}),_&&(0,v.jsx)(nv.Z,{alwaysShowArrows:g,showArrowsOnlyOnHover:!1,variant:"wide",children:(0,v.jsx)(l.xu,{direction:"row",display:"flex",justifyContent:g?void 0:"center",marginBottom:5,width:"100%",children:y.map(function(e,t){var n=e.pinTagId,r=e.status,o=e.taggedObjectId;return(0,v.jsx)(l.xu,{children:(0,v.jsx)(rV.Z,{index:t,isRelatedProducts:!0,pinTagId:n,size:"sm",status:r,taggedObjectId:o},o)},o)})})})]})})}var rK=function(e){var t=e.isBrowserExtensionSupported,n=e.isExtensionInstalled,r=e.seenUpsellFromPinbuilder;return t&&!n&&!r},rJ=n(575108),r$=n(906553);function rQ(e){return(rQ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r0(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function r1(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r0(Object(n),!0).forEach(function(t){var r,o;r=t,o=n[t],(r=function(e){var t=function(e,t){if("object"!=rQ(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=rQ(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==rQ(t)?t:t+""}(r))in e?Object.defineProperty(e,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[r]=o}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r0(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function r2(e){var t=e.image,n=e.link,o=e.onClick,i=e.productDetails,a=e.selected,s=(0,r$.Z)(),c=(0,tm.B)().locale,u=t.height,d=t.width,f=t.url,p=i||{},h=p.name,y=(p.offers||[])[0]||{},b=y.price_value,m=y.price_currency;return(0,v.jsxs)(r.Fragment,{children:[(0,v.jsx)(l.iP,{fullWidth:!1,onTap:function(){var e,r,i,a,l,s;return o((l=(e={image:t,link:n}).image,s=e.link,r1(r1({},l),{},{id:null!=(r=l.url)?r:"",link:s,sourceURL:null!=(i=l.url)?i:"",src:null!=(a=l.url)?a:"",type:"webImage"})))},rounding:rG.i9,children:(0,v.jsx)(l.zd,{rounding:rG.i9,wash:!0,children:f&&(0,v.jsx)(l.Ee,{alt:null!=f?f:"",naturalHeight:null!=u?u:1,naturalWidth:null!=d?d:1,src:f,children:(0,v.jsx)(l.xu,{dangerouslySetInlineStyle:{__style:a?{border:"solid red",borderRadius:4*rG.i9}:{}},"data-test-id":"stl-scraped-item",height:"100%",width:"100%"})})})}),b||h?(0,v.jsxs)(l.xu,{marginTop:2,children:[!!b&&b>0&&(0,v.jsx)(l.xu,{display:"flex",marginBottom:h?1:void 0,children:(0,v.jsx)(l.xv,{size:"200",weight:"bold",children:s(c,b,{currency:m,maximumFractionDigits:0,style:"currency"})})}),h&&(0,v.jsx)(l.xu,{width:"100%",children:(0,v.jsx)(l.xv,{overflow:"breakWord",size:"200",weight:"bold",children:h})})]}):null]})}function r8(e){var t=e.images,n=e.link,r=e.onItemClick,o=e.productDetails,i=e.selectedAssetIds;return(0,v.jsx)(l.xu,{marginTop:4,children:(0,v.jsx)(l.Rk,{columnWidth:rG.Py,gutterWidth:rG.op,items:t,renderItem:function(e){var t,a=e.data;return(0,v.jsx)(r2,{image:a,link:n,onClick:r,productDetails:o,selected:i.includes(null!=(t=a.url)?t:"")})}})})}var r3=n(888382),r5=function(e){var t=e.children,n=e.item;return"pin"===n.type?(0,v.jsx)(r3.v2,{input:{type:"Legacy",data:n},children:function(e){return t(null!=e?e:n.description)}}):t(n.url)};function r6(e){var t=e.item,n=e.onRemoveClick,r=(0,b.ZP)();if("pin"===t.type){var o,i,a,s,c,u,d,f=null!=(s=null!=(c=null==(u=t.images)?void 0:u["474x"])?c:null==(d=t.images)?void 0:d["236x"])?s:{};o=f.height,i=f.width,a=f.url}else o=t.height,i=t.width,a=t.url;return(0,v.jsxs)(l.xu,{position:"relative",children:[(0,v.jsx)(l.zd,{rounding:2,wash:!0,children:(0,v.jsx)(r5,{item:t,children:function(e){var t,n;return(0,v.jsx)(l.xu,{height:48,id:e,width:48,children:a&&(0,v.jsx)(l.Ee,{alt:null!=e?e:"",fit:"cover",naturalHeight:null!=(t=o)?t:1,naturalWidth:null!=(n=i)?n:1,src:a})})}})}),(0,v.jsx)(l.xu,{marginEnd:-2,marginTop:-2,position:"absolute",right:!0,top:!0,children:(0,v.jsx)(l.hU,{accessibilityLabel:r._('Remove', 'StlTaggingCarouselRep.removeButton.accessibilityLabel', 'Accessibility label for button to remove the tagged object from the Pin'),bgColor:"gray",icon:"cancel",onClick:function(){return n(t)},size:"xs"})})]})}function r4(e){var t=e.onDismissStart,n=e.onRemove,r=e.onSubmit,o=e.selectedResults,i=(0,b.ZP)(),a=o.length;return(0,v.jsxs)(l.xu,{direction:"column",display:"flex",marginTop:-8,children:[a>0&&(0,v.jsx)(nv.Z,{children:(0,v.jsx)(l.xu,{alignItems:"end",display:"flex",paddingY:4,children:o.map(function(e,t){return(0,v.jsx)(l.xu,{marginStart:0===t?void 0:2,children:(0,v.jsx)(r6,{item:e,onRemoveClick:n})},e.id)})})}),(0,v.jsxs)(l.xu,{display:"flex",justifyContent:"end",marginTop:8,children:[(0,v.jsx)(l.zx,{onClick:t,text:i._('Cancel', 'StlTaggingSheetFooter.cancel', 'Button text to cancel adding product tags to a Pin')}),(0,v.jsx)(l.xu,{"data-test-id":"add-products-button",marginStart:2,children:(0,v.jsx)(l.zx,{color:"red",disabled:0===a,onClick:function(){r(),t()},text:0===a?i._('Add products', 'StlTaggingSheetFooter.addProducts', 'Button text to add product tags to a Pin'):(0,ec.nk)(i.ngettext('Add {{ tagQuantity }} product', 'Add {{ tagQuantity }} products', a, 'Button text to add product tags to a Pin', 'Button text to add product tags to a Pin'),{tagQuantity:a}).join("")})})]})]})}var r9=n(657043),r7=n(937392),oe=n(400737),ot=n(43454),on=n(194737),or=n(25837);function oo(){var e=(0,b.ZP)();return(0,v.jsx)(l.xu,{alignItems:"center",display:"flex",justifyContent:"center",marginTop:12,width:"100%",children:(0,v.jsx)(l.xH,{accessibilityLabel:e._('Search results are loading', 'StlTaggingSheet.searchLoadingSpinner.accessibilityLabel', 'Accessibility label for spinner shown when search results are loading'),show:!0})})}function oi(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function oa(e){var t,n=e.onClear,o=e.onLinkClick,i=e.onSubmit,a=e.showCatalogLink,s=e.type,c=(0,el.u)().logContextEvent,u=(0,b.ZP)(),d=function(e){if(Array.isArray(e))return e}(t=(0,r.useState)(""))||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,l=[],s=!0,c=!1;try{for(i=(n=n.call(e)).next;!(s=(r=i.call(n)).done)&&(l.push(r.value),2!==l.length);s=!0);}catch(e){c=!0,o=e}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return l}}(t,2)||function(e,t){if(e){if("string"==typeof e)return oi(e,2);var n=({}).toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?oi(e,2):void 0}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),f=d[0],p=d[1],h={titleUrl:{target:"catalogId",text:u._('Find a product by catalog ID instead', 'StlTaggingSearchField.link.titleUrl', 'Text on link to search for a product by catalog ID')},catalogId:{target:"titleUrl",text:u._('Find a product by Pin title or URL instead', 'StlTaggingSearchField.link.catalogId', 'Text on link to search for a product by Pin title or URL')}},y={titleUrl:u._('Search by product title or enter URL', 'StlTaggingSearchField.placeholder.titleUrl', 'Placeholder text on input to search for a product by product title or URL'),catalogId:u._('Enter catalog ID', 'StlTaggingSearchField.placeholder.catalogId', 'Placeholder text on input to search for a product by catalog ID')};return(0,v.jsxs)(l.xu,{color:"default",dangerouslySetInlineStyle:{__style:{paddingBottom:"16px"}},direction:"column",display:"flex",children:[(0,v.jsx)("form",{onSubmit:function(e){e.preventDefault(),i(f)},role:"search",children:(0,v.jsx)(l.Um,{accessibilityLabel:y[s],autoComplete:"off",id:"STLTaggingSearchField",onChange:function(e){var t=e.value;p(t),""===t&&n()},onFocus:function(){c({event_type:101,component:13762,element:227,view_type:212})},placeholder:y[s],size:"lg",value:f})}),a&&(0,v.jsx)(l.xu,{display:"flex",justifyContent:"center",marginTop:2,children:(0,v.jsx)(l.iP,{fullWidth:!1,onTap:function(){return o(h[s].target)},children:(0,v.jsx)(l.xv,{align:"center",color:"shopping",inline:!0,size:"200",children:(0,v.jsx)("span",{style:{textDecoration:"underline"},children:h[s].text})})})})]})}function ol(e){var t,n=e.onClick,r=e.pin,o=e.selected,i=(0,r3.jy)({type:"Legacy",data:r}),a=(0,r3.LG)({type:"Legacy",data:r}),s=r.description,c=r.images,u=(null==c?void 0:c["474x"])||(null==c?void 0:c["236x"])||{},d=u.height,f=u.width,p=u.url;return(0,v.jsxs)(l.xu,{"data-test-id":"stl-tagging-pin-rep",direction:"column",display:"flex",children:[(0,v.jsx)(l.iP,{fullWidth:!1,onTap:function(){return n(r)},rounding:rG.i9,children:(0,v.jsx)(l.zd,{rounding:rG.i9,wash:!0,children:p&&(0,v.jsx)(l.Ee,{alt:null!=(t=null!=i?i:s)?t:"",naturalHeight:null!=d?d:1,naturalWidth:null!=f?f:1,src:p,children:(0,v.jsx)(l.xu,{dangerouslySetInlineStyle:{__style:o?{border:"solid red",borderRadius:4*rG.i9}:{}},height:"100%",width:"100%"})})})}),a||i?(0,v.jsxs)(l.xu,{marginTop:2,children:[a&&(0,v.jsx)(l.xu,{display:"flex",marginBottom:i?1:void 0,children:(0,v.jsx)(l.xv,{size:"200",weight:"bold",children:a})}),i&&(0,v.jsx)(l.xu,{width:"100%",children:(0,v.jsx)(l.xv,{overflow:"breakWord",size:"200",weight:"bold",children:i})})]}):null]})}function os(e){var t=e.onItemClick,n=e.results,r=e.selectedAssetIds;return(0,v.jsx)(l.xu,{marginTop:2,children:(0,v.jsx)(l.Rk,{columnWidth:rG.Py,gutterWidth:rG.op,items:n,renderItem:function(e){var n=e.data;return(0,v.jsx)(ol,{onClick:t,pin:n,selected:r.includes(n.id)})}})})}function oc(e){var t=e.hasResults,n=e.query,o=e.searchFieldType,i=(0,el.u)().logContextEvent,a=(0,b.ZP)();if((0,r.useEffect)(function(){t&&i({event_type:60,component:13762,view_type:212,aux_data:{has_search_results:!!t}})},[i,t]),!n)return(0,v.jsx)(l.xv,{color:"subtle",inline:!0,size:"400",weight:"bold",children:a._('Choose image to create a new Pin', 'StlTaggingSearchResults', 'Title for grid showing images scraped from URL that user can choose to create a new Pin while tagging products for an existing Pin')});var s=t?a._('Results for {{ searchQuery }}', 'StlTaggingSearchResults.query.results', 'Text for display of search results for given query'):a._('No results found for {{ searchQuery }}', 'StlTaggingSearchResults.query.noResults', 'Text for display of no search results for given query');return"catalogId"===o&&(s=t?a._('Catalog match for {{ searchQuery }}', 'StlTaggingSearchResults.query.catalogId.results', 'Text for display of search results for given query'):a._('No catalog matches for {{ searchQuery }}', 'StlTaggingSearchResults.query.noResults', 'Text for display of no search results for given query')),(0,v.jsx)(l.xv,{color:"subtle",inline:!0,size:"400",weight:"bold",children:(0,ec.nk)(s,{searchQuery:(0,v.jsx)(l.xv,{inline:!0,size:"400",weight:"bold",children:'"'.concat(n,'"')},n)})})}var ou=n(452859);function od(e){return(od="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function of(e){return function(e){if(Array.isArray(e))return ov(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||og(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function op(e,t,n,r,o,i,a){try{var l=e[i](a),s=l.value}catch(e){return void n(e)}l.done?t(s):Promise.resolve(s).then(r,o)}function oh(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){op(i,r,o,a,l,"next",e)}function l(e){op(i,r,o,a,l,"throw",e)}a(void 0)})}}function oy(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function ob(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?oy(Object(n),!0).forEach(function(t){var r,o;r=t,o=n[t],(r=function(e){var t=function(e,t){if("object"!=od(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=od(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==od(t)?t:t+""}(r))in e?Object.defineProperty(e,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[r]=o}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):oy(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function om(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,l=[],s=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);s=!0);}catch(e){c=!0,o=e}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return l}}(e,t)||og(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function og(e,t){if(e){if("string"==typeof e)return ov(e,t);var n=({}).toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ov(e,t):void 0}}function ov(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var o_=new l.Ry(or.fe),ox=function(e){var t,n,i,s,c=(0,el.u)().logContextEvent,u=(0,b.ZP)(),d=(0,rX.l)(),f=d.setCurrentPinDraftId,p=d.setStlTaggedCoord,h=d.setMostRecentTaggedObjectId,y=d.shopTheLook;(0,r7.Ow)(1000335);var m=e.pinItemId,g=om((0,r.useState)("titleUrl"),2),_=g[0],x=g[1],j=om((0,r.useState)([]),2),P=j[0],O=j[1],w=om((0,r.useState)(null),2),S=w[0],A=w[1],I=om((0,r.useState)(!1),2),E=I[0],C=I[1],D=om((0,r.useState)(null),2),T=D[0],k=D[1],z=om((0,r.useState)(null),2),R=z[0],B=z[1],L=om((0,r.useState)(null),2),F=L[0],Z=L[1],M=(0,eF.Z)(),N=om((0,r.useState)(null),2),H=N[0],U=N[1],W=(0,o.I0)(),V=(0,tm.B)(),G=(0,eB.Z)(),X=(0,eZ.lJ)(G,M)||G.isAuth&&G.id,Y=(0,eZ._P)(V,G,M),q=P.map(function(e){return e.id}),K=y.stlTaggedCoords,J=!K,$=(0,nx.vd)(),Q=null!=(i=(0,o.v9)(function(t){return $(t,e)}))?i:[],ee=null!=(s=(0,o.v9)(function(e){return e.pinbuilder}))?s:{},et=ee.closeupImageSignature,en=ee.pinTags,er=ee.taggedObjects,eo=(0,nF.n)({pinTagIds:Q,pinTags:en,taggedObjects:er}),ei=rG.tN-eo.length,ea=q.length>=ei,es=function(){k(null),A(null),B(null)},ec=function(){f(null),p(null)};(0,r.useEffect)(function(){c({event_type:13,component:13762,view_type:212,aux_data:ob({},et?{image_signature:et}:{})})},[]),(0,r.useEffect)(function(){return function(){ec()}},[]);var eu=function(e){c({event_type:60,component:13762,element:227,view_type:212,aux_data:{search_query:e.query,search_type:e.searchType}})},ed=G.isAuth?G.id:void 0,ef=function(e){U(null),eu({query:e,searchType:"url"});var t=(0,ot.Z)({url:e});(0,ni.Z)({url:"/v3/products/find/",data:ob({fields:["productmetadata.name","productmetadata.offers"],url:t,source:J?"collection":"merchant"},X!==ed?{orbac_subject_id:X}:{})}).then(function(e){var n=(e.resource_response||{}).data;B(t),Z(n)}).catch(function(e){U({title:(0,r9.Z)(e,"message_detail")||(0,r9.Z)(e,"message")})})},ep=(t=oh(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(C(!0),k(t),eu({query:t,searchType:"title"}),!X){e.next=11;break}return n=rJ.Z.create("BaseSearchResource",{user:X,query:t,commerce_only:!0}),e.next=7,n.callGet();case 7:A(e.sent.resource_response.data.results.filter(function(e){return"pin"===e.type}));case 11:C(!1);case 12:case"end":return e.stop()}},e)})),function(e){return t.apply(this,arguments)}),eh=(n=oh(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return eu({query:t,searchType:"id"}),C(!0),k(t),n=rJ.Z.create("ProductGroupItemIdPinResource",ob({merchantId:Y,filters:{1:[t]},itemId:t},X!==ed?{orbacSubjectId:X}:{})),e.next=7,n.callGet();case 7:A(e.sent.resource_response.data.reduce(function(e,t){if(t){if(t.type="pin",t.rich_metadata){var n,r=null!=(n=t.rich_metadata.url)?n:t.rich_metadata.id;(0,on.Z)({url:r})&&(t.link=r)}return[].concat(of(e),[t])}return e},[])),C(!1);case 12:case"end":return e.stop()}},e)})),function(e){return n.apply(this,arguments)}),ey=function(e){es();var t=e.trim();"catalogId"===_?eh(t):(0,on.Z)({url:t})?ef(t):ep(t)},eb=function(e){if(U(null),q.includes(e.id))O(P.filter(function(t){return t.id!==e.id}));else{if(ea)return void U({title:u._('Related product limit reached', 'StlTaggingSheet.relatedProducts.limitErrorTitle', 'Title for error message that the user has already entered the maximum number of related products'),message:u._('To add another item, remove one or more related products', 'StlTaggingSheet.relatedProducts.limitErrorMessage', 'Message for error message that the user has already entered the maximum number of related products')});O(function(t){return[].concat(of(t),[e])})}},em=function(e,t,n){t&&n&&W((0,ou.uM)(e,t,n))},eg=function(e,t){var n,r,o=null==K?void 0:K.xPercent,i=null==K?void 0:K.yPercent;if("webImage"===t.type){W((0,ou.mz)(e,t.link||t.sourceURL,null)),em(e,o,i);var a={height:t.height,width:t.width,url:t.src};W((0,ou.Dn)(e,t.id,{media:a,type:t.type,pin:t}))}else"pin"===t.type&&(W((0,ou.mz)(e,null!=(n=t.link)?n:"",null)),em(e,o,i),h(t.id),W((0,ou.Dn)(e,t.id,{media:null==(r=t.images)?void 0:r["474x"],type:t.type,pin:t})));W((0,na.C_)(m,e))},ev=function(){var e=(0,a.Z)();return W((0,na.oe)(m,e)),e},e_=function(e,t){eg(ev(),e),t()},ex=function(){var e=ev();P.forEach(function(t){return eg(e,t)})},ej=(0,r.useMemo)(function(){return new l.H3([o_])},[o_]),eP=(0,r.useMemo)(function(){return new l.H3([ej])},[ej]),eO=(0,r.useRef)(null),ew=R&&!!F&&F.images.length>0&&F.images.find(function(e){return!e.toLowerCase().includes("svg")});return(0,v.jsx)(l.mh,{zIndex:ej,children:(0,v.jsx)(l.To,{accessibilityDismissButtonLabel:u._('Cancel tagging products', 'StlTaggingSheet.Sheet.accessibilityDismissButtonLabel', 'Accessibility label for button to cancel tagging products and close the sheet'),accessibilityLabel:u._('Tag products for this Pin', 'StlTaggingSheet.Sheet.accessibilitySheetLabel', 'Accessibility label for the sheet to tag products for a Pin'),closeOnOutsideClick:!1,footer:function(e){var t=e.onDismissStart;return J?(0,v.jsx)(r4,{onDismissStart:t,onRemove:eb,onSubmit:ex,selectedResults:P}):null},heading:J?u._('Make a collection', 'StlTaggingSheet.sheet.header.relatedProducts', 'Heading for sheet allowing user to tag related products shown in this Pin'):u._('Tag this product', 'StlTaggingSheet.sheet.header.coordinates', 'Heading for sheet allowing user to tag products shown in this Pin'),onDismiss:ec,size:"sm",subHeading:(0,v.jsx)(l.xu,{paddingX:8,children:(0,v.jsx)(oa,{onClear:es,onLinkClick:function(e){x(e),es()},onSubmit:function(e){ey(e)},showCatalogLink:!!Y,type:_},_)}),children:function(e){var t,n=e.onDismissStart;return(0,v.jsxs)(l.xu,{ref:eO,children:[(0,v.jsx)(r7.a3,{eligibleIds:[502964],placementId:1000335,children:function(e){var t=e.complete;return(0,v.jsx)(l.pl,{anchor:eO.current,idealDirection:"down",message:u._('Collections make it easier for people to find products and bring their inspiration to life. Add up to 24 more items for display under your image', 'pinbuilder.shopTheLook.collections', 'Flyout to help merchants understand why they should use Collections'),onDismiss:t,primaryAction:{href:"https://pinterest.com/_/_/help/business/article/shop-the-look-product-tagging",target:"blank",text:u._('Learn more', 'pinbuilder.shopTheLook.learnMoreButton', 'Learn more about collections'),role:"link"},zIndex:eP})}}),H&&(0,v.jsx)(l.xu,{marginTop:-4,children:(0,v.jsx)(l.ci,{dismissButton:{accessibilityLabel:u._('Dismiss', 'StlTaggingSheet.Callout.dismissButton.accessibilityLabel', 'Accessibility label for button to dismiss error callout'),onDismiss:function(){return U(null)}},iconAccessibilityLabel:u._('Error', 'StlTaggingSheet.Callout.iconAccessibilityLabel', 'Accessibility label for error icon'),message:null!=(t=H.message)?t:"",title:H.title,type:"error"})}),T&&!E||R?(0,v.jsx)(l.xu,{marginTop:H?4:-4,children:(0,v.jsx)(oc,{hasResults:S?S.length>0:void 0,query:T,searchFieldType:_})}):null,T&&(0,v.jsxs)(r.Fragment,{children:[E&&(0,v.jsx)(oo,{}),(0,v.jsx)(os,{onItemClick:J?eb:function(e){return e_(e,n)},results:null!=S?S:[],selectedAssetIds:q})]}),R&&!!F&&F.images.length>0&&ew&&(0,v.jsx)(oe.Z,{url:ew,children:function(e){var t,o,i=e.image;return(0,v.jsx)(r.Fragment,{children:i&&(null==F||null==(t=F.products)?void 0:t[0])&&(0,v.jsx)(r8,{images:i,link:R,onItemClick:J?eb:function(e){return e_(e,n)},productDetails:null==F||null==(o=F.products)?void 0:o[0],selectedAssetIds:q})})}},ew)]})}})})},oj=n(112892);function oP(e){var t=e.pinDraftId;return(0,v.jsx)(l.xu,{height:64,rounding:2,width:64,children:(0,v.jsx)(oj.Z,{pinDraftId:t,type:"square"})})}var oO=n(670622),ow=n(322888),oS=n(197891);function oA(e){return(oA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function oI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function oE(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?oI(Object(n),!0).forEach(function(t){oz(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):oI(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function oC(e,t){return(oC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function oD(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function oT(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(oT=function(){return!!e})()}function ok(e){return(ok=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function oz(e,t,n){return(t=oR(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function oR(e){var t=function(e,t){if("object"!=oA(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=oA(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==oA(t)?t:t+""}var oB=function(e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");o.prototype=Object.create(e&&e.prototype,{constructor:{value:o,writable:!0,configurable:!0}}),Object.defineProperty(o,"prototype",{writable:!1}),e&&oC(o,e);var t,n,r=(t=oT(),function(){var e,n=ok(o);return e=t?Reflect.construct(n,arguments,ok(this).constructor):n.apply(this,arguments),function(e,t){if(t&&("object"==oA(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return oD(e)}(this,e)});function o(){var e;if(!(this instanceof o))throw TypeError("Cannot call a class as a function");for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];return oz(oD(e=r.call.apply(r,[this].concat(n))),"handleActionClick",function(t){return function(n){var r=t.elementType,o=t.onClick;r&&e.props.logContextEvent({event_type:101,component:13308,element:r}),o&&o(n)}}),e}return n=[{key:"render",value:function(){var e,t,n=this.props,r=n.primary,o=n.secondary,i=null!=(e=r.linkUrl)?e:null,a=null!=(t=null==o?void 0:o.linkUrl)?t:null;return(0,v.jsxs)(l.xu,{display:"flex",marginEnd:-1,marginStart:-1,children:[!!o&&(0,v.jsx)(l.xu,{paddingX:1,children:a?(0,v.jsx)(l.ZP,{color:"white",href:a,onClick:this.handleActionClick(o),target:"blank",text:o.text}):(0,v.jsx)(l.zx,{color:"white",onClick:this.handleActionClick(o),text:o.text})}),(0,v.jsx)(l.xu,{paddingX:1,children:i?(0,v.jsx)(l.ZP,{href:i,onClick:this.handleActionClick(r),target:"blank",text:r.text}):(0,v.jsx)(l.zx,{onClick:this.handleActionClick(r),text:r.text})})]})}}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,oR(r.key),r)}}(o.prototype,n),Object.defineProperty(o,"prototype",{writable:!1}),o}(r.Component);function oL(e){var t=(0,el.u)().logContextEvent;return(0,v.jsx)(oB,oE(oE({},e),{},{logContextEvent:t}))}function oF(e){var t=e.onClear,n=(0, b.ZP)()._('Clear', 'Tooltip shown explaining button to clear published Pin', 'Tooltip shown explaining button to clear published Pin');return(0,v.jsx)(l.u,{text:n,children:(0,v.jsx)(l.iP,{fullWidth:!1,onTap:t,rounding:"circle",children:(0,v.jsx)(l.JO,{accessibilityLabel:n,color:"default",icon:"clear",size:20})})})}var oZ={__style:{borderRadius:2}};function oM(e){var t=e.subtitle,n=e.title,r=(0,b.ZP)();return(0,v.jsxs)(l.kC,{alignItems:"stretch",direction:"column",justifyContent:"start",children:[(0,v.jsx)(l.X6,{color:n?"default":"subtle",size:"400",children:n||r._('No title', 'Fallback title shown if none is provided on Pin create', 'Fallback title shown if none is provided on Pin create')}),!!t&&(0,v.jsx)(l.xu,{marginTop:1,children:"progress"===t.type?(0,v.jsx)(l.xu,{color:"secondary",dangerouslySetInlineStyle:oZ,height:6,overflow:"hidden",position:"relative",width:316,children:(0,v.jsx)(l.xu,{bottom:!0,color:"primary",dangerouslySetInlineStyle:oZ,left:!0,position:"absolute",top:!0,width:"".concat(t.progress,"%")})}):(0,v.jsx)(l.xv,{size:"100",children:t.text})})]})}function oN(e){var t=e.color,n=e.text;return(0,v.jsx)(l.xv,{color:t,italic:!0,children:n})}function oH(e){var t=e.status,n=(0,b.ZP)();if("default"===t)return(0,v.jsx)(l.xu,{color:"tertiary",height:20,rounding:"circle",width:20});var r={error:{accessibilityLabel:n._('Error', 'Screen reader label for failed Pin create', 'Screen reader label for failed Pin create'),color:"error",icon:"alert"},warning:{accessibilityLabel:n._('Alert', 'Screen reader label for Pin create with message', 'Screen reader label for Pin create with message'),color:"warning",icon:"check-circle"},success:{accessibilityLabel:n._('Success', 'Screen reader label for success Pin create', 'Screen reader label for success Pin create'),color:"success",icon:"check-circle"}}[t],o=r.accessibilityLabel,i=r.color,a=r.icon;return(0,v.jsx)(l.JO,{accessibilityLabel:o,color:i,icon:a,size:20})}var oU=n(782570);function oW(e){return(oW="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function oV(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function oG(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?oV(Object(n),!0).forEach(function(t){oJ(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):oV(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function oX(e,t){return(oX=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function oY(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function oq(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(oq=function(){return!!e})()}function oK(e){return(oK=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function oJ(e,t,n){return(t=o$(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o$(e){var t=function(e,t){if("object"!=oW(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=oW(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==oW(t)?t:t+""}var oQ=function(e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");o.prototype=Object.create(e&&e.prototype,{constructor:{value:o,writable:!0,configurable:!0}}),Object.defineProperty(o,"prototype",{writable:!1}),e&&oX(o,e);var t,n,r=(t=oq(),function(){var e,n=oK(o);return e=t?Reflect.construct(n,arguments,oK(this).constructor):n.apply(this,arguments),function(e,t){if(t&&("object"==oW(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return oY(e)}(this,e)});function o(e){var t;if(!(this instanceof o))throw TypeError("Cannot call a class as a function");return oJ(oY(t=r.call(this,e)),"handlePromoteButtonClick",function(){var e=t.props,n=e.requestContext,r=e.pin,o=n.advertiser,i=(0,ow.F0)(o,r.id);window.location.assign(i)}),oJ(oY(t),"_timeSuccessUpdated",new Date),oJ(oY(t),"interval",void 0),oJ(oY(t),"handleMouseEnter",function(){t.setState({hovered:!0})}),oJ(oY(t),"handleMouseLeave",function(){t.setState({hovered:!1})}),oJ(oY(t),"getSubtitleText",function(){var e=t.props,n=e.videoErrorMsg,r=e.pin,o=e.scheduledPin;if(o)return(0,ec.nk)(t.props.i18n._('Scheduled {{ elapsedTime }}', 'Text shown notifying user how long ago a Pin was schedule', 'Text shown notifying user how long ago a Pin was schedule'),{elapsedTime:t.props.getHumanizedTimeSince(o.created_at,!0)}).join("");if(r){var i=t.props.getHumanizedTimeSince(r.created_at,!0);return 3===r.video_status?(0,ec.nk)(t.props.i18n._('Uploaded {{ elapsedTime }}', 'Text shown notifying user how long ago a video Pin was uploaded', 'Text shown notifying user how long ago a video Pin was uploaded'),{elapsedTime:i}).join(""):(0,ec.nk)(t.props.i18n._('Published {{ elapsedTime }}', 'Text shown notifying user how long ago a Pin was created', 'Text shown notifying user how long ago a Pin was created'),{elapsedTime:i}).join("")}if(n)return(0,ec.nk)(t.props.i18n._('Attempted {{ elapsedTime }}', 'Text shown notifying user how long ago a video Pin upload was attempted', 'Text shown notifying user how long ago a video Pin upload was attempted'),{elapsedTime:t.props.getHumanizedTimeSince(t._timeSuccessUpdated.toString(),!0)}).join("")}),oJ(oY(t),"getSubtitle",function(){var e=t.props.videoUploadProgress,n=t.state.subtitleText;return null!=e?{progress:e,type:"progress"}:n?{text:n,type:"text"}:void 0}),oJ(oY(t),"getText",function(){var e=t.props,n=e.pin,r=e.requestContext,o=e.scheduledPin;return null!=e.videoUploadProgress?t.props.i18n._('Uploading', 'Text shown notifying user video is still uploading', 'Text shown notifying user video is still uploading'):n&&3===n.video_status?t.props.i18n._('In review', 'Text shown notifying user video is uploaded but not live', 'Text shown notifying user video is uploaded but not live'):o?(0,t$.Z)(t.props.i18n._('This Pin will publish on {{ scheduledDate }}', 'Text shown notifying user when Pin is scheduled to create', 'Text shown notifying user when Pin is scheduled to create'),{scheduledDate:new Date(1e3*o.scheduled_ts).toLocaleDateString(r.locale,{weekday:"long",month:"numeric",day:"numeric"})}):void 0}),oJ(oY(t),"getActions",function(){var e=t.props,n=e.pin,r=e.retryUpload,o=e.siteType,i=e.videoErrorMsg,a={elementType:11334,text:t.props.i18n._('See it', 'Button to see created Pin', 'Button to see created Pin'),linkUrl:(0,oS.Z)({currentSiteType:o,destinationSiteType:0,inputPath:n?"/pin/".concat(n.id):""})},l=n?{elementType:11335,text:t.props.i18n._('Promote', 'Button to quick promote created Pin', 'Button to quick promote created Pin'),onClick:t.handlePromoteButtonClick}:void 0,s=i?{elementType:11333,text:t.props.i18n._('Try again?', 'Button to try video upload again', 'Button to try video upload again'),onClick:r}:null;return{primary:s||l||a,secondary:!s&&l?a:void 0}}),oJ(oY(t),"getStatus",function(){var e=t.props,n=e.pin,r=e.scheduledPin,o=e.videoErrorMsg;return null!=e.videoUploadProgress?"default":r||n&&3===n.video_status?"warning":o?"error":"success"}),t.state={hovered:!1,subtitleText:t.getSubtitleText()},t}return n=[{key:"componentDidMount",value:function(){var e=this;this.interval=setInterval(function(){return e.setState({subtitleText:e.getSubtitleText()})},6e4)}},{key:"componentDidUpdate",value:function(e){(e.pin!==this.props.pin||e.videoErrorMsg!==this.props.videoErrorMsg)&&(this._timeSuccessUpdated=new Date,this.setState({subtitleText:this.getSubtitleText()}))}},{key:"componentWillUnmount",value:function(){clearInterval(this.interval)}},{key:"render",value:function(){var e=this.props,t=e.clearPinDraft,n=e.pinDraftId,r=e.title,o=e.videoErrorMsg,i=e.videoUploadProgress,a=this.state.hovered,s=this.getText(),c=o||s;return(0,v.jsxs)(l.xu,{alignItems:"center","data-test-id":"pin-draft-success",display:"flex",onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,paddingX:2,paddingY:5,children:[(0,v.jsx)(l.xu,{flex:"none",paddingX:3,children:(0,v.jsx)(oP,{pinDraftId:n})}),(0,v.jsx)(l.xu,{flex:"grow",paddingX:3,children:(0,v.jsx)(oM,{subtitle:this.getSubtitle(),title:r})}),(0,v.jsxs)(l.xu,{alignItems:"center",display:"flex",flex:"none",marginEnd:-3,marginStart:-3,paddingX:2,children:[!!c&&(0,v.jsx)(l.xu,{paddingX:3,children:(0,v.jsx)(oN,{color:o?"error":"subtle",text:c})}),!s&&(0,v.jsx)(l.xu,{paddingX:3,children:(0,v.jsx)(oL,oG({},this.getActions()))})]}),(0,v.jsx)(l.xu,{flex:"none",paddingX:3,children:a&&null==i?(0,v.jsx)(oF,{onClear:t}):(0,v.jsx)(oH,{status:this.getStatus()})})]})}}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,o$(r.key),r)}}(o.prototype,n),Object.defineProperty(o,"prototype",{writable:!1}),o}(r.Component);function o0(e){var t=e.pinDraftId,n=e.pinItemId,r=(0,el.u)().logContextEvent,i=(0,b.ZP)(),a=(0,s.Z)(),l=(0,oO.Z)(),c=(0,o.I0)(),u=(0,eB.Z)(),d=u.isAuth?u.id:"",f=u.isAuth?u.country:"",p=(0,nQ.Z)(),h=(0,o.v9)(function(e){return e.pinbuilder.pinDrafts[t].scheduledPin}),y=(0,o.v9)(function(e){return e.pinbuilder.pinDrafts[t].mediaError}),m=(0,o.v9)(function(e){return e.pinbuilder.pinDrafts[t].status}),g=(0,o.v9)(function(e){var n=e.pinbuilder,r=n.pinDrafts;return n.pinItems[r[t].pinItemIds[r[t].pinItemIndex]].title}),_=(0,o.v9)(function(e){var n=e.pinbuilder,r=n.pinDrafts;return n.pinItems[r[t].pinItemIds[r[t].pinItemIndex]].media}),x=(0,o.v9)(function(e){return e.pinbuilder.pinDrafts[t].pinId}),j=(0,tP.S6)(),P=x?j(x):null,O=_&&"localVideo"===_.type?y:null,w=_&&"localVideo"===_.type&&"uploading"===m?_.uploadProgress||0:null;return(0,v.jsx)(oQ,oG(oG({},e),{},{clearPinDraft:function(){return c((0,n8.Z)(t))},getHumanizedTimeSince:l,i18n:i,pin:P,requestContext:(0,tm.B)(),retryUpload:function(){return c((0,oU.Z)({pinDraftId:t,pinItemId:n,userId:d,country:f,i18n:i,logContextEvent:r,ideaPinRenamingEnabled:a}))},scheduledPin:h,siteType:p,title:g,videoErrorMsg:O,videoUploadProgress:w}))}var o1=n(121469),o2=n(626247),o8=n(889838);function o3(e){return(o3="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function o6(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o5(Object(n),!0).forEach(function(t){it(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o5(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function o4(e,t){return(o4=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function o9(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function o7(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(o7=function(){return!!e})()}function ie(e){return(ie=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function it(e,t,n){return(t=ir(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ir(e){var t=function(e,t){if("object"!=o3(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=o3(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==o3(t)?t:t+""}var io=function(e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");o.prototype=Object.create(e&&e.prototype,{constructor:{value:o,writable:!0,configurable:!0}}),Object.defineProperty(o,"prototype",{writable:!1}),e&&o4(o,e);var t,n,r=(t=o7(),function(){var e,n=ie(o);return e=t?Reflect.construct(n,arguments,ie(this).constructor):n.apply(this,arguments),function(e,t){if(t&&("object"==o3(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return o9(e)}(this,e)});function o(){var e;if(!(this instanceof o))throw TypeError("Cannot call a class as a function");for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];return it(o9(e=r.call.apply(r,[this].concat(n))),"state",{showModal:!0}),it(o9(e),"handlePromoteButtonClick",function(){var t=e.props,n=t.onComplete;(0,t.logContextEvent)({event_type:101,component:207,element:1223}),n()}),it(o9(e),"handleSeeYourPinButtonClick",function(){var t=e.props,n=t.onDismiss;(0,t.logContextEvent)({event_type:101,component:207,element:16227}),e.setState({showModal:!1}),n()}),it(o9(e),"handleDismiss",function(){var t=e.props.onDismiss;e.setState({showModal:!1}),t()}),it(o9(e),"renderDoneButton",function(){return(0,v.jsx)(l.xu,{paddingX:1,children:(0,v.jsx)(l.zx,{color:"red",onClick:e.handlePromoteButtonClick,text:e.props.i18n._('Promote Pin', '[m10n] button text for promote link in promote modal', '[m10n] button text for promote link in promote modal')})})}),e}return n=[{key:"componentDidMount",value:function(){this.props.logContextEvent({event_type:120,component:207,element:1223}),(0,tO.nP)("web.pin_create.success.promote.upsell")}},{key:"renderModalContent",value:function(){var e=this.props,t=e.pin,n=e.video,r=e.experimentsClient,o=t.pinner,i=r.checkExperiment("aid_exp_promote_created_pin_modal_update").anyEnabled,a=(null==t?void 0:t.images)&&(t.images.orig||t.images["236x"]||t.images["474x"]||t.images["736x"]);return i?(0,v.jsxs)(l.xu,{color:"default",display:"flex",maxHeight:395,maxWidth:720,overflow:"hidden",position:"relative",rounding:2,children:[(0,v.jsx)(l.xu,{alignItems:"center",dangerouslySetInlineStyle:{__style:{backgroundColor:"#FFF6EB",borderRight:"1px solid #EFEFEF"}},display:"flex",justifyContent:"center",marginEnd:8,children:(0,v.jsx)(l.kC,{alignItems:"center",height:"395px",justifyContent:"center",width:"270px",children:(0,v.jsx)(l.xu,{alignItems:"center",display:"flex",height:335,justifyContent:"center",position:"relative",width:226,children:(0,v.jsx)(o1.Z,{image:t&&a&&{altText:t.altText,dominantColor:t.dominant_color,url:a.url,width:a.width,height:a.height},rounding:6,skipImageReloadOnError:!1,video:n})})})}),(0,v.jsx)(l.kC,{alignItems:"center",direction:"column",justifyContent:"center",children:(0,v.jsxs)(l.xu,{height:244,marginEnd:8,paddingY:8,width:386,children:[(0,v.jsx)(l.X6,{size:"600",children:this.props.i18n._('You created a Pin!', 'pin create success message for modal title', 'pin create success message for modal title')}),(0,v.jsx)(l.xu,{paddingY:6,children:(0,v.jsx)(l.xv,{size:"200",children:this.props.i18n._('Millions of people come to Pinterest every month to find new things to buy, make and do. Promote your Pin to find your audience.', '[m10n] body copy for promote pin upsell.', '[m10n] body copy text for promote pin upsell.')})}),(0,v.jsxs)(l.hE,{children:[(0,v.jsx)(l.xu,{"data-test-id":"seeItNow",children:(0,v.jsx)(l.ZP,{href:this.props.pinUrl,onClick:this.handleSeeYourPinButtonClick,text:this.props.i18n._('See your Pin', '[m10n] button text for pin link button in promote modal', '[m10n] button text for pin link button in promote modal')})}),(0,v.jsx)(l.zx,{color:"red",onClick:this.handlePromoteButtonClick,text:this.props.i18n._('Promote Pin', '[m10n] button text for promote link in promote modal', '[m10n] button text for promote link in promote modal')})]})]})})]}):(0,v.jsxs)(l.xu,{color:"default",display:"flex",maxHeight:"calc(100vh - 32px)",maxWidth:720,overflow:"hidden",position:"relative",rounding:2,children:[(0,v.jsx)(l.xu,{alignItems:"center",dangerouslySetInlineStyle:{__style:{borderRight:"1px solid #EFEFEF"}},display:"flex",justifyContent:"center",children:(0,v.jsx)(l.xu,{display:"flex",maxHeight:"700px",paddingX:8,paddingY:10,children:(0,v.jsx)(o2.ZP,{maxDescriptionLength:60,pin:t,promoted:{businessName:o.full_name,avatarImageSmallUrl:o.image_small_url},video:n})})}),(0,v.jsx)(l.kC,{alignItems:"stretch",direction:"column",justifyContent:"center",children:(0,v.jsxs)(l.xu,{paddingY:10,children:[(0,v.jsx)(l.xu,{display:"flex",marginStart:10,children:(0,v.jsx)(l.X6,{children:this.props.i18n._('You created a Pin!', 'pin create success message for modal title', 'pin create success message for modal title')})}),(0,v.jsx)(l.xu,{marginStart:10,marginTop:6,children:(0,v.jsx)(l.xv,{weight:"bold",children:this.props.i18n._('Promote your Pin to reach more people', '[m10n] header for promote pin upsell', '[m10n] header for promote pin upsell')})}),(0,v.jsx)(l.xu,{marginBottom:8,marginStart:10,marginTop:3,children:(0,v.jsx)(l.xv,{children:(0,ec.nk)(this.props.i18n._('{{ mauText }} people come to Pinterest every month to find new things to buy, make and do. Promote your Pin to find your audience.', '[m10n] body copy for promote pin upsell. MAU_TEXT is a string of xxx million', '[m10n] body copy for promote pin upsell. MAU_TEXT is a string of xxx million'),{mauText:(0,v.jsx)(o8.Z,{})})})}),this.renderButtons()]})}),(0,v.jsx)(l.xu,{paddingX:2,paddingY:2,children:(0,v.jsx)(l.hU,{accessibilityLabel:"dismiss",bgColor:"transparent",icon:"cancel",iconColor:"gray",onClick:this.handleDismiss,size:"md"})})]})}},{key:"renderButtons",value:function(){var e=this.props.pinUrl;return(0,v.jsxs)(l.xu,{display:"flex",marginStart:9,children:[(0,v.jsx)(l.xu,{"data-test-id":"seeItNow",paddingX:1,children:(0,v.jsx)(l.ZP,{href:e,onClick:this.handleSeeYourPinButtonClick,text:this.props.i18n._('See your Pin', '[m10n] button text for pin link button in promote modal', '[m10n] button text for pin link button in promote modal')})}),this.renderDoneButton()]})}},{key:"render",value:function(){return this.state.showModal?(0,v.jsx)(l.xu,{alignItems:"center",column:12,dangerouslySetInlineStyle:{__style:{boxSizing:"border-box"}},display:"flex",height:"100%",justifyContent:"center",left:!0,position:"fixed",top:!0,width:"100%",children:(0,v.jsx)(es.ZP,{accessibilityModalLabel:this.props.i18n._('Your saved Pin.', 'Label for a modal showing the pin the user just created.', 'Label for a modal showing the pin the user just created.'),onDismiss:this.handleDismiss,size:"md",children:this.renderModalContent()})}):null}}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ir(r.key),r)}}(o.prototype,n),Object.defineProperty(o,"prototype",{writable:!1}),o}(r.Component);function ii(e){var t=(0,b.ZP)(),n=(0,el.u)().logContextEvent,r=(0,eL.Z)();return(0,v.jsx)(io,o6(o6({},e),{},{experimentsClient:r,i18n:t,logContextEvent:n}))}var ia=n(298721),il=n(304364),is=(0,r7.RL)(14,function(e){return{pin_id:e.pinId}})(function(e){var t=e.boardName,n=e.color,r=e.description,o=e.eligibleForExtensionUpsell,i=e.experience,a=e.imageUrl,s=e.isFromPinBuilder,c=e.link,u=e.onClose,d=e.openNewTab,f=e.pin,p=void 0===f?void 0:f,h=e.pinId,y=e.sectionName,m=e.siteType,g=e.video,_=e.websiteMedia,x=(0,b.ZP)(),j=(0,eB.Z)(),P=(0,r7.oS)(),O=(0,tm.B)().advertiser,w=(0,ow.F0)(O,h),S=function(){return i&&[501001].includes(i.experience_id)},A=(0,oS.Z)({currentSiteType:m,destinationSiteType:0,inputPath:"/pin/".concat(h)});if(j.isAuth&&j.isPartner&&p)return(0,v.jsx)(ii,{onComplete:function(){i&&S()&&P.completeExperience(i.placement_id,i.experience_id),window.location.assign(w)},onDismiss:function(){i&&S()&&P.dismissExperience(i.placement_id,i.experience_id),u()},pin:p,pinUrl:A,siteType:m,video:g});var I=p&&t?p.board.url:"",E=y?"".concat(I).concat(p.section.slug,"/"):"";if(s&&o){var C=(null==p?void 0:p.id)||"";return(0,v.jsx)(l.xu,{"data-test-id":"browser-extension-upsell-modal_".concat(C),children:(0,v.jsx)(es.ZP,{accessibilityModalLabel:x._('Get the Pinterest browser extension', 'label.extensionUpsellModal.addPinDropdown', 'Accesibility label for browser extension upsell modal'),onDismiss:u,size:"sm",children:(0,v.jsx)(ia.Z,{isFromPinBuilder:!0,onHide:u,onInstall:u})})})}return(0,v.jsx)(es.ZP,{accessibilityModalLabel:x._('Your saved Pin.', 'Label for a modal showing the pin the user just created.', 'Label for a modal showing the pin the user just created.'),heading:(0,v.jsx)(l.xu,{padding:8,children:(0,v.jsx)(l.X6,{align:"center",size:"600",children:y?(0,ec.nk)(x._('Saved to {{ sectionName }} in {{ boardName }}', 'pinCreateSuccess.Option2Modal.savedToSection', 'Text and link for section and board that pin was saved to.'),{boardName:(0,v.jsx)(l.rU,{display:"inlineBlock",href:E,underline:"hover",children:y},"sectionLink"),sectionName:(0,v.jsx)(l.rU,{display:"inlineBlock",href:I,underline:"hover",children:t},"boardLink")}):(0,ec.nk)(x._('Saved to {{ boardName }}', 'pinCreateSuccessModal.Option2Modal.savedToBoard', 'Text and link for board that pin was saved to.'),{boardName:(0,v.jsx)(l.rU,{display:"inlineBlock",href:I,underline:"hover",children:t},"boardLink")})})}),onDismiss:u,size:"md",children:(0,v.jsx)(il.Z,{boardName:t,color:n,description:r,hideHeader:!0,imageUrl:a,link:c,onClose:u,openNewTab:d,pin:p,pinId:h,sectionName:y,siteType:m,video:g,websiteMedia:_})})}),ic=n(551969),iu=n(274320),id=n(510928),ip=n(166379),ih=n(483180);function iy(e){var t=e.image,n=e.localMedia,r=e.title,o=e.videos;return t&&n?o?(0,v.jsx)(l.nk,{aspectRatio:t.width/t.height,autoplay:!0,captions:r,loop:!0,onPlay:function(){},onPlayError:function(){},src:n}):(0,v.jsx)(l.Ee,{alt:r||"",color:"lightGray",naturalHeight:t.height,naturalWidth:t.width,src:n}):null}function ib(e){var t=e.onDismiss,n=e.scheduledPin,r=(0,b.ZP)(),o=(0,eB.Z)(),i=(0,tm.B)(),a=(0,eF.Z)(),s=(0,eZ.Ms)(o,a),c=n.image,u=n.localMedia,d=n.scheduled_ts,f=n.title,p=n.videos,h=new Date(1e3*d),y=c&&c["236x"];return(0,v.jsx)(es.ZP,{accessibilityModalLabel:r._('Your scheduled pin.', 'Label for a modal showing the pin the user just scheduled.', 'Label for a modal showing the pin the user just scheduled.'),footer:(0,v.jsx)(l.kC,{alignItems:"stretch",justifyContent:"end",children:(0,v.jsx)(l.xu,{"data-test-id":"see-scheduled-pin-button",paddingX:1,children:(0,v.jsx)(l.ZP,{color:"red",href:"".concat(ih.C0,"/").concat(s,"/scheduled-pins/"),text:r._('See Scheduled Pins', 'pinBuilder.seeScheduledPin.buttonTitle', 'Button label for navigating to the scheduled pins')})})}),heading:r._('Pin Scheduled', 'Header of modal for scheduling a pin successfully', 'Header of modal for scheduling a pin successfully'),onDismiss:t,size:"md",children:(0,v.jsxs)(l.xu,{padding:8,children:[(0,v.jsx)(l.xv,{children:(0,ec.nk)(r._('Scheduled to publish on {{ scheduledDate }} at {{ scheduledTime }}.', ' - ', ' -- '),{scheduledDate:(0,v.jsx)(l.xv,{inline:!0,weight:"bold",children:(0,v.jsx)(ip.Z,{dateFormatType:ip.k.SHORT_WEEKDAY_DATE,useUTC:!1,value:h})},"scheduledPinDate"),scheduledTime:(0,v.jsx)(l.xv,{inline:!0,weight:"bold",children:h.toLocaleTimeString(i.locale,{hour:"2-digit",minute:"2-digit"})},"scheduledPinTime")})}),(0,v.jsx)(l.xu,{paddingX:12,paddingY:4,children:(0,v.jsx)(iy,{image:y,localMedia:u,title:f,videos:p})})]})})}function im(e){return(im="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ig(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function iv(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ig(Object(n),!0).forEach(function(t){var r,o;r=t,o=n[t],(r=function(e){var t=function(e,t){if("object"!=im(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=im(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==im(t)?t:t+""}(r))in e?Object.defineProperty(e,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[r]=o}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ig(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function i_(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var ix=["succeeded","attempted","uploading"],ij=["succeeded","uploading"];function iP(e){var t,n=e.currentPinItemId,o=e.media,i=e.onComplete,a=e.pin,s=e.pinDraftId,c=e.removePinDraft,u=e.scheduledPin,d=e.showSuccess,f=e.type,p=e.userGridItemRef,h=e.view,y=e.websiteMedia,b=(0,eB.Z)(),m=(0,rX.l)().shopTheLook.currentPinDraftId,g=(0,iu.r)().checkExperiment,_=(0,eF.Z)(),x=(0,eZ.nl)(b,_)&&"ad_creation"!==tZ.Z.scenario()&&g("web_stl_tooling",{dangerouslySkipActivation:!0}).anyEnabled,j=function(e){if(Array.isArray(e))return e}(t=(0,r.useState)(!1))||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,l=[],s=!0,c=!1;try{for(i=(n=n.call(e)).next;!(s=(r=i.call(n)).done)&&(l.push(r.value),2!==l.length);s=!0);}catch(e){c=!0,o=e}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return l}}(t,2)||function(e,t){if(e){if("string"==typeof e)return i_(e,2);var n=({}).toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i_(e,2):void 0}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),P=j[0],O=j[1],w=(0,nQ.Z)(),S="true"===(0,id.Z)().promote_pinrep,A=tZ.Z.enabled("suppressSuccessModal"),I=(0,n0.dI)(),E=function(){c()},C=(0,tm.B)().userAgent.browserName;(0,r.useEffect)(function(){(a||u)&&A&&E()},[a,u,A]),(0,r.useEffect)(function(){var e=ic.Z.isBrowserExtensionSupported(C),t=!!(document.body&&document.body.hasAttribute(ic.e)),n=!!(0,eN.M0)().getItem(eM.$N);a&&rK({isBrowserExtensionSupported:e,isExtensionInstalled:t,seenUpsellFromPinbuilder:n})&&O(!0)},[C,a]),(0,r.useEffect)(function(){if(a&&P){var e,t,n,r,o,i,l=null!=(e=null==(t=a.board)?void 0:t.name)?e:"",s=null!=(n=null==(r=a.board)?void 0:r.url)?n:"",c=null!=(o=null==(i=a.images["236x"])?void 0:i.url)?o:"";I.showOneToast(function(e){var t=e.hideToast;return(0,v.jsx)(n2.Z,{boardName:l,boardUrl:s,onHide:t,pinImageUrl:c})}),(0,eN.M0)().setItem(eM.$N,!0)}},[a,P]),(0,r.useEffect)(function(){i&&d&&a&&i(a)},[i,a,d]);var D=(0,tm.B)().advertiser,T=function(){if(a){var e=(0,ow.F0)(D,a.id);window.location.assign(e)}E()},k=function(){if(!a||!o||tZ.Z.enabled("suppressSuccessModal"))return null;var e=a.section,t=a.id,n=a.board.name,r=iv(iv({},o),{},{url:o.src});return Object.assign(a.images,{"236x":r,"474x":r,"564x":r,orig:r}),(0,v.jsx)(l.xu,{"data-test-id":"pin-draft-create-success-modal",children:(0,v.jsx)(is,{boardName:n,eligibleForExtensionUpsell:P,imageUrl:o.src,isFromPinBuilder:!0,onClose:E,pin:a,pinId:t,sectionName:e?e.title:null,siteType:w,video:"localVideo"===o.type?o:void 0,websiteMedia:y})})},z=d&&(tZ.Z.enabled("multi_pin")||tZ.Z.enabled("multi_pin_pinner")),R=tZ.Z.enabled("multi_pin")||tZ.Z.enabled("multi_pin_pinner")?eu.sG:eu.XB,B=tZ.Z.enabled("multi_pin")||tZ.Z.enabled("multi_pin_pinner")?eu.GX:eu.bo;z&&(B=0);var L=s===m,F="carousel"===f&&tZ.Z.enabled("carousel");return(0,v.jsxs)(r.Fragment,{children:[(0,v.jsx)(l.xu,{color:"default",dangerouslySetInlineStyle:{__style:{paddingTop:z?void 0:R}},"data-test-id":"pin-builder-draft",direction:"column",display:"flex",paddingX:B,rounding:x?8:4,width:eu.of,children:z?(0,v.jsx)(o0,{pinDraftId:s,pinItemId:n}):(0,v.jsxs)(r.Fragment,{children:[(0,v.jsx)(rW,{pinDraftId:s}),(0,v.jsx)(l.xu,{position:x?"relative":"static",children:(0,v.jsx)(rf,{pinDraftId:s,userGridItemRef:p})}),x&&o&&!F&&(0,v.jsxs)(l.kC,{alignItems:"center",direction:"column",justifyContent:"start",children:[(0,v.jsx)(l.xu,{color:"secondary",dangerouslySetInlineStyle:{__style:{marginLeft:"-".concat(4*B,"px")}},height:2,width:eu.of+4*B*2}),(0,v.jsx)(rq,{pinDraftId:s,pinItemId:n})]})]})}),function(){var e=d&&(tZ.Z.enabled("multi_pin")||tZ.Z.enabled("multi_pin_pinner"));if(a&&!e&&S)T();else if(a&&!e&&"board"!==h)return k();return null}(),!!u&&!z&&(0,v.jsx)(l.xu,{"data-test-id":"scheduled-pin-create-success-modal",children:(0,v.jsx)(ib,{onDismiss:E,scheduledPin:u})}),x&&L&&(0,v.jsx)(ox,{pinItemId:n})]})}function iO(e){var t=(0,rl.nL)(),n=(0,o.v9)(function(t){return t.pinbuilder.pinDrafts[e.pinDraftId]}),r=n.mode,i=n.pinId,a=n.pinItemIds,l=n.scheduledPin,s=n.status,c=n.type,u=n.view,d=n.websiteMedia,f=(0,o.v9)(function(n){return t(n,e)}),p=a[0],h=(0,o.v9)(function(e){var t;return null==(t=e.pinbuilder.pinItems[f])?void 0:t.media}),y=(0,o.v9)(function(e){var t;return null==(t=e.pinbuilder.pinItems[p])?void 0:t.media}),b="carousel"===c?y:h,m=(0,o.v9)(function(e){return i&&"create"===r?e.pins[i]:null}),g=(0,o.v9)(function(e){return e.pinbuilder.pinDraftIds.length>1&&(ij.includes(s)||!!h&&"localVideo"===h.type&&ix.includes(s))}),_=(0,o.I0)();return(0,v.jsx)(iP,iv(iv({},e),{},{currentPinItemId:f,media:b,pin:m,removePinDraft:function(){return _((0,n8.Z)(e.pinDraftId))},scheduledPin:l&&"create"===r?l:null,showSuccess:g,type:c,view:u,websiteMedia:d}))}var iw=n(656013);function iS(e){return(iS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function iA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function iI(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?iA(Object(n),!0).forEach(function(t){ik(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):iA(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function iE(e,t){return(iE=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function iC(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function iD(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(iD=function(){return!!e})()}function iT(e){return(iT=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ik(e,t,n){return(t=iz(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function iz(e){var t=function(e,t){if("object"!=iS(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=iS(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==iS(t)?t:t+""}var iR={__style:{border:"solid 2px #e60023"}},iB={__style:{border:"dashed 2px #767676"}},iL=function(e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");o.prototype=Object.create(e&&e.prototype,{constructor:{value:o,writable:!0,configurable:!0}}),Object.defineProperty(o,"prototype",{writable:!1}),e&&iE(o,e);var t,n,r=(t=iD(),function(){var e,n=iT(o);return e=t?Reflect.construct(n,arguments,iT(this).constructor):n.apply(this,arguments),function(e,t){if(t&&("object"==iS(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return iC(e)}(this,e)});function o(){var e;if(!(this instanceof o))throw TypeError("Cannot call a class as a function");for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];return ik(iC(e=r.call.apply(r,[this].concat(n))),"state",{isHovering:!1}),ik(iC(e),"handleMouseEnter",function(){e.setState({isHovering:!0})}),ik(iC(e),"handleMouseLeave",function(){e.setState({isHovering:!1})}),e}return n=[{key:"render",value:function(){var e=this.props,t=e.checked,n=e.onClick,r=this.state.isHovering;return(0,v.jsx)(l.xu,{color:t?"primary":"transparent",dangerouslySetInlineStyle:t?iR:iB,onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,rounding:"circle",children:(0,v.jsx)(l.hU,{accessibilityLabel:t?this.props.i18n._('Deselect Pin', 'Button to deselect Pin from bulk editing', 'Button to deselect Pin from bulk editing'):this.props.i18n._('Select Pin', 'Button to select Pin from bulk editing', 'Button to select Pin from bulk editing'),bgColor:"transparent",icon:t||r?"check":void 0,iconColor:t?"white":"gray",onClick:n,size:"md"})})}}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,iz(r.key),r)}}(o.prototype,n),Object.defineProperty(o,"prototype",{writable:!1}),o}(r.Component);function iF(e){var t=(0,b.ZP)();return(0,v.jsx)(iL,iI(iI({},e),{},{i18n:t}))}function iZ(e){return(iZ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function iM(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function iN(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?iM(Object(n),!0).forEach(function(t){iG(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):iM(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function iH(e,t){return(iH=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function iU(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function iW(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(iW=function(){return!!e})()}function iV(e){return(iV=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function iG(e,t,n){return(t=iX(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function iX(e){var t=function(e,t){if("object"!=iZ(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=iZ(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==iZ(t)?t:t+""}var iY=new l.H3([new l.Ry(eu.v9)]),iq=function(e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");i.prototype=Object.create(e&&e.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),Object.defineProperty(i,"prototype",{writable:!1}),e&&iH(i,e);var t,n,o=(t=iW(),function(){var e,n=iV(i);return e=t?Reflect.construct(n,arguments,iV(this).constructor):n.apply(this,arguments),function(e,t){if(t&&("object"==iZ(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return iU(e)}(this,e)});function i(){var e;if(!(this instanceof i))throw TypeError("Cannot call a class as a function");for(var t=arguments.length,n=Array(t),a=0;a<t;a++)n[a]=arguments[a];return iG(iU(e=o.call.apply(o,[this].concat(n))),"pinDraftRef",(0,r.createRef)()),iG(iU(e),"handleSelectPinDraft",function(){var t=e.props,n=t.selectPinDraft;(0,t.logContextEvent)({event_type:101,component:13308,element:11332}),n()}),iG(iU(e),"getCallout",function(){return{error:{title:e.props.i18n._('Product tagging limit reached', 'pinbuilder.productTagging.error', 'Error when user tries to tag more than 8 products'),message:e.props.i18n._('To add another item, remove one or more tagged products', 'pinbuilder.productTagging.error.instructions', 'Instructions on how to add another product')},warning:{title:e.props.i18n._('Products will be deleted', 'pinbuilder.carousel.warningHeader', 'Warning header when adding a carousel after tagging products'),message:e.props.i18n._('Your tagged products will be deleted if you add a carousel image', 'pinbuilder.carousel.warning', 'Warning when user tries to add a carousel after tagging products')}}}),iG(iU(e),"handleClick",function(){var t=e.props,n=t.deselectPinDraft,r=t.pinDraftId,o=t.selectedPinDraftIds,i=t.status,a=!eu.x1.includes(i);o.includes(r)?n():a&&e.handleSelectPinDraft()}),e}return n=[{key:"componentDidMount",value:function(){this.pinDraftRef.current&&!this.props.skipScrolling&&this.pinDraftRef.current.scrollIntoView({behavior:"smooth",block:"start"})}},{key:"render",value:function(){var e=this.props,t=e.numPinDrafts,n=e.pinDraftId,r=e.selectedPinDraftIds,o=e.status,i=e.setStlCallout,a=e.stlCallout,s=e.requestContext.isRTL,c=e.userGridItemRef,u=a||{},d=u.showCallout,f=u.type,p=r.includes(n),h=r.length,y={__style:iN({top:"20px",opacity:p?void 0:.6,transition:"transform 250ms ".concat(eu.rc),transform:h>0?"scale(2)":void 0},s?{left:"-60px",transformOrigin:"right center"}:{right:"-60px",transformOrigin:"left center"})},b={backgroundColor:"rgba(255,255,255,0.7)",borderRadius:16,height:"100%",width:"100%",zIndex:"publishing"===o?eu.v9:void 0},m="publishing"===o||"uploading"===o&&1===t,g=!eu.x1.includes(o),_=this.getCallout();return(0,v.jsxs)(l.xu,{ref:this.pinDraftRef,"data-group-id":"pin-builder-pin-draft","data-test-id":"pin-builder-pin-draft-".concat(n),paddingY:3,children:[(0,v.jsxs)(l.xu,{position:"relative",children:[(0,v.jsx)(iO,{pinDraftId:n,userGridItemRef:c}),t>1&&g&&(tZ.Z.enabled("multi_pin")||tZ.Z.enabled("multi_pin_pinner"))&&(0,v.jsx)(l.xu,{dangerouslySetInlineStyle:y,"data-test-id":"pin-draft-select",position:"absolute",children:(0,v.jsx)(iF,{checked:p,onClick:this.handleClick})}),(h>0||m)&&(0,v.jsx)(l.xu,{bottom:!0,left:!0,position:"absolute",right:!0,top:!0,zIndex:iY,children:(0,v.jsx)(iw.Z,{onClick:this.handleClick,selected:p,style:b,children:m&&(0,v.jsx)(l.kC,{alignItems:"center",height:"100%",justifyContent:"center",children:(0,v.jsx)(l.xH,{accessibilityLabel:this.props.i18n._('Saving Pin...', 'Spinner accessibility label when saving the pin', 'Spinner accessibility label when saving the pin'),show:!0})})})})]}),d&&f&&(0,v.jsx)(l.xu,{bottom:!0,dangerouslySetInlineStyle:{__style:{marginBottom:"30px"}},position:"absolute",width:eu.of,children:(0,v.jsx)(l.ci,{dismissButton:{accessibilityLabel:this.props.i18n._('Dismiss banner', 'pinbuilder.error.dismissButton', 'Button to dismiss the banner'),onDismiss:i},iconAccessibilityLabel:this.props.i18n._('Error icon', 'pinBuilder.taggedObjects.error', 'Error icon'),message:_[f].message,title:_[f].title,type:f})})]})}}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,iX(r.key),r)}}(i.prototype,n),Object.defineProperty(i,"prototype",{writable:!1}),i}(r.Component);function iK(e){var t=(0,el.u)().logContextEvent,n=(0,b.ZP)(),r=(0,rX.l)(),i=r.shopTheLook,a=r.setStlCallout,l=e.pinDraftId,s=e.skipScrolling,c=(0,o.I0)(),u=(0,o.v9)(function(e){return e.pinbuilder}),d=u.pinDraftIds,f=u.pinDrafts,p=u.selectedPinDraftIds,h=i.stlCallout;return(0,v.jsx)(iq,iN(iN({},e),{},{deselectPinDraft:function(){return c((0,ef.deselectPinBuilderPinDraft)(l))},i18n:n,logContextEvent:t,numPinDrafts:d.length,requestContext:(0,tm.B)(),selectedPinDraftIds:p,selectPinDraft:function(){return c((0,ef.selectPinBuilderPinDraft)(l))},setStlCallout:function(){return a({showCallout:!1})},skipScrolling:s,status:f[l].status,stlCallout:h}))}function iJ(e){var t=e.setPinDraftRef,n=e.userGridItemRef;(0,r7.Ow)(1000287),(0,r7.Ow)(1000288);var r=(0,o.v9)(ep.VK),i=(0,o.v9)(function(e){return e.pinbuilder.selectedPinDraftIds.length>0}),a={__style:{transformOrigin:"top center",transition:"transform 250ms ".concat(eu.rc,", height 250ms ").concat(eu.rc),transform:i?"scale(0.5)":void 0,height:i?"50%":"100%"}};return(0,v.jsx)(l.xu,{dangerouslySetInlineStyle:a,children:(0,v.jsx)(l.xu,{alignItems:"center",direction:"column",display:"flex",paddingY:7,children:(0,v.jsx)(l.xu,{children:(0,v.jsx)(l.kC,{alignItems:"stretch",direction:"row",justifyContent:"start",children:(0,v.jsx)(l.kC,{alignItems:"stretch",direction:"column",justifyContent:"start",children:r.map(function(e){return(0,v.jsx)(l.xu,{ref:function(n){t(e,n)},children:(0,v.jsx)(iK,{pinDraftId:e,skipScrolling:1===r.length,userGridItemRef:n})},e)})})})})})})}var i$=n(537838),iQ=n(957010);function i0(e){return(i0="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i1(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function i2(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i1(Object(n),!0).forEach(function(t){i4(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i1(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function i8(e,t){return(i8=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function i3(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function i5(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(i5=function(){return!!e})()}function i6(e){return(i6=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function i4(e,t,n){return(t=i9(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i9(e){var t=function(e,t){if("object"!=i0(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=i0(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==i0(t)?t:t+""}var i7={__style:{borderRadius:2}},ae=function(e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");o.prototype=Object.create(e&&e.prototype,{constructor:{value:o,writable:!0,configurable:!0}}),Object.defineProperty(o,"prototype",{writable:!1}),e&&i8(o,e);var t,n,r=(t=i5(),function(){var e,n=i6(o);return e=t?Reflect.construct(n,arguments,i6(this).constructor):n.apply(this,arguments),function(e,t){if(t&&("object"==i0(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return i3(e)}(this,e)});function o(){var e;if(!(this instanceof o))throw TypeError("Cannot call a class as a function");for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];return i4(i3(e=r.call.apply(r,[this].concat(n))),"handleAddDraftClick",function(){var t=e.props,n=t.addPinDraft,r=t.location;(0,t.logContextEvent)({event_type:101,component:13395,element:11329});var o=r.state||{},i=o.board,a=o.boardSection;n(i?{selectedItem:i2({boardId:i.id,title:a?a.title:i.name},a?{sectionId:a.id}:{})}:{})}),e}return n=[{key:"render",value:function(){var e=this.props,t=e.disabled,n=e.isAddPinDraftRemoved,r=e.pinDraftIds,o=e.pinDraftRefs,i=e.scrollPosition,a=e.requestContext.isRTL,s=r.length;return(0,v.jsxs)(l.xu,{"data-test-id":"pin-builder-controls",direction:"column",display:"flex",height:"100%",children:[!n&&(0,v.jsx)(l.xu,{"data-tutorial-id":"pin-builder-batch-create",flex:"none",padding:4,children:(0,v.jsx)(l.iP,{disabled:t,onTap:this.handleAddDraftClick,children:(0,v.jsx)(l.xu,{alignItems:"center",dangerouslySetInlineStyle:{__style:{backgroundColor:"#fff",border:0,borderRadius:8,boxSizing:"border-box",cursor:t?"default":"pointer",height:60,outline:"none",opacity:t?.5:void 0,padding:0,width:40}},"data-test-id":"pin-builder-add-draft",display:"flex",justifyContent:"center",rounding:2,children:(0,v.jsx)(l.JO,{accessibilityLabel:this.props.i18n._('Create new Pin', 'Button to add another Pin draft', 'Button to add another Pin draft'),color:t?"subtle":"default",icon:"add"})})})}),(0,v.jsx)(l.xu,{color:"lightWash",height:1,marginEnd:2,marginStart:2}),(0,v.jsx)(l.kC,{alignItems:"stretch",direction:"column",flex:"grow",justifyContent:"start",overflow:"auto",children:(0,v.jsx)(l.xu,{marginTop:3,children:r.map(function(e,t){return(0,v.jsxs)(l.xu,{paddingX:4,paddingY:1,position:"relative",children:[(0,v.jsx)(i$.Z,{pinDraftId:e,pinDraftRefs:o}),Math.min(Math.floor(i*s),s-1)===t&&(0,v.jsx)(l.xu,{bottom:!0,color:"dark",dangerouslySetInlineStyle:i7,left:!a,marginBottom:1,marginTop:1,position:"absolute",right:a,top:!0,width:4})]},e)})})})]})}}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,i9(r.key),r)}}(o.prototype,n),Object.defineProperty(o,"prototype",{writable:!1}),o}(r.Component);function at(e){var t=e.isAddPinDraftRemoved,n=(0,el.u)().logContextEvent,l=(0,b.ZP)(),s=(0,eB.Z)(),c=s.isAuth&&s.isEmployee,u=(0,o.I0)(),d=(0,o.v9)(function(e){return e.pinbuilder}),f=d.pinDrafts,p=d.pinDraftIds,h=d.selectedPinDraftIds;return(0,v.jsx)(ae,i2(i2({},e),{},{addPinDraft:(0,r.useCallback)(function(e){return u((0,iQ.Z)({i18n:l,isEmployee:c,pinDraft:e,pinDraftId:(0,a.Z)(),storyPinPublishStopwatch:void 0}))},[]),disabled:h.length>0||p.filter(function(e){return"succeeded"!==f[e].status}).length>=eu.TK,i18n:l,isAddPinDraftRemoved:t,location:(0,i.TH)(),logContextEvent:n,pinDraftIds:p,requestContext:(0,tm.B)()}))}var an=n(321242),ar=n(78423),ao=n(877956),ai=n(571045),aa=n(2420),al=(n(875723),n(378888)),as=n(233624),ac=n(576087),au=n(341742),ad=n(315280),af=n(632291),ap=n(161343);function ah(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,l=[],s=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);s=!0);}catch(e){c=!0,o=e}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return ay(e,t);var n=({}).toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ay(e,t):void 0}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ay(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var ab={delay:700,duration:600,property:"opacity",timingFunction:"easeInOut"},am={delay:800,duration:600,property:"opacity",timingFunction:"easeInOut"},ag={property:"opacity",duration:500,timingFunction:"easeIn",delay:3300};function av(e){var t=e.autoAdvance,n=e.completionButtonText,o=e.containsHlsVideoComponent,i=e.isDismissable,a=e.onComplete,s=e.onDismiss,c=e.steps,u=(0,el.u)().logContextEvent,f=(0,b.ZP)(),p=ah((0,r.useState)(0),2),h=p[0],y=p[1],m=ah((0,r.useState)(0),2),g=m[0],_=m[1],x=ah((0,r.useState)(!1),2),j=x[0],P=x[1],O=(0,tm.B)().isRTL,w=(0,r.useCallback)(function(){P(!0)},[]),S=function(){u({event_type:101,component:13473,element:11556,aux_data:{education_active_step_id:c[h]&&c[h].id}}),a()},A=function(){u({event_type:101,component:13473,element:11557,aux_data:{education_active_step_id:c[h]&&c[h].id}}),s()},I=(0,r.useCallback)(function(){h<c.length-1?(u({event_type:101,component:13472,element:11559}),y(h+1),P(!1)):S()},[u,c,h,S]);return(0,r.useEffect)(function(){j&&_(1)},[h,j]),(0,v.jsx)(es.ZP,{accessibilityModalLabel:f._('In-product education modal', 'EducationModal.accessibilityModalLabel', 'Accessibility label for modal showing user eduction'),allowMediaPlay:o,heading:(0,v.jsxs)(l.xu,{dangerouslySetInlineStyle:{__style:{opacity:g,transition:d(ab)}},height:474,width:"100%",children:[(0,r.cloneElement)(c[h].element,{onStart:w}),(0,v.jsx)(l.xu,{alignItems:"center",bottom:!0,dangerouslySetInlineStyle:{__style:{opacity:g,transition:void 0===t||t?d(ag):void 0}},display:"flex",left:!0,marginBottom:5,padding:2,position:"absolute",right:!0,children:(0,v.jsxs)(l.kC,{alignItems:"stretch",justifyContent:"center",width:"100%",children:[c.length>1&&(0,v.jsx)(l.xv,{color:"subtle",size:"200",weight:"bold",children:(0,ec.nk)(f._('{{ index }} of {{totalSteps}}', 'Footer text indicating position in guide screen (e.g. 1 of 3)', 'Footer text indicating position in guide screen (e.g. 1 of 3)'),{index:h+1,totalSteps:c.length})}),(0,v.jsx)(l.xu,{bottom:!0,"data-test-id":"next-button",left:O,marginEnd:5,position:"absolute",right:!O,children:(0,v.jsx)(l.zx,{color:"red",onClick:I,size:"md",text:h<c.length-1?f._('Next', 'Button text to go to next step in education', 'Button text to go to next step in education'):n||f._('Take Tour', 'Button text to start tour', 'Button text to start tour')})})]})}),(void 0===i||i)&&(0,v.jsx)(l.xu,{dangerouslySetInlineStyle:{__style:{opacity:g,transition:d(am)}},left:O,marginEnd:4,marginTop:4,position:"absolute",right:!O,top:!0,children:(0,v.jsx)(l.hU,{accessibilityLabel:f._('Cancel', 'Icon Button text to Cancel', 'Icon Button text to Cancel'),icon:"cancel",iconColor:"gray",onClick:A,size:"lg"})})]}),onDismiss:A,role:"alertdialog",size:"lg"})}var a_=n(250039),ax=n(250905),aj=n(676934),aP=n(46568),aO=n(104659),aw=n(589357);function aS(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function aA(e){var t,n=e.onStart,o=(0,b.ZP)(),i=function(e){if(Array.isArray(e))return e}(t=(0,r.useState)(!1))||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,l=[],s=!0,c=!1;try{for(i=(n=n.call(e)).next;!(s=(r=i.call(n)).done)&&(l.push(r.value),2!==l.length);s=!0);}catch(e){c=!0,o=e}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return l}}(t,2)||function(e,t){if(e){if("string"==typeof e)return aS(e,2);var n=({}).toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?aS(e,2):void 0}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),a=i[0],s=i[1],c=(0,aO.G)().appUI.appInFocus;(0,r.useEffect)(function(){a&&n&&n()},[a,n]);var u=[o._('Combine up to 5 images', 'Text describing maximum images can be combined', 'Text describing maximum images can be combined'),o._('Reorder images to make it yours', 'Text describing reordering images', 'Text describing reordering images'),o._('Pick the best Pin size for your content', 'Text describing changing Pin size', 'Text describing changing Pin size')];return(0,v.jsxs)(l.xu,{bottom:!0,"data-test-id":"pinbuilder-education-layouts-screen",display:"flex",height:"100%",left:!0,overflow:"hidden",position:"absolute",right:!0,top:!0,width:"100%",children:[(0,v.jsx)(l.xu,{color:"secondary",position:"relative",width:342,children:(0,v.jsx)(aP.Z,{appInFocus:c,aspectRatio:a?342/474:0,hlsConfig:{startLevel:aw.VS},isAutoPlay:!0,loop:!0,onPlay:function(){},onPlayError:function(){},onReady:function(){return s(!0)},playing:!0,src:"https://v1.pinimg.com/videos/mc/hls/7f/20/86/7f20869b2522dca00ebf1f745313b90b.m3u8",volume:0})}),(0,v.jsx)(l.xu,{alignItems:"center",display:"flex",flex:"grow",paddingX:10,children:(0,v.jsxs)(l.xu,{children:[(0,v.jsx)(l.X6,{children:o._('Create a collage', 'A heading text for creating a collage Pin', 'A heading text for creating a collage Pin')}),(0,v.jsx)(l.xu,{paddingY:4,children:u.map(function(e,t){return(0,v.jsxs)(l.xu,{alignItems:"center",display:"flex",paddingY:1,children:[(0,v.jsx)(l.xu,{color:"selected",display:"flex",flex:"none",height:8,rounding:"circle",width:8}),(0,v.jsx)(l.xu,{paddingX:2,children:(0,v.jsx)(l.xv,{size:"400",children:e})})]},"layouts-screen-point-".concat(t))})})]})})]})}var aI=n(587468),aE=n(193373),aC=n(40006),aD=n(74459);function aT(e){return(aT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ak(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function az(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ak(Object(n),!0).forEach(function(t){aH(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ak(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function aR(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,l=[],s=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);s=!0);}catch(e){c=!0,o=e}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return l}}(e,t)||aB(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function aB(e,t){if(e){if("string"==typeof e)return aL(e,t);var n=({}).toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?aL(e,t):void 0}}function aL(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function aF(e,t){return(aF=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function aZ(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function aM(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(aM=function(){return!!e})()}function aN(e){return(aN=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function aH(e,t,n){return(t=aU(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function aU(e){var t=function(e,t){if("object"!=aT(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=aT(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==aT(t)?t:t+""}var aW=new l.H3([new l.Ry(or.fe)]),aV=function(e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");o.prototype=Object.create(e&&e.prototype,{constructor:{value:o,writable:!0,configurable:!0}}),Object.defineProperty(o,"prototype",{writable:!1}),e&&aF(o,e);var t,n,r=(t=aM(),function(){var e,n=aN(o);return e=t?Reflect.construct(n,arguments,aN(this).constructor):n.apply(this,arguments),function(e,t){if(t&&("object"==aT(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return aZ(e)}(this,e)});function o(){var e;if(!(this instanceof o))throw TypeError("Cannot call a class as a function");for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];return aH(aZ(e=r.call.apply(r,[this].concat(n))),"pinDraftRefs",new Map),aH(aZ(e),"setPinDraftRef",function(t,n){e.pinDraftRefs.set(t,n)}),e}return n=[{key:"componentDidUpdate",value:function(){var e=this.props,t=e.footerContext,n=t.zIndex,r=t.setZIndex,o=e.showInProductEducationExperience,i=e.viewEducation,a=aR(this.context,2),l=a[0],s=a[1];"number"==typeof n&&l&&l!==af.I&&r(null),o&&!l&&(s(eu.Lc),i())}},{key:"render",value:function(){var e=this.props.children,t=aR(this.context,2);return e({educationId:{value:t[0],set:t[1]},pinDraftRefs:{set:this.setPinDraftRef,value:this.pinDraftRefs}})}}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,aU(r.key),r)}}(o.prototype,n),Object.defineProperty(o,"prototype",{writable:!1}),o}(r.Component);function aG(e){var t,n=e.advertiser,c=e.externalButtonQuery,u=e.headerHeight,d=e.inStlToolingExp,f=e.pinDraftType,p=e.requestContext,h=e.userGridItemRef,y=e.userProfileRef,m=e.providerClassChildrenContext,g=m.educationId,_=g.value,x=g.set,j=m.pinDraftRefs,P=j.value,O=j.set,w=(0,r.useRef)(null),S=(0,r_.ou)().previous,A=aR((0,r.useState)(!1),2),I=A[0],E=A[1],C=aR((0,r.useState)(0),2),D=C[0],T=C[1],k=(0,ax.MS)(),z=(0,b.ZP)(),R=(0,s.Z)(),B=(0,el.u)().logContextEvent,F=(0,ao.be)(),Z=(0,ao.Am)(),M=(0,eB.Z)(),N=(0,o.I0)(),H=(0,i.s0)(),U=(0,i.TH)(),W=(0,nz.Z)(y).data,V=(0,ar.H7)().showEmailVerificationReminderModal,X=(0,eL.Z)().checkExperiment,Y=(0,o.v9)(function(e){return e.pinbuilder}),q=Y.closeupImageSignature,K=Y.entryPoint,J=Y.showDisabledPinCreationBanner,$=(0,o.v9)(rl.NW),Q=(0,o.v9)(ep.VK),ee=Q[0],et=ee?$[ee]:null,en=null==et?void 0:et.type,er=M.isAuth&&M.isEmployee,eo=p.isRTL;(0,r.useEffect)(function(){Q.some(function(e){return $[e].apiErrorCode===aa.H9})&&X("require_email_verification_pin_create").anyEnabled&&(V(),Q.forEach(function(e){return N((0,tx.lT)(e,null))}))}),(0,r7.Ow)(1000161);var ea=(0,o.v9)(function(e){var t,n=ee?(0,rl.nL)()(e,{pinDraftId:ee}):null;if(null===n)return null;var r=("story"===en?e.pinbuilder.storyPinItems:e.pinbuilder.pinItems)[n];return r&&(null==(t=r.media)?void 0:t.type)}),es=(0,r7.Ow)(1000135,{format_type:en,media_type:ea}).setExtraContext,ec=(0,r.useRef)(ea);(0,r.useEffect)(function(){ec.current!==ea&&(ec.current=ea,es({firstPinDraftMediaType:ea}))});var ed=(0,eF.Z)(),eh=ed&&ed.id,ey=(0,r.useRef)("not_set");(0,r.useEffect)(function(){var e;"story"===f?e="story_pin":c&&(e="offsite_pin_creation"),tZ.Z.initialize({user:W,requestContext:p,viewer:M,location:U,advertiser:n,scenario:e,orbacActingAs:ed})},[W]),(0,r.useEffect)(function(){if(ey.current!==eh||!$){ey.current=eh;var e,t,n,r,o=null==(e=U.state)?void 0:e.disableAddPinDraft;if(!(Q.length>0)&&!o){var i=null==(t=U.state)?void 0:t.board,l=null==(n=U.state)?void 0:n.boardSection,s=i||f?az({selectedItem:i?az(az({boardId:i.id,title:l?l.title:i.name},l?{sectionId:l.id}:Object.freeze({})),{},{ownerUsername:null==i||null==(r=i.owner)?void 0:r.username}):void 0},f?{type:f}:{}):void 0,u=(0,a.Z)();N((0,iQ.Z)({i18n:z,isEmployee:er,pinDraft:s,pinDraftId:u,storyPinPublishStopwatch:void 0}));var d=(0,rj.Z)({url:(0,rx.Z)()}),p=d.tab,h=d.url;if(X("web_bizhub_create_pin_from_website").anyEnabled&&h&&(N((0,tx.c8)(u,"scrape")),N((0,tx.f9)(u,h,null,""))),c){N((0,tx.c8)(u,"external")),N((0,tx.e5)(u,c.method));var y={height:1,width:1,id:(0,a.Z)(),sourceURL:c.url,src:c.media,type:"webImage"};N((0,tx.dj)(u,y)),N((0,tx.q0)(u,"external",p===eu.ro?"IDEA_PIN":"PIN"))}}}}),(0,au.Z)(function(){return d&&B({event_type:13,component:13308,view_type:212,aux_data:az(az({},q?{image_signature:q}:{}),{},{entry_point_source:K})}),"story"===f&&B({event_type:13,view_type:226,view_parameter:3228}),c&&(window.opener||"bookmarklet"===c.method)&&(window.innerHeight<an.C||window.innerWidth<an.N)&&window.resizeTo(an.N,an.C),function(){N((0,ef.clearPinBuilderPinDrafts)())}}),(0,au.Z)(function(){if((0,rj.Z)({url:(0,rx.Z)()}).tab===eu.ro){var e=(0,a.Z)();N((0,ef.clearPinBuilderPinDrafts)()),N((0,iQ.Z)({i18n:z,isEmployee:er,pinDraft:void 0,pinDraftId:e,storyPinPublishStopwatch:void 0})),N((0,tx.c8)(e,"scrape"))}});var eb=0===S.length,em=Q.length>0,eg=(0,r.useRef)(em);(0,r.useEffect)(function(){if(eg.current!==em&&(eg.current=em,!em)){var e=(0,al.mB)(U.search),t=e.crossSite,n=e.redirUrl;t?window.history.back():n&&(0,on.Z)({url:n})&&(0,as.Z)(n)?H((0,ac.Z)({url:n})):eb?H("/"):H(-1)}});var ev=(0,o.v9)(function(e){return e.pinbuilder.selectedPinDraftIds.length>0}),e_=tZ.Z.enabled("multi_pin")||tZ.Z.enabled("multi_pin_pinner"),ex=Q.reduce(function(e,t){return null!=e?e:$[t].apiError},null),ej=("undefined"!=typeof window&&(0,rj.Z)({url:(0,rx.Z)()})||{}).tab,eP=(0,aD.Z)();return(0,v.jsxs)(r.Fragment,{children:[ev&&(0,v.jsx)(l.xu,{dangerouslySetInlineStyle:{__style:{left:eP}},"data-testid":"pin-builder-header-wrapper",height:u,position:"fixed",right:!0,top:!0,zIndex:aW,children:(0,v.jsx)(tf,{})}),(0,v.jsxs)(l.xu,{bottom:!0,dangerouslySetInlineStyle:{__style:{top:u,left:eP}},direction:"column",display:"flex",position:"fixed",right:!0,children:[null,(0,v.jsx)(l.xu,{flex:"none",children:ex?(0,v.jsx)(aj.Z,{errorMessage:ex,primaryAction:(0,v.jsx)(l.hU,{accessibilityLabel:z._('Close Error Banner', 'Accessibility label to close the error banner', 'Accessibility label to close the error banner'),icon:"cancel",iconColor:"white",onClick:function(){Q.forEach(function(e){return N((0,tx.lT)(e,null))})},size:"sm"})}):(0,v.jsx)(r7.u3,{placementId:1000161})}),(0,v.jsxs)(l.xu,{color:"secondary","data-test-id":"pin-builder",flex:"grow",height:"100%",onDragEnter:function(){(tZ.Z.enabled("multi_pin")||tZ.Z.enabled("multi_pin_pinner"))&&E(!0)},onDragLeave:function(){return E(!1)},onDragOver:function(e){e.preventDefault(),e.stopPropagation()},onDrop:function(e){if(e.preventDefault(),e.stopPropagation(),E(!1),tZ.Z.enabled("multi_pin")||tZ.Z.enabled("multi_pin_pinner")){var t=(0,ai.Z)(e.dataTransfer);(0,ad.Z)({i18n:z,ideaPinRenamingEnabled:R,files:t,options:{allowVideo:tZ.Z.enabled("video")}}).then(function(e){var t=e.filter(function(e){return"error"!==e.type});if(t.length>0){var n=M.isAuth?M.id:"",r=M.isAuth?M.country:"";N((0,aE.Z)({assets:t,checkExperiment:X,country:r,i18n:z,ideaPinRenamingEnabled:R,isEmployee:er,logContextEvent:B,userId:n}))}})}},position:"relative",children:[(0,v.jsx)(l.xu,{display:"visuallyHidden",children:(0,v.jsx)(l.X6,{accessibilityLevel:1,children:z._('Pin Builder', 'pinBuilder.heading', 'The page heading for Pin Builder')})}),J&&(0,v.jsx)(l.xu,{"data-test-id":"disable-banner",marginStart:7,marginTop:5,paddingX:3,children:(0,v.jsx)(aC.Z,{})}),(0,v.jsx)(l.xu,{ref:w,dangerouslySetInlineStyle:{__style:{border:"4px solid ".concat(I?"#0074e8":"transparent")}},height:"100%",onScroll:function(e){var t=e.currentTarget,n=t.clientHeight,r=t.scrollHeight;T(t.scrollTop/(r-n))},overflow:"auto",children:(0,v.jsx)(iJ,{setPinDraftRef:O,userGridItemRef:h})}),e_&&(0,v.jsx)(l.xu,{bottom:!0,left:!eo,position:"absolute",right:eo,top:!0,children:(0,v.jsx)(at,{isAddPinDraftRemoved:ej===eu.ro,pinDraftRefs:P,scrollPosition:D})})]})]}),_===eu.Lc&&(0,v.jsx)(av,{containsHlsVideoComponent:!!tZ.Z.enabled("layouts"),onComplete:function(){var e;null==(e=w.current)||e.scroll(0,0),x(eu.aD)},onDismiss:function(){x(af.I),k.setZIndex(ax.HW),N(Z(1000135,501657))},steps:[{id:"pinbuilder-welcome",element:(0,v.jsx)(ei,{})},{id:"pinbuilder-editing",element:(0,v.jsx)(L,{})}].concat(function(e){if(Array.isArray(e))return aL(e)}(t=tZ.Z.enabled("layouts")?[{id:"pinbuilder-layout",element:(0,v.jsx)(aA,{})}]:[])||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||aB(t)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),[{id:"pinbuilder-publish",element:(0,v.jsx)(G,{})}])}),_===eu.aD&&(0,v.jsx)(a_.Z,{onComplete:function(){x(af.I),k.setZIndex(ax.HW),N(F(1000135,501657))},onDismiss:function(){x(af.I),k.setZIndex(ax.HW),N(Z(1000135,501657))},steps:(0,aI.Z)([{selector:'[data-test-id="pin-builder-draft"]:first-of-type [data-tutorial-id="pin-builder-title-and-description"]',id:"guide-pin-builder-title",heading:z._('Title & description', 'Heading text describing the title and description step when creating Pins', 'Heading text describing the title and description step when creating Pins'),description:z._('Add a title and description to help tell your story. People see this in their home feed, on search and when they tap on your Pin.', 'Text describing the reason to add title and description to Pins when creating them', 'Text describing the reason to add title and description to Pins when creating them'),padding:0},{selector:'[data-test-id="pin-builder-draft"]:first-of-type [data-tutorial-id="pin-builder-destination-link"]',id:"guide-pin-builder-link",heading:z._('Destination link', 'Heading text describing the destination link step when creating Pins', 'Heading text describing the destination link step when creating Pins'),description:z._('Pick where people land when they tap on your Pin. Make sure it\u2019s relevant!', 'Text describing the reason to add a destination link to Pins when creating them', 'Text describing the reason to add a destination link to Pins when creating them'),padding:0},{selector:'[data-test-id="pin-builder-draft"]:first-of-type [data-tutorial-id="pin-builder-media-draft-view"]',id:"guide-pin-builder-media-draft-view",heading:z._('Edits', 'Heading text describing the ability to edit Pins while creating them', 'Heading text describing the ability to edit Pins while creating them'),description:z._('Upload an image or video, then personalize it by cropping, trimming or adding logos and text', 'Text describing the ability to edit images and videos when creating Pins', 'Text describing the ability to edit images and videos when creating Pins'),padding:0},{selector:'[data-test-id="pin-builder-draft"]:first-of-type [data-tutorial-id="pin-builder-batch-create"]',id:"guide-pin-builder-batch-create",heading:z._('Batch create', 'Heading text describing the ability to create multipe Pins at once', 'Heading text describing the ability to create multipe Pins at once'),description:z._('Lots to say? Add more images and videos to create multiple Pins at once.', 'Text describing the ability to create multiple Pins at once', 'Text describing the ability to create multiple Pins at once'),padding:0}])})]})}function aX(e){var t=(0,o.I0)(),n=(0,ax.MS)(),r=(0,i.TH)().search,a=(0,al.mB)(r).tab,l=(0,ao.Ig)(),s=(0,o.v9)(function(e){var t=e.experiences,n=e.pinbuilder,r=n.pinDraftIds,o=n.pinDrafts,i=r[0],l=i?o[i]:null,s=t&&t[1000135];return(null==l?void 0:l.type)!=="story"&&a!==eu.ro&&(null==s?void 0:s.experience_id)===501657});return(0,v.jsx)(aV,{footerContext:n,showInProductEducationExperience:s,viewEducation:function(){return t(l(1000135,501657))},children:function(t){return(0,v.jsx)(aG,az(az({},e),{},{providerClassChildrenContext:t}))}})}aH(aV,"contextType",ap.Z);var aY=n(623161),aq=n(402242),aK=n(89819),aJ=n(140725),a$=n(355940),aQ=n(506662),a0=n(536652),a1=n(444185),a2=n(821806),a8=n(724084),a3=n(984126),a5=n(230543),a6=n(758260);function a4(e){return(a4="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a9(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function a7(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a9(Object(n),!0).forEach(function(t){var r,o;r=t,o=n[t],(r=function(e){var t=function(e,t){if("object"!=a4(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=a4(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==a4(t)?t:t+""}(r))in e?Object.defineProperty(e,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[r]=o}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a9(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var le=(0,r.lazy)(function(){return Promise.all([n.e("25418"),n.e("63722"),n.e("92184"),n.e("45591"),n.e("9610"),n.e("32120"),n.e("98176"),n.e("22696")]).then(n.bind(n,821199))});function lt(){var e,t=(0,i.s0)(),n=(0,i.TH)(),a=(0,eB.Z)(),l=(0,o.v9)(ep.vd),s=(0,o.I0)(),c=(0,eL.Z)().checkExperiment,u=(0,aq.Z)(),d=(0,a5.t)(),f=(0,tm.B)(),p=(0,aQ.mY)(n)?"story":null;(0,aJ.Q)({view_type:212});var h=(0,eF.Z)(),y=(0,aY.Z)({isAdsManager:!1}),b=(0,o.v9)(function(e){return e.feeds}),m=(0,eZ.nl)(a,h)&&"ad_creation"!==tZ.Z.scenario()&&c("web_stl_tooling").anyEnabled,g=(0,al.mB)(n.search),_=null;try{_=(0,aK.Z)(g)?a7(a7({},g),{},{media:decodeURIComponent(g.media),url:decodeURIComponent(g.url)}):null}catch(e){}var x=a.isAuth?a.id:null,j=(0,eZ.lJ)(a,h),P=j||x,O=function(){var e=P?b["storyPinData:".concat(P)]:[];return(null!=e?e:[]).map(function(e){return e.id})},w=(0,a1.Z)({name:"UserResource",options:{field_set_key:"grid_item",user_id:h.id&&h.id||(null==(e=f.advertiser)?void 0:e.owner_user_id)||P||""}}).ref,S=(0,a1.Z)({name:"UserResource",options:{field_set_key:"profile",username:a.isAuth?a.username:""}}).ref;return"story"===p?(0,v.jsx)(a$.Z,{name:"SafeSuspense_PinBuilderPage_StoryboardComponent",children:(0,v.jsx)(a2.Z,{children:(0,v.jsx)(le,{advertiser:f.advertiser,onLegacyLayoutDismiss:function(e){var t=e.draftStage,n=e.pinDraftId,r=O();"upload"===t&&r.length>1||0===r.length?s((0,n8.Z)(n)):setTimeout(function(){s((0,a0.U)("StoryPinDraftsResource",{options:{redux_normalize_feed:!0,userId:P,orbacSubjectId:j}})),window.location.reload()},2e3)},onSuccess:function(e){var n=e.pinId,r=e.scheduledDate,o=e.scheduledTime;l.length>0&&s((0,a6.Z)(l[0])),r&&o?(u({pinId:n,showActionForScheduledPin:!y}),y&&t(a.isAuth?"/".concat(a.username,"/scheduled-pins/"):"/")):t("/pin/".concat(n))},orbacSubjectId:j,requestContext:f,userId:P})})}):(0,v.jsx)(a$.Z,{name:"PinBuilderPage_ResourceError",children:(0,v.jsx)(r.Suspense,{fallback:(0,v.jsx)(a3.Z,{}),children:(0,v.jsx)(a8.Wr,{children:(0,v.jsx)(aX,{advertiser:f.advertiser,externalButtonQuery:_,headerHeight:d,inStlToolingExp:m,pinDraftType:p,requestContext:f,userGridItemRef:w,userProfileRef:S})})})})}},382208:function(e,t,n){"use strict";n.d(t,{Pw:function(){return a},e_:function(){return o},lE:function(){return i}});var r=(0,n(729434).Z)("pinBuilderContext",{shouldRenderPinEditorStandalone:!1,openHelpTextInNewWindow:!1,allowMultiplePins:!0,allowCarouselPin:!0}),o=r.Provider,i=r.Consumer,a=r.get},755583:function(e,t,n){"use strict";n.d(t,{Z:function(){return p}});var r=n(586659),o=n(20256),i=n(980787),a=n(19585),l=n(571045),s=n(15667),c=n(767209),u=n(70012),d=n(382718);function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function p(e){var t,n=e.addAssets,p=e.errorMessage,h=(0,i.u)().logContextEvent,y=(0,s.B)(),b=(0,a.ZP)(),m=function(e){if(Array.isArray(e))return e}(t=(0,r.useState)(!1))||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,l=[],s=!0,c=!1;try{for(i=(n=n.call(e)).next;!(s=(r=i.call(n)).done)&&(l.push(r.value),2!==l.length);s=!0);}catch(e){c=!0,o=e}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return l}}(t,2)||function(e,t){if(e){if("string"==typeof e)return f(e,2);var n=({}).toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?f(e,2):void 0}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),g=m[0],v=m[1],_=(0,r.useRef)(!1);(0,r.useEffect)(function(){return _.current=!0,function(){_.current=!1}});var x=(0,d.jsx)(o.xu,{padding:5,children:(0,d.jsx)(o.xv,{color:"subtle",size:"100",children:b._('Supports PNG, JPG, GIF up to 10MB', 'emptyPane.fileTypeText', 'Text description of what image type and limits that can be uploaded')})});return(0,d.jsx)(c.Z,{accept:(0,u.Z)(y.userAgent.browserName).join(","),allowMultipleFiles:!0,color:"white",hasError:!!p,id:"asset-picker-upload",onChange:function(e){v(!0);var t=e.target.files?Array.from(e.target.files):[];v(!0),h({event_type:101,component:13392,element:11265}),n(t).then(function(){_.current&&v(!1)})},onDrop:function(e){v(!0);var t=(0,l.Z)(e.dataTransfer);v(!0),h({event_type:3502,component:13392,element:11265}),n(t).then(function(){_.current&&v(!1)})},children:function(){return(0,d.jsxs)(o.xu,{alignContent:"center",dangerouslySetInlineStyle:{__style:{border:"dashed 2px #dadada",borderRadius:6}},"data-test-id":"asset-picker-empty-pane",direction:"column",display:"flex",height:"100%",justifyContent:"center",position:"relative",children:[g?(0,d.jsx)(o.xH,{accessibilityLabel:b._('Loading...', 'Loading assets', 'Loading assets'),show:!0}):(0,d.jsx)(o.xu,{padding:2,children:(0,d.jsxs)(o.kC,{alignItems:"center",direction:"column",gap:{row:0,column:4},justifyContent:"center",children:[(0,d.jsx)(o.JO,{accessibilityLabel:b._('Add an image', 'uploadCoverSourceModal.emptyPane.addIconAccessibilityLabel', 'Add an image as part of the pin'),color:"default",icon:"camera-roll",size:22}),(0,d.jsx)(o.xv,{children:b._('Drag and drop an image, or browse from your computer', 'emptyPane.dragAndDropText', 'A drag and drop prompt for adding assets')}),(0,d.jsx)(o.zx,{color:"gray",text:b._('Browse', 'emptyPane.button', 'Button text on asset picker to upload image from a computer')})]})}),(0,d.jsx)(o.xu,{alignItems:"center",bottom:!0,display:"flex",justifyContent:"center",left:!0,position:"absolute",right:!0,children:p?(0,d.jsx)(o.xu,{maxWidth:468,padding:5,children:(0,d.jsx)(o.xv,{align:"center",color:"error",size:"200",children:p})}):x})]})}})}},676934:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(20256),o=n(19585),i=n(382718);function a(e){var t=e.errorMessage,n=e.primaryAction,a=e.secondaryAction,l=(0,o.ZP)();return(0,i.jsxs)(r.xu,{alignItems:"center",color:"errorBase","data-test-id":"error-banner",display:"flex",height:64,paddingX:3,position:"relative",children:[(0,i.jsx)(r.xu,{paddingX:2,children:(0,i.jsx)(r.JO,{accessibilityLabel:l._('Error Alert', 'Alert icon for error banner', 'Alert icon for error banner'),color:"inverse",icon:"alert",size:24})}),(0,i.jsx)(r.xu,{alignItems:"center",display:"flex",flex:"grow",justifyContent:"start",paddingX:1,children:(0,i.jsx)(r.xv,{align:"center",color:"inverse",weight:"bold",children:t})}),(!!n||!!a)&&(0,i.jsxs)(r.kC,{alignItems:"end",justifyContent:"start",children:[!!a&&(0,i.jsx)(r.xu,{height:"100%",padding:1,children:a}),!!n&&(0,i.jsx)(r.xu,{height:"100%",padding:1,children:n})]})]})}},790424:function(e,t,n){"use strict";n.d(t,{Z:function(){return w}});var r=n(586659),o=n(478759),i=n.n(o),a=n(20256),l=n(18468),s=n(821342),c=n(406262),u=n(15667),d=n(448505),f=n(7872),p=n(382718);function h(e){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach(function(t){x(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function m(e,t){return(m=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function g(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(v=function(){return!!e})()}function _(e){return(_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function x(e,t,n){return(t=j(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function j(e){var t=function(e,t){if("object"!=h(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=h(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==h(t)?t:t+""}var P={__style:{pointerEvents:"none"}},O=function(e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");o.prototype=Object.create(e&&e.prototype,{constructor:{value:o,writable:!0,configurable:!0}}),Object.defineProperty(o,"prototype",{writable:!1}),e&&m(o,e);var t,n,r=(t=v(),function(){var e,n=_(o);return e=t?Reflect.construct(n,arguments,_(this).constructor):n.apply(this,arguments),function(e,t){if(t&&("object"==h(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return g(e)}(this,e)});function o(){var e;if(!(this instanceof o))throw TypeError("Cannot call a class as a function");for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];return x(g(e=r.call.apply(r,[this].concat(n))),"state",{focused:!1}),x(g(e),"setTextAreaRef",function(t){e.textArea=t}),x(g(e),"setTextAreaHeight",function(){e.textArea&&(e.textArea.style.height="auto",e.textArea.style.height="".concat(e.textArea.scrollHeight,"px"))}),x(g(e),"handleChange",function(t){(0,e.props.onChange)({event:t,value:t.target.value})}),x(g(e),"handleInput",function(){e.setTextAreaHeight()}),x(g(e),"handleBlur",function(t){e.setState({focused:!1},e.setTextAreaHeight);var n=e.props.onBlur;n&&n({event:t,value:t.currentTarget.value})}),x(g(e),"handleFocus",function(t){e.setState({focused:!0},e.setTextAreaHeight);var n=e.props.onFocus;n&&n({event:t,value:t.currentTarget.value})}),x(g(e),"getColor",function(){var t=e.props,n=t.errorMessage,r=t.warningMessage,o=t.showOnBlur,i=t.showWarningOnBlur,a=t.value,s=e.state.focused;return n?l.$rz:s||i&&r?"#0074e8":a&&!o?"transparent":"rgba(142, 142, 142, 0.5)"}),e}return n=[{key:"componentDidMount",value:function(){this.setTextAreaHeight(),this.props.shouldFocusOnRender&&this.textArea&&this.textArea.focus()}},{key:"componentDidUpdate",value:function(){this.setTextAreaHeight()}},{key:"render",value:function(){var e=this.props,t=e.bold,n=e.muted,r=e.italic,o=e.disabled,l=e.errorMessage,s=e.warningMessage,u=e.height,d=e.helperMessage,h=e.hideScrollbars,y=e.id,b=e.maxLength,m=e.placeholder,g=e.requestContext,v=e.size,_=e.spellCheck,x=e.showOnBlur,j=e.showWarningOnBlur,O=e.value,w=void 0===O?"":O,S=e.viewer,A=e.wrap,I=e.orbacActingAs,E=this.state.focused,C=E||!!l||j&&!!s,D={__style:{boxShadow:"0 ".concat(C?"2px":"1px"," 0 0 ").concat(this.getColor()),paddingTop:8}},T=(0,f.nl)(S,I)&&"ad_creation"!==c.Z.scenario()&&g.experimentsClient.checkExperiment("web_stl_tooling").anyEnabled;return(0,p.jsxs)(a.xu,{column:12,direction:"column",display:"flex",children:[(0,p.jsxs)(a.xu,{column:12,position:"relative",children:[(0,p.jsx)("textarea",{ref:this.setTextAreaRef,className:i()("TextArea__".concat(T?"experimentalTextArea":"textArea"),{TextArea__bold:t,TextArea__dark:null==b&&!o,TextArea__hide_scrollbars:h,TextArea__disabled:o,TextArea__enabled:!o,TextArea__small:"sm"===v,TextArea__large:"lg"===v,TextArea__medium:"md"===v,TextArea__wrap:A,TextArea__nowrap:!A,TextArea__sm:!A,TextArea__smHeight:"sm"===u,TextArea__mdHeight:"md"===u,TextArea__muted:!T&&n,TextArea__italic:!T&&w&&r}),"data-gestalt-valid-html":"TextArea",disabled:o,id:y,onBlur:this.handleBlur,onChange:this.handleChange,onFocus:this.handleFocus,onInput:this.handleInput,placeholder:m,rows:1,spellCheck:_,value:null==b||E?w:w.substring(0,b)}),null!=b&&!o&&(0,p.jsx)(a.xu,{bottom:!0,dangerouslySetInlineStyle:P,left:!0,position:"absolute",right:!0,top:!0,children:(0,p.jsx)("div",{className:i()("TextArea__".concat(T?"ghostTextArea":"textArea"),"TextArea__dark",{TextArea__bold:t,TextArea__muted:!T&&n,TextArea__italic:!T&&r,TextArea__large:"lg"===v,TextArea__medium:"md"===v,TextArea__small:"sm"===v,TextArea__wrap:A,TextArea__nowrap:!A}),children:w.substring(0,b)})})]}),(0,p.jsxs)("div",{className:E||x||l||j&&s||!w?"":"TextArea__hidden",children:[!T&&(0,p.jsx)(a.xu,{column:12,dangerouslySetInlineStyle:D}),(0,p.jsx)(a.xu,{column:12,marginTop:+!T,minHeight:15,children:(E||x||!!l||j&&!!s)&&(0,p.jsxs)(a.xu,{column:12,display:"flex",justifyContent:"between",children:[!!l&&(0,p.jsx)(a.xu,{"data-test-id":"text-area-error",flex:"grow",children:(0,p.jsx)(a.xv,{color:"error",size:"100",children:l})}),(j||E)&&!l&&!!s&&(0,p.jsx)(a.xu,{"data-test-id":"text-area-warning",flex:"grow",children:(0,p.jsx)(a.xv,{color:"subtle",size:"100",children:s})}),(x||E)&&!l&&!s&&(0,p.jsx)(a.xu,{"data-test-id":"text-area-helper",flex:"grow",children:(0,p.jsx)(a.xv,{color:"subtle",size:"100",children:d})}),E&&null!=b&&(0,p.jsx)(a.xu,{flex:"none",children:(0,p.jsx)(a.xv,{color:l?"error":"subtle",size:"100",children:b-w.length})})]})})]})]})}}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,j(r.key),r)}}(o.prototype,n),Object.defineProperty(o,"prototype",{writable:!1}),o}(r.Component);function w(e){return(0,p.jsx)(O,b(b({},e),{},{orbacActingAs:(0,d.Z)(),requestContext:(0,u.B)(),viewer:(0,s.Z)()}))}x(O,"defaultProps",{italic:!1,muted:!1,bold:!1,disabled:!1,size:"md",wrap:!0,hideScrollbars:!1,shouldFocusOnRender:!1,orbacActingAs:{}})},624844:function(e,t,n){"use strict";n.d(t,{Z:function(){return v}});var r=n(586659),o=n(20256),i=n(19585),a=n(765533),l=n(15667),s=n(382718);function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach(function(t){b(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function f(e,t){return(f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function p(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(h=function(){return!!e})()}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function b(e,t,n){return(t=m(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function m(e){var t=function(e,t){if("object"!=c(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=c(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==c(t)?t:t+""}var g=function(e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");i.prototype=Object.create(e&&e.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),Object.defineProperty(i,"prototype",{writable:!1}),e&&f(i,e);var t,n,r=(t=h(),function(){var e,n=y(i);return e=t?Reflect.construct(n,arguments,y(this).constructor):n.apply(this,arguments),function(e,t){if(t&&("object"==c(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return p(e)}(this,e)});function i(e){if(!(this instanceof i))throw TypeError("Cannot call a class as a function");b(p(n=r.call(this,e)),"state",{currentValue:n.props.value,hovered:!1}),b(p(n),"addStep",function(){var e=n.props,t=e.maxValue,r=e.onChange,o=e.value,i=e.step,a=n._roundToStepDecimalDigits(Math.min(t,o+(void 0===i?0:i)));r(a),n.setState({currentValue:a})}),b(p(n),"minusStep",function(){var e=n.props,t=e.minValue,r=e.onChange,o=e.value,i=e.step,a=n._roundToStepDecimalDigits(Math.max(t,o-(void 0===i?0:i)));r(a),n.setState({currentValue:a})}),b(p(n),"onChange",function(e){var t=n.props.onChange,r=Number(e.target.value);n.setState({currentValue:r}),t(r)}),b(p(n),"onKeyUp",function(e){var t=n.props.onChange,r=n.state.currentValue;e&&[a.Z.ENTER,a.Z.UP,a.Z.DOWN].includes(e.keyCode)&&t(Number(r))}),b(p(n),"handleMouseEnter",function(){n.setState({hovered:!0})}),b(p(n),"handleMouseLeave",function(){n.setState({hovered:!1})}),b(p(n),"onBlur",function(){var e=n.props,t=e.minValue,r=e.maxValue,o=e.onChange,i=e.value,a=parseFloat(n.state.currentValue),l=isNaN(a)?i:a,s=n._roundToStepDecimalDigits(Math.min(Math.max(l,t),r));o(s),n.setState({currentValue:s})});var t,n,o=(null!=(t=e.step)?t:0).toString().split(".");return n._shiftBy=o[1]?Math.pow(10,o[1].length):1,n}return n=[{key:"componentDidUpdate",value:function(e){e.textBlockId!==this.props.textBlockId&&this.setState({currentValue:this.props.value})}},{key:"_roundToStepDecimalDigits",value:function(e){return Math.round(e*this._shiftBy)/this._shiftBy}},{key:"render",value:function(){var e=this,t=this.props,n=t.disableOnBlur,r=t.iconName,i=t.id,l=t.requestContext,c=t.useLegoStyle,u=this.state,d=u.currentValue,f=u.hovered,p=l.isRTL,h=[{iconName:"arrow-up",accessibilityLabel:this.props.i18n._('Increase by the step specified, for example 1 or 0.1', ' - ', ' -- '),onClick:this.addStep,onKeyUp:function(t){t&&"keyup"===t.type&&t.charCode!==a.Z.SPACE&&t.charCode!==a.Z.ENTER&&" "!==t.key&&"Enter"!==t.key||e.addStep()}},{iconName:"arrow-down",accessibilityLabel:this.props.i18n._('Decrease by the step specified, for example 1 or 0.1', ' - ', ' -- '),onClick:this.minusStep,onKeyUp:function(t){t&&"keyup"===t.type&&t.charCode!==a.Z.SPACE&&t.charCode!==a.Z.ENTER&&" "!==t.key&&"Enter"!==t.key||e.minusStep()}}],y={input:{border:"solid 2px #efefef",borderRadius:c?16:8,boxSizing:"border-box",fontSize:"16px",outline:"none",padding:"10px 16px",width:"100%",WebkitAppearance:"textfield",MozAppearance:"textfield"},buttonContainer:{__style:{borderRadius:p?c?"14px 0px 0px 14px":"6px 0px 0px 6px":c?"0px 14px 14px 0px":"0px 6px 6px 0px",left:p?"2px":"auto",right:p?"auto":"2px"}},button:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",height:"50%",cursor:"pointer",userSelect:"none",outline:"none"}};return(0,s.jsx)(o.kC,{alignItems:"stretch",direction:"column",height:40,justifyContent:"start",width:"100%",children:(0,s.jsxs)(o.xu,{alignItems:"center",column:12,display:"flex",height:"100%",justifyContent:"center",onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,position:"relative",rounding:2,children:[(0,s.jsx)("input",{autoComplete:"off","data-gestalt-valid-html":"TextArea","data-test-id":i,id:i,onBlur:n?void 0:this.onBlur,onChange:this.onChange,onKeyUp:this.onKeyUp,size:20,style:y.input,type:"number",value:d}),f?(0,s.jsx)(o.xu,{alignItems:"center",color:"secondary",dangerouslySetInlineStyle:y.buttonContainer,direction:"column",display:"flex",height:"100%",justifyContent:"center",overflow:"hidden",position:"absolute",width:28,children:h.map(function(e){return(0,s.jsx)("div",{"data-test-id":e.iconName,onClick:e.onClick,onKeyUp:e.onKeyUp,role:"button",style:y.button,tabIndex:0,children:(0,s.jsx)(o.JO,{accessibilityLabel:e.accessibilityLabel,color:"default",icon:e.iconName,size:8})},e.iconName)})}):(0,s.jsx)(o.xu,{left:p,marginEnd:3,position:"absolute",right:!p,children:(0,s.jsx)(o.JO,{accessibilityLabel:r,icon:r,size:16})})]})})}}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,m(r.key),r)}}(i.prototype,n),Object.defineProperty(i,"prototype",{writable:!1}),i}(r.Component);function v(e){var t=(0,i.ZP)();return(0,s.jsx)(g,d(d({},e),{},{i18n:t,requestContext:(0,l.B)()}))}b(g,"defaultProps",{step:1})},587468:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(20256),o=n(382718);function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function a(e){return e.reduce(function(e,t){return[].concat(function(e){if(Array.isArray(e))return i(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return i(e,void 0);var n=({}).toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,void 0):void 0}}(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),[{selector:t.selector,content:(0,o.jsxs)(r.xu,{"data-test-id":"".concat(t.id||""),paddingY:2,children:[t.heading&&(0,o.jsx)(r.xu,{children:(0,o.jsx)(r.X6,{color:"light",size:"400",children:t.heading})}),(0,o.jsx)(r.xu,{paddingY:2,children:(0,o.jsx)(r.xv,{color:"light",children:t.description})})]}),id:t.id,padding:t.padding,onNext:t.onNext}])},[])}},769970:function(e,t,n){"use strict";n.d(t,{Z:function(){return v}});var r=n(586659),o=n(581722),i=n(20256),a=n(865540),l=n(821342),s=n(19585),c=n(526435),u=n(406262),d=n(274320),f=n(448505),p=n(7872),h=n(790424),y=n(830176),b=n(669019),m=n(382718);function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function v(e){var t,n=e.pinDraftId,v=(0,s.ZP)(),_=(0,a.Z)(),x=(0,l.Z)(),j=(0,d.r)().checkExperiment,P=(0,f.Z)(),O=(0,p.nl)(x,P)&&"ad_creation"!==u.Z.scenario()&&j("web_stl_tooling",{dangerouslySkipActivation:!0}).anyEnabled,w=function(e){if(Array.isArray(e))return e}(t=(0,r.useState)(!1))||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,l=[],s=!0,c=!1;try{for(i=(n=n.call(e)).next;!(s=(r=i.call(n)).done)&&(l.push(r.value),2!==l.length);s=!0);}catch(e){c=!0,o=e}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return l}}(t,2)||function(e,t){if(e){if("string"==typeof e)return g(e,2);var n=({}).toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?g(e,2):void 0}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),S=w[0],A=w[1],I=(0,o.I0)(),E=(0,o.v9)(function(e){var t;return null==(t=e.pinbuilder.pinDrafts[n])?void 0:t.altText}),C=(0,o.v9)(function(e){var t;return null==(t=e.pinbuilder.pinDrafts[n])?void 0:t.altTextError})||"";return(0,m.jsxs)(i.xu,{children:[!S&&!E&&(0,m.jsx)(i.xu,{"data-test-id":"pin-draft-alt-text-button",flex:"grow",children:(0,m.jsx)(i.zx,{onClick:function(){return A(!0)},size:"lg",text:v._('Add alt text', 'pinbuilder.alt_text.button', 'Button to toggle alt text input')})}),(S||E)&&(0,m.jsxs)(i.xu,{children:[(0,m.jsx)(i.xu,{marginBottom:1,marginStart:1,children:O&&(0,m.jsx)(i.xv,{color:"default",size:"100",children:v._('Alt text', 'pinbuilder.altText.title', 'Label for alt text')})}),(0,m.jsx)(h.Z,{errorMessage:C,height:O?"md":void 0,helperMessage:v._('This text will be read aloud by screen readers', 'web.altText.helperMessage', 'Help text for alt text'),id:"pin-draft-alttext-".concat(n),italic:!0,maxLength:c.lx,muted:!0,onBlur:function(){},onChange:function(e){var t=e.value;I((0,b.DL)(n,t)),t&&t.length>c.lx&&I((0,b.KN)(n,(0,y.ZP)({errorId:"ALT_TEXT_OVER_MAX_CHARACTER_LIMIT",i18n:v,ideaPinRenamingEnabled:_}).message)),C&&(!t||t.length<=c.lx)&&I((0,b.KN)(n,""))},placeholder:v._('Explain what people can see in the Pin', 'web.altText.placeholder', 'Placehoolder text for alt text'),shouldFocusOnRender:!0,size:"sm",value:E||"",viewer:x})]})]})}},791587:function(e,t,n){"use strict";n.d(t,{Py:function(){return a},VX:function(){return r},i9:function(){return i},op:function(){return l},tN:function(){return o}});var r=8,o=24,i=4,a=148,l=16},705754:function(e,t,n){"use strict";function r(e){var t=e.x,n=e.y;return t>0&&t<=100&&n>0&&n<=100}n.d(t,{Z:function(){return r}})},107653:function(e,t,n){"use strict";n.d(t,{Z:function(){return S}});var r=n(581722),o=n(20256),i=n(980787),a=n(821342),l=n(19585),s=n(586659),c=n(526435),u=n(382718);function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach(function(t){g(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function h(e,t){return(h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function y(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function b(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(b=function(){return!!e})()}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function g(e,t,n){return(t=v(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function v(e){var t=function(e,t){if("object"!=d(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=d(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==d(t)?t:t+""}var _={__style:{zIndex:c.v9}},x=function(e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");i.prototype=Object.create(e&&e.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),Object.defineProperty(i,"prototype",{writable:!1}),e&&h(i,e);var t,n,r=(t=b(),function(){var e,n=m(i);return e=t?Reflect.construct(n,arguments,m(this).constructor):n.apply(this,arguments),function(e,t){if(t&&("object"==d(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return y(e)}(this,e)});function i(){var e;if(!(this instanceof i))throw TypeError("Cannot call a class as a function");for(var t=arguments.length,n=Array(t),o=0;o<t;o++)n[o]=arguments[o];return g(y(e=r.call.apply(r,[this].concat(n))),"state",{showFlyout:!1}),g(y(e),"buttonRef",(0,s.createRef)()),g(y(e),"handleShowFlyout",function(){e.setState({showFlyout:!0}),e.props.logContextEvent({event_type:101,component:13308,element:12123})}),g(y(e),"handleHideFlyout",function(){e.setState({showFlyout:!1})}),e}return n=[{key:"render",value:function(){var e=this,t=this.props,n=t.accessibilityLabel,r=t.icon,i=t.items,a=t.size,l=this.state.showFlyout;return(0,u.jsxs)(o.xu,{dangerouslySetInlineStyle:l?_:void 0,position:"relative",children:[(0,u.jsx)(o.xu,{ref:this.buttonRef,children:(0,u.jsx)(o.hU,{accessibilityLabel:n,icon:r,iconColor:"darkGray",onClick:this.handleShowFlyout,size:null!=a?a:"md"})}),l&&(0,u.jsx)(o.Lt,{anchor:this.buttonRef.current,disableMobileUI:!0,id:"icon-button-menu",idealDirection:"down",onDismiss:this.handleHideFlyout,children:i.map(function(t){var n=t.onClick,r=t.legend,i=t.dataTestId;return(0,u.jsx)(o.Lt.Item,{onSelect:function(){e.handleHideFlyout(),n()},option:{label:r,value:r},children:(0,u.jsx)(o.xu,{"data-test-id":i,children:(0,u.jsx)(o.xv,{weight:"bold",children:r})})},"".concat(r.toLocaleLowerCase()))})})]})}}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,v(r.key),r)}}(i.prototype,n),Object.defineProperty(i,"prototype",{writable:!1}),i}(s.Component);function j(e){var t=(0,i.u)().logContextEvent;return(0,u.jsx)(x,p(p({},e),{},{logContextEvent:t}))}var P=n(994158),O=n(316095),w=function(e,t){t({event_type:101,component:13308,element:12124,aux_data:{value:e}})};function S(e){var t=e.pinDraftId,n=(0,l.ZP)(),s=(0,i.u)().logContextEvent,c=(0,a.Z)(),d=c.isAuth&&c.isEmployee,f=(0,r.I0)();return(0,u.jsx)(o.xu,{"data-test-id":"pindraft-option-menu",paddingX:3,children:(0,u.jsx)(j,{accessibilityLabel:n._('Options', 'Button to open options menu for this Pin', 'Button to open options menu for this Pin'),icon:"ellipsis",items:[{legend:n._('Delete', 'Button to delete Pin draft', 'Button to delete Pin draft'),dataTestId:"delete-pin-draft",onClick:function(){f((0,P.Z)({i18n:n,isEmployee:d,pinDraftId:t})),w("delete",s)}},{legend:n._('Duplicate', 'Button to duplicate Pin draft to another', 'Button to duplicate Pin draft to another'),dataTestId:"duplicate-pin-draft",onClick:function(){f((0,O.duplicatePinDraft)(t,n,d)),w("duplicate",s)}}]})})}},888382:function(e,t,n){"use strict";n.d(t,{jy:function(){return f},Bc:function(){return c},v2:function(){return p},ir:function(){return d},dV:function(){return y},VX:function(){return u},LG:function(){return h}}),n(492996);var r,o,i=n(28427),a=n(324307),l=function(e){var t=e.url;if(!t||0===t.length)return!1;var n=RegExp("itunes\\.apple\\.com\\/(?:.*\\/)?app\\/(?:.*\\/)?id([0-9]+)"),r=RegExp("play.google.com/store/apps/details");return n.test(t)||r.test(t)},s=n(194737);function c(e){if(e){if(e.carousel_data&&e.carousel_data.carousel_slots&&e.carousel_data.carousel_slots.length>1||null!=(t=e.videos)&&t.video_list||(null!=(n=e.shopping_flags)?n:[]).includes(2)||e.aggregated_pin_data&&e.aggregated_pin_data.is_shop_the_look||e.story_pin_data_id&&e.story_pin_data_id.length>0)return!1;var t,n,r=e.link?e.link.trim():"";if(!(r.length>0&&(0,s.Z)({url:r}))||r.length>0&&l({url:r}))return!1;if("pin"===e.type)return!0}return!1}function u(e){return!!(e&&c(e))&&(!!e.rich_metadata&&!!e.rich_metadata.products&&e.rich_metadata.products.length>0&&!!e.rich_metadata.products[0].offer_summary&&!!e.rich_metadata.products[0].offer_summary.price||!!e.rich_summary&&!!e.rich_summary.products&&e.rich_summary.products.length>0&&!!e.rich_summary.products[0].offer_summary&&!!e.rich_summary.products[0].offer_summary.price)||!1}function d(e,t){if(e){var n=t.toLowerCase();if(!t||t&&t.length<=3||e.title&&e.title.toLowerCase().includes(n)||e.grid_title&&e.grid_title.toLowerCase().includes(n)||e.closeup_description&&e.closeup_description.toLowerCase().includes(n)||e.description&&e.description.toLowerCase().includes(n))return!0}return!1}var f=function(e){var t=(0,i.Z)((void 0!==r||(r=n(510233)).hash&&"594842fa993e078b47ba30a204789923"!==r.hash&&console.error("The definition of 'PinsPaneHelperGetPinTitle_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),r),e),o=t.title,l=t.gridTitle,s=t.richSummary,c=t.richMetadata,u=o||l||s&&"mobile application"!==s.typeName&&s.displayName||(null==c?void 0:c.title);return u?(0,a.ZP)(u.trim(),30):""},p=function(e){return(0,e.children)(f(e.input))},h=function(e){var t,r,a,l,s,c,u=(0,i.Z)((void 0!==o||(o=n(282812)).hash&&"7c716add671f3d56448cd9d81ab6cc81"!==o.hash&&console.error("The definition of 'PinsPaneHelperGetProductPrice_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),o),e);return(null==(t=((null==(r=u.richSummary)||null==(a=r.products)?void 0:a[0])||{}).offerSummary)?void 0:t.price)||(null==(l=((null==(s=u.richMetadata)||null==(c=s.products)?void 0:c[0])||{}).offerSummary)?void 0:l.price)},y=function(e){return(0,e.children)(h(e.input))}},390556:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var r=n(383673),o=n(295182);function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach(function(t){var r,o;r=t,o=n[t],(r=function(e){var t=function(e,t){if("object"!=i(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=i(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==i(t)?t:t+""}(r))in e?Object.defineProperty(e,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[r]=o}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function s(e,t,n,i){return(0,r.Z)().then(function(r){var a=((t[e[0]]||{}).media||{}).width,s=e.every(function(e){var n=(t[e]||{}).media;return!n||(n||{}).width===a})?a:o.IU;return Promise.all(e.map(function(e,o){var a=new r(document.createElement("div"),n),c=t[e]||{},u=c.canvasJson,d=c.media;if(!d)return t[e];var f=function(){a.setAspectRatio(i);var n=0===o&&d.fileSrc&&"image/png"===d.fileSrc.type?"png":"jpeg",r=d.width===(null==i?void 0:i.w)&&d.height===(null==i?void 0:i.h)&&d.width===s?d:l(l({},d),a.getCanvasOutput({width:s,format:n}));return l(l({},t[e]),{},{canvasJson:a.toJSON(),media:r},r!==d?{originalMedia:d}:{})};return u?a.loadFromJSON(u).then(f):a.setImage(d.src).then(f)}))})}},604756:function(e,t,n){"use strict";n.d(t,{Z:function(){return _}});var r=n(586659),o=n(20256),i=n(355940),a=n(19585),l=n(821806),s=n(382718);function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach(function(t){b(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function f(e,t){return(f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function p(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(h=function(){return!!e})()}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function b(e,t,n){return(t=m(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function m(e){var t=function(e,t){if("object"!=c(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=c(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==c(t)?t:t+""}var g=(0,r.lazy)(function(){return Promise.all([n.e("70253"),n.e("78979"),n.e("16932")]).then(n.bind(n,658519))}),v=function(e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");a.prototype=Object.create(e&&e.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),Object.defineProperty(a,"prototype",{writable:!1}),e&&f(a,e);var t,n,r=(t=h(),function(){var e,n=y(a);return e=t?Reflect.construct(n,arguments,y(this).constructor):n.apply(this,arguments),function(e,t){if(t&&("object"==c(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return p(e)}(this,e)});function a(){var e;if(!(this instanceof a))throw TypeError("Cannot call a class as a function");for(var t=arguments.length,n=Array(t),o=0;o<t;o++)n[o]=arguments[o];return b(p(e=r.call.apply(r,[this].concat(n))),"loaded",!1),b(p(e),"setRef",function(t){var n=e.props.onLoaded;!e.loaded&&n&&n(t),e.loaded=!0}),e}return n=[{key:"render",value:function(){var e=this.props,t=e.borderRadius,n=e.height,r=e.width;return(0,s.jsx)(i.Z,{name:"SafeSuspense_PinCanvasLoader_PinCanvas",children:(0,s.jsx)(l.Z,{fallback:(0,s.jsx)(o.kC,{alignItems:"center",justifyContent:"center",children:(0,s.jsx)(o.xH,{accessibilityLabel:this.props.i18n._('Loading image editor', 'accessibility label for loading spinner', 'accessibility label for loading spinner'),show:!0})}),children:(0,s.jsx)(g,{ref:this.setRef,borderRadius:t,height:n,width:r})})})}}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,m(r.key),r)}}(a.prototype,n),Object.defineProperty(a,"prototype",{writable:!1}),a}(r.Component);function _(e){var t=(0,a.ZP)();return(0,s.jsx)(v,d(d({},e),{},{i18n:t}))}},383673:function(e,t,n){"use strict";function r(e,t,n,r,o,i,a){try{var l=e[i](a),s=l.value}catch(e){return void n(e)}l.done?t(s):Promise.resolve(s).then(r,o)}function o(){return i.apply(this,arguments)}function i(){var e;return e=regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([n.e("70253"),n.e("78979")]).then(n.bind(n,801077));case 2:return t=e.sent,e.abrupt("return",t.default);case 4:case"end":return e.stop()}},e)}),(i=function(){var t=this,n=arguments;return new Promise(function(o,i){var a=e.apply(t,n);function l(e){r(a,o,i,l,s,"next",e)}function s(e){r(a,o,i,l,s,"throw",e)}l(void 0)})}).apply(this,arguments)}n.d(t,{Z:function(){return o}})},295182:function(e,t,n){"use strict";n.d(t,{$R:function(){return k},AW:function(){return a},De:function(){return N},Dp:function(){return D},Hv:function(){return w},IU:function(){return s},IW:function(){return S},Ir:function(){return P},J6:function(){return c},JK:function(){return Z},Nv:function(){return m},QS:function(){return W},SX:function(){return z},VC:function(){return I},Vv:function(){return f},Wx:function(){return u},ZT:function(){return H},_y:function(){return i},as:function(){return M},bg:function(){return E},f5:function(){return b},fD:function(){return p},fI:function(){return C},fQ:function(){return o},g6:function(){return _},hp:function(){return L},it:function(){return h},ln:function(){return v},oH:function(){return j},pg:function(){return U},qs:function(){return d},re:function(){return x},rh:function(){return T},sT:function(){return O},uN:function(){return A},uO:function(){return V},vF:function(){return F},xZ:function(){return l},z2:function(){return y},zA:function(){return g},zU:function(){return R},zs:function(){return B}});var r=n(18468).$rz,o=600,i=64,a=600,l=150,s=750,c="jpeg",u=.92,d="#efefef",f=.7,p=2,h=16,y=r,b=8,m=r,g=1,v="white",_="#efefef",x=.7,j=2,P=8,O="#ffb3be",w=1,S=16,A="#ffb3be",I=1,E="white",C=50,D=r,T=r,k=4,z="black",R=58,B="#0074e8",L=.94,F=8,Z="white",M="bold 16px sans-serif",N=.1,H={w:2,h:3},U=5,W={1:[{viewbox:{top:0,left:0,width:1,height:1},roundedCorners:{tl:!0,tr:!0,bl:!0,br:!0},internalEdges:{mt:!1,mb:!1,ml:!1,mr:!1}}],2:[{viewbox:{top:0,left:0,width:1,height:2/3},roundedCorners:{tl:!0,tr:!0,bl:!1,br:!1},internalEdges:{mt:!1,mb:!0,ml:!1,mr:!1},alignedSections:{mb:[]},againstSections:{mb:[1]}},{viewbox:{top:2/3,left:0,width:1,height:1/3},roundedCorners:{tl:!1,tr:!1,bl:!0,br:!0},internalEdges:{mt:!0,mb:!1,ml:!1,mr:!1},alignedSections:{mt:[]},againstSections:{mt:[0]}}],3:[{viewbox:{top:0,left:0,width:1,height:1/3},roundedCorners:{tl:!0,tr:!0,bl:!1,br:!1},internalEdges:{mt:!1,mb:!0,ml:!1,mr:!1},alignedSections:{mb:[]},againstSections:{mb:[1]}},{viewbox:{top:1/3,left:0,width:1,height:1/3},roundedCorners:{tl:!1,tr:!1,bl:!1,br:!1},internalEdges:{mt:!0,mb:!0,ml:!1,mr:!1},alignedSections:{mt:[],mb:[]},againstSections:{mt:[0],mb:[2]}},{viewbox:{top:2/3,left:0,width:1,height:1/3},roundedCorners:{tl:!1,tr:!1,bl:!0,br:!0},internalEdges:{mt:!0,mb:!1,ml:!1,mr:!1},alignedSections:{mt:[]},againstSections:{mt:[1]}}],4:[{viewbox:{top:0,left:0,width:.5,height:.5},roundedCorners:{tl:!0,tr:!1,bl:!1,br:!1},internalEdges:{mt:!1,mb:!0,ml:!1,mr:!0},alignedSections:{mb:[2],mr:[1]},againstSections:{mb:[1,3],mr:[2,3]}},{viewbox:{top:.5,left:0,width:.5,height:.5},roundedCorners:{tl:!1,tr:!1,bl:!0,br:!1},internalEdges:{mt:!0,mb:!1,ml:!1,mr:!0},alignedSections:{mt:[3],mr:[0]},againstSections:{mt:[0,2],mr:[2,3]}},{viewbox:{top:0,left:.5,width:.5,height:.5},roundedCorners:{tl:!1,tr:!0,bl:!1,br:!1},internalEdges:{mt:!1,mb:!0,ml:!0,mr:!1},alignedSections:{mb:[0],ml:[3]},againstSections:{mb:[1,3],ml:[0,1]}},{viewbox:{top:.5,left:.5,width:.5,height:.5},roundedCorners:{tl:!1,tr:!1,bl:!1,br:!0},internalEdges:{mt:!0,mb:!1,ml:!0,mr:!1},alignedSections:{mt:[1],ml:[2]},againstSections:{mt:[0,2],ml:[0,1]}}],5:[{viewbox:{top:0,left:0,width:.6,height:.5},roundedCorners:{tl:!0,tr:!1,bl:!1,br:!1},internalEdges:{mt:!1,mb:!0,ml:!1,mr:!0},alignedSections:{mb:[],mr:[1]},againstSections:{mb:[1],mr:[2,3,4]}},{viewbox:{top:.5,left:0,width:.6,height:.5},roundedCorners:{tl:!1,tr:!1,bl:!0,br:!1},internalEdges:{mt:!0,mb:!1,ml:!1,mr:!0},alignedSections:{mt:[],mr:[0]},againstSections:{mt:[0],mr:[2,3,4]}},{viewbox:{top:0,left:.6,width:.4,height:1/3},roundedCorners:{tl:!1,tr:!0,bl:!1,br:!1},internalEdges:{mt:!1,mb:!0,ml:!0,mr:!1},alignedSections:{mb:[],ml:[3,4]},againstSections:{mb:[3],ml:[0,1]}},{viewbox:{top:1/3,left:.6,width:.4,height:1/3},roundedCorners:{tl:!1,tr:!1,bl:!1,br:!1},internalEdges:{mt:!0,mb:!0,ml:!0,mr:!1},alignedSections:{mt:[],mb:[],ml:[2,4]},againstSections:{mt:[2],mb:[4],ml:[0,1]}},{viewbox:{top:2/3,left:.6,width:.4,height:1/3},roundedCorners:{tl:!1,tr:!1,bl:!1,br:!0},internalEdges:{mt:!0,mb:!1,ml:!0,mr:!1},alignedSections:{mt:[],ml:[2,3]},againstSections:{mt:[3],ml:[0,1]}}]},V={sm:20,md:30,lg:40}},193373:function(e,t,n){"use strict";n.d(t,{Z:function(){return d}});var r=n(672410),o=n(349361),i=n(957010),a=n(316095),l=n(354250),s=n(782570);function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function d(e){var t=e.assets,n=e.checkExperiment,d=e.country,f=e.i18n,p=e.ideaPinRenamingEnabled,h=e.isEmployee,y=e.logContextEvent,b=e.userId,m=e.isShowcase,g=e.parentPinId,v=e.isQuizAd,_=void 0!==v&&v;return function(e,v){var x=v(),j=x.pinbuilder.pinDraftIds;t.concat().reverse().reduce(function(t,a){return t.then(function(){var t=(0,r.Z)(),l=(0,r.Z)();("localImage"===a.type||"webImage"===a.type||"localVideo"===a.type)&&(e((0,o.Z)(t,l,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach(function(t){var r,o;r=t,o=n[t],(r=function(e){var t=function(e,t){if("object"!=c(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=c(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==c(t)?t:t+""}(r))in e?Object.defineProperty(e,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[r]=o}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({media:a},"webImage"===a.type?{link:a.sourceURL}:{}))),"localVideo"===a.type&&e((0,s.Z)({pinDraftId:t,pinItemId:l,userId:b,country:d,i18n:f,logContextEvent:y,checkExperiment:n,ideaPinRenamingEnabled:p}))),e((0,i.Z)({i18n:f,isEmployee:h,pinDraft:{pinItemIds:[l],isShowcase:m,parentPinId:g,isQuizAd:_},pinDraftId:t,storyPinPublishStopwatch:void 0}))})},Promise.resolve()).then(function(){var t=j.findIndex(function(e){return!(0,a._isPristine)(x,e)});j.slice(0,t>=0?t:void 0).forEach(function(t){return e((0,l.Z)(t))})})}}},994158:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(672410),o=n(957010),i=n(354250);function a(e){var t=e.i18n,n=e.isEmployee,a=e.pinDraftId;return function(e,l){var s=l().pinbuilder.pinDraftIds;e((0,i.Z)(a)),s.length<=1&&e((0,o.Z)({i18n:t,isEmployee:n,pinDraft:void 0,pinDraftId:(0,r.Z)(),storyPinPublishStopwatch:void 0}))}}},819340:function(e,t,n){"use strict";n.d(t,{Z:function(){return l}});var r=n(672410),o=n(957010),i=n(316095),a=n(354250);function l(e){var t=e.i18n,n=e.isEmployee;return function(e,l){var s=l().pinbuilder,c=s.pinDraftIds,u=s.selectedPinDraftIds;u.forEach(function(t){e((0,i.deselectPinBuilderPinDraft)(t)),e((0,a.Z)(t))}),u.length===c.length&&e((0,o.Z)({i18n:t,isEmployee:n,pinDraft:void 0,pinDraftId:(0,r.Z)(),storyPinPublishStopwatch:void 0}))}}},506939:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(316095),o=n(95517);function i(e){var t=e.checkExperiment,n=e.country,i=e.i18n,a=e.isPartner,l=e.logContextEvent,s=e.orbacSubjectId,c=e.siteType,u=e.userId;return function(e,d){d().pinbuilder.selectedPinDraftIds.forEach(function(d){e((0,r.deselectPinBuilderPinDraft)(d)),e((0,o.Z)({pinDraftId:d,userId:u,orbacSubjectId:s,country:n,isPartner:a,i18n:i,logContextEvent:l,checkExperiment:t,siteType:c,ideaPinRenamingEnabled:!1}))})}}},95517:function(e,t,n){"use strict";n.d(t,{Z:function(){return v}});var r=n(406262),o=n(575108),i=n(642411),a=n(72918),l=n(233624),s=n(984993),c=n(354250);function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach(function(t){var r,o;r=t,o=n[t],(r=function(e){var t=function(e,t){if("object"!=u(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=u(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==u(t)?t:t+""}(r))in e?Object.defineProperty(e,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[r]=o}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var p=function(e,t){t({event_type:9070,view_type:212,component:13308,element:10973,aux_data:{api_error_code:e.api_error_code,api_error_message:e.message}})};function h(e,t,n){return e.map(function(e){var r=e.id,o=e.link,i=e.media,a=e.type;return(0,l.Z)(o)&&/\/pin\/[\w-]+\/?$/.test(o)||"pin"===a?{id:r}:(0,s.iX)(f({link:o,board_id:t,image_url:i?i.url:"",method:"scraped",scrape_metric:{source:"www_url_scrape"}},n?{orbac_subject_id:n}:Object.freeze({})))})}var y=n(316095),b=n(669019),m=n(792849),g=n(782570);function v(e){var t=e.pinDraftId,n=e.userId,l=e.orbacSubjectId,u=e.country,d=e.isPartner,v=e.i18n,_=e.logContextEvent,x=e.checkExperiment,j=e.siteType,P=e.ideaPinRenamingEnabled;return function(e,O){var w=O().pinbuilder,S=w.pinDrafts,A=w.pinDraftIds,I=w.pinItems,E=w.storyPinItems,C=S[t],D=C.mode,T=C.pinItemIds,k=C.pinItemIndex,z=C.type,R=T[k],B=("story"===z?E[R]:I[R]).media;if("create"===D){if(B&&["localVideo","webVideo"].includes(B.type)&&r.Z.enabled("disabledVideoPinCreation")||B&&["assetImage","localImage","webImage"].includes(B.type)&&r.Z.enabled("disabledPinCreation"))return void e((0,y.setShowDisabledPinCreationBanner)(!0));if(B&&"localVideo"===B.type&&0===A.length){e((0,g.Z)({pinDraftId:t,pinItemId:R,userId:n,country:u,i18n:v,logContextEvent:_,checkExperiment:x,ideaPinRenamingEnabled:P})),e((0,m.g)(t,"queueCreate"));return}e((0,b.iX)({checkExperiment:x,country:u,i18n:v,ideaPinRenamingEnabled:P,isPartner:d,logContextEvent:_,orbacSubjectId:l,pinDraftId:t,siteType:j,userId:n}))}else"edit"===D&&e(function(e,n){var r,d=n().pinbuilder.pinDrafts[t];e((r=d.pinItemIds[d.pinItemIndex],function(e,n){var d=n(),y=d.pinbuilder,b=y.pinItems,m=y.pinTags;Promise.all(b[r].pinTagIds.map(function(e){var n,r,i,a,c,y,b,g,v,x,j,P,O,w,S,A=m[e].status;if("deleted"===A){var I=m[e].taggedObjectIds;return o.Z.create("VisualLinkPinTagResource",{pinTagId:e,id:t,orbacSubjectId:l,taggedObjectIds:I}).callDelete()}return"created"===A?(r=(n=d.pinbuilder).pinTags,i=n.taggedObjects,c=(a=r[e]).taggedObjectIds,y=a.x,b=a.y,(0,s.Fv)(l,_).then(function(e){return Promise.all(h(c.map(function(e){return i[e]}),e.id,l)).then(function(e){return o.Z.create("VisualLinkPinTagsAndObjectsResource",f({pinId:t,pinTagsAndObjects:[{country:u,height:0,tagged_objects:e.map(function(e){return e.id}),width:0,x_coord:100*y,y_coord:100*b}]},l?{orbacSubjectId:l}:Object.freeze({}))).callUpdate().catch(function(e){p(e,_)})})})):"edited"!==A?null:(v=(g=d.pinbuilder).pinTags,x=g.taggedObjects,P=(j=v[e]).pinTagKey,O=j.taggedObjectIds,w=j.x,S=j.y,(0,s.Fv)(l,_).then(function(n){return Promise.all(h(O.filter(function(e){return"created"===x[e].status}).map(function(e){return x[e]}),n.id,l)).then(function(n){return Promise.all([o.Z.create("VisualLinkPinTagsAndObjectsResource",f({pinId:t,pinTagsAndObjects:[{height:0,tagged_objects:n.map(function(e){return e.id}),width:0,x_coord:100*w,y_coord:100*S}]},l?{orbacSubjectId:l}:Object.freeze({}))).callUpdate(),o.Z.create("ApiResource",{url:"/v3/visual_links/pin_tags/tagged_objects/batch/",options:{method:"POST",data:f({pin_tag_key:P,tagged_objects:n.map(function(e){return e.id}).join(","),tagged_object_source:"pinterest-client"},l?{orbac_subject_id:l}:Object.freeze({}))}}),o.Z.create("VisualLinkTaggedObjectsResource",{id:t,pinTagId:e,taggedObjectIds:O.filter(function(e){return"deleted"===x[e].status})}).callDelete()]).then(function(){return o.Z.create("VisualLinkPinTagResource",f({pinTagId:e,id:t,pinTag:{dimensions:{x:100*w,y:100*S}},taggedObjectIds:O},l?{orbacSubjectId:l}:Object.freeze({}))).callCreate()})})}))})).then(function(){e((0,a.jB)("PinResource",(0,i.Z)(t))),e((0,c.Z)(t))})}))})}}},782570:function(e,t,n){"use strict";var r=n(526435),o=n(406262),i=n(253993),a=n(255508),l=n(147641),s=n(316095),c=n(669019),u=n(441501),d=n(792849),f=n(780056),p=n(263255),h=n(603316);function y(e){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}t.Z=function(e){var t=e.pinDraftId,n=e.pinItemId,b=e.userId,m=e.country,g=e.i18n,v=e.logContextEvent,_=e.orbacSubjectId,x=e.checkExperiment,j=e.ideaPinRenamingEnabled,P=e.isMaxVideo;return function(e,O){var w,S,A=O()||{},I=A.createFlow,E=A.pinbuilder,C=((I||{}).forms||{}).campaigns,D=!!C&&(null==(w=C["0"])?void 0:w.premiereSpotlightEnabled),T=E.pinDrafts,k=E.pinDraftIds,z=E.pinItems,R=E.storyPinItemBlocks,B=E.storyPinItems,L=T[t],F=L.pinItemIds,Z=L.status,M="story"===L.type,N=(M?B[n]:z[n]).media,H=M?F.findIndex(function(e){return e===n}):void 0,U=function(e){return M&&B[e]&&B[e].blockIds.length?B[e].blockIds.find(function(e){return"story_pin_video_block"===R[e].type}):null},W=U(n),V=W?R[W].media:N;if(!V||"localVideo"!==V.type)throw Error("Unable to upload video - media is invalid.");e((0,c._B)(t,null)),"succeeded"===Z&&e((0,c.p3)(t,"uploading")),e((0,d.g)(t,"uploading")),e((0,s.addPinBuilderPinDraftItemUpload)(t,n,{status:"uploading",xhr:null}));var G=function(t){return e((0,f.Bl)(n,{uploadProgress:Math.round(100*(t.loaded/t.total))}))};M&&W&&(G=function(n){return e((0,p.PF)(t,W,{uploadProgress:Math.round(100*(n.loaded/n.total))}))});var X=function(e){var t=e.pinbuilder.pinItems,r=[];return Object.keys(t).forEach(function(e){var o=t[e];o.media&&o.media.id===V.id&&n!==e&&r.push(e)}),r},Y=function(t,n){if(M){var r=U(t);r?Object.keys(T).forEach(function(o){T[o].pinItemIds.includes(t)&&e((0,p.PF)(o,r,{uploadProgress:Math.round(100*(n.loaded/n.total))}))}):e((0,f.Bl)(t,{uploadProgress:Math.round(100*(n.loaded/n.total))}))}else e((0,u.Sz)(t,{uploadProgress:Math.round(100*(n.loaded/n.total))}))};S=M?"video-story-pin":"ad_creation"===o.Z.scenario()?"ads-video":"video",(D||P&&["ads-video","video"].includes(S))&&(S="premiere-ads-video"),function _(P){var w=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;(0,a.Z)(V.fileSrc,S,M||!o.Z.enabled("videoEditing"),{onCancelUpload:function(e){(0,i.Z)(v,{event_type:7684,aux_data:{file_size_mb:V.fileSrc.size/1048576,media_upload_id:e,story_pin_page_id:H,video_duration:V.duration}})},onFailureUpload:function(e){var t=e.message,n=e.failureReason,r=e.uploadId;(0,i.Z)(v,{event_type:8786,aux_data:{error_message:t,file_size_mb:V.fileSrc.size/1048576,media_upload_failure_reason:n||"general",media_upload_id:r,story_pin_page_id:H,video_duration:V.duration}}),(0,h.nP)("video_pin_creation.uploading.failure",{sampleRate:1,tags:{failure_reason:t}})},onFinishProcessing:function(e){var t=e.processingTime,n=e.signature,r=e.uploadId;(0,i.Z)(v,{event_type:7520,aux_data:{file_size_mb:V.fileSrc.size/1048576,media_upload_id:r,processing_time:t,story_pin_page_id:H,video_duration:V.duration,video_signature:n}}),(0,i.Z)(v,{event_type:7521,aux_data:{file_size_mb:V.fileSrc.size/1048576,media_upload_id:r,story_pin_page_id:H,video_duration:V.duration,video_signature:n}})},onFinishUpload:function(e){var t,n,r,o,a,l,s,c;return n=(t={amzId2:e.amzId2,amzRequestId:e.amzRequestId,statusCode:e.statusCode,storyPageNumber:H,uploadId:e.uploadId,uploadTime:e.uploadTime,video:V}).amzId2,r=t.amzRequestId,o=t.statusCode,a=t.storyPageNumber,l=t.uploadId,s=t.uploadTime,c=t.video,void((0,i.Z)(v,{event_type:7519,aux_data:{aws_tracking_ids:JSON.stringify([r,n]),file_size_mb:c.fileSrc.size/1048576,media_upload_id:l,status_code:o,story_pin_page_id:a,upload_time:s,video_duration:c.duration}}),(0,h.nP)("video_pin_creation.uploading.success",{sampleRate:1,tags:{app_type:"web"}}))},onProgress:function(t){var r=X(O());return r.length>0&&r.forEach(function(e){Y(e,t)}),M?G(t):e((0,u.Sz)(n,{uploadProgress:Math.round(100*(t.loaded/t.total))}))},onStartProcessing:function(e){var t=e.signature,n=e.uploadId;(0,i.Z)(v,{event_type:8809,aux_data:{file_size_mb:V.fileSrc.size/1048576,media_upload_id:n,story_pin_page_id:H,video_duration:V.duration,video_signature:t}})},onStartUpload:function(r){var o=r.uploadId;return e(function(e,r){var a=r().pinbuilder,l=a.storyPinItemBlocks,s=a.storyPinItems;if(M)if(s[n]&&s[n].blockIds.length){var c=s[n].blockIds.find(function(e){return"story_pin_video_block"===l[e].type});c&&e((0,p.PF)(t,c,{uploadId:o}))}else e((0,f.Bl)(n,{uploadId:o}));else e((0,u.Sz)(n,{uploadId:o}));(0,i.Z)(v,{event_type:7518,aux_data:{file_size_mb:V.fileSrc.size/1048576,media_upload_id:o,story_pin_page_id:H,video_duration:V.duration}})})},setXhr:function(r){return e((0,s.setPinBuilderPinItemUploadXhr)(t,n,r))}}).then(function(r){var i,a,h,y=O(),_=y.pinbuilder.pinDraftIdUploadStatusMap,w=X(y),S=function(e){w.length>0&&Object.keys(_).forEach(function(t){Object.keys(_[t].items).forEach(function(n){w.includes(n)&&e(t,n)})})};if(_[t]&&e((0,s.setPinBuilderPinItemUploadXhr)(t,n,null)),S(function(t,n){return e((0,s.setPinBuilderPinItemUploadXhr)(t,n,null))}),M)if(W){if(e((0,p.PF)(t,W,{signature:r.signature})),_[t]&&_[t].items[n]&&"queueEdit"===_[t].items[n].status){"queueCreate"===_[t].status&&e((a=(i={pinDraftId:t,pinItemId:n}).pinDraftId,h=i.pinItemId,function(e,t){var n=t().pinbuilder,r=n.storyPinItemBlocks,o=n.storyPinItems;if(o[h]&&o[h].blockIds.length){var i=o[h].blockIds.find(function(e){return"story_pin_video_block"===r[e].type}),l=i?r[i].media:null;i&&l&&"localVideo"===l.type&&l.signature&&void 0!==l.trimmedEndTime&&void 0!==l.trimmedStartTime&&(0!==l.trimmedStartTime||l.trimmedEndTime!==l.duration)&&(e((0,s.setPinBuilderPinItemUploadStatus)(a,h,"uploadingEdit")),e((0,p.PF)(a,i,{signature:null})))}}));return}}else e((0,f.Bl)(n,{signature:r.signature})),S(function(t,n){return e((0,u.Sz)(n,{signature:r.signature}))});else e((0,u.Sz)(n,{signature:r.signature})),S(function(t,n){return e((0,u.Sz)(n,{signature:r.signature}))});_[t]&&e((0,s.setPinBuilderPinItemUploadStatus)(t,n,"completed")),S(function(t,n){return e((0,s.setPinBuilderPinItemUploadStatus)(t,n,"completed"))});var A=Object.keys(_[t].items).filter(function(e){return _[t].items[e].status.startsWith("uploading")||_[t].items[e].status.startsWith("queue")});"queueCreate"===_[t].status&&(0===A.length||1===A.length&&A[0]===n)&&(e((0,c.iX)({pinDraftId:t,userId:b,orbacSubjectId:P,country:m,isPartner:!1,i18n:g,logContextEvent:v,checkExperiment:x,ideaPinRenamingEnabled:j})),e((0,d.g)(t,"completed")),S(function(t){return e((0,c.iX)({pinDraftId:t,userId:b,orbacSubjectId:P,country:m,isPartner:!1,i18n:g,logContextEvent:v,checkExperiment:x,ideaPinRenamingEnabled:j}))}),S(function(t){return e((0,d.g)(t,"completed"))})),(0===A.length||1===A.length&&_[t].items[n])&&(o.Z.enabled("multi_pin")||o.Z.enabled("multi_pin_pinner")||M||"queueCreate"!==_[t].status)&&(e((0,l.y2)(t)),S(function(t){return e((0,l.y2)(t))}))}).catch(function(o){var i=O().pinbuilder.pinDraftIdUploadStatusMap;if(!o||"object"===y(o)&&"isError"in o&&o.isError)if(M&&w<r.g1)_(P,w+1);else{var a=k.length>1?g._('Upload failed', 'pinbuilder.upload.video.upload.error', 'Error message uploading a video file'):g._('Upload failed. Try again?', 'pinbuilder.upload.video.upload.error', 'Error message uploading a video file + asks User if they would like to try again');e((0,c._B)(t,a)),e((0,c.p3)(t,"attempted")),e((0,l.su)(t,n)),1===Object.keys(i[t].items).length&&e((0,l.y2)(t))}})}(_)}}},448303:function(e,t,n){"use strict";n.d(t,{Cp:function(){return y},GT:function(){return u},V6:function(){return s},W2:function(){return d},W6:function(){return b},_L:function(){return h},fm:function(){return c}});var r=n(575108),o=n(951908),i=n(640452),a=n(536652);function l(e,t,n,r,o,i,a){try{var l=e[i](a),s=l.value}catch(e){return void n(e)}l.done?t(s):Promise.resolve(s).then(r,o)}function s(e,t){return{type:"UPDATE_USER_SOCIAL_NETWORK",payload:{socialNetworkName:e,connected:t}}}var c=function(e){return{type:"USER_DOMAIN_VERIFIED",payload:{verifiedWebsite:e}}},u=function(e){return{type:"USER_DOMAIN_UNVERIFIED",payload:{verifiedWebsite:e}}},d=function(e,t,n){return function(r){r({type:"USER_SETTING_CHANGE",payload:{id:e,field:t,value:n}})}},f=function(e,t,n){return function(r){r({type:"USER_PARTNER_SETTING_CHANGE",payload:{id:e,field:t,value:n}})}},p=function(e){var t=e.split(" ");return{first_name:t[0],last_name:t[1]}},h=function(e){var t,n,i=e.field,s=e.value,c=e.passcode,u=e.onSettingSavedHn,h=e.showErrorHn,y=e.surfaceTag,b=e.userId,m=e.passcodeSkipAcknowledged,g=void 0!==m&&m,v=e.otp,_=e.onFinallyHn;return t=regeneratorRuntime.mark(function e(t,n){var l,m,x,j,P,O;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return l=n().users[b],m={user_id:b,surface_tag:y},"full_name"===i?l.is_partner?m.business_name=s:(x=p(s),m.first_name=x.first_name,m.last_name=x.last_name||""):m[i]=s,c&&(m.passcode=c),o.i.includes(i)&&null!=g&&(m.user_confirm_skip_passcode=g),v&&(m.otp=v),e.prev=6,e.next=9,r.Z.create("UserSettingsResource",m).callUpdate();case 9:if(P=e.sent,!("email"===i&&null!=P&&null!=(j=P.resource_response.data)&&j.email_changing_to)){e.next=13;break}return h({email_changing_to:P.resource_response.data.email_changing_to}),e.abrupt("return");case 13:"profile_image_url"===i?t((0,a.b)("UserResource",{options:m})):"full_name"===i&&(l.is_partner?t(d(b,"first_name",s)):(t(d(b,"first_name",(O=p(s)).first_name)),t(d(b,"last_name",O.last_name)))),l.is_partner&&("account_type"===i||"contact_name"===i)?t(f(b,i,s)):t(d(b,i,s)),u(),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(6),h(e.t0);case 21:return e.prev=21,null==_||_(),e.finish(21);case 24:case"end":return e.stop()}},e,null,[[6,18,21,24]])}),n=function(){var e=this,n=arguments;return new Promise(function(r,o){var i=t.apply(e,n);function a(e){l(i,r,o,a,s,"next",e)}function s(e){l(i,r,o,a,s,"throw",e)}a(void 0)})},function(e,t){return n.apply(this,arguments)}},y=function(e,t,n,r,o,a,l){return function(){(0,i.Z)({new:t,new_confirm:n,old:e,passcode:r,recaptcha_v3_token:o}).then(a,l)}},b=function(e,t,n,o,i,a){return function(l){l(d(e,"".concat(t,".").concat(n),o));var s={},c="EmailSettingsResource";void 0!==i?(s={section:t,option:n,value:o,od:null==i?void 0:i.od,user_id:null==i?void 0:i.user_id},c="UnsubEmailSettingsResource"):s={section:t,option:n,value:o},r.Z.create(c,s).callUpdate().then(a).catch(function(){return l(d(e,"".concat(t,".").concat(n),!o))})}}},774018:function(e,t,n){"use strict";n.d(t,{E:function(){return s}});var r=n(991384);function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach(function(t){var r,i;r=t,i=n[t],(r=function(e){var t=function(e,t){if("object"!=o(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=o(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==o(t)?t:t+""}(r))in e?Object.defineProperty(e,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[r]=i}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var s={pinAdditionalNote:"",pinAdditionalNoteError:null,description:"",descriptionError:null,editorInstanceId:"",isTaggable:!0,link:"",linkError:null,media:null,pinTagIds:[],selectedPinTagId:null,tagError:null,title:"",titleError:null,canvasJson:null,signals:{},userMentionTags:[]};t.Z=function(e,t){switch(e=e||s,t.type){case"PIN_DRAFT_ADD_PIN_ITEM":case"PIN_ITEM_UPDATE_DATA":var n=t.payload.pinItem;return l(l(l({},e),n),{},{signals:l(l({},e.signals),null==n?void 0:n.signals)});case"PIN_ITEM_ADD_PIN_TAG":var o,a=t.payload.pinTagId;return l(l({},e),{},{pinTagIds:[].concat(function(e){if(Array.isArray(e))return i(e)}(o=e.pinTagIds)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(o)||function(e,t){if(e){if("string"==typeof e)return i(e,void 0);var n=({}).toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,void 0):void 0}}(o)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),[a])});case"PIN_ITEM_REMOVE_PIN_TAG":var c=t.payload.pinTagId;return l(l({},e),{},{pinTagIds:e.pinTagIds.filter(function(e){return e!==c})});case"PIN_ITEM_SET_DESCRIPTION":var u=t.payload.description;return l(l({},e),{},{description:u});case"PIN_ITEM_SET_DESCRIPTION_ERROR":var d=t.payload,f=d.descriptionError,p=d.signals;return l(l({},e),{},{descriptionError:f,signals:l(l({},e.signals),p)});case"PIN_ITEM_SET_IS_TAGGABLE":var h=t.payload.isTaggable;return l(l({},e),{},{isTaggable:h});case"PIN_ITEM_SET_LINK":var y=t.payload.link;return l(l({},e),{},{link:y});case"PIN_ITEM_SET_LINK_ERROR":var b=t.payload,m=b.linkError,g=b.signals;return l(l({},e),{},{linkError:m,signals:l(l({},e.signals),g)});case"PIN_ITEM_SET_MEDIA":var v=t.payload.media,_=(null==v?void 0:v.type)!=="localVideo"&&(!!v&&!e.link||e.isTaggable);return l(l(l({},e),{},{canvasJson:null,isTaggable:_,media:v},null===v?{originalMedia:null}:{}),{},{pinTagIds:[],selectedPinTagId:null});case"PIN_ITEM_UPDATE_MEDIA":var x=t.payload.media;return l(l({},e),{},{media:e.media?(0,r.Z)(e.media,x):null});case"PIN_ITEM_SET_SELECTED_PIN_TAG_ID":var j=t.payload.selectedPinTagId;return l(l({},e),{},{selectedPinTagId:j});case"PIN_ITEM_SET_TAG_ERROR":var P=t.payload.tagError;return l(l({},e),{},{tagError:P});case"PIN_ITEM_SET_TITLE":var O=t.payload.title;return l(l({},e),{},{title:O});case"PIN_ITEM_SET_TITLE_ERROR":var w=t.payload,S=w.titleError,A=w.signals;return l(l({},e),{},{titleError:S,signals:l(l({},e.signals),A)});case"PIN_ITEM_SET_EDITED_IMAGE":var I=t.payload,E=I.editedMedia,C=I.canvasJson;return l(l({},e),{},{media:E,originalMedia:e.originalMedia||e.media,canvasJson:C});default:return e}}},576538:function(e,t,n){"use strict";n.d(t,{FQ:function(){return g},Gh:function(){return S},JT:function(){return f},ND:function(){return h},NT:function(){return w},Qj:function(){return _},VK:function(){return b},_V:function(){return P},d_:function(){return m},gF:function(){return p},gI:function(){return j},jP:function(){return x},p:function(){return v},pX:function(){return O},vd:function(){return y},xA:function(){return d}});var r=n(209257),o=n(500388),i=n(400704),a=n(593310);function l(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=s(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw i}}}}function s(e,t){if(e){if("string"==typeof e)return c(e,t);var n=({}).toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(e,t):void 0}}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function u(e){return e.values().next().value}var d=function(e){return e.pinbuilder.selectedPinDraftIds},f=function(e){var t=e.pinbuilder,n=t.createdPinIds,r=t.pinDrafts,o=t.pinDraftIds;return Object.keys(r).reduce(function(e,t){var i=r[t],a=i&&i.pinId;return o.includes(t)&&a&&n.includes(a)&&!0!==i.isAdIneligible&&!0!==i.isShowcase&&!0!==i.isQuizAd?[].concat(function(e){if(Array.isArray(e))return c(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||s(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),[a]):e},[])},p=function(e){var t=e.pinbuilder,n=t.createdPinIds;return Object.values(t.pinDrafts).filter(function(e){return e&&e.pinId&&e.isShowcase&&n.includes(e.pinId)}).map(function(e){return e.pinId||""})},h=function(e){return Object.values(e.pinbuilder.pinDrafts).filter(function(e){return e&&e.isShowcase&&!e.pinId&&"created"!==e.status}).map(function(e){return e.status})},y=function(e){return e.pinbuilder.pinDraftIds},b=(0,r.createSelector)(y,i.OW,function(e,t){return e.filter(function(e){var n;return(null==(n=t[e])?void 0:n.type)!=="story"})}),m=(0,r.createSelector)(y,i.OW,function(e,t){return e.filter(function(e){var n;return(null==(n=t[e])?void 0:n.status)!=="succeeded"})}),g=(0,r.createSelector)(y,i.OW,function(e,t){return e.filter(function(e){var n,r;return(null==(n=t[e])?void 0:n.status)!=="succeeded"&&(null==(r=t[e])?void 0:r.type)!=="story"})}),v=(0,r.createSelector)(d,i.OW,a.ng,function(e,t,n){var r=e.reduce(function(e,r){var o=t[r],i=o.pinItemIds,a=o.publishOption,l=o.scheduledDate,s=o.scheduledTime,c=o.selectedItem;return e.publishOptions.add(a),e.scheduledDates.add(l?l.toDateString():null),e.scheduledTimes.add(s?s.toTimeString():null),e.selectedItems.add(c?JSON.stringify(c,Object.keys(c).sort()):null),i.forEach(function(t){var r=n[t],o=r.description,i=r.link,a=r.title;e.descriptions.add(o),e.titles.add(a),e.links.add(i)}),e},{descriptions:new Set,links:new Set,publishOptions:new Set,scheduledDates:new Set,scheduledTimes:new Set,selectedItems:new Set,titles:new Set}),o=r.descriptions,i=r.links,a=r.publishOptions,l=r.scheduledDates,s=r.scheduledTimes,c=r.selectedItems,d=r.titles,f=u(l),p=u(s),h=u(c),y=f?new Date(f):null,b=p?new Date("".concat(new Date().toDateString()," ").concat(p)):null,m=h?JSON.parse(h):null;return{initialDescription:1===o.size?u(o):void 0,initialLink:1===i.size?u(i):void 0,initialPublishOption:1===a.size?u(a):void 0,initialScheduledDate:1===l.size?y:void 0,initialScheduledTime:1===s.size?b:void 0,initialSelectedItem:1===c.size?m:void 0,initialTitle:1===d.size?u(d):void 0}}),_=function(e,t,n){var r=e.pinbuilder,i=r.pinTags,l=r.pinDrafts,s=r.pinItems,c=l[t].type,u=s[n].media;return"carousel"===c?"CAROUSEL":i&&Object.keys(i).length>0&&(0,a.jk)()(e,{pinItemId:n}).length>0?"COLLECTIONS":(null==u?void 0:u.type)==="localVideo"?"VIDEO":(0,o.Sl)(u)?"STATIC":null},x=function(e,t){var n,r={},o=l(e);try{for(o.s();!(n=o.n()).done;){var i,a=t[n.value].publishingStatus;r[a]=(null!=(i=r[a])?i:0)+1}}catch(e){o.e(e)}finally{o.f()}return r},j=function(e){var t=e.pinbuilder,n=t.createdPinIds,r=t.pinDrafts,o=t.pinDraftIds;if(o){var i,a={},s=l(o);try{for(s.s();!(i=s.n()).done;){var c=i.value,u=r[c],d=u&&u.pinId;if(d&&n.includes(d)&&r[c].isQuizAd){var f=r[c],p=f.parentPinId,h=f.quizResultIndex;if(p&&"number"==typeof h){var y=a[p]||[];y[h]=d,a[p]=y}return a}}}catch(e){s.e(e)}finally{s.f()}}return{}},P=function(e,t,n){var r=e.pinbuilder,o=r.pinDrafts,i=r.pinDraftIds;return(i&&i.filter(function(e){return o[e]&&o[e].parentPinId===t&&o[e].quizResultIndex===n})||[]).length>0},O=function(e){var t=e.pinbuilder,n=t.pinDrafts,r=t.pinDraftIds,o=void 0===r?[]:r,i=o.filter(function(e){return n[e]&&n[e].isQuizAd}),a={};o.forEach(function(e){a[e]&&!a[e].isQuizAd&&delete n[e]});var l=x(i,n),s=l.publishing,c=void 0===s?0:s,u=l.clientError,d=l.serverError,f=l.succeeded,p=(void 0===u?0:u)+(void 0===d?0:d);return c>0?{quizPinPublishingCount:c+(void 0===f?0:f),quizStatus:"publishing"}:p>0?{quizPinPublishingCount:p,quizStatus:"error"}:null},w=function(e){var t=e.pinbuilder,n=t.createdPinIds,r=t.pinDrafts,o=t.pinDraftIds;if(o){var i,a=l(o);try{for(a.s();!(i=a.n()).done;){var s,c=i.value,u=null==(s=r[c])?void 0:s.pinId;if(u&&n.includes(u)&&r[c].isQuizAd){var d=r[c],f=d.parentPinId,p=d.quizTieBreakerIndex,h={};if(f&&"number"==typeof p){var y=h[f]||[];y[p]=u,h[f]=y}return h}}}catch(e){a.e(e)}finally{a.f()}}return{}},S=function(e,t,n){var r=e.pinbuilder,o=r.pinDrafts,i=r.pinDraftIds;return(i&&i.filter(function(e){return o[e]&&o[e].parentPinId===t&&o[e].quizTieBreakerIndex===n})||[]).length>0}},400704:function(e,t,n){"use strict";n.d(t,{DJ:function(){return w},Dt:function(){return C},Fh:function(){return R},IF:function(){return h},NW:function(){return f},OK:function(){return d},OW:function(){return u},RD:function(){return P},Sg:function(){return O},V$:function(){return j},W3:function(){return D},Wp:function(){return L},Xe:function(){return p},et:function(){return x},fw:function(){return T},gQ:function(){return I},jX:function(){return S},jl:function(){return A},kD:function(){return m},mR:function(){return k},mf:function(){return b},nL:function(){return z},pc:function(){return _},pq:function(){return y},q7:function(){return g},uO:function(){return v},v8:function(){return E},wN:function(){return B}});var r=n(209257),o=n(295614);function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach(function(t){s(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function s(e,t,n){var r;return(r=function(e,t){if("object"!=i(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=i(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==i(r)?r:r+"")in e)?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var u=function(e){return e.pinbuilder.pinDrafts},d=function(e,t){return e.pinbuilder.pinDrafts[t]},f=function(e){var t=e.pinbuilder.pinDrafts,n={};return Object.keys(t).forEach(function(e){"story"!==t[e].type&&(n[e]=t[e])}),n},p=function(e,t){return e.pinbuilder.pinDrafts[t.pinDraftId].view},h=function(e,t){return e.pinbuilder.pinDrafts[t.pinDraftId].pinItemIndex},y=function(e,t){return e.pinbuilder.pinDrafts[t.pinDraftId].pinItemIds},b=function(e,t){return e.pinbuilder.pinDrafts[t.pinDraftId].isCommentsAllowed},m=function(e,t){return e.pinbuilder.pinDrafts[t.pinDraftId].isShoppingRecAllowed},g=function(e,t){var n=e.pinbuilder,r=n.pinDrafts,o=n.storyPinItems;return r[t.pinDraftId].pinItemIds.map(function(e){return o[e]})},v=function(e,t){var n=e.pinbuilder,r=n.pinDrafts,o=n.storyPinItemBlocks,i=n.storyPinItems;return r[t.pinDraftId].pinItemIds.map(function(e){return i[e].blockIds.map(function(e){return o[e]})}).flat()},_=function(e,t){var n,r,i=e.pinbuilder.pinDrafts[t.pinDraftId],a=i.pinItemIds,l=i.storyPinMetadata,s=(0,o.YE)(e,{pinItemId:a[0]}),c=Object.keys(s);return null!=(n=null==l||null==(r=l.title)?void 0:r.trim())?n:s&&c.length>0?s[c[c.length-1]].text.trim():""},x=function(e,t){var n=e.pinbuilder.pinDrafts[t].storyPinMetadata;return null==n?void 0:n.titleError},j=function(e,t){var n,r=e.pinbuilder.pinDrafts[t.pinDraftId].storyPinMetadata;return null!=(n=null==r?void 0:r.description)?n:""},P=function(e,t){var n,r=e.pinbuilder.pinDrafts[t.pinDraftId].storyPinMetadata;return null!=(n=null==r?void 0:r.altText)?n:""},O=function(e,t){var n,r=e.pinbuilder.pinDrafts[t.pinDraftId].storyPinMetadata;return null!=(n=null==r?void 0:r.userMentionTags)?n:[]},w=function(e,t){var n,r=e.pinbuilder.pinDrafts[t.pinDraftId].storyPinMetadata;return(null==r||null==(n=r.link)?void 0:n.trim())||""},S=function(e,t){return e.pinbuilder.pinDrafts[t.pinDraftId].selectedItem},A=function(e,t){var n=y(e,t)[0];return(0,o.iD)()(e,{pinItemId:n})},I=function(e,t){var n=e.pinbuilder.pinDrafts[t.pinDraftId].pinItemIds,r=[];return n.forEach(function(t){var n=(0,o.YE)(e,{pinItemId:t}),i=Object.keys(n).map(function(e){return n[e]});r.push.apply(r,function(e){if(Array.isArray(e))return c(e)}(i)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(i)||function(e,t){if(e){if("string"==typeof e)return c(e,void 0);var n=({}).toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(e,void 0):void 0}}(i)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())}),r},E=function(e,t){return e.pinbuilder.pinDrafts[t.pinDraftId].interestTags||[]},C={PENDING:0,VALID:1,INVALID:2},D=function(e,t){var n,r=e.pinbuilder.pinDrafts[t.pinDraftId].storyPinMetadata;return null!=(n=null==r?void 0:r.linkStatus)?n:C.VALID},T=function(e,t){var n=e.pinbuilder.pinDrafts[t.pinDraftId].storyPinMetadata;return null==n?void 0:n.linkError},k=function(e,t,n){return v(e,t).filter(function(e){return n.includes(e.type)})},z=function(){return(0,r.createSelector)([y,h],function(e,t){return e[t]})},R=function(e,t){var n=e.pinDrafts[t.pinDraftId],r=n.pinItemIds,o=!!(n.apiError||n.boardError||n.mediaError),i=r.reduce(function(t,n){var r=e.pinItems[n]||e.storyPinItems[n];return!!(t||r.descriptionError||r.linkError||r.tagError||r.titleError)},!1);return o||i},B=function(e,t){var n=e.pinDrafts[t.pinDraftId],r=n.pinItemIds,o=n.selectedItem,i=r.reduce(function(t,n){var r=e.pinItems[n]||e.storyPinItems[n];return!!(t||r.description||r.link||r.media||r.title)},!1);return!!(void 0===o?null:o)||i},L=function(e){var t=e.pinbuilder,n=t.pinDraftIds,r=t.pinDrafts;return Object.keys(r).filter(function(e){return n.includes(e)}).reduce(function(e,t){return l(l({},e),{},s({},t,r[t]))},{})}},593310:function(e,t,n){"use strict";n.d(t,{Bg:function(){return u},CQ:function(){return p},M:function(){return s},jk:function(){return h},ng:function(){return a},vd:function(){return f},wc:function(){return l}});var r=n(209257),o=n(685039),i=n(321603),a=function(e){return e.pinbuilder.pinItems},l=function(e,t){return e.pinbuilder.pinItems[t.pinItemId].isTaggable},s=function(e,t){return e.pinbuilder.pinItems[t.pinItemId].selectedPinTagId},c=function(e,t){var n;return(null==(n=e.pinbuilder.pinItems[t.pinItemId])?void 0:n.pinTagIds)||[]},u=function(e,t){return e.pinbuilder.pinItems[t.pinItemId].media},d=(0,r.createSelector)([c,o.Oo],function(e,t){return e.reduce(function(e,n){var r=t[n],o=r.status,i=r.taggedObjectIds;return"deleted"!==o&&i.forEach(function(t){return e.push(t)}),e},[])}),f=function(){return(0,r.createSelector)([c,o.Oo],function(e,t){return e.filter(function(e){return"deleted"!==t[e].status})})},p=function(){return(0,r.createSelector)([d,i.nb],function(e,t){return e.map(function(e){return t[e]}).filter(function(e){return"deleted"!==e.status})})},h=function(){return(0,r.createSelector)([d,i.nb],function(e,t){return e.filter(function(e){return"deleted"!==t[e].status})})}},685039:function(e,t,n){"use strict";n.d(t,{A$:function(){return l},Oo:function(){return i}});var r=n(209257),o=n(321603),i=function(e){return e.pinbuilder.pinTags},a=function(e,t){return e.pinbuilder.pinTags[t.pinTagId].taggedObjectIds},l=function(){return(0,r.createSelector)([a,o.nb],function(e,t){return e.filter(function(e){return"deleted"!==t[e].status})})}},295614:function(e,t,n){"use strict";n.d(t,{AC:function(){return f},CI:function(){return s},NR:function(){return d},X4:function(){return y},YE:function(){return p},bS:function(){return u},i3:function(){return g},iD:function(){return m},mX:function(){return c},wH:function(){return l},yp:function(){return h}});var r=n(209257),o=n(685039),i=n(321603),a=["story_pin_heading_block","story_pin_paragraph_block"],l=function(e,t){return e.pinbuilder.storyPinItems[t]};function s(e){var t=e.storyPinItemBlocks;return e.storyPinItemBlockIds.find(function(e){return!!t[e].media})}var c=function(e,t){var n=e.pinbuilder.storyPinItems[t.pinItemId];return n?s({storyPinItemBlocks:e.pinbuilder.storyPinItemBlocks,storyPinItemBlockIds:n.blockIds}):null};function u(e){var t=e.storyPinItemBlockIds,n=e.storyPinItemBlocks;return t.find(function(e){return a.includes(n[e].type)})}var d=function(e,t){return e.pinbuilder.storyPinItems[t.pinItemId].selectedBlockId};function f(e){var t=e.pinItemId,n=e.storyPinItemBlocks,r=e.storyPinItems[t],o={};return r&&r.blockIds.filter(function(e){return a.includes(n[e].type)}).forEach(function(e){o[e]=n[e]}),o}var p=function(e,t){var n=t.pinItemId,r=e.pinbuilder,o=r.storyPinItemBlocks;return f({storyPinItems:r.storyPinItems,pinItemId:n,storyPinItemBlocks:o})},h=function(e,t){var n=e.pinbuilder.storyPinItems[t.pinItemId];return n?n.blockIds.map(function(t){return e.pinbuilder.storyPinItemBlocks[t]}):[]},y=function(e,t,n){return e.pinbuilder.storyPinItems[t.pinItemId].blockIds.find(function(t){return e.pinbuilder.storyPinItemBlocks[t].type===n})},b=(0,r.createSelector)([function(e,t){return e.pinbuilder.storyPinItems[t.pinItemId].pinTagIds},o.Oo],function(e,t){return e.reduce(function(e,n){var r=t[n],o=r.status,i=r.taggedObjectIds;return"deleted"!==o&&i.forEach(function(t){return e.push(t)}),e},[])}),m=function(){return(0,r.createSelector)([b,i.nb],function(e,t){return e.map(function(e){return t[e]}).filter(function(e){return"deleted"!==e.status})})},g=function(){return(0,r.createSelector)([b,i.nb],function(e,t){return e.filter(function(e){return"deleted"!==t[e].status})})}},321603:function(e,t,n){"use strict";function r(e){return e.pinbuilder.taggedObjects}function o(e,t){var n;return null==(n=r(e)[t])?void 0:n.media}n.d(t,{nb:function(){return r},xe:function(){return o}})},995449:function(e,t,n){"use strict";n.d(t,{P:function(){return A},Z:function(){return E}});var r=n(586659),o=n(899196),i=n(20256),a=n(293565),l=n(19585),s=n(369416),c=n(15667),u=n(647709),d=n(792171),f=n(821342),p=n(104659),h=n(603316),y=n(382718);function b(e){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach(function(t){w(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function v(e,t,n,r,o,i,a){try{var l=e[i](a),s=l.value}catch(e){return void n(e)}l.done?t(s):Promise.resolve(s).then(r,o)}function _(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){v(i,r,o,a,l,"next",e)}function l(e){v(i,r,o,a,l,"throw",e)}a(void 0)})}}function x(e,t){return(x=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function j(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function P(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(P=function(){return!!e})()}function O(e){return(O=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function w(e,t,n){return(t=S(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function S(e){var t=function(e,t){if("object"!=b(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=b(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==b(t)?t:t+""}var A="\n  video::cue {\n    color: white;\n    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen-Sans, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', Ubuntu, Cantarell, 'Fira Sans', 'Droid Sans', 'Helvetica Neue', Helvetica, ' Pro W3', '', Meiryo, ' ', Arial, sans-serif;\n    font-weight: 450;\n    font-size: 18px;\n  }\n",I=function(e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");a.prototype=Object.create(e&&e.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),Object.defineProperty(a,"prototype",{writable:!1}),e&&x(a,e);var t,n,r=(t=P(),function(){var e,n=O(a);return e=t?Reflect.construct(n,arguments,O(this).constructor):n.apply(this,arguments),function(e,t){if(t&&("object"==b(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return j(e)}(this,e)});function a(){var e;if(!(this instanceof a))throw TypeError("Cannot call a class as a function");for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];return w(j(e=r.call.apply(r,[this].concat(n))),"state",{videoStartTime:e.props.initialVideoStartTime,started:!1}),w(j(e),"setVideoPlayerRef",function(t){var n=e.props,r=n.setVideoRef,o=n.handlePlay,i=n.autoplay,a=n.isBrowserSafari;e.videoPlayerRef=t,t&&r&&r(t.video),t&&a&&e.pendingSafariSrc&&e.setSafariVideoSource(e.pendingSafariSrc),e.videoPlayerRef&&e.videoPlayerRef.video&&o&&(void 0===i||i)&&e.videoPlayerRef.video.addEventListener("canplay",_(regeneratorRuntime.mark(function t(){var n,r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!a){t.next=12;break}return t.prev=1,t.next=4,null==(n=e.videoPlayerRef)||null==(r=n.video)?void 0:r.play();case 4:o&&o({userTriggeredPlay:!1}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(1),(0,h.nP)("mweb.closeup.hls_video.safari.autoplay_prevented");case 10:t.next=13;break;case 12:o({userTriggeredPlay:!1});case 13:case"end":return t.stop()}},t,null,[[1,7]])})))}),w(j(e),"hls",null),w(j(e),"pendingSafariSrc",null),w(j(e),"initializeHls",function(){e.destroyHls();var t,n=e.props,r=n.src,i=n.isBrowserSafari;if(o.ZP.isSupported()&&!i){var a=new o.ZP;a.loadSource(r),e.videoPlayerRef&&a.attachMedia(e.videoPlayerRef.video),e.hls=a}else i&&(e.hls=null,null!=(t=e.videoPlayerRef)&&t.video?e.setSafariVideoSource(r):e.pendingSafariSrc=r)}),w(j(e),"destroyHls",function(){var t=j(e).hls,n=e.props.isBrowserSafari;t&&(n||t.destroy(),e.hls=null),e.pendingSafariSrc=null}),w(j(e),"onPlay",function(t){var n=t.event,r=e.props.handlePlay;n.stopPropagation(),r&&r({userTriggeredPlay:!0})}),w(j(e),"onPause",function(t){var n=t.event,r=e.props.handlePause;n.stopPropagation(),r&&r()}),w(j(e),"handleVolumeChange",function(t){var n=t.event,r=t.volume,o=e.props.onVolumeChange;n.stopPropagation(),o&&o({volume:r})}),w(j(e),"handleOnReady",function(t){e.props.onReady&&e.props.onReady(t)}),w(j(e),"handleEnded",function(){var t=e.props,n=t.onEnded,r=t.resetCurrentTime;n&&n(),r()}),w(j(e),"handlePlaying",function(){var t=e.props,n=t.clearSeekTime,r=t.setVideoPlayed;n&&n(),!e.state.started&&(e.setState({started:!0}),r&&r())}),w(j(e),"setSafariVideoSource",function(t){if(null!=(n=e.videoPlayerRef)&&n.video){var n,r=e.videoPlayerRef.video;r.src=t,r.load(),e.pendingSafariSrc=null}}),e}return n=[{key:"componentDidMount",value:function(){this.initializeHls()}},{key:"componentWillUnmount",value:function(){this.destroyHls()}},{key:"componentDidUpdate",value:function(e){var t,n,r,i=this,a=this.props,l=a.playing,s=a.src,c=a.seekTime,u=a.captionsEnabled,d=a.isBrowserSafari,f=a.isDesktop,p=a.isTablet,y=a.requestContext,b=a.isVideoPin,m=y.isAuthenticated;c&&c!==e.seekTime&&this.setState({videoStartTime:c});var g=null==(n=this.videoPlayerRef)||null==(r=n.video)?void 0:r.textTracks[0];if(g&&(u?g.mode="showing":g.mode="disabled",g.addEventListener("cuechange",function(){var e=g.activeCues&&g.activeCues.length>0&&g.activeCues[0];if(e&&e.line&&e.size)if(f)e.line=-6,e.size=88;else{if(e.size=70,b){e.line=-5;return}m?e.line=-8:(e.line=-10,p&&(e.line=-15))}})),e.src!==s){if(this.initializeHls(),this.hls&&o.ZP.isSupported()&&!d)this.hls.on(o.ZP.Events.MANIFEST_PARSED,function(){void 0!==l&&l&&i.videoPlayerRef&&i.videoPlayerRef.play()});else if(d&&null!=(t=this.videoPlayerRef)&&t.video){this.videoPlayerRef.video.addEventListener("loadedmetadata",function e(){var t,n;void 0!==l&&l&&i.videoPlayerRef&&i.videoPlayerRef.play(),null==(t=i.videoPlayerRef)||null==(n=t.video)||n.removeEventListener("loadedmetadata",e)});var v,x=(v=_(regeneratorRuntime.mark(function e(){var t,n,r,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(void 0!==l&&l&&i.props.handlePlay)){e.next=10;break}return e.prev=1,e.next=4,null==(r=i.videoPlayerRef)||null==(o=r.video)?void 0:o.play();case 4:i.props.handlePlay({userTriggeredPlay:!1}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),(0,h.nP)("mweb.closeup.hls_video.safari.autoplay_prevented_on_update");case 10:null==(t=i.videoPlayerRef)||null==(n=t.video)||n.removeEventListener("canplay",x);case 11:case"end":return e.stop()}},e,null,[[1,7]])})),function(){return v.apply(this,arguments)});this.videoPlayerRef.video.addEventListener("canplay",x)}}}},{key:"render",value:function(){var e=this.props,t=e.aspectRatio,n=e.controls,r=e.loop,o=e.poster,a=e.src,l=e.onTimeChange,c=e.playing,u=e.volume,d=e.captions;return(0,y.jsxs)(i.xu,{width:"100%",children:[(0,y.jsx)(s.Z,{unsafeCSS:A}),(0,y.jsx)(i.nk,{ref:this.setVideoPlayerRef,aspectRatio:t,autoplay:c,captions:d,controls:n,crossOrigin:"anonymous",dataTestId:"duplo-hls-video",loop:void 0!==r&&r,onControlsPause:this.onPause,onControlsPlay:this.onPlay,onEnded:this.handleEnded,onPlay:function(){},onPlayError:function(){},onPlaying:this.handlePlaying,onReady:this.handleOnReady,onTimeChange:l,onVolumeChange:this.handleVolumeChange,playing:c,playsInline:!0,poster:o,src:a,startTime:this.state.videoStartTime||void 0,volume:u})]})}}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,S(r.key),r)}}(a.prototype,n),Object.defineProperty(a,"prototype",{writable:!1}),a}(r.PureComponent);function E(e){var t,n=e.clearSeekTime,r=e.pinId,o=void 0===r?"":r,i=e.seekTime,s=(0,d.H)().setVideoPlayed,h=(0,l.ZP)(),b=(0,c.B)(),m=(0,u.HG)(),v=(0,u.Wb)(),_=function(e){var t=(0,f.Z)().isAuth,n=(0,u.HG)(),r=(0,p.G)(),o=r.appUI,i=r.setCurrentVideo,a=!t&&n,l=0;if(a){var s=o.videosAutoplaying.organicVideosAutoplaying[e];l=(null==s?void 0:s.currentTime)||0}return{initialVideoStartTime:l,resetCurrentTime:function(){a&&i({pinId:e,currentTime:0,isPromoted:!1})}}}(o),x=_.initialVideoStartTime,j=_.resetCurrentTime,P=(0,a.G6)(null==b||null==(t=b.userAgent)?void 0:t.browserName);return(0,y.jsx)(I,g(g({},e),{},{clearSeekTime:function(){n&&n(o)},i18n:h,initialVideoStartTime:x,isBrowserSafari:P,isDesktop:m,isTablet:v,requestContext:b,resetCurrentTime:j,seekTime:i,setVideoPlayed:function(){o&&s(o)}}))}},238187:function(e,t,n){"use strict";function r(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return o(e,void 0);var n=({}).toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(e,void 0):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,l=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return l=e.done,e},e:function(e){s=!0,a=e},f:function(){try{l||null==n.return||n.return()}finally{if(s)throw a}}}}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function i(e){var t,n=[],o="",i=r(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;if(o){var l=!!a.match(/\s/),s=!!o.match(/\s/);if(l===s)o+=a;else if(!s&&o.includes("-")){for(var c=0,u=0;u<o.length;u+=1)"-"===o[u]&&(n.push(o.substring(c,u+1)),c=u+1);n.push(o.substring(c)),o=a}else n.push(o),o=a}else o=a}}catch(e){i.e(e)}finally{i.f()}return o.length&&n.push(o),n}function a(e){var t,n,o=e.boxHeight,a=e.boxWidth,l=e.font,s=e.startFontSize,c=e.text;if("undefined"==typeof document||!document.body)return{fontSize:s,lines:[]};var u=document.body,d=document.createElement("div");u.appendChild(d);var f=null==c?void 0:c.split(/\r?\n/g),p=s,h={letterSpacing:(null==(t=l.fontOverrides)?void 0:t.letterSpacing)!=null?"".concat(l.fontOverrides.letterSpacing,"px"):void 0,lineHeight:String((null==(n=l.fontOverrides)?void 0:n.lineHeight)||1.1),fontFamily:l.fontFamily,fontSize:"".concat(p,"px"),position:"absolute",visibility:"hidden",width:"".concat(a,"px")};Object.assign(d.style,h);var y=document.createElement("div");for(y.style.display="inline",d.appendChild(y),(null!=f?f:[]).forEach(function(e,t){var n=document.createElement("span");n.style.wordBreak="break-word",y.appendChild(n),n.appendChild(document.createTextNode(e)),t!==(null!=c?c:"").length-1&&n.appendChild(document.createElement("br"))});(y.offsetHeight>o||y.offsetWidth>a)&&p>0;)p-=1,d.style.fontSize="".concat(p,"px");return y.remove(),d.remove(),{fontSize:p,lines:p>0?function(e){var t=e.font,n=e.fontSize,o=e.textList,a=e.width;if("undefined"==typeof document||!document.body||a<=0||n<=0)return[];var l=document.body,s=document.createElement("div");l.appendChild(s);var c={letterSpacing:(null==(f=t.fontOverrides)?void 0:f.letterSpacing)!=null?"".concat(t.fontOverrides.letterSpacing,"px"):void 0,lineHeight:String((null==(p=t.fontOverrides)?void 0:p.lineHeight)||1.1),fontFamily:t.fontFamily,fontSize:"".concat(n,"px"),visibility:"hidden"};Object.assign(s.style,c);var u=document.createElement("div");u.style.display="inline",s.appendChild(u);var d=document.createTextNode("");u.appendChild(d);var f,p,h,y=[],b="",m=function(e){var t=e.trim();return d.textContent=t,{text:t,width:u.offsetWidth}},g=function e(t){var n=!!t.match(/\s/),o=0===b.length;if(d.textContent="".concat(b).concat(t),u.offsetWidth>a)if(n)y.push(m(b)),b="";else if(o){var i,l=r(t);try{for(l.s();!(i=l.n()).done;){var s=i.value;e(s)}}catch(e){l.e(e)}finally{l.f()}}else y.push(m(b)),b="",e(t);else b+=t},v=r(null!=o?o:[]);try{for(v.s();!(h=v.n()).done;){var _=h.value;0===_.length&&y.push(m(b)),i(_).forEach(function(e){return g(e)}),b.length&&(y.push(m(b)),b="")}}catch(e){v.e(e)}finally{v.f()}return u.remove(),s.remove(),y}({font:l,fontSize:p,textList:f,width:a}):[]}}function l(e){var t=window.getComputedStyle(e,null),n=parseFloat(t.getPropertyValue("height").replace("px","")),r=parseFloat(t.getPropertyValue("font-size").replace("px","")),o=parseFloat(t.getPropertyValue("line-height").replace("px",""));return Number.isNaN(o)&&(o=1.2*r),Math.ceil(n/o)}n.d(t,{KV:function(){return a},Yd:function(){return i},xW:function(){return l}})},40006:function(e,t,n){"use strict";var r=n(20256),o=n(19585),i=n(382718);t.Z=function(){var e=(0,o.ZP)();return(0,i.jsx)(r.xu,{paddingX:10,width:"100%",children:(0,i.jsx)(r.xu,{color:"errorWeak",direction:"column",display:"flex",padding:7,position:"relative",rounding:4,smDirection:"row",children:(0,i.jsxs)(r.kC,{alignItems:"center",flex:"grow",justifyContent:"start",children:[(0,i.jsx)(r.xu,{flex:"none",children:(0,i.jsx)(r.JO,{accessibilityLabel:e._('Workflow status problem icon', 'disablePinCreationBanner.icon.accessibilityLabel', 'Accessibility label for info icon'),color:"error",icon:"workflow-status-problem",size:32})}),(0,i.jsxs)(r.xu,{direction:"column",display:"flex",flex:"grow",marginBottom:"auto",marginTop:"auto",paddingX:4,children:[(0,i.jsx)(r.X6,{size:"400",children:e._('Oops...', 'disablePinCreationBanner.icon.title', 'Title for banner to indicate there is an error.')}),(0,i.jsx)(r.xu,{marginTop:2,children:(0,i.jsx)(r.xv,{children:e._('Our server is experiencing a mild case of the hiccups at the moment. Please try refreshing and publishing again later.', 'disablePinCreationBanner.icon.message', 'Message for banner to let users know there is an error.')})})]})]})})})}},47676:function(e,t,n){"use strict";n.d(t,{Af:function(){return u},Ei:function(){return s},II:function(){return v},Lh:function(){return y},U:function(){return p},Zy:function(){return l},dD:function(){return i},er:function(){return h},hb:function(){return m},in:function(){return c},j7:function(){return b},kX:function(){return d},mx:function(){return g},n5:function(){return a},q8:function(){return f},xH:function(){return o}});var r=n(123317),o=1048576,i=3,a=20,l=3,s=10,c=50,u=10,d=1200,f=375,p=375/r.ap,h=4096,y="#FFFFFF",b={blockStyle:{x_coord:4.27,y_coord:46.82,width:91.46,height:26.35,corner_radius:0},style:{font_id:6,hex_color:"#FFFFFF",font_size:36,alignment:1},text:"",type:"story_pin_paragraph_block"},m=420,g=325,v=768},400741:function(e,t,n){"use strict";n.d(t,{Z:function(){return u}});var r=n(20256),o=n(475498),i=n(19585),a=n(886981),l=n(647709),s=n(382718);function c(e){var t=e.ideaPinImages,n=t.map(function(e,t){var n,o;return(0,s.jsx)(r.xu,{borderStyle:"sm",color:"default",dangerouslySetInlineStyle:{__style:{borderColor:"white",marginInlineEnd:"-17px",WebkitMaskImage:"-webkit-radial-gradient(white, black)",zIndex:t}},height:48,overflow:"hidden",rounding:2,width:28,children:(null==e?void 0:e.url)&&(0,s.jsx)(r.Ee,{alt:"",color:"#696969",fit:"cover",naturalHeight:null!=(n=null==e?void 0:e.height)?n:1,naturalWidth:null!=(o=null==e?void 0:e.width)?o:1,src:e.url})},t)});return(0,s.jsx)(r.kC,{justifyContent:"center",children:(0,s.jsx)(r.kC,{justifyContent:"start",width:{1:28,2:40,3:48}[t.length],children:n})})}function u(e){var t=e.handleHide,n=e.text,u=e.userId,d=e.href,f=e.imageUrl,p=(0,i.ZP)(),h=(0,l.HG)(),y=(0,a.Z)({name:"UserStoryPinsFeedResource",options:{data:{filter_version:2,public_only:!0},field_set_key:"partner_grid_item",user_id:u}}),b=Array.isArray(n)?n.join(" "):n;if(0===(y.data||[]).length)return(0,s.jsx)(o.Z,{duration:5e3,href:d,onHide:t,text:b,thumbnail:f?{image:(0,s.jsx)(r.Ee,{alt:p._('Image of who you followed', 'userFollowingToast.thumbnail.userImage', 'Profile thumbnail of the user you followed'),fit:"cover",naturalHeight:1,naturalWidth:1,src:f})}:void 0});var m=(y.data||[]).slice(0,3).map(function(e){var t;return null==(t=e.images)?void 0:t[h?"236x":"170x"]}),g=(0,s.jsx)(c,{ideaPinImages:m});return(0,s.jsx)(o.Z,{_dangerouslySetThumbnail:g,duration:5e3,href:d,onHide:t,text:b})}},589357:function(e,t,n){"use strict";n.d(t,{Ul:function(){return i},VS:function(){return r},hy:function(){return a},iM:function(){return o},j4:function(){return l}});var r=2,o=[0,.01,.02,.03,.04,.05,.06,.07,.08,.09,.1,.11,.12,.13,.14,.15,.16,.17,.18,.19,.2,.21,.22,.23,.24,.25,.26,.27,.28,.29,.3,.31,.32,.33,.34,.35,.36,.37,.38,.39,.4,.41,.42,.43,.44,.45,.46,.47,.48,.49,.5,.51,.52,.53,.54,.55,.56,.57,.58,.59,.6,.61,.62,.63,.64,.65,.66,.67,.68,.69,.7,.71,.72,.73,.74,.75,.76,.77,.78,.79,.8,.81,.82,.83,.84,.85,.86,.87,.88,.89,.9,.91,.92,.93,.94,.95,.96,.97,.98,.99,1],i={backgroundImage:"linear-gradient(to top, rgba(0, 0, 0, .4), rgba(0, 0, 0, 0))",pointerEvents:"none",bottom:0},a=128,l=function(e){return e&&document.querySelector('video[poster="'.concat(e,'"]'))||null}},961780:function(e,t){"use strict";var n,r,o={update:null,begin:null,loopBegin:null,changeBegin:null,change:null,changeComplete:null,loopComplete:null,complete:null,loop:1,direction:"normal",autoplay:!0,timelineOffset:0},i={duration:1e3,delay:0,endDelay:0,easing:"easeOutElastic(1, .5)",round:0},a=["translateX","translateY","translateZ","rotate","rotateX","rotateY","rotateZ","scale","scaleX","scaleY","scaleZ","skew","skewX","skewY","perspective","matrix","matrix3d"],l={},s={};function c(e,t,n){return Math.min(Math.max(e,t),n)}function u(e,t){return e.indexOf(t)>-1}function d(e,t){return e.apply(null,t)}var f={arr:function(e){return Array.isArray(e)},obj:function(e){return u(Object.prototype.toString.call(e),"Object")},pth:function(e){return f.obj(e)&&e.hasOwnProperty("totalLength")},svg:function(e){return e instanceof SVGElement},inp:function(e){return e instanceof HTMLInputElement},dom:function(e){return e.nodeType||f.svg(e)},str:function(e){return"string"==typeof e},fnc:function(e){return"function"==typeof e},und:function(e){return void 0===e},nil:function(e){return f.und(e)||null===e},hex:function(e){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(e)},rgb:function(e){return/^rgb/.test(e)},hsl:function(e){return/^hsl/.test(e)},col:function(e){return f.hex(e)||f.rgb(e)||f.hsl(e)},key:function(e){return!o.hasOwnProperty(e)&&!i.hasOwnProperty(e)&&"targets"!==e&&"keyframes"!==e}};function p(e){var t=/\(([^)]+)\)/.exec(e);return t?t[1].split(",").map(function(e){return parseFloat(e)}):[]}function h(e,t){var n=p(e),r=c(f.und(n[0])?1:n[0],.1,100),o=c(f.und(n[1])?100:n[1],.1,100),i=c(f.und(n[2])?10:n[2],.1,100),a=c(f.und(n[3])?0:n[3],.1,100),l=Math.sqrt(o/r),u=i/(2*Math.sqrt(o*r)),d=u<1?l*Math.sqrt(1-u*u):0,h=u<1?(u*l+-a)/d:-a+l;function y(e){var n=t?t*e/1e3:e;return(n=u<1?Math.exp(-n*u*l)*(+Math.cos(d*n)+h*Math.sin(d*n)):(1+h*n)*Math.exp(-n*l),0===e||1===e)?e:1-n}return t?y:function(){var t=s[e];if(t)return t;for(var n=1/6,r=0,o=0;;)if(1===y(r+=n)){if(++o>=16)break}else o=0;var i=r*n*1e3;return s[e]=i,i}}function y(e){return void 0===e&&(e=10),function(t){return Math.ceil(c(t,1e-6,1)*e)*(1/e)}}var b=function(){function e(e,t,n){return(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e}function t(e,t,n){return 3*(1-3*n+3*t)*e*e+2*(3*n-6*t)*e+3*t}return function(n,r,o,i){if(0<=n&&n<=1&&0<=o&&o<=1){var a=new Float32Array(11);if(n!==r||o!==i)for(var l=0;l<11;++l)a[l]=e(.1*l,n,o);return function(l){return n===r&&o===i||0===l||1===l?l:e(function(r){for(var i=0,l=1;10!==l&&a[l]<=r;++l)i+=.1;var s=i+(r-a[--l])/(a[l+1]-a[l])*.1,c=t(s,n,o);if(c>=.001){for(var u=s,d=0;d<4;++d){var f=t(u,n,o);if(0===f)break;var p=e(u,n,o)-r;u-=p/f}return u}return 0===c?s:function(t,n,r,o,i){var a,l,s=0;do(a=e(l=n+(r-n)/2,o,i)-t)>0?r=l:n=l;while(Math.abs(a)>1e-7&&++s<10);return l}(r,i,i+.1,n,o)}(l),r,i)}}}}(),m=(n={linear:function(){return function(e){return e}}},r={Sine:function(){return function(e){return 1-Math.cos(e*Math.PI/2)}},Circ:function(){return function(e){return 1-Math.sqrt(1-e*e)}},Back:function(){return function(e){return e*e*(3*e-2)}},Bounce:function(){return function(e){for(var t,n=4;e<((t=Math.pow(2,--n))-1)/11;);return 1/Math.pow(4,3-n)-7.5625*Math.pow((3*t-2)/22-e,2)}},Elastic:function(e,t){void 0===e&&(e=1),void 0===t&&(t=.5);var n=c(e,1,10),r=c(t,.1,2);return function(e){return 0===e||1===e?e:-n*Math.pow(2,10*(e-1))*Math.sin(2*Math.PI*(e-1-r/(2*Math.PI)*Math.asin(1/n))/r)}}},["Quad","Cubic","Quart","Quint","Expo"].forEach(function(e,t){r[e]=function(){return function(e){return Math.pow(e,t+2)}}}),Object.keys(r).forEach(function(e){var t=r[e];n["easeIn"+e]=t,n["easeOut"+e]=function(e,n){return function(r){return 1-t(e,n)(1-r)}},n["easeInOut"+e]=function(e,n){return function(r){return r<.5?t(e,n)(2*r)/2:1-t(e,n)(-2*r+2)/2}},n["easeOutIn"+e]=function(e,n){return function(r){return r<.5?(1-t(e,n)(1-2*r))/2:(t(e,n)(2*r-1)+1)/2}}}),n);function g(e,t){if(f.fnc(e))return e;var n=e.split("(")[0],r=m[n],o=p(e);switch(n){case"spring":return h(e,t);case"cubicBezier":return d(b,o);case"steps":return d(y,o);default:return d(r,o)}}function v(e){try{return document.querySelectorAll(e)}catch(e){return}}function _(e,t){for(var n=e.length,r=arguments.length>=2?arguments[1]:void 0,o=[],i=0;i<n;i++)if(i in e){var a=e[i];t.call(r,a,i,e)&&o.push(a)}return o}function x(e){return e.reduce(function(e,t){return e.concat(f.arr(t)?x(t):t)},[])}function j(e){return f.arr(e)?e:(f.str(e)&&(e=v(e)||e),e instanceof NodeList||e instanceof HTMLCollection)?[].slice.call(e):[e]}function P(e,t){return e.some(function(e){return e===t})}function O(e){var t={};for(var n in e)t[n]=e[n];return t}function w(e,t){var n=O(e);for(var r in e)n[r]=t.hasOwnProperty(r)?t[r]:e[r];return n}function S(e,t){var n=O(e);for(var r in t)n[r]=f.und(e[r])?t[r]:e[r];return n}function A(e){var t=/[+-]?\d*\.?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?(%|px|pt|em|rem|in|cm|mm|ex|ch|pc|vw|vh|vmin|vmax|deg|rad|turn)?$/.exec(e);if(t)return t[1]}function I(e,t){return f.fnc(e)?e(t.target,t.id,t.total):e}function E(e,t){return e.getAttribute(t)}function C(e,t,n){if(P([n,"deg","rad","turn"],A(t)))return t;var r=l[t+n];if(!f.und(r))return r;var o=document.createElement(e.tagName),i=e.parentNode&&e.parentNode!==document?e.parentNode:document.body;i.appendChild(o),o.style.position="absolute",o.style.width=100+n;var a=100/o.offsetWidth;i.removeChild(o);var s=a*parseFloat(t);return l[t+n]=s,s}function D(e,t,n){if(t in e.style){var r=t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),o=e.style[t]||getComputedStyle(e).getPropertyValue(r)||"0";return n?C(e,o,n):o}}function T(e,t){return f.dom(e)&&!f.inp(e)&&(!f.nil(E(e,t))||f.svg(e)&&e[t])?"attribute":f.dom(e)&&P(a,t)?"transform":f.dom(e)&&"transform"!==t&&D(e,t)?"css":null!=e[t]?"object":void 0}function k(e){if(f.dom(e)){for(var t,n=e.style.transform||"",r=/(\w+)\(([^)]*)\)/g,o=new Map;t=r.exec(n);)o.set(t[1],t[2]);return o}}function z(e,t,n,r){switch(T(e,t)){case"transform":var o,i;return o=u(t,"scale")?1:0+(u(t,"translate")||"perspective"===t?"px":u(t,"rotate")||u(t,"skew")?"deg":void 0),i=k(e).get(t)||o,r&&(r.transforms.list.set(t,i),r.transforms.last=t),n?C(e,i,n):i;case"css":return D(e,t,n);case"attribute":return E(e,t);default:return e[t]||0}}function R(e,t){var n=/^(\*=|\+=|-=)/.exec(e);if(!n)return e;var r=A(e)||0,o=parseFloat(t),i=parseFloat(e.replace(n[0],""));switch(n[0][0]){case"+":return o+i+r;case"-":return o-i+r;case"*":return o*i+r}}function B(e,t){if(f.col(e)){var n,r,o;return f.rgb(e)?(n=/rgb\((\d+,\s*[\d]+,\s*[\d]+)\)/g.exec(e))?"rgba("+n[1]+",1)":e:f.hex(e)?(r=e.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,function(e,t,n,r){return t+t+n+n+r+r}),"rgba("+parseInt((o=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(r))[1],16)+","+parseInt(o[2],16)+","+parseInt(o[3],16)+",1)"):f.hsl(e)?function(e){var t,n,r,o=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(e)||/hsla\((\d+),\s*([\d.]+)%,\s*([\d.]+)%,\s*([\d.]+)\)/g.exec(e),i=parseInt(o[1],10)/360,a=parseInt(o[2],10)/100,l=parseInt(o[3],10)/100,s=o[4]||1;function c(e,t,n){return(n<0&&(n+=1),n>1&&(n-=1),n<1/6)?e+(t-e)*6*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}if(0==a)t=n=r=l;else{var u=l<.5?l*(1+a):l+a-l*a,d=2*l-u;t=c(d,u,i+1/3),n=c(d,u,i),r=c(d,u,i-1/3)}return"rgba("+255*t+","+255*n+","+255*r+","+s+")"}(e):void 0}if(/\s/g.test(e))return e;var i=A(e),a=i?e.substr(0,e.length-i.length):e;return t?a+t:a}function L(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function F(e){for(var t,n=e.points,r=0,o=0;o<n.numberOfItems;o++){var i=n.getItem(o);o>0&&(r+=L(t,i)),t=i}return r}function Z(e){var t;if(e.getTotalLength)return e.getTotalLength();switch(e.tagName.toLowerCase()){case"circle":return 2*Math.PI*E(e,"r");case"rect":return 2*E(e,"width")+2*E(e,"height");case"line":return L({x:E(e,"x1"),y:E(e,"y1")},{x:E(e,"x2"),y:E(e,"y2")});case"polyline":return F(e);case"polygon":return t=e.points,F(e)+L(t.getItem(t.numberOfItems-1),t.getItem(0))}}function M(e,t){var n=t||{},r=n.el||function(e){for(var t=e.parentNode;f.svg(t)&&f.svg(t.parentNode);)t=t.parentNode;return t}(e),o=r.getBoundingClientRect(),i=E(r,"viewBox"),a=o.width,l=o.height,s=n.viewBox||(i?i.split(" "):[0,0,a,l]);return{el:r,viewBox:s,x:s[0]/1,y:s[1]/1,w:a,h:l,vW:s[2],vH:s[3]}}function N(e,t){var n=/[+-]?\d*\.?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?/g,r=B(f.pth(e)?e.totalLength:e,t)+"";return{original:r,numbers:r.match(n)?r.match(n).map(Number):[0],strings:f.str(e)||t?r.split(n):[]}}function H(e){return _(e?x(f.arr(e)?e.map(j):j(e)):[],function(e,t,n){return n.indexOf(e)===t})}function U(e){var t=H(e);return t.map(function(e,n){return{target:e,id:n,total:t.length,transforms:{list:k(e)}}})}var W={css:function(e,t,n){return e.style[t]=n},attribute:function(e,t,n){return e.setAttribute(t,n)},object:function(e,t,n){return e[t]=n},transform:function(e,t,n,r,o){if(r.list.set(t,n),t===r.last||o){var i="";r.list.forEach(function(e,t){i+=t+"("+e+") "}),e.style.transform=i}}};function V(e,t){U(e).forEach(function(e){for(var n in t){var r=I(t[n],e),o=e.target,i=A(r),a=z(o,n,i,e),l=R(B(r,i||A(a)),a);W[T(o,n)](o,n,l,e.transforms,!0)}})}function G(e,t){var n=e.length,r=function(e){return e.timelineOffset?e.timelineOffset:0},o={};return o.duration=n?Math.max.apply(Math,e.map(function(e){return r(e)+e.duration})):t.duration,o.delay=n?Math.min.apply(Math,e.map(function(e){return r(e)+e.delay})):t.delay,o.endDelay=n?o.duration-Math.max.apply(Math,e.map(function(e){return r(e)+e.duration-e.endDelay})):t.endDelay,o}var X=0,Y=[],q=function(){var e;function t(n){for(var r=Y.length,o=0;o<r;){var i=Y[o];i.paused?(Y.splice(o,1),r--):(i.tick(n),o++)}e=o>0?requestAnimationFrame(t):void 0}return"undefined"!=typeof document&&document.addEventListener("visibilitychange",function(){J.suspendWhenDocumentHidden&&(K()?e=cancelAnimationFrame(e):(Y.forEach(function(e){return e._onDocumentVisibility()}),q()))}),function(){e||K()&&J.suspendWhenDocumentHidden||!(Y.length>0)||(e=requestAnimationFrame(t))}}();function K(){return!!document&&document.hidden}function J(e){void 0===e&&(e={});var t,n,r,a,l,s,u,d,p,y=0,b=0,m=0,v=0,j=null;function P(e){var t=window.Promise&&new Promise(function(e){return j=e});return e.finished=t,t}var E=(n=w(o,t=e),a=function(e,t){var n=[],r=t.keyframes;for(var o in r&&(t=S(function(e){for(var t=_(x(e.map(function(e){return Object.keys(e)})),function(e){return f.key(e)}).reduce(function(e,t){return 0>e.indexOf(t)&&e.push(t),e},[]),n={},r=0;r<t.length;r++)!function(r){var o=t[r];n[o]=e.map(function(e){var t={};for(var n in e)f.key(n)?n==o&&(t.value=e[n]):t[n]=e[n];return t})}(r);return n}(r),t)),t)f.key(o)&&n.push({name:o,tweens:function(e,t){var n=O(t);if(/^spring/.test(n.easing)&&(n.duration=h(n.easing)),f.arr(e)){var r=e.length;2!==r||f.obj(e[0])?f.fnc(t.duration)||(n.duration=t.duration/r):e={value:e}}var o=f.arr(e)?e:[e];return o.map(function(e,n){var r=f.obj(e)&&!f.pth(e)?e:{value:e};return f.und(r.delay)&&(r.delay=n?0:t.delay),f.und(r.endDelay)&&(r.endDelay=n===o.length-1?t.endDelay:0),r}).map(function(e){return S(e,n)})}(t[o],e)});return n}(r=w(i,t),t),u=G(s=_(x((l=U(t.targets)).map(function(e){return a.map(function(t){var n=e,r=t,o=T(n.target,r.name);if(o){var i,a=r.tweens.map(function(e){var t=function(e,t){var n={};for(var r in e){var o=I(e[r],t);f.arr(o)&&1===(o=o.map(function(e){return I(e,t)})).length&&(o=o[0]),n[r]=o}return n.duration=parseFloat(n.duration),n.delay=parseFloat(n.delay),n}(e,n),o=t.value,a=f.arr(o)?o[1]:o,l=A(a),s=z(n.target,r.name,l,n),c=i?i.to.original:s,u=f.arr(o)?o[0]:c,d=A(u)||A(s),p=l||d;return f.und(a)&&(a=c),t.from=N(u,p),t.to=N(R(a,u),p),t.start=i?i.end:0,t.end=t.start+t.delay+t.duration+t.endDelay,t.easing=g(t.easing,t.duration),t.isPath=f.pth(o),t.isPathTargetInsideSVG=t.isPath&&f.svg(n.target),t.isColor=f.col(t.from.original),t.isColor&&(t.round=1),i=t,t}),l=a[a.length-1];return{type:o,property:r.name,animatable:n,tweens:a,duration:l.end,delay:a[0].delay,endDelay:l.endDelay}}})})),function(e){return!f.und(e)}),r),d=X,X++,S(n,{id:d,children:[],animatables:l,animations:s,duration:u.duration,delay:u.delay,endDelay:u.endDelay}));function C(){var e=E.direction;"alternate"!==e&&(E.direction="normal"!==e?"normal":"reverse"),E.reversed=!E.reversed,p.forEach(function(e){return e.reversed=E.reversed})}function D(e){return E.reversed?E.duration-e:e}function k(){y=0,b=D(E.currentTime)*(1/J.speed)}function B(e,t){t&&t.seek(e-t.timelineOffset)}function L(e){for(var t=0,n=E.animations,r=n.length;t<r;){var o=n[t],i=o.animatable,a=o.tweens,l=a.length-1,s=a[l];l&&(s=_(a,function(t){return e<t.end})[0]||s);for(var u=c(e-s.start-s.delay,0,s.duration)/s.duration,d=isNaN(u)?1:s.easing(u),f=s.to.strings,p=s.round,h=[],y=s.to.numbers.length,b=void 0,m=0;m<y;m++){var g=void 0,v=s.to.numbers[m],x=s.from.numbers[m]||0;g=s.isPath?function(e,t,n){function r(n){void 0===n&&(n=0);var r=t+n>=1?t+n:0;return e.el.getPointAtLength(r)}var o=M(e.el,e.svg),i=r(),a=r(-1),l=r(1),s=n?1:o.w/o.vW,c=n?1:o.h/o.vH;switch(e.property){case"x":return(i.x-o.x)*s;case"y":return(i.y-o.y)*c;case"angle":return 180*Math.atan2(l.y-a.y,l.x-a.x)/Math.PI}}(s.value,d*v,s.isPathTargetInsideSVG):x+d*(v-x),p&&!(s.isColor&&m>2)&&(g=Math.round(g*p)/p),h.push(g)}var j=f.length;if(j){b=f[0];for(var P=0;P<j;P++){f[P];var O=f[P+1],w=h[P];isNaN(w)||(O?b+=w+O:b+=w+" ")}}else b=h[0];W[o.type](i.target,o.property,b,i.transforms),o.currentValue=b,t++}}function F(e){E[e]&&!E.passThrough&&E[e](E)}function Z(e){var t=E.duration,n=E.delay,r=t-E.endDelay,o=D(e);E.progress=c(o/t*100,0,100),E.reversePlayback=o<E.currentTime,p&&function(e){if(E.reversePlayback)for(var t=v;t--;)B(e,p[t]);else for(var n=0;n<v;n++)B(e,p[n])}(o),!E.began&&E.currentTime>0&&(E.began=!0,F("begin")),!E.loopBegan&&E.currentTime>0&&(E.loopBegan=!0,F("loopBegin")),o<=n&&0!==E.currentTime&&L(0),(o>=r&&E.currentTime!==t||!t)&&L(t),o>n&&o<r?(E.changeBegan||(E.changeBegan=!0,E.changeCompleted=!1,F("changeBegin")),F("change"),L(o)):E.changeBegan&&(E.changeCompleted=!0,E.changeBegan=!1,F("changeComplete")),E.currentTime=c(o,0,t),E.began&&F("update"),e>=t&&(b=0,E.remaining&&!0!==E.remaining&&E.remaining--,E.remaining?(y=m,F("loopComplete"),E.loopBegan=!1,"alternate"===E.direction&&C()):(E.paused=!0,!E.completed&&(E.completed=!0,F("loopComplete"),F("complete"),!E.passThrough&&"Promise"in window&&(j(),P(E)))))}return P(E),E.reset=function(){var e=E.direction;E.passThrough=!1,E.currentTime=0,E.progress=0,E.paused=!0,E.began=!1,E.loopBegan=!1,E.changeBegan=!1,E.completed=!1,E.changeCompleted=!1,E.reversePlayback=!1,E.reversed="reverse"===e,E.remaining=E.loop,v=(p=E.children).length;for(var t=v;t--;)E.children[t].reset();(E.reversed&&!0!==E.loop||"alternate"===e&&1===E.loop)&&E.remaining++,L(E.reversed?E.duration:0)},E._onDocumentVisibility=k,E.set=function(e,t){return V(e,t),E},E.tick=function(e){m=e,y||(y=m),Z((m+(b-y))*J.speed)},E.seek=function(e){Z(D(e))},E.pause=function(){E.paused=!0,k()},E.play=function(){E.paused&&(E.completed&&E.reset(),E.paused=!1,Y.push(E),k(),q())},E.reverse=function(){C(),E.completed=!E.reversed,k()},E.restart=function(){E.reset(),E.play()},E.remove=function(e){Q(H(e),E)},E.reset(),E.autoplay&&E.play(),E}function $(e,t){for(var n=t.length;n--;)P(e,t[n].animatable.target)&&t.splice(n,1)}function Q(e,t){var n=t.animations,r=t.children;$(e,n);for(var o=r.length;o--;){var i=r[o],a=i.animations;$(e,a),a.length||i.children.length||r.splice(o,1)}n.length||r.length||t.pause()}J.version="3.2.1",J.speed=1,J.suspendWhenDocumentHidden=!0,J.running=Y,J.remove=function(e){for(var t=H(e),n=Y.length;n--;)Q(t,Y[n])},J.get=z,J.set=V,J.convertPx=C,J.path=function(e,t){var n=f.str(e)?v(e)[0]:e,r=t||100;return function(e){return{property:e,el:n,svg:M(n),totalLength:Z(n)*(r/100)}}},J.setDashoffset=function(e){var t=Z(e);return e.setAttribute("stroke-dasharray",t),t},J.stagger=function(e,t){void 0===t&&(t={});var n=t.direction||"normal",r=t.easing?g(t.easing):null,o=t.grid,i=t.axis,a=t.from||0,l="first"===a,s="center"===a,c="last"===a,u=f.arr(e),d=u?parseFloat(e[0]):parseFloat(e),p=u?parseFloat(e[1]):0,h=A(u?e[1]:e)||0,y=t.start||0+(u?d:0),b=[],m=0;return function(e,t,f){if(l&&(a=0),s&&(a=(f-1)/2),c&&(a=f-1),!b.length){for(var g=0;g<f;g++){if(o){var v=s?(o[0]-1)/2:a%o[0],_=s?(o[1]-1)/2:Math.floor(a/o[0]),x=g%o[0],j=Math.floor(g/o[0]),P=v-x,O=_-j,w=Math.sqrt(P*P+O*O);"x"===i&&(w=-P),"y"===i&&(w=-O),b.push(w)}else b.push(Math.abs(a-g));m=Math.max.apply(Math,b)}r&&(b=b.map(function(e){return r(e/m)*m})),"reverse"===n&&(b=b.map(function(e){return i?e<0?-1*e:-e:Math.abs(m-e)}))}return y+(u?(p-d)/m:d)*(Math.round(100*b[t])/100)+h}},J.timeline=function(e){void 0===e&&(e={});var t=J(e);return t.duration=0,t.add=function(n,r){var o=Y.indexOf(t),a=t.children;function l(e){e.passThrough=!0}o>-1&&Y.splice(o,1);for(var s=0;s<a.length;s++)l(a[s]);var c=S(n,w(i,e));c.targets=c.targets||e.targets;var u=t.duration;c.autoplay=!1,c.direction=t.direction,c.timelineOffset=f.und(r)?u:R(r,u),l(t),t.seek(c.timelineOffset);var d=J(c);l(d),a.push(d);var p=G(a,e);return t.delay=p.delay,t.endDelay=p.endDelay,t.duration=p.duration,t.seek(0),t.reset(),t.autoplay&&t.play(),t},t},J.easing=g,J.penner=m,J.random=function(e,t){return Math.floor(Math.random()*(t-e+1))+e},t.Z=J},733707:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(663158),o=n(947631);function i(e,t){(0,o.Z)(2,arguments);var n=(0,r.Z)(e),i=(0,r.Z)(t);return n.getTime()-i.getTime()}},733985:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(733707),o=n(947631);function i(e,t){(0,o.Z)(2,arguments);var n=(0,r.Z)(e,t)/6e4;return n>0?Math.floor(n):Math.ceil(n)}},654262:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(663158),o=n(947631);function i(e){(0,o.Z)(1,arguments);var t=(0,r.Z)(e);return t.setHours(0,0,0,0),t}},33357:function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}e=n.nmd(e),function(){function t(e,t){document.addEventListener?e.addEventListener("scroll",t,!1):e.attachEvent("scroll",t)}function n(e){this.a=document.createElement("div"),this.a.setAttribute("aria-hidden","true"),this.a.appendChild(document.createTextNode(e)),this.b=document.createElement("span"),this.c=document.createElement("span"),this.h=document.createElement("span"),this.f=document.createElement("span"),this.g=-1,this.b.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.c.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.f.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.h.style.cssText="display:inline-block;width:200%;height:200%;font-size:16px;max-width:none;",this.b.appendChild(this.h),this.c.appendChild(this.f),this.a.appendChild(this.b),this.a.appendChild(this.c)}function o(e,t){e.a.style.cssText="max-width:none;min-width:20px;min-height:20px;display:inline-block;overflow:hidden;position:absolute;width:auto;margin:0;padding:0;top:-999px;white-space:nowrap;font-synthesis:none;font:"+t+";"}function i(e){var t=e.a.offsetWidth,n=t+100;return e.f.style.width=n+"px",e.c.scrollLeft=n,e.b.scrollLeft=e.b.scrollWidth+100,e.g!==t&&(e.g=t,!0)}function a(e,n){function r(){i(o)&&o.a.parentNode&&n(o.g)}var o=e;t(e.b,r),t(e.c,r),i(e)}function l(e,t){var n=t||{};this.family=e,this.style=n.style||"normal",this.weight=n.weight||"normal",this.stretch=n.stretch||"normal"}var s=null,c=null,u=null,d=null;function f(){return null===d&&(d=!!document.fonts),d}function p(e,t){return[e.style,e.weight,!function(){if(null===u){var e=document.createElement("div");try{e.style.font="condensed 100px sans-serif"}catch(e){}u=""!==e.style.font}return u}()?"":e.stretch,"100px",t].join(" ")}l.prototype.load=function(e,t){var r=this,i=e||"BESbswy",l=0,u=t||3e3,d=new Date().getTime();return new Promise(function(e,t){if(f()&&!function(){if(null===c)if(f()&&/Apple/.test(window.navigator.vendor)){var e=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))(?:\.([0-9]+))/.exec(window.navigator.userAgent);c=!!e&&603>parseInt(e[1],10)}else c=!1;return c}()){var h,y=new Promise(function(e,t){!function n(){new Date().getTime()-d>=u?t(Error(""+u+"ms timeout exceeded")):document.fonts.load(p(r,'"'+r.family+'"'),i).then(function(t){1<=t.length?e():setTimeout(n,25)},t)}()});Promise.race([new Promise(function(e,t){l=setTimeout(function(){t(Error(""+u+"ms timeout exceeded"))},u)}),y]).then(function(){clearTimeout(l),e(r)},t)}else h=function(){function c(){var t;(t=-1!=b&&-1!=m||-1!=b&&-1!=g||-1!=m&&-1!=g)&&((t=b!=m&&b!=g&&m!=g)||(null===s&&(s=!!(t=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))/.exec(window.navigator.userAgent))&&(536>parseInt(t[1],10)||536===parseInt(t[1],10)&&11>=parseInt(t[2],10))),t=s&&(b==v&&m==v&&g==v||b==_&&m==_&&g==_||b==x&&m==x&&g==x)),t=!t),t&&(j.parentNode&&j.parentNode.removeChild(j),clearTimeout(l),e(r))}var f=new n(i),h=new n(i),y=new n(i),b=-1,m=-1,g=-1,v=-1,_=-1,x=-1,j=document.createElement("div");j.dir="ltr",o(f,p(r,"sans-serif")),o(h,p(r,"serif")),o(y,p(r,"monospace")),j.appendChild(f.a),j.appendChild(h.a),j.appendChild(y.a),document.body.appendChild(j),v=f.a.offsetWidth,_=h.a.offsetWidth,x=y.a.offsetWidth,function e(){if(new Date().getTime()-d>=u)j.parentNode&&j.parentNode.removeChild(j),t(Error(""+u+"ms timeout exceeded"));else{var n=document.hidden;(!0===n||void 0===n)&&(b=f.a.offsetWidth,m=h.a.offsetWidth,g=y.a.offsetWidth,c()),l=setTimeout(e,50)}}(),a(f,function(e){b=e,c()}),o(f,p(r,'"'+r.family+'",sans-serif')),a(h,function(e){m=e,c()}),o(h,p(r,'"'+r.family+'",serif')),a(y,function(e){g=e,c()}),o(y,p(r,'"'+r.family+'",monospace'))},document.body?h():document.addEventListener?document.addEventListener("DOMContentLoaded",function e(){document.removeEventListener("DOMContentLoaded",e),h()}):document.attachEvent("onreadystatechange",function e(){("interactive"==document.readyState||"complete"==document.readyState)&&(document.detachEvent("onreadystatechange",e),h())})})},"object"===r(e)?e.exports=l:(window.FontFaceObserver=l,window.FontFaceObserver.prototype.load=l.prototype.load)}()},332910:function(e){e.exports=/[\-0-9a-z\xB7\xDF-\xF6\xF8-\xFF\u0101\u0103\u0105\u0107\u0109\u010B\u010D\u010F\u0111\u0113\u0115\u0117\u0119\u011B\u011D\u011F\u0121\u0123\u0125\u0127\u0129\u012B\u012D\u012F\u0131\u0135\u0137\u0138\u013A\u013C\u013E\u0142\u0144\u0146\u0148\u014B\u014D\u014F\u0151\u0153\u0155\u0157\u0159\u015B\u015D\u015F\u0161\u0163\u0165\u0167\u0169\u016B\u016D\u016F\u0171\u0173\u0175\u0177\u017A\u017C\u017E\u0180\u0183\u0185\u0188\u018C\u018D\u0192\u0195\u0199-\u019B\u019E\u01A1\u01A3\u01A5\u01A8\u01AA\u01AB\u01AD\u01B0\u01B4\u01B6\u01B9-\u01BB\u01BD-\u01C3\u01CE\u01D0\u01D2\u01D4\u01D6\u01D8\u01DA\u01DC\u01DD\u01DF\u01E1\u01E3\u01E5\u01E7\u01E9\u01EB\u01ED\u01EF\u01F0\u01F5\u01F9\u01FB\u01FD\u01FF\u0201\u0203\u0205\u0207\u0209\u020B\u020D\u020F\u0211\u0213\u0215\u0217\u0219\u021B\u021D\u021F\u0221\u0223\u0225\u0227\u0229\u022B\u022D\u022F\u0231\u0233-\u0239\u023C\u023F\u0240\u0242\u0247\u0249\u024B\u024D\u024F-\u02AF\u02B9-\u02C1\u02C6-\u02D1\u02EC\u02EE\u0300-\u033F\u0342\u0346-\u034E\u0350-\u036F\u0371\u0373\u0375\u0377\u037B-\u037D\u0390\u03AC-\u03CE\u03D7\u03D9\u03DB\u03DD\u03DF\u03E1\u03E3\u03E5\u03E7\u03E9\u03EB\u03ED\u03EF\u03F3\u03F8\u03FB\u03FC\u0430-\u045F\u0461\u0463\u0465\u0467\u0469\u046B\u046D\u046F\u0471\u0473\u0475\u0477\u0479\u047B\u047D\u047F\u0481\u0483-\u0487\u048B\u048D\u048F\u0491\u0493\u0495\u0497\u0499\u049B\u049D\u049F\u04A1\u04A3\u04A5\u04A7\u04A9\u04AB\u04AD\u04AF\u04B1\u04B3\u04B5\u04B7\u04B9\u04BB\u04BD\u04BF\u04C2\u04C4\u04C6\u04C8\u04CA\u04CC\u04CE\u04CF\u04D1\u04D3\u04D5\u04D7\u04D9\u04DB\u04DD\u04DF\u04E1\u04E3\u04E5\u04E7\u04E9\u04EB\u04ED\u04EF\u04F1\u04F3\u04F5\u04F7\u04F9\u04FB\u04FD\u04FF\u0501\u0503\u0505\u0507\u0509\u050B\u050D\u050F\u0511\u0513\u0515\u0517\u0519\u051B\u051D\u051F\u0521\u0523\u0525\u0527\u0559\u0561-\u0586\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F4\u0610-\u061A\u0620-\u063F\u0641-\u0669\u066E-\u0674\u0679-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u0800-\u082D\u0840-\u085B\u0900-\u0957\u0960-\u0963\u0966-\u096F\u0971-\u0977\u0979-\u097F\u0981-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09E0-\u09E3\u09E6-\u09F1\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A35\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A5C\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C01-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C33\u0C35-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58\u0C59\u0C60-\u0C63\u0C66-\u0C6F\u0C82\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D02\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D57\u0D60-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DF2\u0DF3\u0E01-\u0E32\u0E34-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB2\u0EB4-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0F00\u0F0B\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F42\u0F44-\u0F47\u0F49-\u0F4C\u0F4E-\u0F51\u0F53-\u0F56\u0F58-\u0F5B\u0F5D-\u0F68\u0F6A-\u0F6C\u0F71\u0F72\u0F74\u0F7A-\u0F80\u0F82-\u0F84\u0F86-\u0F92\u0F94-\u0F97\u0F99-\u0F9C\u0F9E-\u0FA1\u0FA3-\u0FA6\u0FA8-\u0FAB\u0FAD-\u0FB8\u0FBA-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10D0-\u10FA\u1200-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1380-\u138F\u13A0-\u13F4\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17B3\u17B6-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u1810-\u1819\u1820-\u1877\u1880-\u18AA\u18B0-\u18F5\u1900-\u191C\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19D9\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BAA\u1BAE-\u1BB9\u1BC0-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1CD0-\u1CD2\u1CD4-\u1CF2\u1D00-\u1D2B\u1D2F\u1D3B\u1D4E\u1D6B-\u1D77\u1D79-\u1D9A\u1DC0-\u1DE6\u1DFC-\u1DFF\u1E01\u1E03\u1E05\u1E07\u1E09\u1E0B\u1E0D\u1E0F\u1E11\u1E13\u1E15\u1E17\u1E19\u1E1B\u1E1D\u1E1F\u1E21\u1E23\u1E25\u1E27\u1E29\u1E2B\u1E2D\u1E2F\u1E31\u1E33\u1E35\u1E37\u1E39\u1E3B\u1E3D\u1E3F\u1E41\u1E43\u1E45\u1E47\u1E49\u1E4B\u1E4D\u1E4F\u1E51\u1E53\u1E55\u1E57\u1E59\u1E5B\u1E5D\u1E5F\u1E61\u1E63\u1E65\u1E67\u1E69\u1E6B\u1E6D\u1E6F\u1E71\u1E73\u1E75\u1E77\u1E79\u1E7B\u1E7D\u1E7F\u1E81\u1E83\u1E85\u1E87\u1E89\u1E8B\u1E8D\u1E8F\u1E91\u1E93\u1E95-\u1E99\u1E9C\u1E9D\u1E9F\u1EA1\u1EA3\u1EA5\u1EA7\u1EA9\u1EAB\u1EAD\u1EAF\u1EB1\u1EB3\u1EB5\u1EB7\u1EB9\u1EBB\u1EBD\u1EBF\u1EC1\u1EC3\u1EC5\u1EC7\u1EC9\u1ECB\u1ECD\u1ECF\u1ED1\u1ED3\u1ED5\u1ED7\u1ED9\u1EDB\u1EDD\u1EDF\u1EE1\u1EE3\u1EE5\u1EE7\u1EE9\u1EEB\u1EED\u1EEF\u1EF1\u1EF3\u1EF5\u1EF7\u1EF9\u1EFB\u1EFD\u1EFF-\u1F07\u1F10-\u1F15\u1F20-\u1F27\u1F30-\u1F37\u1F40-\u1F45\u1F50-\u1F57\u1F60-\u1F67\u1F70\u1F72\u1F74\u1F76\u1F78\u1F7A\u1F7C\u1FB0\u1FB1\u1FB6\u1FC6\u1FD0-\u1FD2\u1FD6\u1FD7\u1FE0-\u1FE2\u1FE4-\u1FE7\u1FF6\u200C\u200D\u214E\u2184\u2C30-\u2C5E\u2C61\u2C65\u2C66\u2C68\u2C6A\u2C6C\u2C71\u2C73\u2C74\u2C76-\u2C7B\u2C81\u2C83\u2C85\u2C87\u2C89\u2C8B\u2C8D\u2C8F\u2C91\u2C93\u2C95\u2C97\u2C99\u2C9B\u2C9D\u2C9F\u2CA1\u2CA3\u2CA5\u2CA7\u2CA9\u2CAB\u2CAD\u2CAF\u2CB1\u2CB3\u2CB5\u2CB7\u2CB9\u2CBB\u2CBD\u2CBF\u2CC1\u2CC3\u2CC5\u2CC7\u2CC9\u2CCB\u2CCD\u2CCF\u2CD1\u2CD3\u2CD5\u2CD7\u2CD9\u2CDB\u2CDD\u2CDF\u2CE1\u2CE3\u2CE4\u2CEC\u2CEE-\u2CF1\u2D00-\u2D25\u2D30-\u2D65\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u2E2F\u3041-\u3096\u3099\u309A\u309D\u309E\u30A1-\u30FE\u3105-\u312D\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FCB\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA641\uA643\uA645\uA647\uA649\uA64B\uA64D\uA64F\uA651\uA653\uA655\uA657\uA659\uA65B\uA65D\uA65F\uA661\uA663\uA665\uA667\uA669\uA66B\uA66D-\uA66F\uA67C\uA67D\uA67F\uA681\uA683\uA685\uA687\uA689\uA68B\uA68D\uA68F\uA691\uA693\uA695\uA697\uA6A0-\uA6E5\uA6F0\uA6F1\uA717-\uA71F\uA723\uA725\uA727\uA729\uA72B\uA72D\uA72F-\uA731\uA733\uA735\uA737\uA739\uA73B\uA73D\uA73F\uA741\uA743\uA745\uA747\uA749\uA74B\uA74D\uA74F\uA751\uA753\uA755\uA757\uA759\uA75B\uA75D\uA75F\uA761\uA763\uA765\uA767\uA769\uA76B\uA76D\uA76F\uA771-\uA778\uA77A\uA77C\uA77F\uA781\uA783\uA785\uA787\uA788\uA78C\uA78E\uA791\uA7A1\uA7A3\uA7A5\uA7A7\uA7A9\uA7FA-\uA827\uA840-\uA873\uA880-\uA8C4\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA900-\uA92D\uA930-\uA953\uA980-\uA9C0\uA9CF-\uA9D9\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A\uAA7B\uAA80-\uAAC2\uAADB-\uAADD\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uABC0-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uFA0E\uFA0F\uFA11\uFA13\uFA14\uFA1F\uFA21\uFA23\uFA24\uFA27-\uFA29\uFB1E\uFE20-\uFE26\uFE73]|\uD800[\uDDFD\uDE80-\uDE9C\uDEA0-\uDED0\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD802[\uDC40-\uDC55\uDD00-\uDD15\uDD20-\uDD39\uDE00-\uDE03\uDE05\uDE06\uDE0C-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE38-\uDE3A\uDE3F\uDE60-\uDE7C\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72]|\uD803[\uDC00-\uDC48]|\uD804[\uDC00-\uDC46\uDC66-\uDC6F\uDC80-\uDCBA]|\uD808[\uDC00-\uDF6E]|[\uD80C\uD840-\uD868\uD86A-\uD86C][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD81A[\uDC00-\uDE38]|\uD82C[\uDC00\uDC01]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D]/}}]);