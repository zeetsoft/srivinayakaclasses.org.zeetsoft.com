"use strict";(self.legacyJsonp=self.legacyJsonp||[]).push([["61536"],{764227:function(e,n,t){t.r(n);var r={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"BoardPickerList_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isPromoted",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"trackingParams",storageKey:null},{kind:"ClientExtension",selections:[{alias:null,args:null,kind:"ScalarField",name:"__id",storageKey:null}]}],type:"Pin",abstractKey:null};r.hash="76b22cc5d658befe1dc27454d3aee77f",n.default=r},853213:function(e,n,t){t.r(n);var r,i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"BoardTitleSuggestionList_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"trackingParams",storageKey:null},{alias:null,args:null,concreteType:"Board",kind:"LinkedField",name:"pinnedToBoard",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"BoardSection",kind:"LinkedField",name:"section",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"slug",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"RichPinDataView",kind:"LinkedField",name:"richMetadata",plural:!1,selections:[{alias:null,args:null,concreteType:"RichPinProductMetadata",kind:"LinkedField",name:"products",plural:!0,selections:r=[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"ArticleMetadata",kind:"LinkedField",name:"article",plural:!1,selections:r,storageKey:null},{alias:null,args:null,concreteType:"RecipeMetadata",kind:"LinkedField",name:"recipe",plural:!1,selections:r,storageKey:null}],storageKey:null}],type:"Pin",abstractKey:null};i.hash="69ffcdea57a7778d2ebbcd41c276c0d0",n.default=i},148281:function(e,n,t){t.r(n);var r,i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"RepinAddSection_pin",selections:[r={alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{alias:null,args:null,concreteType:"Board",kind:"LinkedField",name:"pinnedToBoard",plural:!1,selections:[r,{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null}],storageKey:null}],type:"Pin",abstractKey:null};i.hash="b3ec14d29962e56f80dd52e7e6d7a6d9",n.default=i},205725:function(e,n,t){t.r(n);var r,i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"RepinBoardPicker_pin",selections:[r={alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{alias:null,args:null,concreteType:"Board",kind:"LinkedField",name:"pinnedToBoard",plural:!1,selections:[r],storageKey:null},{args:null,kind:"FragmentSpread",name:"BoardPickerList_pin"},{args:null,kind:"FragmentSpread",name:"BoardTitleSuggestionList_pin"},{args:null,kind:"FragmentSpread",name:"useClientTrackingParams_pin"}],type:"Pin",abstractKey:null};i.hash="475036dcb56a51d3552313200b8c9d45",n.default=i},727382:function(e,n,t){t.r(n);var r,i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"RepinCreateBoardButton_pin",selections:[r={alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{alias:null,args:null,concreteType:"Board",kind:"LinkedField",name:"pinnedToBoard",plural:!1,selections:[r],storageKey:null}],type:"Pin",abstractKey:null};i.hash="1612c2df94f42990b3d4f6ccede72a70",n.default=i},252031:function(e,n,t){t.r(n);var r,i,a,o,l,s,c,d=(r=[{defaultValue:null,kind:"LocalArgument",name:"pinId"}],i=[{kind:"Variable",name:"pin",variableName:"pinId"}],o={alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},l={alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},s={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},c=[a={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null}],{fragment:{argumentDefinitions:r,kind:"Fragment",metadata:null,name:"RepinPageQuery",selections:[{alias:null,args:i,concreteType:null,kind:"LinkedField",name:"v3GetPinQuery",plural:!1,selections:[a,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"Pin",kind:"LinkedField",name:"data",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"RepinPage_pin"}],storageKey:null}],type:"V3GetPin",abstractKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:r,kind:"Operation",name:"RepinPageQuery",selections:[{alias:null,args:i,concreteType:null,kind:"LinkedField",name:"v3GetPinQuery",plural:!1,selections:[a,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"Pin",kind:"LinkedField",name:"data",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"dominantColor",storageKey:null},o,{alias:"imageSpec_236x",args:[{kind:"Literal",name:"spec",value:"236x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"height",storageKey:null},l,{alias:null,args:null,kind:"ScalarField",name:"width",storageKey:null}],storageKey:'images(spec:"236x")'},{alias:null,args:null,kind:"ScalarField",name:"isPromoted",storageKey:null},{alias:null,args:null,concreteType:"Board",kind:"LinkedField",name:"pinnedToBoard",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},s,o,l],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"trackingParams",storageKey:null},{kind:"ClientExtension",selections:[{alias:null,args:null,kind:"ScalarField",name:"__id",storageKey:null}]},{alias:null,args:null,concreteType:"BoardSection",kind:"LinkedField",name:"section",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"slug",storageKey:null},s],storageKey:null},{alias:null,args:null,concreteType:"RichPinDataView",kind:"LinkedField",name:"richMetadata",plural:!1,selections:[{alias:null,args:null,concreteType:"RichPinProductMetadata",kind:"LinkedField",name:"products",plural:!0,selections:c,storageKey:null},{alias:null,args:null,concreteType:"ArticleMetadata",kind:"LinkedField",name:"article",plural:!1,selections:c,storageKey:null},{alias:null,args:null,concreteType:"RecipeMetadata",kind:"LinkedField",name:"recipe",plural:!1,selections:c,storageKey:null}],storageKey:null},s],storageKey:null}],type:"V3GetPin",abstractKey:null}],storageKey:null}]},params:{id:"07d289e6c922ebc4ed21efcdd6fb425983d982a2c8a0484ddaf1b91db1391adf",metadata:{},name:"RepinPageQuery",operationKind:"query",text:null}});d.hash="76093586a269ca0330e25a57bd33f665",n.default=d;var u=d.default||d;if("query"===u.params.operationKind)if(window.__pwsCacheRelayConcreteRequest)window.__pwsCacheRelayConcreteRequest(u);else{let e=[u.params.name,u.params.id].join(":");window.__PWS_RELAY_CONCRETE_REQUEST_CACHE__=window.__PWS_RELAY_CONCRETE_REQUEST_CACHE__||{},window.__PWS_RELAY_CONCRETE_REQUEST_CACHE__[e]=u}},713443:function(e,n,t){t.r(n);var r={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"RepinPage_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"dominantColor",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{alias:"imageSpec_236x",args:[{kind:"Literal",name:"spec",value:"236x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"height",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"width",storageKey:null}],storageKey:'images(spec:"236x")'},{alias:null,args:null,kind:"ScalarField",name:"isPromoted",storageKey:null},{alias:null,args:null,concreteType:"Board",kind:"LinkedField",name:"pinnedToBoard",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"trackingParams",storageKey:null},{args:null,kind:"FragmentSpread",name:"RepinAddSection_pin"},{args:null,kind:"FragmentSpread",name:"RepinBoardPicker_pin"},{args:null,kind:"FragmentSpread",name:"RepinSectionPicker_pin"},{args:null,kind:"FragmentSpread",name:"RepinCreateBoardButton_pin"}],type:"Pin",abstractKey:null};r.hash="b1432f4e80d112c155f930f7ed3760cd",n.default=r},428988:function(e,n,t){t.r(n);var r,i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"RepinSectionPicker_pin",selections:[r={alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isPromoted",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"trackingParams",storageKey:null},{alias:null,args:null,concreteType:"Board",kind:"LinkedField",name:"pinnedToBoard",plural:!1,selections:[r],storageKey:null},{kind:"ClientExtension",selections:[{alias:null,args:null,kind:"ScalarField",name:"__id",storageKey:null}]}],type:"Pin",abstractKey:null};i.hash="f0b2fbadfba92480a2077999a000a308",n.default=i},182522:function(e,n,t){t.r(n);var r,i,a,o,l,s={fragment:{argumentDefinitions:r=[{defaultValue:null,kind:"LocalArgument",name:"pinId"}],kind:"Fragment",metadata:null,name:"useFetchBoardTitleSuggestionsQuery",selections:[{alias:null,args:i=[{kind:"Variable",name:"pin",variableName:"pinId"}],concreteType:null,kind:"LinkedField",name:"v3GetPinQuery",plural:!1,selections:[a={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"Pin",kind:"LinkedField",name:"data",plural:!1,selections:[o={alias:null,args:null,concreteType:"BoardTitleSuggestions",kind:"LinkedField",name:"boardTitleSuggestions",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"title",storageKey:null}],storageKey:null}],storageKey:null}],type:"V3GetPin",abstractKey:null},l={kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"ErrorInfo",kind:"LinkedField",name:"error",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"message",storageKey:null}],storageKey:null}],type:"Error",abstractKey:"__isError"}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:r,kind:"Operation",name:"useFetchBoardTitleSuggestionsQuery",selections:[{alias:null,args:i,concreteType:null,kind:"LinkedField",name:"v3GetPinQuery",plural:!1,selections:[a,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"Pin",kind:"LinkedField",name:"data",plural:!1,selections:[o,{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null}],type:"V3GetPin",abstractKey:null},l],storageKey:null}]},params:{id:"dfccee15ebd4af4563083cc11670f30e6390ba0f2d1317da3d908269f01eadba",metadata:{},name:"useFetchBoardTitleSuggestionsQuery",operationKind:"query",text:null}};s.hash="a8967078f1de7ce3a263a224d0d0e710",n.default=s;var c=s.default||s;if("query"===c.params.operationKind)if(window.__pwsCacheRelayConcreteRequest)window.__pwsCacheRelayConcreteRequest(c);else{let e=[c.params.name,c.params.id].join(":");window.__PWS_RELAY_CONCRETE_REQUEST_CACHE__=window.__PWS_RELAY_CONCRETE_REQUEST_CACHE__||{},window.__PWS_RELAY_CONCRETE_REQUEST_CACHE__[e]=c}},978417:function(e,n,t){t.d(n,{AS:function(){return c},Ps:function(){return a},Q6:function(){return p},le:function(){return f},qe:function(){return d},yU:function(){return u}});var r=t(503246),i=t(734215),a=function(e,n){return e.length===n.length&&e.every(function(e,t){return(0,i.Z)(e,n[t])})},o=function(e,n){return e.length===n.length&&e.every(function(e,t){return e===n[t]})},l=function(e){return e};function s(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:l;return function(r){var i=[];return function(){for(var a=arguments.length,o=Array(a),l=0;l<a;l++)o[l]=arguments[l];var s=i.find(function(e){return n(e.args,t(o))});if(s)return s.result;var c=r.apply(void 0,o);return i.push({args:t(o),result:c}),e&&i.length>e&&i.shift(),c}}}function c(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:l,r=[];return{memoize:function(i){return function(){for(var a=arguments.length,o=Array(a),l=0;l<a;l++)o[l]=arguments[l];var s=t(o),c=r.find(function(e){return n(e.args,s)});if(c)return c.result;var d=i.apply(void 0,o);return r.push({args:s,result:d}),e&&r.length>e&&r.shift(),d}},clearCache:function(){r=[]}}}n.ZP=s();var d=s(1),u=s(void 0,o,function(e){return[JSON.stringify(e)]}),p=s(0,a),f=s(0,function(e,n){return e.length===n.length&&e.every(function(e,t){return(0,r.ZP)(e,n[t])})})},629315:function(e,n,t){t.d(n,{Z:function(){return d}});var r=t(20256),i=t(19585),a=t(588367),o=t(914061),l=t(477213),s=t(588836),c=t(382718);function d(e){var n=(0,i.ZP)(),t=e.backButtonIcon,d=e.errorMessage,u=e.name,p=e.onNextButtonTouch,f=e.onNameChange,g=e.selectedPinIds,h=void 0===g?[]:g,m=e.useRoundedCorners,_=h.length>0?130:64;return(0,c.jsxs)(o.default,{hasFixedHeader:!0,children:[(0,c.jsxs)(a.default,{height:_,paddingY:3,useRoundedCorners:m,children:[(0,c.jsxs)(r.kC,{alignItems:"center",justifyContent:"between",children:[(0,c.jsx)(s.Z,{color:"darkGray",icon:t||"cancel",padding:3,size:"sm"}),(0,c.jsx)(r.X6,{accessibilityLevel:1,size:"300",children:n._('Add section', 'for add board section page', 'for add board section page')}),(0,c.jsx)(r.xu,{"data-test-id":"create-section-button",children:(0,c.jsx)(r.zx,{accessibilityLabel:n._('Add', 'boardSectionCreate.Add.Button.Text', 'Add button accessibility label for board section create page'),color:"red",disabled:""===u.trim(),onClick:p,size:"lg",text:n._('Next', 'Next button for board section create page', 'Next button for board section create page')})})]}),h&&(0,c.jsx)(l.Z,{selectedPinIds:h})]}),(0,c.jsx)(r.xu,{"data-test-id":"addSectionName",paddingX:2,paddingY:3,children:(0,c.jsx)(r.nv,{errorMessage:d||"",id:"section-name-input",label:n._('Name', 'boardSectionCreate.TextField.Name.Label', 'TextField label to Name on BoardSectionCreate'),onChange:function(e){return f(e.event)},size:"lg",value:u})})]})}},791694:function(e,n,t){t.d(n,{Z:function(){return m}});var r=t(586659),i=t(581722),a=t(20256),o=t(821342),l=t(19585),s=t(886981),c=t(435289),d=t(214239),u=t(145127),p=t(482633),f=t(993127),g=t(382718);function h(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=Array(n);t<n;t++)r[t]=e[t];return r}function m(e){var n,t,m=e.excludeBoardId,_=e.hideSectionPickerList,y=e.onRepin,b=(0,l.ZP)(),v=(0,o.Z)(),P=(n=v.isAuth?v.username:"",(0,s.Z)({name:"BoardsResource",options:d.O.options({username:n,boardOrder:"custom",filterStories:!0,mixPublicSecret:!0})}),(0,i.v9)(function(e){return(0,u.Z)(e)||[]})),x=function(e){if(Array.isArray(e))return e}(t=(0,r.useState)(null))||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,i,a,o,l=[],s=!0,c=!1;try{for(a=(t=t.call(e)).next;!(s=(r=a.call(t)).done)&&(l.push(r.value),2!==l.length);s=!0);}catch(e){c=!0,i=e}finally{try{if(!s&&null!=t.return&&(o=t.return(),Object(o)!==o))return}finally{if(c)throw i}}return l}}(t,2)||function(e,n){if(e){if("string"==typeof e)return h(e,2);var t=({}).toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?h(e,2):void 0}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),S=x[0],k=x[1],I=function(e,n){if(!_&&e&&n)return void k(n);y(n)};return P.length>0&&(S&&!_?(0,g.jsx)(f.Z,{boardId:null==S?void 0:S.id,repin:function(e,n){S&&y(S,n)},showSectionRep:!0}):(0,g.jsxs)(a.xu,{"data-test-id":"board-picker-row-container",children:[(0,g.jsx)(a.xu,{marginTop:3,children:(0,g.jsx)(a.xv,{children:b._('All boards', 'title for board picker all boards section', 'title for board picker all boards section')})}),(0,g.jsx)(a.xu,{dangerouslySetInlineStyle:{__style:{paddingBottom:"".concat(c.T,"px")}},paddingY:3,children:P.filter(function(e){return e.id!==m}).map(function(e){return(0,g.jsx)(p.Z,{boardId:e.id,onBoardSelected:function(n){return I(n,e)}},e.id)})})]}))}},701523:function(e,n,t){t.d(n,{Wx:function(){return L},ZP:function(){return D}});var r=t(586659),i=t(581722),a=t(963489),o=t(20256),l=t(475498),s=t(19585),c=t(394962),d=t(588367),u=t(914061),p=t(87853),f=t(435289),g=t(791694),h=t(477213),m=t(366859),_=t(60101),y=t(575108),b=t(72918),v=t(388023),P=function(e){return function(n){var t=e.source,r=e.target,i=e.pinIds;if(n({type:"PINS_MOVE",payload:e}),t.boardlessPins||r.boardId!==t.boardId){var a={board_id:r.boardId,pin_ids:i,section_id:r.sectionId};return y.Z.create("BulkEditResource",a).callUpdate()}if(r.sectionId){var o={section_id:r.sectionId,pins:i},l="BoardSectionEditResource";return y.Z.create(l,o).callUpdate().then(function(e){var t=(0,_.Fv)(e.resource_response.data,v.Z[l]);return n((0,b.XM)(l,o,e,t)),e})}var s={section_id:t.sectionId,pins:i};return y.Z.create("BoardSectionPinsResource",s).callDelete()}},x=t(987782),S=t(588836),k=t(993127),I=t(382718);function j(e){return(j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function w(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function T(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?w(Object(t),!0).forEach(function(n){F(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):w(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}function B(e,n,t,r,i,a,o){try{var l=e[a](o),s=l.value}catch(e){return void t(e)}l.done?n(s):Promise.resolve(s).then(r,i)}function A(e){return function(){var n=this,t=arguments;return new Promise(function(r,i){var a=e.apply(n,t);function o(e){B(a,r,i,o,l,"next",e)}function l(e){B(a,r,i,o,l,"throw",e)}o(void 0)})}}function O(e,n){return(O=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,n){return e.__proto__=n,e})(e,n)}function R(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function E(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(E=function(){return!!e})()}function C(e){return(C=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function F(e,n,t){return(n=Z(n))in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function Z(e){var n=function(e,n){if("object"!=j(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,n||"default");if("object"!=j(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}(e,"string");return"symbol"==j(n)?n:n+""}function z(e,n,t){return e?t._('Got it! Hang tight while we move all those Pins...', 'Toast message for bulk pins move.', 'Toast message for bulk pins move.'):n?t._('Saved to section!', ' - ', ' -- '):t._('Saved to board!', ' - ', ' -- ')}function L(e){var n=e.onAddNewSection,t=e.useIconWithBackground,r=(0,s.ZP)();return(0,I.jsx)(c.Z,{alignCenter:t,height:t?f.y:f.T,children:(0,I.jsx)(m.Z,{onTouch:n,pressState:"none",children:(0,I.jsxs)(o.xu,{alignItems:"center","data-test-id":"addSectionButton",display:"flex",padding:+!t,children:[t?(0,I.jsx)(o.xu,{color:"secondary",dangerouslySetInlineStyle:{__style:{padding:"14px"}},rounding:2,children:(0,I.jsx)(o.JO,{accessibilityLabel:r._('Create board button', 'RepinSection.CreateBoard.Button', 'accessibility label for create board button'),color:"default",icon:"add",size:20})}):(0,I.jsx)(o.JO,{accessibilityLabel:r._('Add section button', ' - ', ' -- '),color:"error",icon:"add-circle",size:38}),t?(0,I.jsx)(o.xu,{marginStart:2,children:(0,I.jsx)(o.xv,{size:"400",weight:"bold",children:r._('Add section', 'Add new section to Pin to', 'Add new section to Pin to')})}):(0,I.jsx)(o.xu,{marginStart:3,children:(0,I.jsx)(o.xv,{weight:"bold",children:r._('Add section', 'Add new section to Pin to', 'Add new section to Pin to')})})]})})})}var K=function(e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");i.prototype=Object.create(e&&e.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),Object.defineProperty(i,"prototype",{writable:!1}),e&&O(i,e);var n,t,r=(n=E(),function(){var e,t=C(i);return e=n?Reflect.construct(t,arguments,C(this).constructor):t.apply(this,arguments),function(e,n){if(n&&("object"==j(n)||"function"==typeof n))return n;if(void 0!==n)throw TypeError("Derived constructors may only return object or undefined");return R(e)}(this,e)});function i(){var e;if(!(this instanceof i))throw TypeError("Cannot call a class as a function");for(var n=arguments.length,t=Array(n),a=0;a<n;a++)t[a]=arguments[a];return F(R(e=r.call.apply(r,[this].concat(t))),"onRepinToBoard",function(n){n.section_count?e.props.onRepinToBoardWithSections(n):e.props.repinToOtherBoard(n.id,e.props.i18n)}),e}return t=[{key:"render",value:function(){var e=this.props,n=e.boardId,t=e.boardSectionId,r=e.orginalBoardId,i=e.onAddNewSection,a=e.repin,l=e.hideBoardPickerRow,s=e.selectedPinIds,c=e.isCollaborative,p=r===n;return(0,I.jsxs)(u.default,{hasFixedHeader:!0,children:[(0,I.jsxs)(d.default,{hasBorder:!0,height:140,children:[(0,I.jsxs)(o.kC,{alignItems:"center",justifyContent:"start",children:[(0,I.jsx)(o.xu,{column:2,children:(0,I.jsx)(S.Z,{})}),(0,I.jsx)(o.xu,{column:8,children:(0,I.jsx)(o.X6,{accessibilityLevel:1,align:"center",size:"300",children:this.props.i18n._('Choose section', 'title for section selection in repin flow', 'title for section selection in repin flow')})}),(0,I.jsx)(o.xu,{column:2})]}),(0,I.jsx)(h.Z,{selectedPinIds:s})]}),n&&(0,I.jsx)(k.Z,{boardId:n,hideBoardPickerRow:p&&l,originalBoardId:r,repin:a,sectionId:t}),p&&(0,I.jsxs)(o.xu,{children:[!c&&(0,I.jsx)(g.Z,{excludeBoardId:n,hideSectionPickerList:!0,onRepin:this.onRepinToBoard}),(0,I.jsx)(L,{onAddNewSection:i})]})]})}}],function(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Z(r.key),r)}}(i.prototype,t),Object.defineProperty(i,"prototype",{writable:!1}),i}(r.PureComponent),D=function(e){var n,t,r=e.inSelectAll,o=e.pinIds,c=e.orginalBoardId,d=e.boardSectionId,u=e.onRefreshBoardSection,f=e.url,g=(0,p.dI)().showToast,h=(0,s.ZP)(),m=(0,a.s0)(),_=(0,i.I0)(),y=(n=A(regeneratorRuntime.mark(function e(n,t,i){var a,s,p,h;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t&&t.id,s={boardId:c,sectionId:d},p={boardId:n,sectionId:a},h=r?(0,x.Z)({source:s,target:p,excludePinIds:o}):P({source:s,target:p,pinIds:o}),c===n){e.next=10;break}return e.next=7,_(h);case 7:m(f,{}),e.next=15;break;case 10:return e.next=12,_(h);case 12:if(!u){e.next=15;break}return e.next=15,u();case 15:g(function(e){var n=e.hideToast;return(0,I.jsx)(l.Z,{onHide:n,text:z(r,a,i)})});case 16:case"end":return e.stop()}},e)})),function(e,t,r){return n.apply(this,arguments)}),b=(t=A(regeneratorRuntime.mark(function e(n,t){var i,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i={boardId:c,sectionId:d},a={boardId:n,sectionId:void 0},g(function(e){var n=e.hideToast;return(0,I.jsx)(l.Z,{onHide:n,text:z(r,void 0,t)})}),e.next=5,_(r?(0,x.Z)({source:i,target:a,excludePinIds:o}):P({source:i,target:a,pinIds:o}));case 5:m(-2);case 6:case"end":return e.stop()}},e)})),function(e,n){return t.apply(this,arguments)});return(0,I.jsx)(K,T(T({},e),{},{i18n:h,repin:y,repinToOtherBoard:b}))}},477213:function(e,n,t){t.d(n,{Z:function(){return s}});var r=t(586659),i=t(20256),a=t(19585),o=t(169053),l=t(382718);function s(e){var n=e.selectedPinIds,t=(0,a.ZP)(),s=(0,r.useRef)(null),c=(0,o.JC)(),d=(n||[]).map(function(e){return c[e]}).filter(Boolean);(0,r.useEffect)(function(){var e=s.current;e&&(e.scrollLeft=e.scrollWidth-e.offsetWidth)},[d]);var u=d.map(function(e,n){var r,a,o,s=e.description,c=e.images,d=null==c?void 0:c["236x"];return(0,l.jsx)(i.xu,{marginEnd:1,children:(0,l.jsx)(i.zd,{height:65,rounding:2,wash:!0,width:50,children:(null==d?void 0:d.url)&&(0,l.jsx)(i.Ee,{alt:!!(null!=s&&s.trim())&&(null==s?void 0:s.trim())||t._('Selected Pin', 'SelectedPinsPreview.image.accessibilityLabel', 'Accessibility label for Pin image without description'),color:null!=(r=e.dominant_color)?r:"",fit:"contain",naturalHeight:null!=(a=null==d?void 0:d.height)?a:1,naturalWidth:null!=(o=null==d?void 0:d.width)?o:1,src:d.url})})},n)});return(0,l.jsx)(i.xu,{ref:s,display:"flex",marginTop:2,overflow:"scroll",children:u})}},435289:function(e,n,t){t.d(n,{T:function(){return r},y:function(){return i}});var r=70,i=80},156618:function(e,n,t){t.d(n,{Bb:function(){return h},Bx:function(){return l},F4:function(){return o},Qj:function(){return s},_6:function(){return g},gv:function(){return a},hg:function(){return c},is:function(){return p},jP:function(){return f},lt:function(){return i},oM:function(){return d},wI:function(){return u}});var r=t(378888),i=function(e){return e._('Log in to continue', 'limitedLogin.modalHeader.default', 'Default title on mobile web limited login modal')},a=function(e){var n=e.firstName,t=e.i18n;return n?(t._('{{ name }} invited you to join their board', 'limitedLogin.modalHeader.groupBoardCollab', 'Mobile Modal prompting users to join a friends({{ name }}) board')).replace("{{ name }}",n):t._('Your friends invited you to join their board', 'limitedLogin.modalHeader.groupBoardCollab', 'Mobile Modal prompting users to join a friends board')},o=function(e){var n=(0,r.mB)(e.search).board_url;if(n){var t=(0,r.Jx)(n),i=(0,r.XP)({accept_invite:!0,seamless:!0});return t.includes("?")?"".concat(t,"&").concat(i):"".concat(t,"?").concat(i)}return e.pathname},l=function(e){return e._('Log in to save this Pin', 'limitedLogin.modalHeader.repin', 'Title on mobile web limited login modal to prompt users to login after they clicked save button.')},s=function(e){var n=e.pathname;if(n.startsWith("/pin/")){var t=n.split("/");if(t.length>2)return"/".concat(t[1],"/").concat(t[2],"/repin/")}return n},c=function(e){return e._('Log in to send this Pin', 'limitedLogin.modalHeader.send', 'Title on mobile web limited login modal to prompt users to login after they clicked send button.')},d=function(e){return e._('Log in to edit this Pin', 'limitedLogin.modalHeader.editPin', 'Title on mobile web limited login modal to prompt users to login after they clicked edit button.')},u=function(e){var n=e.pathname;if(n.startsWith("/pin/")){var t=n.split("/");if(t.length>2)return"/".concat(t[1],"/").concat(t[2],"/edit/")}return n},p=function(e){return e._('Log in to create a Pin or board', 'limitedLogin.modalHeader.create', 'Title on mobile web limited login modal to prompt users to login to create a Pin or board.')},f=function(e){return e._('Log in to hide this Pin', 'limitedLogin.modalHeader.hidePin', 'Title on mobile web limited login modal to prompt users to login after they clicked hide Pin button.')},g=function(e){return e._('Log in to share the profile', 'limitedLogin.modalHeader.shareProfile', 'Title on mobile web limited login modal to prompt users to login after they clicked share button on profile page.')},h=function(e){return e._('Log in to create a board', 'limitedLogin.modalHeader.createBoard', 'Title on mobile web limited login modal to prompt users to login to create a board.')}},753830:function(e,n,t){t.d(n,{Z:function(){return l}});var r=t(19585),i=t(156618),a=t(848387),o=t(382718);function l(e){var n=e.children,t=e.callbackFunction,l=e.modalHeader,s=e.nextLocation,c=(0,r.ZP)(),d=(0,a.m)(),u=d.viewer,p=d.loginForMore,f=d.limitedLoginModalSubheader,g=d.limitedLoginModalNextLocation,h="LIMITED_LOGIN"===u.type;return(0,o.jsx)("div",{onClickCapture:function(e){h&&(t&&t(),e&&(e.preventDefault&&e.preventDefault(),e.stopPropagation&&e.stopPropagation()),null==p||p.setVisible(!0),null==f||f.setText(l||(0,i.lt)(c)),s&&(null==g||g.setRoute(s)))},children:n})}},128061:function(e,n,t){t.d(n,{ZP:function(){return n7},vY:function(){return n5}});var r,i,a,o,l,s,c,d,u,p=t(586659),f=t(581722),g=t(492996),h=t(650533),m=t(861293),_=t(963489),y=t(672410),b=t(20256),v=t(575108),P=t(521009),x=t(937392),S=t(877956),k=t(982166),I=t(678213),j=t(475498),w=t(821342),T=t(28427),B=t(801082),A=t(19585),O=t(302148),R=t(377654),E=t(226967),C=t(13020),F=t(588367),Z=t(914061),z=t(675973),L=t(444185),K=t(374078),D=t(647709),N=t(341742),M=t(701523),H=t(762525),U=t(620427);function W(e,n){return!!(e&&e.placement_id&&e.experience_id===n)}var Q=t(156618),V=t(753830),q=t(469526),Y=t(978417),G=t(382718);function J(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,i,a,o,l=[],s=!0,c=!1;try{if(a=(t=t.call(e)).next,0===n){if(Object(t)!==t)return;s=!1}else for(;!(s=(r=a.call(t)).done)&&(l.push(r.value),l.length!==n);s=!0);}catch(e){c=!0,i=e}finally{try{if(!s&&null!=t.return&&(o=t.return(),Object(o)!==o))return}finally{if(c)throw i}}return l}}(e,n)||function(e,n){if(e){if("string"==typeof e)return X(e,n);var t=({}).toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?X(e,n):void 0}}(e,n)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function X(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=Array(n);t<n;t++)r[t]=e[t];return r}var $="cubic-bezier(0.66, 0.025, 0.33, 0.975)",ee=(0,Y.qe)(function(e,n,t,r,i){var a=e,o=n,l=0,s=0,c="",d=Math.floor(n/3);if("shrinkToPin"===t&&(l="24px",s=1,a=Math.floor(3*d/2),o=d),"pinToGrid"===t&&r&&i){var u=r.getBoundingClientRect(),p=i.getBoundingClientRect(),f=p.x+p.width/2-(u.x+u.width/2),g=p.y+p.height/2-(u.y+u.height/2);c="translate(".concat(f,"px, ").concat(g,"px)"),l="24px 0px 0px 24px",s=1,a=d,o=d}return{borderRadius:l,height:a,opacity:s,overflow:"hidden",width:o,WebkitTransformOrigin:"center center",transformOrigin:"center center",WebkitTransform:c,transform:c,WebkitTransition:"all .42s ".concat($),transition:"all .42s ".concat($)}}),en=(0,Y.qe)(function(e){return{opacity:+!!e,WebkitTransition:"opacity .42s ".concat($),transition:"opacity .42s ".concat($)}}),et=(0,Y.qe)(function(e){return{opacity:+!e,WebkitTransition:"all .25s ".concat($),transition:"all .25s ".concat($),zIndex:3}});function er(e){var n,t,r,i,a=e.completeExperience,o=e.pinDominantColor,l=e.pinImageHeight,s=e.pinImageWidth,c=e.pinImageUrl,d=(0,A.ZP)(),u=J((0,p.useState)("visible"),2),f=u[0],g=u[1],h=J((0,p.useState)("none"),2),m=h[0],_=h[1],y=window.innerWidth,v=Math.floor(y/3),P=Math.floor(y/6);(0,p.useEffect)(function(){c&&"none"===m&&(n=setTimeout(function(){_("shrinkToPin")},85)),c&&"shrinkToPin"===m&&(t=setTimeout(function(){_("pinToGrid")},2e3)),"pinToGrid"===m&&"visible"===f&&(r=setTimeout(function(){g("hidden")},2e3)),"hidden"===f&&(i=setTimeout(function(){g("none"),a()},300))}),(0,p.useEffect)(function(){return function(){clearTimeout(n),clearTimeout(t),clearTimeout(r),clearTimeout(i)}},[]);var x=(0,p.useRef)(null),S=(0,p.useRef)(null);return(0,G.jsxs)(b.xu,{alignItems:"center",bottom:!0,color:"default",dangerouslySetInlineStyle:{__style:et("hidden"===f)},direction:"column",display:"none"===f?"none":"flex",justifyContent:"center",left:!0,position:"fixed",right:!0,top:!0,children:[(0,G.jsxs)(b.xu,{alignItems:"center",display:"flex",height:y/2,justifyContent:"center",marginBottom:8,position:"relative",width:"100%",children:[(0,G.jsx)(b.xu,{dangerouslySetInlineStyle:{__style:en("pinToGrid"===m)},position:"absolute",children:(0,G.jsx)(b.zd,{height:v,rounding:6,width:v+P+1,children:(0,G.jsxs)(b.kC,{alignItems:"stretch",justifyContent:"between",children:[(0,G.jsx)(b.xu,{ref:S,color:"transparent",height:v,width:v}),(0,G.jsxs)(b.kC,{alignItems:"stretch",direction:"column",justifyContent:"between",children:[(0,G.jsx)(b.xu,{color:"secondary",height:P,width:P}),(0,G.jsx)(b.xu,{color:"secondary",height:P,width:P})]})]})})}),(0,G.jsx)(b.xu,{ref:x,dangerouslySetInlineStyle:{__style:ee(l/s*y,y,m,x.current,S.current)},position:"absolute",children:(0,G.jsx)(b.Ee,{alt:d._('Pin image', 'Pin image on repin page', 'Pin image on repin page'),color:o,fit:"cover",naturalHeight:l,naturalWidth:s,src:c})})]}),(0,G.jsx)(b.xu,{marginBottom:8,marginTop:8,paddingX:12,children:(0,G.jsx)(b.X6,{align:"center",size:"600",children:d._('Keep your ideas organized by creating a board', 'boardPicker.edu.heading', 'board create education shown before user create their first board')})})]})}var ei=t(810008),ea=t(96105),eo=t(516114);function el(e){return(el="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function es(e,n){return(es=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,n){return e.__proto__=n,e})(e,n)}function ec(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ed(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(ed=function(){return!!e})()}function eu(e){return(eu=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ep(e,n,t){return(n=ef(n))in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function ef(e){var n=function(e,n){if("object"!=el(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,n||"default");if("object"!=el(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}(e,"string");return"symbol"==el(n)?n:n+""}var eg=["#0074e8","#0FA573","#B469EB","#F13535","#E2780D"],eh=function(e,n){return Math.random()*((e||1)-(n||0))+(n||0)},em=function(e){return Math.PI/180*e},e_=function(e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");i.prototype=Object.create(e&&e.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),Object.defineProperty(i,"prototype",{writable:!1}),e&&es(i,e);var n,t,r=(n=ed(),function(){var e,t=eu(i);return e=n?Reflect.construct(t,arguments,eu(this).constructor):t.apply(this,arguments),function(e,n){if(n&&("object"==el(n)||"function"==typeof n))return n;if(void 0!==n)throw TypeError("Derived constructors may only return object or undefined");return ec(e)}(this,e)});function i(){var e;if(!(this instanceof i))throw TypeError("Cannot call a class as a function");for(var n=arguments.length,t=Array(n),a=0;a<n;a++)t[a]=arguments[a];return ep(ec(e=r.call.apply(r,[this].concat(t))),"animationTimer",null),ep(ec(e),"canvasRemovalTimer",null),ep(ec(e),"childrenContainerRef",(0,p.createRef)()),ep(ec(e),"containerRef",(0,p.createRef)()),ep(ec(e),"buildCanvas",function(){if(!e.containerRef.current)return null;var n=window.innerWidth,t=e.containerRef.current.getBoundingClientRect(),r=t.height,i=t.top,a=document.createElement("canvas");return a.style.position="absolute",a.style.left="0px",a.style.top="".concat(i-(n-r)/2,"px"),a.style.pointerEvents="none",a.style.width="".concat(n,"px"),a.style.height="".concat(n,"px"),a.width=n,a.height=n,a}),ep(ec(e),"explode",function(){var n=e.buildCanvas();if(n){var t=e.containerRef.current,r=e.childrenContainerRef.current,i=n.getContext("2d");null==t||t.insertBefore(n,r);var a=Array.from(Array(120)).map(function(){return{x:n.width/2,y:n.height/2,radius:Math.round(eh(10,30)),color:eg[Math.floor(Math.random()*eg.length)],degree:Number(eh(0,360).toFixed(1)),speed:Math.round(eh(0,25)),friction:.9,opacity:Number(eh(0,.5).toFixed(1)),yVel:0,gravity:.04}});i&&function e(n,t,r,i){window.requestAnimationFrame(function(){return e(n,t,r,i)}),t.clearRect(0,0,r,i),n.forEach(function(e){e.x+=e.speed*Math.cos(em(e.degree)),e.y+=e.speed*Math.sin(em(e.degree)),e.opacity-=.01,e.speed*=e.friction,e.radius*=e.friction,e.yVel+=e.gravity,e.y+=e.yVel,e.opacity<0||e.radius<0||(t.beginPath(),t.globalAlpha=e.opacity,t.fillStyle=e.color,t.arc(e.x,e.y,e.radius,0,2*Math.PI,!1),t.fill())})}(a,i,n.width,n.height),e.canvasRemovalTimer=setTimeout(function(){null==t||t.removeChild(n)},(e.props.delay||0)+1e3)}}),e}return t=[{key:"componentDidUpdate",value:function(e){var n=this.props,t=n.delay,r=n.startAnimation,i=e.startAnimation;r&&i!==r&&(this.animationTimer=setTimeout(this.explode,t))}},{key:"componentWillUnmount",value:function(){this.animationTimer&&clearTimeout(this.animationTimer),this.canvasRemovalTimer&&clearTimeout(this.canvasRemovalTimer)}},{key:"render",value:function(){return(0,G.jsx)(b.xu,{ref:this.containerRef,children:(0,G.jsx)(b.xu,{ref:this.childrenContainerRef,children:this.props.children})})}}],function(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ef(r.key),r)}}(i.prototype,t),Object.defineProperty(i,"prototype",{writable:!1}),i}(p.PureComponent);function ey(e){return(ey="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function eb(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function ev(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?eb(Object(t),!0).forEach(function(n){ej(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):eb(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}function eP(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=Array(n);t<n;t++)r[t]=e[t];return r}function ex(e,n){return(ex=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,n){return e.__proto__=n,e})(e,n)}function eS(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ek(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(ek=function(){return!!e})()}function eI(e){return(eI=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ej(e,n,t){return(n=ew(n))in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function ew(e){var n=function(e,n){if("object"!=ey(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,n||"default");if("object"!=ey(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}(e,"string");return"symbol"==ey(n)?n:n+""}ep(e_,"defaultProps",{delay:0});var eT=function(e,n,t){var r,i,a=[],o=null==(r=n.current)?void 0:r.getBoundingClientRect(),l=null==(i=t.current)?void 0:i.getBoundingClientRect();if(o&&l){var s={x:l.left-o.left,y:l.top-o.top},c={x:l.width/o.width,y:l.height/o.height};a.push("translate(".concat(s.x,"px, ").concat(s.y,"px)")),a.push("scale(".concat(c.x,", ").concat(c.y,")"))}return{WebkitTransformOrigin:"left top",transformOrigin:"left top",WebkitTransform:e?a.join(" "):"none",transform:e?a.join(" "):"none",WebkitTransition:"all .5s ease-in-out",transition:"all .5s ease-in-out",borderRadius:e?"8px 0px 0px 0px":"8px",overflow:"hidden",marginBottom:24}},eB=function(e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");i.prototype=Object.create(e&&e.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),Object.defineProperty(i,"prototype",{writable:!1}),e&&ex(i,e);var n,t,r=(n=ek(),function(){var e,t=eI(i);return e=n?Reflect.construct(t,arguments,eI(this).constructor):t.apply(this,arguments),function(e,n){if(n&&("object"==ey(n)||"function"==typeof n))return n;if(void 0!==n)throw TypeError("Derived constructors may only return object or undefined");return eS(e)}(this,e)});function i(){var e;if(!(this instanceof i))throw TypeError("Cannot call a class as a function");for(var n=arguments.length,t=Array(n),a=0;a<n;a++)t[a]=arguments[a];return ej(eS(e=r.call.apply(r,[this].concat(t))),"state",{startAnimation:!1}),ej(eS(e),"dismissTimer",null),ej(eS(e),"pinRef",(0,p.createRef)()),ej(eS(e),"pinDestinationRef",(0,p.createRef)()),ej(eS(e),"handleAnimationAndCompletion",function(){var n=e.props,t=n.onComplete,r=n.savePin,i=n.selectedBoardName;if(i){var a=e.startAnimation();Promise.all([a,r(i)]).then(function(e){t((function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,i,a,o,l=[],s=!0,c=!1;try{for(a=(t=t.call(e)).next;!(s=(r=a.call(t)).done)&&(l.push(r.value),2!==l.length);s=!0);}catch(e){c=!0,i=e}finally{try{if(!s&&null!=t.return&&(o=t.return(),Object(o)!==o))return}finally{if(c)throw i}}return l}}(e,2)||function(e,n){if(e){if("string"==typeof e)return eP(e,2);var t=({}).toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?eP(e,2):void 0}}(e,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())[1],i)}).catch(function(e){a.then(function(){var n;null==e||null==(n=e.onError)||n.call(e)})})}}),ej(eS(e),"startAnimation",function(){return new Promise(function(n){e.setState({startAnimation:!0},function(){e.dismissTimer=setTimeout(function(){n()},2600)})})}),e}return t=[{key:"componentWillUnmount",value:function(){this.dismissTimer&&clearTimeout(this.dismissTimer)}},{key:"componentDidUpdate",value:function(){var e=this.props.selectedBoardName,n=this.state.startAnimation;e&&!n&&this.handleAnimationAndCompletion()}},{key:"render",value:function(){var e=this,n=this.props,t=n.pinDominantColor,r=n.pinImageUrl,i=n.selectedBoardName,a=this.state.startAnimation;return(0,G.jsxs)(p.Fragment,{children:[(0,G.jsx)(b.Le,{top:eo.R$,zIndex:new b.Ry(3),children:(0,G.jsx)(b.xu,{alignItems:"center",color:a?"transparent":"default",display:"flex",justifyContent:"center",children:(0,G.jsx)(b.xu,{ref:this.pinRef,dangerouslySetInlineStyle:{__style:eT(a,this.pinRef,this.pinDestinationRef)},height:84,position:"relative",width:84,children:(0,G.jsx)(b.Ee,{alt:this.props.i18n._('Pin image', 'Pin image on repin page', 'Pin image on repin page'),color:t,fit:"cover",naturalHeight:84,naturalWidth:84,src:r})})})}),(0,G.jsx)(b.xu,{bottom:!0,color:"default",dangerouslySetInlineStyle:{__style:{pointerEvents:"none",opacity:+!!a,WebkitTransition:"opacity .4s ease-in-out",transition:"opacity .4s ease-in-out",zIndex:2}},left:!0,position:"fixed",right:!0,top:!0,children:(0,G.jsxs)(b.kC,{alignItems:"center",direction:"column",height:"100%",justifyContent:"center",children:[(0,G.jsx)(e_,{delay:1200,startAnimation:a,children:(0,G.jsx)(b.zd,{rounding:2,width:148,children:(0,G.jsx)(b.kC,{alignItems:"stretch",justifyContent:"start",wrap:!0,children:Array.from([,,,,]).map(function(n,t){var r=t<=1,i=t%2,a=0===t?e.pinDestinationRef:null;return(0,G.jsx)(b.xu,{ref:a,color:0===t?"transparent":"secondary",height:72,marginBottom:+!!r,marginEnd:+!i,width:72},t)})})})}),(0,G.jsx)(b.xu,{dangerouslySetInlineStyle:{__style:{opacity:+!!a,WebkitTransform:a?"translateY(0)":"translateY(20%)",transform:a?"translateY(0)":"translateY(20%)",WebkitTransition:"all .25s ease-in-out .5s",transition:"all .25s ease-in-out .5s",textAlign:"center",marginTop:"50px"}},paddingX:4,children:(0,G.jsx)(b.X6,{children:(0,O.nk)(this.props.i18n._('You saved your first Pin to {{ selectedBoardName }}!', 'First repin confirmation message', 'First repin confirmation message'),{selectedBoardName:i})})})]})})]})}}],function(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ew(r.key),r)}}(i.prototype,t),Object.defineProperty(i,"prototype",{writable:!1}),i}(p.PureComponent),eA=function(e){var n=(0,A.ZP)();return(0,G.jsx)(eB,ev(ev({},e),{},{i18n:n}))},eO=t(782251),eR=t(310916),eE=t(548286),eC=t(282919),eF=t(373950),eZ=t(428725),ez=t(145127),eL=t(975740),eK=t(793698),eD=t(588836),eN=t(681721),eM=t(87853),eH=t(629315),eU=t(978857),eW=t(744557),eQ=t(438556);function eV(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,i,a,o,l=[],s=!0,c=!1;try{if(a=(t=t.call(e)).next,0===n){if(Object(t)!==t)return;s=!1}else for(;!(s=(r=a.call(t)).done)&&(l.push(r.value),l.length!==n);s=!0);}catch(e){c=!0,i=e}finally{try{if(!s&&null!=t.return&&(o=t.return(),Object(o)!==o))return}finally{if(c)throw i}}return l}}(e,n)||function(e,n){if(e){if("string"==typeof e)return eq(e,n);var t=({}).toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?eq(e,n):void 0}}(e,n)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function eq(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=Array(n);t<n;t++)r[t]=e[t];return r}var eY=(void 0!==r||(r=t(148281)).hash&&"b3ec14d29962e56f80dd52e7e6d7a6d9"!==r.hash&&console.error("The definition of 'RepinAddSection_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),r);function eG(e){var n=e.createSectionAndRepin,t=e.errorMessage,r=e.i18n,i=e.pin,a=e.setErrorMessage,o=e.useRoundedCorners,l=eV((0,p.useState)(""),2),s=l[0],c=l[1];return(0,G.jsx)(eH.Z,{backButtonIcon:"arrow-back",errorMessage:t,name:s,onNameChange:function(e){a(""),c(e.target.value)},onNextButtonTouch:function(){n(s,r)},selectedPinIds:[i.entityId],useRoundedCorners:o})}function eJ(e){var n=e.boardId,t=e.isEditingPin,r=e.onSuccess,i=e.pinKey,a=e.pinBoardId,o=e.pinSectionId,l=e.trackingParams,s=e.useRoundedCorners,c=(0,T.Z)(eY,i),d=(0,f.I0)(),u=(0,_.s0)(),g=(0,A.ZP)(),h=(0,eM.dI)().showToast,m=(0,P.Z)(),y=(0,eQ.n)(),b=(0,z.Z)().checkExperiment,v=(0,x.cO)(),S=eV((0,p.useState)(""),2),k=S[0],I=S[1],w=(0,eO.Z)().showRepinConfirmation,B=function(e){return u(e)};return(0,G.jsx)(eG,{createSectionAndRepin:function(e){var i=function(e){return I(e.message_detail||e.message)};d((0,eU.Z)(n,[],e,m)).then(function(e){h(function(e){var n=e.hideToast;return(0,G.jsx)(j.Z,{onHide:n,text:g._('Section added!', ' - ', ' -- ')})});var s,p=e.resource_response.data;d((0,eC.w)({checkExperiment:b,i18n:g,logContextEvent:m,pinId:c.entityId,boardId:n,onSuccess:t?void 0:function(){v("Save",{pin_id:c.entityId}),r()},showRepinConfirmation:w,section:p,trackingParams:{clientTrackingParams:l,pinnedToBoardId:c.pinnedToBoard?c.pinnedToBoard.entityId:""},historyPush:B,savePinId:null!=(s=null==y?void 0:y.save)?s:function(){}})).then(function(){c&&a&&d((0,eW.q)({pinId:c.entityId,boardId:a,boardSectionId:o,clientTrackingParams:l})).then(function(){var e;return c.pinnedToBoard?u(null!=(e=c.pinnedToBoard.url)?e:"",{replace:!0}):void 0})}).catch(i)}).catch(i)},errorMessage:k,i18n:g,pin:c,setErrorMessage:I,useRoundedCorners:s})}var eX=t(30216),e$=t(841982),e0=t(657043),e1=t(536652),e2=t(72918),e3=t(448505),e8=t(7872),e5=t(370347),e7=t(352908),e6=t(189976),e9=t(831786),e4=t(936705),ne=t(206459),nn=t(696323),nt=t(482633);function nr(e){var n=e.pinId,t=e.handleSelected,r=e.surfaceOriginViewParameter,i=(0,A.ZP)(),a=(0,P.Z)();return(0,p.useEffect)(function(){a({view_parameter:3990,event_type:13,view_type:21,aux_data:{board_picker_surface_origin:r,pin_id:n}})},[]),(0,G.jsx)(b.iP,{onTap:function(){t(!1,null)},rounding:2,children:(0,G.jsxs)(b.xu,{alignItems:"center",column:12,"data-test-id":"board-picker-row",display:"flex",marginBottom:4,rounding:2,children:[(0,G.jsx)(b.xu,{alignItems:"center",color:"secondary",display:"flex",flex:"none",height:48,justifyContent:"center",rounding:2,width:48,children:(0,G.jsx)(b.JO,{accessibilityLabel:i._('Profile', 'save.ProfilePickerRow.IconAccessibilityLabel', 'Accessibility label for icon on option to save Pin to profile'),color:"default",icon:"history",size:22})}),(0,G.jsx)(b.xu,{direction:"column",display:"flex",justifyContent:"center",marginStart:2,overflow:"hidden",width:"100%",children:(0,G.jsx)(b.xv,{lineClamp:1,size:"400",weight:"bold",children:i._('Profile', 'save.ProfilePickerRow', 'Option to save Pin to profile')})})]})})}var ni=t(872555);function na(){var e=(0,ni.useRelayEnvironment)();return(0,p.useCallback)(function(n){e&&(0,ni.commitLocalUpdate)(e,function(e){var t;null==(t=e.get(n))||t.invalidateRecord()})},[e])}var no=function(e){return e.map(function(e){var n,t;return{board_title_id:String(e.id),board_title_kind:JSON.parse(null!=(n=e.recommendation_reason)?n:"{}").reason,board_title:String(e.name),board_title_score:JSON.parse(null!=(t=e.recommendation_reason)?t:"{}").score}})},nl=function(e){return"profile"===e?3990:"topChoices"===e?3988:3989};function ns(e){return(ns="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function nc(e,n,t,r,i,a,o){try{var l=e[a](o),s=l.value}catch(e){return void t(e)}l.done?n(s):Promise.resolve(s).then(r,i)}function nd(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function nu(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?nd(Object(t),!0).forEach(function(n){var r,i;r=n,i=t[n],(r=function(e){var n=function(e,n){if("object"!=ns(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,n||"default");if("object"!=ns(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}(e,"string");return"symbol"==ns(n)?n:n+""}(r))in e?Object.defineProperty(e,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[r]=i}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):nd(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var np=(void 0!==i||(i=t(764227)).hash&&"76b22cc5d658befe1dc27454d3aee77f"!==i.hash&&console.error("The definition of 'BoardPickerList_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),i),nf=function(e,n,t){return nu({field_set_key:"detailed",id:e,preserve_component_state:n},t?{orbac_subject_id:t}:Object.freeze({}))};function ng(e){var n,t,r=e.boards,i=e.boardsShortlist,a=void 0===i?[]:i,o=e.closeModal,l=e.dismissFlyout,s=e.navigate,c=e.isEditingPin,d=e.isFromToast,u=e.logContextEvent,g=e.onSelect,h=e.originalPinId,m=e.pinKey,y=e.pinBoardId,P=e.saveToProfileEnabled,S=e.surfaceOriginViewParameter,k=e.trackingParams,I=(0,A.ZP)(),B=(0,_.TH)(),O=(0,T.Z)(np,m),R=na(),E=(0,f.I0)(),C=(0,e7.Z)(),F=(0,eQ.n)(),Z=(0,q.m)(),L=(0,x.cO)(),K=B.state&&B.state.isOneTapSave,D=(0,z.Z)().checkExperiment,M=(0,eO.Z)(),H=M.showRepinConfirmation,U=M.showToast,W=function(e){return s(e)},V=a.map(function(e){return e.id});P&&V.unshift("PROFILE_PINS");var Y=(0,e3.Z)(),J=(0,w.Z)(),X=(0,e8.lJ)(J,Y),$=(0,e5.Yg)().logStat,ee=P&&D("mweb_curation_board_picker_reorder_profile_option").anyEnabled;(0,N.Z)(function(){V&&u({event_type:13,clientTrackingParams:k.clientTrackingParams,component:7,element:1001,view_type:3,aux_data:{pin_id:O.entityId,suggested_boards:V}})}),(0,p.useEffect)(function(){u({view_parameter:3988,event_type:13,view_type:21,aux_data:{board_picker_surface_origin:S,pin_id:O.entityId,board_picker_suggested_boards:JSON.stringify(no(a))}})},[a]);var en=function(e){var n=e.boardId,t=e.i18n,r=e.isQuickSave;return l(),$("main_pin_repin"),E((0,eC.w)({checkExperiment:D,i18n:t,isQuickSave:r,logContextEvent:u,pinId:O.entityId,boardId:n,onSuccess:function(){L("Save",{pin_id:O.entityId,is_promoted:O.isPromoted}),s(-1)},originalPinId:h,showRepinConfirmation:H,trackingParams:k,historyPush:W,suggestedBoardIds:V,savePinId:function(e,n){return null==Z||Z.save(e),null==F?void 0:F.save(e,n)}}))},et=function(e){return E((0,eE.Br)(e))},er=C({fn:(n=regeneratorRuntime.mark(function e(n,t,r){var i,a,l,u,p,f,h,m,_,b;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n&&t)){e.next=4;break}g(t,r),e.next=17;break;case 4:if(e.prev=4,c){e.next=11;break}return i=!(null!=t&&t.id),e.next=9,en({boardId:null==t?void 0:t.id,i18n:I,isQuickSave:i});case 9:if(a=e.sent)if(u=null==(l=a)?void 0:l.id,K){var P;P={boardId:null==t?void 0:t.id,localPinId:u,pinId:O.entityId,nodeId:O.__id},E((0,e4.a)(nu({},P)))}else null!=O&&O.entityId&&E((0,ne.Ur)({id:O.entityId,nodeId:O.__id,boardId:t.id,title:null!=(p=t.name)?p:"",url:null!=(f=t.url)?f:"",localPinId:u}));case 11:c&&(h=y,_=nu({board_id:m=null==t?void 0:t.id,id:O.entityId},X?{orbac_subject_id:X}:Object.freeze({})),b=h!==m,v.Z.create("PinResource",_).callUpdate().then(function(e){var n,t,r,i;b&&m&&h&&(n={selectedPinIds:[O.entityId],source:{boardId:h,sectionId:void 0},target:{boardId:m,sectionId:void 0}},E((0,e9.S)(n)),et({boardId:m,sectionId:void 0,increment:1}),et({boardId:h,sectionId:void 0,increment:-1}),J.isAuth&&J.id&&!h&&(t=J.id,r=O.entityId,E((0,e6.EX)({feedId:t,feedType:nn.Z.BOARDLESS_PINS,itemIds:[r],itemType:"pin"})))),E((0,e1.b)("PinResource",{options:_})),i=O.entityId,E((0,e2.jB)("PinResource",nf(i,!0,X))),R(O.__id),E((0,e2.Sr)("PinResource",nf(e.resource_response.data.id,!1,X),e)),s(-1)}),d&&o()),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(4),U(function(n){var t=n.hideToast;return(0,G.jsx)(j.Z,{onHide:t,text:(0,e0.Z)(e.t0,"message")||I._('Sorry! Something went wrong on our end.', 'error during repin', 'error during repin'),type:"error"})});case 17:case"end":return e.stop()}},e,null,[[4,14]])}),t=function(){var e=this,t=arguments;return new Promise(function(r,i){var a=n.apply(e,t);function o(e){nc(a,r,i,o,l,"next",e)}function l(e){nc(a,r,i,o,l,"throw",e)}o(void 0)})},function(e,n,r){return t.apply(this,arguments)}),modalHeader:(0,Q.Bx)(I)}),ei=(0,G.jsx)(nr,{handleSelected:function(e,n){return er(e,nu(nu({},n),{},{gridIndex:0}),"profile")},pinId:O.entityId,surfaceOriginViewParameter:S});return(0,G.jsxs)(b.kC,{direction:"column",gap:4,children:[(0,G.jsxs)(b.xu,{children:[P&&!ee&&ei,a.length>0&&(0,G.jsx)(b.xu,{marginBottom:4,marginTop:2,children:(0,G.jsx)(b.X6,{accessibilityLevel:3,size:"300",children:(0,G.jsx)(b.xv,{inline:!0,children:I._('Top choices', 'boardPicker.header.topChoices', 'Header of a list of user\'s boards')})})}),a.map(function(e,n){return(0,G.jsx)(nt.Z,{boardId:e.id,onBoardSelected:function(t){return er(t,nu(nu({},e),{},{gridIndex:n}),"topChoices")},showSingleBoardRep:!0},e.id)})]}),(0,G.jsxs)(b.xu,{"data-test-id":"all-boards-list",children:[(0,G.jsx)(b.xu,{marginBottom:4,children:(0,G.jsx)(b.X6,{accessibilityLevel:3,size:"300",children:(0,G.jsx)(b.xv,{inline:!0,children:I._('All boards', 'RepinFlow.BoardPickerList.AllBoards', 'Board picker list all boards title')})})}),r.map(function(e,n){return(0,G.jsx)(nt.Z,{boardId:e.id,onBoardSelected:function(t){return er(t,nu(nu({},e),{},{gridIndex:n}),"allBoards")},showSingleBoardRep:!0},e.id)}),ee&&ei]})]})}var nh=t(366859),nm=function(){return(0,G.jsx)(b.xu,{color:"secondary",display:"inlineBlock",height:60,minWidth:60,overflow:"hidden",position:"relative",rounding:4,children:(0,G.jsxs)(p.Fragment,{children:[(0,G.jsx)(b.xu,{color:"default",dangerouslySetInlineStyle:{__style:{left:"50%"}},height:"100%",position:"absolute",width:1}),(0,G.jsx)(b.xu,{color:"default",dangerouslySetInlineStyle:{__style:{top:"50%"}},height:1,position:"absolute",right:!0,width:"50%"})]})})},n_=t(611251),ny=t(890774);function nb(e,n,t,r,i,a,o){try{var l=e[a](o),s=l.value}catch(e){return void t(e)}l.done?n(s):Promise.resolve(s).then(r,i)}var nv=(void 0!==a||(a=t(853213)).hash&&"69ffcdea57a7778d2ebbcd41c276c0d0"!==a.hash&&console.error("The definition of 'BoardTitleSuggestionList_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),a),nP=function(e){var n=e.allSuggestions,t=e.handleCreateBoard,r=e.index,i=e.isFBC,a=e.logContextEvent,o=e.pinViewParameter;t(),a({aux_data:{board_title_list:JSON.stringify(n),is_fbc:i.toString(),selected_board_title_index:r},component:7,element:23,event_type:102,view_parameter:o,view_type:3})};function nx(e){var n,t,r,i,a,o=e.isEditingPin,l=e.isFirstBoard,s=e.isFromToast,c=e.navigate,d=e.onFirstBoardCreate,u=e.originalPinId,g=e.pinBoardId,h=e.pinKey,m=e.pinSectionId,_=e.surfaceOriginViewParameter,y=e.titleSuggestions,v=e.clientTrackingParams,x=(0,P.Z)(),S=(0,ny.Z)(),k=(0,A.ZP)(),I=(0,e7.Z)(),j=(0,eO.Z)().showRepinConfirmation,w=(0,f.I0)(),B=(0,T.Z)(nv,h),O=B.entityId,R=(0,n_.A)({hasRichMetadata:!!B.richMetadata,hasRichMetadataProducts:!!(null!=(r=B.richMetadata)&&r.products),hasRichMetadataArticle:!!(null!=(i=B.richMetadata)&&i.article),hasRichMetadataRecipe:!!(null!=(a=B.richMetadata)&&a.recipe)}),E=(0,eQ.n)(),C=(0,q.m)(),F=(0,eL.gC)(),Z=(0,U.Z)(v,B.trackingParams),L=function(e){return c(e)},K=(0,z.Z)().checkExperiment;(0,p.useEffect)(function(){x({view_parameter:3992,component:13282,event_type:13,view_type:21,aux_data:{board_picker_surface_origin:_,pin_id:O,board_title_suggestions:y}})},[]);var D=function(e){w((0,eW.q)({pinId:O,boardId:g||"",boardSectionId:m,clientTrackingParams:e}))},N=(n=regeneratorRuntime.mark(function e(){var n,t,r,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D(Z);case 2:t=null==(n=B.pinnedToBoard)?void 0:n.url,B.section?c(null!=(i="".concat(null!=t?t:"").concat(null!=(r=B.section.slug)?r:"","/"))?i:"",{replace:!0}):c(null!=t?t:"",{replace:!0});case 4:case"end":return e.stop()}},e)}),t=function(){var e=this,t=arguments;return new Promise(function(r,i){var a=n.apply(e,t);function o(e){nb(a,r,i,o,l,"next",e)}function l(e){nb(a,r,i,o,l,"throw",e)}o(void 0)})},function(){return t.apply(this,arguments)}),M=function(e){S({boardCreateOptions:{name:e,initial_pin_client_tracking_params:[v],privacy:"public"}}).then(function(n){var t=n||{},r=t.url,i=void 0===r?"":r,a=t.id;w((0,eC.w)({checkExperiment:K,i18n:k,logContextEvent:x,originalPinId:u,pinId:O,boardId:a,trackingParams:{clientTrackingParams:Z,pinnedToBoardId:a},historyPush:L,savePinId:function(e,n){return null==C||C.save(e),null==E?void 0:E.save(e,n)}})).then(function(){o?s?c(-1):N():c(-1);var n=(0,eN.Z)(i,e,k),t=n.href,r=n.text,l=(0,ei.Z)({boardId:a,getReduxBoard:F,pinId:O,viewType:3}),d=l.duration,u=l.text,p=l.thumbnail;j(function(e){var n=e.hideToast;return(0,G.jsx)(ea.Z,{duration:d,href:t,onHide:n,text:u||r,thumbnail:p})})})})},H=I({fn:function(e,n,t){x({view_parameter:3992,component:13282,element:23,event_type:101,view_type:91,aux_data:{board_picker_surface_origin:_,pin_id:O,board_title_suggestions:y}}),nP({allSuggestions:t,handleCreateBoard:function(){l?d(n):M(n)},index:e,isFBC:l,logContextEvent:x,pinViewParameter:R})},modalHeader:(0,Q.Bb)(k)});return y?y.map(function(e,n,t){return(0,G.jsx)(b.xu,{children:(0,G.jsx)(nh.Z,{dataTestId:"board-suggestion-row-button",onTouch:function(){return H(n,e,t)},pressState:"none",rounding:2,children:(0,G.jsxs)(b.xu,{alignItems:"center",display:"flex",paddingY:2,rounding:2,children:[(0,G.jsx)(nm,{}),(0,G.jsx)(b.xu,{column:10,marginStart:3,children:(0,G.jsx)(b.X6,{size:"400",children:e})})]})},n)},n)}):null}var nS=(void 0!==o||(o=t(182522)).hash&&"a8967078f1de7ce3a263a224d0d0e710"!==o.hash&&console.error("The definition of 'useFetchBoardTitleSuggestionsQuery' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),o),nk=function(e){var n,t,r,i=(0,g.useLazyLoadQuery)(nS,{pinId:e}).v3GetPinQuery;if(null==i||null==(n=i.error)?void 0:n.message)throw null==i?void 0:i.error;return(null==i||null==(t=i.data)||null==(r=t.boardTitleSuggestions)?void 0:r.map(function(e){return e.title}).filter(Boolean))||[]},nI=(void 0!==l||(l=t(205725)).hash&&"475036dcb56a51d3552313200b8c9d45"!==l.hash&&console.error("The definition of 'RepinBoardPicker_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),l);function nj(e){var n=e.allBoards,t=e.saveToProfileEnabled,r=e.boardsShortlist,i=e.closeModal,a=e.dismissFlyout,o=e.navigate,l=e.isEditingPin,s=e.isFromToast,c=e.onSelect,d=e.originalPinId,u=e.shouldUseSaveToProfileBehavior,f=e.pin,g=e.pinBoardId,h=e.pinSectionId,m=e.trackingParams,_=(0,P.Z)();return(0,G.jsx)(p.Fragment,{children:(0,G.jsx)(ng,{boards:n,boardsShortlist:r,closeModal:i,dismissFlyout:a,isEditingPin:l,isFromToast:s,logContextEvent:_,navigate:o,onSelect:c,originalPinId:d,pinBoardId:g,pinKey:f,pinSectionId:h,saveToProfileEnabled:t||u,trackingParams:m})})}function nw(e){var n=e.allBoards,t=e.boardsShortlist,r=e.closeModal,i=e.saveToProfileEnabled,a=e.dismissFlyout,o=e.navigate,l=e.isEditingPin,s=e.isFirstRepinExperience,c=e.isFromToast,d=e.onFirstBoardCreate,u=e.originalPinId,p=e.onSelect,f=e.shouldUseSaveToProfileBehavior,g=e.pin,h=e.pinBoardId,m=e.pinSectionId,_=e.trackingParams,y=e.titleSuggestions,v=(0,A.ZP)(),x=s||0===n.length&&!i,S=(0,P.Z)(),k=function(){return(0,G.jsx)(nx,{clientTrackingParams:_.clientTrackingParams,isEditingPin:l,isFirstBoard:x,isFromToast:c,navigate:o,onFirstBoardCreate:d,originalPinId:u,pinBoardId:h,pinKey:g,pinSectionId:m,titleSuggestions:y})};return x&&!f?(0,G.jsxs)(b.xu,{paddingX:1,children:[(0,G.jsx)(b.xu,{marginBottom:4,children:(0,G.jsx)(b.xv,{children:v._('Tap to create your first board', 'CTA for board title suggestions', 'Explain to user that tapping on suggestion creates a board')})}),k()]}):(0,G.jsxs)(b.xu,{marginBottom:4,children:[(0,G.jsx)(ng,{boards:n,boardsShortlist:t,closeModal:r,dismissFlyout:a,isEditingPin:l,isFromToast:c,logContextEvent:S,navigate:o,onSelect:p,originalPinId:u,pinBoardId:h,pinKey:g,pinSectionId:m,saveToProfileEnabled:i||f,trackingParams:_}),y?(0,G.jsxs)(b.xu,{children:[(0,G.jsx)(b.xu,{paddingY:1,children:(0,G.jsx)(e$.Z,{children:(0,G.jsx)(b.iz,{})})}),(0,G.jsx)(b.xu,{paddingY:4,children:(0,G.jsx)(b.xv,{children:v._('Or tap to create a new board', 'boardPicker.suggestedBoardName.title', 'Title for repin page suggested board name section')})}),k()]}):(0,G.jsx)(b.xu,{paddingY:6,children:(0,G.jsx)(b.xH,{accessibilityLabel:v._('Loading repin page content', ' - ', ' -- '),show:!0})})]})}function nT(e){var n,t=e.allBoards,r=e.boardsShortlist,i=e.closeModal,a=e.saveToProfileEnabled,o=e.dismissFlyout,l=e.navigate,s=e.isEditingPin,c=e.isFetchingBoards,d=e.isFirstRepinExperience,u=e.isFromToast,p=e.onFirstBoardCreate,f=e.onSelect,g=e.originalPinId,h=e.shouldUseSaveToProfileBehavior,m=e.pinKey,_=e.pinBoardId,y=e.pinDescription,v=e.pinSectionId,x=e.surfaceOriginViewParameter,S=e.saveSessionId,k=(0,T.Z)(nI,m),I=nk(k.entityId),j=(0,A.ZP)(),w=(0,P.Z)(),B={clientTrackingParams:(0,eX.Z)({pinKey:k}),pinnedToBoardId:k.pinnedToBoard?k.pinnedToBoard.entityId:""},O=function(e,n){w({event_type:101,component:13282,clientTrackingParams:B.clientTrackingParams,object_id_str:e.id,view_type:91,view_parameter:nl(n),aux_data:{board_id:e.id,board_component:nl(n),board_picker_surface_origin:x,board_picker_suggested_boards:JSON.stringify(no(r)),board_title_suggestions:I,board_index:e.gridIndex,is_profile_save:"profile"===n,pin_id:k.entityId,save_session_id:S}}),f(e,n)};if(0===t.length&&c)return(0,G.jsx)(b.xu,{paddingY:2,children:(0,G.jsx)(b.xH,{accessibilityLabel:j._('Loading repin page content', ' - ', ' -- '),show:!0})});switch((0,(0,z.Z)().checkExperiment)("mweb_curation_board_picker_tune_complex_board_picker").group){case"enabled_8":n=8;break;case"enabled_9":n=9;break;case"enabled_11":n=11;break;case"enabled_12":n=12;break;default:n=10}return t.length>=n?(0,G.jsx)(nj,{allBoards:t,boardsShortlist:r,closeModal:i,dismissFlyout:o,isEditingPin:s,isFromToast:u,navigate:l,onSelect:O,originalPinId:g,pin:k,pinBoardId:_,pinDescription:y,pinSectionId:v,saveToProfileEnabled:a,shouldUseSaveToProfileBehavior:h,trackingParams:B}):(0,G.jsx)(nw,{allBoards:t,boardsShortlist:r,closeModal:i,dismissFlyout:o,isEditingPin:s,isFirstRepinExperience:d,isFromToast:u,navigate:l,onFirstBoardCreate:p,onSelect:O,originalPinId:g,pin:k,pinBoardId:_,pinDescription:y,pinSectionId:v,saveToProfileEnabled:a,shouldUseSaveToProfileBehavior:h,titleSuggestions:I,trackingParams:B})}var nB=t(394962),nA=t(611282),nO=(void 0!==s||(s=t(727382)).hash&&"1612c2df94f42990b3d4f6ccede72a70"!==s.hash&&console.error("The definition of 'RepinCreateBoardButton_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),s);function nR(e){var n=e.isEditingPin,t=e.isFirstBoardCreateActive,r=e.pinKey,i=e.pinBoardId,a=e.pinDescription,o=e.pinSectionId,l=e.trackingParams,s=e.onTouch,c=e.useIconWithBackground,d=(0,A.ZP)(),u=(0,T.Z)(nO,r),p=(0,nA.Z)({href:{pathname:"/board/create/".concat(u.entityId,"/"),state:{isFirstBoardCreateActive:t,pinnedToBoardId:u.pinnedToBoard?u.pinnedToBoard.entityId:"",pinDescription:a,trackingParams:l,isEditingPin:n,pinBoardId:i,pinSectionId:o}}});return(0,G.jsx)(nB.Z,{hasTopShadow:c,height:c?void 0:70,children:(0,G.jsx)(b.iP,{onTap:function(e){var n=e.event;null==s||s(),p({event:n})},children:(0,G.jsxs)(b.xu,{alignItems:"center","data-test-id":"repinCreateBoardButton",display:"flex",paddingX:+!!c,paddingY:+!c,children:[c?(0,G.jsx)(b.xu,{color:"secondary",dangerouslySetInlineStyle:{__style:{padding:"14px"}},rounding:2,children:(0,G.jsx)(b.JO,{accessibilityLabel:d._('Create board button', ' - ', ' -- '),color:"default",icon:"add",size:20})}):(0,G.jsx)(b.JO,{accessibilityLabel:d._('Create board button', ' - ', ' -- '),color:"error",icon:"add-circle",size:38}),(0,G.jsx)(b.xu,{marginStart:c?2:3,children:(0,G.jsx)(b.xv,{weight:"bold",children:d._('Create board', 'Create new board to Pin to', 'Create new board to Pin to')})})]})})})}var nE=t(120651),nC=t(993127);function nF(e){return(nF="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function nZ(e,n,t,r,i,a,o){try{var l=e[a](o),s=l.value}catch(e){return void t(e)}l.done?n(s):Promise.resolve(s).then(r,i)}function nz(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function nL(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?nz(Object(t),!0).forEach(function(n){var r,i;r=n,i=t[n],(r=function(e){var n=function(e,n){if("object"!=nF(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,n||"default");if("object"!=nF(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}(e,"string");return"symbol"==nF(n)?n:n+""}(r))in e?Object.defineProperty(e,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[r]=i}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):nz(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var nK=(void 0!==c||(c=t(428988)).hash&&"f0b2fbadfba92480a2077999a000a308"!==c.hash&&console.error("The definition of 'RepinSectionPicker_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),c),nD=function(e,n,t){return nL({field_set_key:"detailed",id:e,preserve_component_state:n},t?{orbac_subject_id:t}:Object.freeze({}))};function nN(e){var n,t,r,i,a=e.boardId,o=e.navigate,l=e.location.search,s=e.showSectionRep,c=e.pinKey,d=e.onSuccess,u=e.trackingParams,g=e.dismissFlyout,h=e.boardViewParameterType,m=e.surfaceOriginViewParameter,_=(0,f.I0)(),y=(0,A.ZP)(),b=(0,T.Z)(nK,c),S=na(),k=new URLSearchParams(l),I=k.get("isEditingPin"),j=null!=(r=k.get("pinBoardId"))?r:"",B=null!=(i=k.get("pinSectionId"))?i:"",O=(0,U.Z)(u,b.trackingParams),R=(0,P.Z)(),E=(0,eQ.n)(),C=(0,z.Z)().checkExperiment,F=function(e){return o(e)},Z=(0,e3.Z)(),L=(0,w.Z)(),K=(0,e8.lJ)(L,Z),D=(0,x.cO)(),N=(0,eO.Z)().showRepinConfirmation;(0,p.useEffect)(function(){R({event_type:13,clientTrackingParams:O,component:13282,object_id_str:a,view_type:275,aux_data:{board_id:a,board_picker_surface_origin:m,board_title_suggestions:[],board_index:0,is_profile_save:!1,pin_id:b.entityId,board_component:h}})});var M=function(e){var n;g(),_((0,eC.w)({checkExperiment:C,i18n:y,logContextEvent:R,pinId:b.entityId,boardId:a,onSuccess:I?void 0:function(){D("Save",{pin_id:b.entityId,is_promoted:b.isPromoted}),d()},showRepinConfirmation:N,section:e,trackingParams:{clientTrackingParams:O,pinnedToBoardId:b.pinnedToBoard?b.pinnedToBoard.entityId:""},historyPush:F,savePinId:null!=(n=null==E?void 0:E.save)?n:function(){}})).then(function(){if(e){var n;_((0,nE.Z)(null!=(n=e.id)?n:""))}})},H=function(e){return _((0,eE.Br)(e))},W=(n=regeneratorRuntime.mark(function e(n,t){var r,i,a,l,s,c,d,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&R({event_type:101,clientTrackingParams:O,component:13282,element:36,object_id_str:n,view_type:91,view_parameter:3133,aux_data:{board_id:n,board_picker_surface_origin:m,board_title_suggestions:[],board_index:0,is_profile_save:!1,pin_id:b.entityId,section_id:null!=(r=null==t?void 0:t.id)?r:"",board_component:h}}),I){e.next=4;break}return e.next=4,M(t);case 4:I&&(i=j,a=n,l=B,c=nL({board_id:a,board_section_id:s=null==t?void 0:t.id,id:b.entityId},K?{orbac_subject_id:K}:Object.freeze({})),d=i!==a,u=l!==s,v.Z.create("PinResource",c).callUpdate().then(function(e){var n,t,r,p;(d||u)&&(n={selectedPinIds:[b.entityId],source:{boardId:i,sectionId:l||null},target:{boardId:a,sectionId:s}},_((0,e9.S)(n)),H({boardId:a,sectionId:s,increment:1}),H({boardId:i,sectionId:l,increment:-1}),L.isAuth&&L.id&&!i&&(t=L.id,r=b.entityId,_((0,e6.EX)({feedId:t,feedType:nn.Z.BOARDLESS_PINS,itemIds:[r],itemType:"pin"})))),_((0,e1.b)("PinResource",{options:c})),p=b.entityId,_((0,e2.jB)("PinResource",nD(p,!0,K))),S(b.__id),_((0,e2.Sr)("PinResource",nD(e.resource_response.data.id,!1,K),e)),o(-2)}));case 5:case"end":return e.stop()}},e)}),t=function(){var e=this,t=arguments;return new Promise(function(r,i){var a=n.apply(e,t);function o(e){nZ(a,r,i,o,l,"next",e)}function l(e){nZ(a,r,i,o,l,"throw",e)}o(void 0)})},function(e,n){return t.apply(this,arguments)});return(0,G.jsx)(nC.Z,{boardId:a,repin:W,showSectionRep:s})}function nM(e){return(nM="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function nH(e,n,t,r,i,a,o){try{var l=e[a](o),s=l.value}catch(e){return void t(e)}l.done?n(s):Promise.resolve(s).then(r,i)}function nU(e){return function(){var n=this,t=arguments;return new Promise(function(r,i){var a=e.apply(n,t);function o(e){nH(a,r,i,o,l,"next",e)}function l(e){nH(a,r,i,o,l,"throw",e)}o(void 0)})}}function nW(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function nQ(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?nW(Object(t),!0).forEach(function(n){nJ(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):nW(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}function nV(e,n){return(nV=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,n){return e.__proto__=n,e})(e,n)}function nq(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function nY(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(nY=function(){return!!e})()}function nG(e){return(nG=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function nJ(e,n,t){return(n=nX(n))in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function nX(e){var n=function(e,n){if("object"!=nM(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,n||"default");if("object"!=nM(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}(e,"string");return"symbol"==nM(n)?n:n+""}var n$=(void 0!==d||(d=t(713443)).hash&&"b1432f4e80d112c155f930f7ed3760cd"!==d.hash&&console.error("The definition of 'RepinPage_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),d),n0=(void 0!==u||(u=t(252031)).hash&&"76093586a269ca0330e25a57bd33f665"!==u.hash&&console.error("The definition of 'RepinPageQuery' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),u);function n1(e){var n=e.children,t=(0,f.v9)(function(e){var n=e.session;return 72+((0,R.Rq)(n.userAgentPlatform)?R.Vf:0)});return(0,G.jsx)(b.xu,{dangerouslySetInlineStyle:{__style:{paddingBottom:t}},children:n})}var n2=function(e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");i.prototype=Object.create(e&&e.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),Object.defineProperty(i,"prototype",{writable:!1}),e&&nV(i,e);var n,t,r=(n=nY(),function(){var e,t=nG(i);return e=n?Reflect.construct(t,arguments,nG(this).constructor):t.apply(this,arguments),function(e,n){if(n&&("object"==nM(n)||"function"==typeof n))return n;if(void 0!==n)throw TypeError("Derived constructors may only return object or undefined");return nq(e)}(this,e)});function i(){var e;if(!(this instanceof i))throw TypeError("Cannot call a class as a function");for(var n=arguments.length,t=Array(n),a=0;a<n;a++)t[a]=arguments[a];return nJ(nq(e=r.call.apply(r,[this].concat(t))),"state",{boardType:"allBoards",dupeWarningDismissed:!1,pinDescription:(e.props.pin.description||"").trim(),saved:!1,suggestedBoardName:void 0,trackingParams:(e.props.location.state||{}).trackingParams||"",warningAnchor:void 0,windowInnerHeight:"undefined"!=typeof window?window.innerHeight:0,saveSessionId:(0,y.Z)()}),nJ(nq(e),"saved",function(){return e.setState({saved:!0})}),nJ(nq(e),"onResize",function(){e.setState({windowInnerHeight:window.innerHeight})}),nJ(nq(e),"handleBackButtonTouch",function(){var n=e.props;(0,n.logContextEvent)({view_type:21,view_parameter:87,component:7,element:n.match.params.boardId?34:75,event_type:102})}),nJ(nq(e),"handleDismissWarningFlyout",function(){return e.setState({dupeWarningDismissed:!0})}),nJ(nq(e),"handleFirstBoardCreateOnSuccess",function(n,t){var r=e.props,i=r.closeupExperience,a=r.completeExperience,o=r.getReduxBoard,l=r.navigate,s=r.i18n,c=r.pinId,d=r.repinExperience,u=r.showRepinConfirmation,p=r.mountAfterActionPlacement,f=n.boardId,g=n.boardUrl,h=(0,eN.Z)(g,t,s),m=h.href,_=h.text,y=(0,ei.Z)({boardId:f,getReduxBoard:o,isFBC:!0,pinId:c,viewType:21}),b=y.duration,v=y.text,P=y.thumbnail;l(-1),u(function(e){var n=e.hideToast;return(0,G.jsx)(ea.Z,{duration:b,href:m,onHide:n,text:v||_,thumbnail:P})}),i&&i.placement_id&&503459===i.experience_id&&a(i.placement_id,i.experience_id),d&&W(d,501032)&&a(d.placement_id,d.experience_id),p("Save",{pin_id:e.props.pin.entityId,is_promoted:e.props.pin.isPromoted})}),nJ(nq(e),"handleSetSelectedBoard",function(n){var t,r=e.props,i=r.navigate,a=r.pin,o=r.location,l=e.state.trackingParams;e.isFirstBoardCreateActive()||i("/board/create/".concat(a.entityId,"/").concat(n,"/"),{state:{trackingParams:l},from:null==(t=o.state)?void 0:t.from}),e.setState({suggestedBoardName:n})}),nJ(nq(e),"handleFirstBoardCreate",function(n){var t,r=e.props,i=r.checkExperiment,a=r.createBoard,o=r.dispatch,l=r.navigate,s=r.location,c=r.logContextEvent,d=r.i18n,u=r.match,p=r.notifDetailRepinContext,f=r.pin,g=r.repinContext,h=r.showToast,m=e.state.trackingParams,_=u.params.id,y=(0,U.Z)((s.state||{}).trackingParams),b=null!=(t=new URLSearchParams(s.search).get("originalPinId"))?t:"",v=(0,U.Z)(m,f.trackingParams);return a({boardCreateOptions:{name:n,initial_pin_client_tracking_params:[y],privacy:"public"},deprecatedSchemaForNormalization:eZ.IY}).then(function(e){var n=e||{},t=n.url,r=n.id;return _&&o((0,eC.w)({checkExperiment:i,i18n:d,logContextEvent:c,originalPinId:b,pinId:_,boardId:r,trackingParams:{clientTrackingParams:v,pinnedToBoardId:r},historyPush:function(e){return l(e)},savePinId:function(e,n){return null==p||p.save(e),null==g?void 0:g.save(e,n)}})),{boardId:r,boardUrl:void 0===t?"":t}},function(n){throw{onError:function(){l(-1),h(function(t){var r=t.hideToast;return(0,G.jsx)(j.Z,{onHide:r,text:n.message||e.props.i18n._('Sorry! Something went wrong on our end.', 'error creating board', 'error creating board'),type:"error"})})}}})}),nJ(nq(e),"handleSelectBoard",function(n,t){var r,i,a,o,l=e.props,s=l.navigate,c=l.pin,d=l.location,u=d.search,p=e.state.trackingParams,f=new URLSearchParams(u),g=!!f.get("isEditingPin"),h=null!=(r=f.get("pinBoardId"))?r:"",m=null!=(i=f.get("pinSectionId"))?i:"";e.setState(function(){return{boardType:t}}),g?s("/pin/".concat(c.entityId,"/repin/").concat(n.id,"/?isEditingPin=true&pinBoardId=").concat(h,"&pinSectionId=").concat(m),{trackingParams:p,from:null==(a=d.state)?void 0:a.from}):s("/pin/".concat(c.entityId,"/repin/").concat(n.id,"/"),{},{trackingParams:p,from:null==(o=d.state)?void 0:o.from})}),nJ(nq(e),"handleClickAddSectionButton",function(){var n,t,r,i,a=e.props,o=a.pin,l=a.navigate,s=a.match.params.boardId,c=a.location,d=a.logContextEvent,u=a.boardsShortlist,p=a.titleSuggestions;if(s){var f=new URLSearchParams(c.search),g=!!f.get("isEditingPin"),h=null!=(n=f.get("pinBoardId"))?n:"",m=null!=(t=f.get("pinSectionId"))?t:"";d({view_type:91,view_parameter:3132,component:13282,element:10306,event_type:101,aux_data:{board_picker_surface_origin:153,board_title_suggestions:p||[],pin_id:o.entityId,board_component:3132,board_picker_suggested_boards:JSON.stringify(no(u))}}),g?l("/pin/".concat(o.entityId,"/repin/").concat(s,"/add/?isEditingPin=true&pinBoardId=").concat(h,"&pinSectionId=").concat(m),{from:null==(r=c.state)?void 0:r.from}):l("/pin/".concat(o.entityId,"/repin/").concat(s,"/add/"),{state:{from:null==(i=c.state)?void 0:i.from}})}}),nJ(nq(e),"handleRepinToExistingSectionSuccess",function(){e.props.navigate(-2)}),nJ(nq(e),"handleRepinToNewSectionSuccess",function(){e.props.navigate(-3)}),nJ(nq(e),"handleRepinCreateBoardButtonTouch",function(){var n=e.props,t=n.pin,r=n.logContextEvent,i=n.boardsShortlist;r({view_type:91,view_parameter:87,component:13282,element:249,event_type:101,aux_data:{board_picker_surface_origin:153,board_title_suggestions:n.titleSuggestions||[],pin_id:t.entityId,board_component:87,board_picker_suggested_boards:JSON.stringify(no(i))}})}),nJ(nq(e),"renderCreateScreen",function(){var n,t,r=e.props,i=r.pin,a=r.location.search,o=r.match.params.boardId,l=e.state.trackingParams,s=new URLSearchParams(a),c=!!s.get("isEditingPin"),d=null!=(n=s.get("pinBoardId"))?n:"",u=null!=(t=s.get("pinSectionId"))?t:"";return!!o&&(0,G.jsx)(eJ,{boardId:o,isEditingPin:c,onSuccess:e.handleRepinToNewSectionSuccess,pinBoardId:d,pinKey:i,pinSectionId:u,trackingParams:l,useRoundedCorners:!0})}),nJ(nq(e),"isFirstBoardCreateActive",function(){var n=e.props,t=n.allBoards,r=n.isFetchingBoards,i=n.saveToProfileEnabled;return!!W(n.repinExperience,501032)||!r&&0===t.length&&!i}),nJ(nq(e),"isBoardCreateEduActive",function(){return W(e.props.repinExperience,501021)}),nJ(nq(e),"completeBoardCreateEduExperience",function(){var n=e.props,t=n.completeExperience,r=n.repinExperience;r&&e.isBoardCreateEduActive()&&t(r.placement_id,r.experience_id)}),nJ(nq(e),"renderPicker",function(){var n,t,r,i,a,o=e.props,l=o.allBoards,s=o.saveToProfileEnabled,c=o.boardsShortlist,d=o.navigate,u=o.isFetchingBoards,p=o.location,f=o.shouldUseSaveToProfileBehavior,g=o.pin,h=o.match.params.boardId,m=o.location.search,_=e.state,y=_.pinDescription,v=_.dupeWarningDismissed,P=_.saved,x=_.suggestedBoardName,S=_.trackingParams,k=_.warningAnchor,I=_.boardType,j=_.saveSessionId,w=y.trim(),T=g.pinnedToBoard,B=T?(0,O.nk)(e.props.i18n._('Psst! You already saved this Pin to {{ board_name }}', 'Toast for already having repinned pin', 'Toast for already having repinned pin'),{board_name:T.name}).join(" "):null,A=g.dominantColor,R=g.imageSpec_236x,E=R?R.url:"",C=new URLSearchParams(m),z=!!C.get("isEditingPin"),L=null!=(n=C.get("pinBoardId"))?n:"",K=null!=(t=C.get("pinSectionId"))?t:"",D=!!C.get("isFromToast"),N=null!=(r=C.get("originalPinId"))?r:"",U=e.props.i18n._('Save Pin to', 'RepinPage.Section.Header.Title', 'title for section selection in repin flow'),W=new b.Ry(2),q=e.props.i18n._('Create board', 'Title for first board create', 'Title for first board create. NOTE: we are testing using "collections" in place of "boards" for new users'),Y=e.props.i18n._('Save to board', 'boardPicker.header', 'Title for repin page'),J=h?U:0!==l.length||u||s?Y:q;return(0,G.jsxs)(Z.default,{hasFixedHeader:!0,children:[(0,G.jsx)(H.Z,{text:J}),(0,G.jsx)(F.default,{useRoundedCorners:!0,zIndex:W,children:(0,G.jsxs)(b.kC,{alignItems:"center",height:40,justifyContent:"start",children:[(0,G.jsx)(b.xu,{column:2,children:(0,G.jsx)(eD.Z,{alignIconLeft:!0,color:"darkGray",icon:h?"arrow-back":"cancel",onTouch:e.handleBackButtonTouch,size:"sm"})}),(0,G.jsx)(b.xu,{column:8,children:(0,G.jsx)(b.xu,{"data-test-id":"repin-page-title",children:(0,G.jsx)(b.X6,{accessibilityLevel:2,align:"center",size:"300",children:(0,G.jsx)(b.xv,{inline:!0,weight:"bold",children:J})})})}),(0,G.jsx)(b.xu,{column:2})]})}),g.imageSpec_236x&&(e.isFirstBoardCreateActive()?(0,G.jsx)(eA,{onComplete:e.handleFirstBoardCreateOnSuccess,pinDominantColor:null!=A?A:"",pinImageUrl:null!=E?E:"",savePin:e.handleFirstBoardCreate,selectedBoardName:x}):null),(0,G.jsx)(n1,{children:h?(0,G.jsx)(nN,{boardId:h,boardViewParameterType:nl(I),dismissFlyout:e.saved,location:p,navigate:d,onSuccess:e.handleRepinToExistingSectionSuccess,pinKey:g,showSectionRep:!0,surfaceOriginViewParameter:153,trackingParams:S}):(0,G.jsx)(nT,{allBoards:l,boardsShortlist:c,closeModal:e.handleBackButtonTouch,dismissFlyout:e.saved,isEditingPin:z,isFetchingBoards:u,isFirstRepinExperience:e.isFirstBoardCreateActive(),isFromToast:D,navigate:d,onFirstBoardCreate:e.handleSetSelectedBoard,onSelect:e.handleSelectBoard,originalPinId:N,pinBoardId:L,pinDescription:w,pinKey:g,pinSectionId:K,saveSessionId:j,saveToProfileEnabled:s,shouldUseSaveToProfileBehavior:f,surfaceOriginViewParameter:153})}),h?(0,G.jsx)(M.Wx,{onAddNewSection:e.handleClickAddSectionButton,useIconWithBackground:!0}):(0,G.jsx)(V.Z,{modalHeader:(0,Q.Bb)(e.props.i18n),nextLocation:"/board/create/".concat(g.entityId,"/"),children:(0,G.jsx)(nR,{isEditingPin:z,isFirstBoardCreateActive:e.isFirstBoardCreateActive(),onTouch:e.handleRepinCreateBoardButtonTouch,pinBoardId:L,pinDescription:w,pinKey:g,pinSectionId:K,trackingParams:S,useIconWithBackground:!0})}),R&&e.isBoardCreateEduActive()&&(0,G.jsx)(er,{completeExperience:e.completeBoardCreateEduExperience,pinDominantColor:null!=A?A:"",pinImageHeight:null!=(i=R.height)?i:1,pinImageUrl:null!=E?E:"",pinImageWidth:null!=(a=R.width)?a:1}),k&&!P&&g.pinnedToBoard&&!v&&B&&(0,G.jsx)(b.J2,{anchor:k,idealDirection:"down",onDismiss:e.handleDismissWarningFlyout,shouldFocus:!1,children:(0,G.jsx)(b.xu,{padding:3,children:(0,G.jsx)(b.xv,{weight:"bold",children:(0,G.jsx)("span",{children:B})})})})]})}),e}return t=[{key:"componentDidMount",value:function(){var e=this.props,n=e.logContextEvent,t=e.repinExperience,r=e.triggerExperimentsForPlacement,i=e.viewExperience,a=e.pin,o=this.state.saveSessionId;n({view_type:21,event_type:13,aux_data:{board_picker_surface_origin:153,pin_id:a.entityId,save_session_id:o}}),r(1000153),t&&i(1000153,t.experience_id),window.addEventListener("resize",this.onResize)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.onResize)}},{key:"render",value:function(){return(0,G.jsx)(k.ZP,{accessibilityModalLabel:this.props.i18n._('Repin page', 'RepinPage.MobileModal.AccessibilityLabel', 'Accessibility label on repin page'),closeOnOutsideClick:!1,isOpen:!0,onDismiss:function(){},type:"repinPage",children:(0,G.jsx)(b.xu,{height:this.state.windowInnerHeight-I.i_,paddingX:2,paddingY:0,children:(0,G.jsxs)(h.rs,{children:[(0,G.jsx)(m.lt,{exact:!0,path:"/pin/:id/repin/",render:this.renderPicker}),(0,G.jsx)(m.lt,{exact:!0,path:"/pin/:id/repin/:boardId/",render:this.renderPicker}),(0,G.jsx)(m.lt,{exact:!0,path:"/pin/:id/repin/:boardId/add/",render:this.renderCreateScreen})]})})})}}],function(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,nX(r.key),r)}}(i.prototype,t),Object.defineProperty(i,"prototype",{writable:!1}),i}(p.PureComponent),n3=function(e,n){var t,r,i={field_set_key:"repin"},a=(0,B.Z)({strategy:n?"GraphQL":"Legacy",query:n0,variables:{pinId:e},useGetLegacyData:function(e){var n=e.pinId;return(0,K.Z)({name:"PinResource",options:nQ(nQ({},i),{},{id:n})}).data}}),o=(null==a||null==(t=a.v3GetPinQuery)?void 0:t.__typename)==="V3GetPin"?null==(r=a.v3GetPinQuery)?void 0:r.data:null;return(0,T.Z)(n$,o)},n8=function(e){var n=(0,f.v9)(function(e){return e.session.userId}),t=(0,K.Z)({name:"BoardPickerBoardsResource",options:{pin_id:e,field_set_key:"profile_grid_item",shortlist_length:2,shortlist_suggestions:3,user_id:n}}),r=t.isFetching,i=t.data,a=(null==i?void 0:i.all_boards)||[];return{isFetching:r,allBoards:(0,f.v9)(function(e){return(0,ez.Z)(nQ(nQ({},e),{},{boards:a}))||[]}),boardsShortlist:(null==i?void 0:i.boards_shortlist)||[]}};function n5(){return(0,G.jsx)(n7,{})}function n7(e){var n,t=e.shouldFetchPinFromGraphQL,r=(0,_.s0)(),i=(0,h.TH)(),a=(0,h.$B)(),o=null!=(n=a.params.id)?n:"",l=(0,A.ZP)(),s=(0,P.Z)(),c=(0,S.be)(),d=(0,S.Ig)(),u=(0,ny.Z)(),p=(0,eK.LO)(),g=(0,eL.gC)(),m=(0,w.Z)().isAuth,y=(0,D.HG)(),b=n3(o,t),k=n8(o),I=k.isFetching,j=k.allBoards,T=k.boardsShortlist,B=(0,z.Z)().checkExperiment,O=(0,q.m)(),R=(0,eQ.n)(),F=nk(o);(0,L.Z)({name:"UserResource",options:{user_id:null==p?void 0:p.id,field_set_key:"quicksave"}});var Z=(0,f.I0)(),K=(0,f.v9)(function(e){return e.experiences}),M=(0,x.cO)(),H=(0,eO.Z)(),U=H.showToast,W=H.showRepinConfirmation,Q=(0,eR.ZP)((null==p?void 0:p.id)||"").showEnabledSaveBehavior,V=(0,w.Z)(),Y=function(){if(!V.isAuth)return null;var e=V.pinCount&&V.pinCount>0||V.boardCount&&V.boardCount>0||!1;return(0,E.Z)(V.createdAt)?B("ap_mweb_new_user_disable_quick_save",{dangerouslySkipActivation:e}).group:(0,C.Z)(null,V)?B("ap_mweb_res_user_disable_quick_save",{dangerouslySkipActivation:e}).group:null}(),J="enabled_remove_quick_save"===Y;return((0,N.Z)(function(){if(J&&p&&!0!==p.has_quicksave_board){var e,n,t={name:l._('Quick Saves', 'quickSave.defaultBoardName', 'Name of the auto-created board for quicksave experience saves.'),layout:"quick_saves",privacy:"public",return_existing:!0,aux_data:{source:"quick_save"}},r=(e=nU(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",v.Z.create("BoardResource",t).callCreate());case 1:case"end":return e.stop()}},e)})),function(){return e.apply(this,arguments)});(n=nU(regeneratorRuntime.mark(function e(){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r();case 2:n=e.sent.resource_response.data,Z((0,eE.oL)(t,n)),Z((0,eF.Z)(!0));case 6:case"end":return e.stop()}},e)})),function(){return n.apply(this,arguments)})()}}),!m||y)?(0,G.jsx)(_.Fg,{replace:!0,to:"/pin/".concat(o,"/")}):b?(0,G.jsx)(n2,{allBoards:j,boardsShortlist:T,checkExperiment:B,closeupExperience:K[1000112],completeExperience:function(e,n){return Z(c(e,n))},createBoard:u,dispatch:Z,getReduxBoard:g,i18n:l,isFetchingBoards:I,location:i,logContextEvent:s,match:a,mountAfterActionPlacement:M,navigate:r,notifDetailRepinContext:O,pin:b,pinId:o,repinContext:R,repinExperience:K[1000153],saveToProfileEnabled:Q&&"enabled_remove_all_boardless_saves"!==Y,shouldUseSaveToProfileBehavior:J,showRepinConfirmation:W,showToast:U,titleSuggestions:F,triggerExperimentsForPlacement:function(e){return Z((0,S.kd)(e))},viewExperience:function(e,n){return Z(d(e,n))}}):null}},978857:function(e,n,t){var r=t(60101),i=t(575108),a=t(72918),o=t(889229),l=t(189976),s=t(388023),c=t(696323);n.Z=function(e,n,t,d){return function(u){var p={board_id:e,initial_pins:n,name:t},f="BoardSectionResource";return i.Z.create(f,p).callCreate().then(function(t){var i=t.resource_response.data,g=(0,r.Fv)(i,s.Z[f]);return d({event_type:7100,object_id_str:i.id}),u((0,a.XM)(f,p,t,g)),u((0,o.hd)(e,i)),u((0,l.vX)({feedId:e,feedType:c.Z.BOARD_SECTIONS,itemIds:[i.id],itemType:"boardsection"})),n.length&&u({type:"PINS_MOVE",payload:{source:{boardId:e},target:{boardId:e,sectionId:i.id},pinIds:n}}),t})}}},987782:function(e,n,t){var r=t(575108);n.Z=function(e){return function(n){n({type:"PINS_MOVE_ALL",payload:e});var t=e.source,i=e.target,a=e.excludePinIds,o={board_id:t.boardId,new_board_id:i.boardId,pin_ids:a,old_section_id:t.sectionId,new_section_id:i.sectionId};return r.Z.create("BulkEditSelectAllResource",o).callUpdate()}}},120651:function(e,n,t){var r=t(575108),i=t(889229);n.Z=function(e){return function(n){return r.Z.create("BoardSectionResource",{section_id:e}).callGet().then(function(t){var r=t.resource_response.data||{id:"",title:""};return n((0,i.OQ)(e,r)),t})}}},936705:function(e,n,t){t.d(n,{a:function(){return r},k:function(){return i}});var r=function(e){return{type:"ONE_TAP_SAVE",payload:e}},i=function(e){return{type:"ONE_TAP_UNSAVE",payload:e}}},373950:function(e,n,t){t.d(n,{Z:function(){return r}});function r(e){return{type:"UPDATE_HAS_QUICKSAVE_BOARD",payload:{createdQuicksaveBoard:e}}}}}]);