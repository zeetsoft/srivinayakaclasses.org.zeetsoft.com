"use strict";(self.legacyJsonp=self.legacyJsonp||[]).push([["91110"],{684148:function(e,t){t.Z=2},964577:function(e,t){t.Z={BOARD_PICKER:"board_picker",ORGANIZE_PINS:"organize_pins",PROFILE:"profile",PIN_CLUSTER:"create_pin_cluster_page"}},443962:function(e,t,r){r.d(t,{j:function(){return a}});var n={á:"a",à:"a",â:"a",ä:"a",ã:"a",å:"a",æ:"a",ç:"c",é:"e",è:"e",ê:"e",ë:"e",í:"i",ì:"i",î:"i",ï:"i",ñ:"n",ó:"o",ò:"o",ô:"o",ö:"o",õ:"o",ø:"o",œ:"o",ß:"s",ú:"u",ù:"u",û:"u",ü:"u"},o=function(e){if(!e)return"";for(var t="",r=0;r<e.length;r+=1)t+=n[e.charAt(r)]||e.charAt(r);return t},i=function(e,t){for(var r=t.split(" "),n=e.split(" "),i=0,a=0;a<n.length;a+=1)(o(n[a]).includes(r[i])||n[a].includes(r[i]))&&(i+=1);return i===r.length},a=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"name",n=t.toLowerCase();return e.filter(function(e){return i(e[r].toLowerCase(),n)})}},215710:function(e,t,r){r.d(t,{DR:function(){return eP},MD:function(){return ev},sR:function(){return ew},uC:function(){return ej},xH:function(){return eB}});var n=r(586659),o=r(581722),i=r(672410),a=r(20256),s=r(980787),l=r(686319),c=r(821342),d=r(19585),u=r(369416),_=r(302148),g=r(675973),h=r(15667),p=r(72918),f=r(886981),b=r(684148),y=r(742723),v=r(7872),m=r(964577),x=r(790427),S=r(341742),P=r(382718);function j(e){var t=e.children,r=e.headingLevel,n=e.textWeight,o=e.size;return(0,P.jsx)(a.X6,{accessibilityLevel:r,size:o,children:(0,P.jsx)(a.xv,{inline:!0,size:o,weight:void 0===n?"normal":n,children:t})})}function w(e){var t=e.boardPickerSuggestedBoards,r=e.clientTrackingParams,n=e.imageSignature,o=e.index,i=e.item,l=e.pinId,c=e.saveSessionId,d=e.surfaceOriginViewParameter,u=e.useLegoLayout,_=(0,s.u)().logContextEvent;return(0,S.Z)(function(){"shortlist"===i.category&&_({aux_data:{board_picker_surface_origin:d,board_picker_suggested_boards:t,image_signature:n,pin_id:l,save_session_id:c},event_type:13,clientTrackingParams:r,view_type:21,view_parameter:3988})}),(0,P.jsx)(a.xu,{marginTop:o>0?2:1,paddingX:u?4:3,paddingY:1,children:(0,P.jsx)(j,{headingLevel:3,size:u?"100":"200",children:i.title})})}var B=r(918920),A=r(247354);function k(e){return(k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function O(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function C(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?O(Object(r),!0).forEach(function(t){var n,o;n=t,o=r[t],(n=function(e){var t=function(e,t){if("object"!=k(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=k(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==k(t)?t:t+""}(n))in e?Object.defineProperty(e,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[n]=o}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):O(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function T(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var L=function(e){var t,r=e.accessibilityLabelText,o=e.board,i=e.boardPickerSuggestedBoards,s=e.buttonText,l=e.clientTrackingParams,c=e.displayAlreadySavedMsg,d=e.i18n,u=e.imageSignature,_=e.isSectionOpen,g=e.logContextEvent,h=e.onButtonClick,p=e.onClick,f=e.pinId,b=e.saveSessionId,y=e.shouldOpenSections,v=void 0===y||y,m=e.showSaveToProfile,x=e.showFlyoutSaveButton,S=e.surfaceOriginViewParameter,j=e.useLegoLayout,w=function(e){if(Array.isArray(e))return e}(t=(0,n.useState)(!1))||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,s=[],l=!0,c=!1;try{for(i=(r=r.call(e)).next;!(l=(n=i.call(r)).done)&&(s.push(n.value),2!==s.length);l=!0);}catch(e){c=!0,o=e}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw o}}return s}}(t,2)||function(e,t){if(e){if("string"==typeof e)return T(e,2);var r=({}).toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?T(e,2):void 0}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),k=w[0],O=w[1],C=(0,n.useRef)(null),L=!!o.section_count&&o.section_count>0,z=o||{},I=z.images,E=z.image_cover_url,R=!(null!=E&&E.includes("custom"))&&I&&I["75x75"]&&I["75x75"][I["75x75"].length-1].url||E;(0,n.useEffect)(function(){"boardless"===o.type&&g({aux_data:{board_picker_surface_origin:S,board_picker_suggested_boards:i,image_signature:u,pin_id:f,save_session_id:b},clientTrackingParams:l,event_type:13,view_parameter:3990,view_type:21})},[]);var F=function(){p(o)};return(0,P.jsx)(a.xu,{"data-test-id":L?"boardWithSection":"boardWithoutSection",children:(0,P.jsx)(a.iP,{ref:C,onBlur:function(){O(!1)},onFocus:function(){O(!0)},onMouseEnter:function(){O(!0)},onMouseLeave:function(){O(!1)},onTap:F,children:(0,P.jsxs)(a.xu,{alignItems:"center",color:k?"secondary":"default","data-test-id":"board-row-".concat(o.name||""),display:"flex",height:j?64:52,marginBottom:+!j,marginEnd:j?2:3,marginStart:j?2:3,marginTop:+!j,padding:2*!!j,rounding:3,children:[(0,P.jsxs)(a.xu,{"aria-hidden":"true",flex:"none",height:j?48:36,marginBottom:+!j,marginEnd:j?2:3,marginStart:2*!j,marginTop:+!j,overflow:"hidden",width:j?48:36,children:[m&&"boardless"===o.type&&(0,P.jsx)(a.zd,{height:"100%",rounding:2,width:"100%",children:(0,P.jsx)(a.xu,{alignItems:"center",color:k?"default":"secondary",display:"flex",height:"100%",justifyContent:"center",width:"100%",children:(0,P.jsx)(a.xu,{children:(0,P.jsx)(a.JO,{accessibilityLabel:d._('Save to profile icon', 'BoardRow.TapArea.Icon', 'Icon to indicate saving to profile.'),color:"default",icon:"history",size:24})})})}),R&&!v&&(0,P.jsx)(a.zd,{height:j?48:36,rounding:2,wash:!0,width:j?48:36,children:(0,P.jsx)(a.Ee,{alt:"",fit:"cover",naturalHeight:j?48:36,naturalWidth:j?48:36,src:R})}),R&&v?(0,P.jsx)(a.zd,{height:j?48:36,rounding:2,wash:!0,width:j?48:36,children:(0,P.jsx)(a.Ee,{alt:"",fit:"cover",naturalHeight:j?48:36,naturalWidth:j?48:36,src:R})}):(0,P.jsx)(a.zd,{height:j?48:36,rounding:2,width:j?48:36,children:(0,P.jsx)(a.xu,{color:v?"secondary":"transparent",height:"100%",width:"100%"})})]}),(0,P.jsxs)(a.xu,{flex:"grow",marginStart:+!j,overflow:"hidden",paddingY:1,children:[(0,P.jsx)(a.xv,{lineClamp:1,overflow:"breakAll",weight:v||!v?"bold":"normal",children:o.name}),c&&(0,P.jsx)(a.xu,{marginTop:1,children:(0,P.jsx)(a.xv,{align:"start",color:"default",size:"100",children:d._('Saved here already', 'BoardFlyout.AlreadySaved.Message', 'Text that indicates if a pin has been already saved to a board')})})]}),(0,P.jsxs)(a.kC,{alignItems:"center",gap:2,children:[(0===o.section_count||!v)&&(void 0===x||x)&&(0,P.jsx)(a.xu,{"data-test-id":"board-row-save-button-container",flex:"none",opacity:+!!k,children:(0,P.jsx)(a.zx,{accessibilityLabel:r||d._('save', 'boardRow.saveButton', 'Default accessibility label for the board row save button'),color:"red","data-test-id":"board-row-save-button",onClick:function(e){var t=e.event;F(),h&&h(),t.stopPropagation()},tabIndex:-1,text:s||d._('Save', 'save button', 'save button')})}),o&&!_?(0,P.jsx)(a.xu,{marginEnd:2*!j,children:(0,P.jsx)(A.Z,{board:o,showCollaborativeIcon:!!o.is_collaborative,showPrivateIcon:o.privacy===B.ZP.BoardPrivacy.SECRET,showProtectedIcon:o.privacy===B.ZP.BoardPrivacy.PROTECTED,showSectionsIcon:L&&v,useLegoLayout:j})}):null]})]})})})},z=function(e){var t=(0,s.u)().logContextEvent,r=(0,d.ZP)();return(0,P.jsx)(L,C(C({},e),{},{i18n:r,logContextEvent:t}))},I=r(448505),E=r(288489);function R(e){return(R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function F(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function D(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?F(Object(r),!0).forEach(function(t){J(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):F(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function Z(e,t){return(Z=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function N(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function H(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(H=function(){return!!e})()}function M(e){return(M=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function J(e,t,r){return(t=W(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function W(e){var t=function(e,t){if("object"!=R(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=R(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==R(t)?t:t+""}var U=function(e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");i.prototype=Object.create(e&&e.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),Object.defineProperty(i,"prototype",{writable:!1}),e&&Z(i,e);var t,r,o=(t=H(),function(){var e,r=M(i);return e=t?Reflect.construct(r,arguments,M(this).constructor):r.apply(this,arguments),function(e,t){if(t&&("object"==R(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return N(e)}(this,e)});function i(){var e;if(!(this instanceof i))throw TypeError("Cannot call a class as a function");for(var t=arguments.length,r=Array(t),a=0;a<t;a++)r[a]=arguments[a];return J(N(e=o.call.apply(o,[this].concat(r))),"state",{hovered:!1}),J(N(e),"handleMouseEnter",function(){e.setState({hovered:!0})}),J(N(e),"handleMouseLeave",function(){e.setState({hovered:!1})}),J(N(e),"handleTouch",function(){var t=e.props,r=t.board;(0,t.onClick)(t.section,r)}),J(N(e),"handleButtonClick",function(t){var r=t.event,n=e.props.onButtonClick;e.handleTouch(),n&&n(),r.stopPropagation()}),J(N(e),"tapAreaRef",(0,n.createRef)()),e}return r=[{key:"focus",value:function(){var e=this.tapAreaRef.current;e&&e.focus()}},{key:"render",value:function(){var e,t,r,n,o,i,s=this.state.hovered,l=this.props,c=l.buttonText,d=l.section,u=l.showSectionSaveButton,_=l.useLegoLayout;return(0,P.jsx)(a.iP,{ref:this.tapAreaRef,onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,onTap:this.handleTouch,children:(0,P.jsxs)(a.xu,{alignItems:"center",color:s?"secondary":"default",dangerouslySetInlineStyle:{__style:_?{}:{marginLeft:53,marginRight:11}},"data-test-id":"section-row-".concat(d.title||""),display:"flex",height:_?64:52,marginEnd:2*!!_,marginStart:2*!!_,marginTop:+!_,padding:2*!!_,rounding:3,children:[_&&!!(null!=(e=d.preview_pins)&&e.length)&&(0,P.jsx)(E.Z,{image_url:null!=(t=d.preview_pins[0].image_square_url)?t:"",naturalHeight:null!=(r=null==(n=d.preview_pins[0].image_square_size_pixels)?void 0:n.height)?r:1,naturalWidth:null!=(o=null==(i=d.preview_pins[0].image_square_size_pixels)?void 0:i.width)?o:1}),(0,P.jsx)(a.xu,{flex:"grow",marginStart:4*!_,paddingY:1,children:(0,P.jsx)(a.xv,{lineClamp:1,weight:_?"bold":"normal",children:d.title})}),s&&u&&(0,P.jsx)(a.xu,{flex:"none",marginEnd:2*!_,children:(0,P.jsx)(a.zx,{accessibilityLabel:"save button",color:"red",onClick:this.handleButtonClick,text:c||this.props.i18n._('Save', 'save button', 'save button')})})]})})}}],function(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,W(n.key),n)}}(i.prototype,r),Object.defineProperty(i,"prototype",{writable:!1}),i}(n.Component);function q(e){var t=(0,d.ZP)();return(0,P.jsx)(U,D(D({},e),{},{i18n:t}))}function V(e){var t=(0,d.ZP)(),r=e.board,n=e.buttonText,o=e.onClick,i=e.onButtonClick,s=e.showSectionSaveButton,l=e.useLegoLayout,u=(0,I.Z)(),_=(0,c.Z)(),g=(0,v.lJ)(_,u),h=(0,f.Z)({name:"BoardSectionsRepinResource",options:{board_id:r.id,orbac_subject_id:g},noCache:!0}),p=h&&h.data||[];return(0,P.jsxs)(a.xu,{children:[!h.isLoaded&&(0,P.jsx)(a.kC,{alignItems:"center",height:"100%",justifyContent:"center",minHeight:200,width:"100%",children:(0,P.jsx)(a.xH,{accessibilityLabel:t._('loading board picker', 'accessibility text for loading spinner', 'accessibility text for loading spinner'),show:!0})}),h.isLoaded&&(0,P.jsxs)(a.xu,{children:[l&&(0,P.jsx)(a.xu,{marginStart:4,marginTop:2,paddingY:1,children:(0,P.jsx)(j,{headingLevel:3,size:"100",children:t._('Section', 'PinBetterSave.BoardFlyout.SectionPlaceholderText', 'section list title')})}),p.map(function(e){return(0,P.jsx)(q,{board:r,buttonText:n,onButtonClick:i,onClick:o,section:e,showSectionSaveButton:s,useLegoLayout:l},e.id)})]})]})}function Q(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function Y(e){var t,r=e.onClick,o=e.title,i=e.showIcon,s=(0,d.ZP)(),l=function(e){if(Array.isArray(e))return e}(t=(0,n.useState)(!1))||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,s=[],l=!0,c=!1;try{for(i=(r=r.call(e)).next;!(l=(n=i.call(r)).done)&&(s.push(n.value),2!==s.length);l=!0);}catch(e){c=!0,o=e}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw o}}return s}}(t,2)||function(e,t){if(e){if("string"==typeof e)return Q(e,2);var r=({}).toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Q(e,2):void 0}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),c=l[0],u=l[1];return(0,P.jsx)(a.iP,{dataTestId:"board-suggestion-row-button",onMouseEnter:function(){return u(!0)},onMouseLeave:function(){return u(!1)},onTap:function(){r({title:o})},children:(0,P.jsxs)(a.xu,{alignItems:"center",color:c?"secondary":"default",display:"flex",height:i?64:52,marginBottom:1,marginEnd:3,marginStart:3,rounding:3,children:[(0,P.jsx)(a.xu,{flex:"none",height:i?48:36,marginBottom:1,marginEnd:3,marginStart:i?1:2,marginTop:1,overflow:"hidden",rounding:i?2:1,width:i?48:36,children:(0,P.jsx)(a.xu,{alignItems:i?"center":void 0,color:"secondary",display:i?"flex":void 0,height:"100%",justifyContent:i?"center":void 0,width:"100%",children:i&&(0,P.jsx)(a.JO,{accessibilityLabel:s._('Create board icon', 'BoardSuggestionRow.AccessibilityLabel.Text', 'accessibility label text form add icon'),color:"default",icon:"add",size:20})})}),(0,P.jsx)(a.xu,{flex:"grow",paddingY:1,children:(0,P.jsx)(a.xv,{lineClamp:1,weight:"bold",children:o})}),c&&(0,P.jsx)(a.xu,{marginEnd:2,children:(0,P.jsx)(a.zx,{accessibilityLabel:"create button",color:"red",text:s._('Create', 'create button to create a new board', 'create button to create a new board')})})]})})}function G(e){var t=(0,d.ZP)(),r=e.suggestionsResource,o=e.onClick,i=e.pinBuilderSuggestions,s=e.inWebRepinFlowExp,l=i||r&&r.data||[],c=(0,P.jsxs)(n.Fragment,{children:[s&&(0,P.jsx)(a.xu,{marginStart:4,marginTop:2,paddingY:1,children:(0,P.jsx)(j,{headingLevel:3,size:"100",children:t._('Suggestions', 'PinBetterSave.BoardFlyout.SectionPlaceholderText', 'section list title')})}),l.map(function(e,t){return(0,P.jsx)(Y,{onClick:o,showIcon:s,title:e.title},t)})]});return(0,P.jsx)(n.Fragment,{children:l?c:(0,P.jsx)(a.kC,{alignItems:"center",height:"100%",justifyContent:"center",minHeight:200,width:"100%",children:(0,P.jsx)(a.xH,{accessibilityLabel:t._('loading board suggestions', 'accessibility text for loading spinner', 'accessibility text for loading spinner'),show:!0})})})}J(U,"defaultProps",{showSectionSaveButton:!0});var $=r(461951);function X(e){return(X="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function K(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function ee(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,s=[],l=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=i.call(r)).done)&&(s.push(n.value),s.length!==t);l=!0);}catch(e){c=!0,o=e}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw o}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return et(e,t);var r=({}).toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?et(e,t):void 0}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function et(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function er(e){var t=e.isBoardCreate,r=e.onCreateBoardClick,o=e.useLegoLayout,i=(0,d.ZP)(),s=ee((0,n.useState)(!1),2),l=s[0],c=s[1],u=ee((0,n.useState)(!1),2),_=u[0],g=u[1];return(0,P.jsx)(a.xu,{"data-test-id":"create-board",display:"flex",height:"100%",rounding:2,children:(0,P.jsx)(a.iP,{dataTestId:t?"create-board-button":"create-section-button",onBlur:function(){return g(!1)},onFocus:function(){return g(!0)},onMouseEnter:function(){return c(!0)},onMouseLeave:function(){return c(!1)},onTap:r,rounding:2,children:(0,P.jsxs)(a.xu,{alignItems:"center",color:l?"secondary":"default",dangerouslySetInlineStyle:{__style:function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?K(Object(r),!0).forEach(function(t){var n,o;n=t,o=r[t],(n=function(e){var t=function(e,t){if("object"!=X(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=X(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==X(t)?t:t+""}(n))in e?Object.defineProperty(e,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[n]=o}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):K(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({},_?{border:"2px solid ".concat($.nTo)}:{})},display:"flex",height:"100%",padding:o?4:2,width:"100%",children:[(0,P.jsx)(a.xu,{color:o?"secondary":"transparent",dangerouslySetInlineStyle:{__style:o?{padding:"14px"}:{}},marginEnd:o?2:5,marginStart:4*!o,rounding:2*!!o,children:(0,P.jsx)(a.JO,{accessibilityLabel:"",color:o?"default":"error",icon:o?"add":"add-circle",size:o?20:28})}),t?(0,P.jsx)(a.xv,{align:"center",lineClamp:1,weight:"bold",children:i._('Create board', ' - ', ' -- ')}):(0,P.jsx)(a.xv,{align:"center",lineClamp:1,weight:"bold",children:i._('Create section', ' - ', ' -- ')})]})})})}var en=r(443962),eo=r(524558);function ei(e){return(ei="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ea(e,t,r,n,o,i,a){try{var s=e[i](a),l=s.value}catch(e){return void r(e)}s.done?t(l):Promise.resolve(l).then(n,o)}function es(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function el(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?es(Object(r),!0).forEach(function(t){ep(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):es(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function ec(e){return function(e){if(Array.isArray(e))return ed(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return ed(e,void 0);var r=({}).toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ed(e,void 0):void 0}}(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ed(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function eu(e,t){return(eu=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function e_(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function eg(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(eg=function(){return!!e})()}function eh(e){return(eh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ep(e,t,r){return(t=ef(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ef(e){var t=function(e,t){if("object"!=ei(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=ei(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ei(t)?t:t+""}var eb="allBoards",ey="shortlist",ev=function(e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");s.prototype=Object.create(e&&e.prototype,{constructor:{value:s,writable:!0,configurable:!0}}),Object.defineProperty(s,"prototype",{writable:!1}),e&&eu(s,e);var t,r,o=(t=eg(),function(){var e,r=eh(s);return e=t?Reflect.construct(r,arguments,eh(this).constructor):r.apply(this,arguments),function(e,t){if(t&&("object"==ei(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return e_(e)}(this,e)});function s(){var e,t;if(!(this instanceof s))throw TypeError("Cannot call a class as a function");for(var r=arguments.length,n=Array(r),a=0;a<r;a++)n[a]=arguments[a];return ep(e_(e=o.call.apply(o,[this].concat(n))),"state",{boardSuggestions:[],isSectionOpen:null,selectedBoardId:"",selectedBoardCategory:"",searchQuery:"",searchBoxFocused:!0,saveSessionId:(0,i.Z)()}),ep(e_(e),"handleScroll",function(){e_(e)._container,(0,e.props.logContextEvent)({event_type:110,component:13282,view_type:21})}),ep(e_(e),"getComplexBoardPickerThreshold",function(){var t,r=e.props,n=r.boardResource,o=r.checkExperiment,i=((null==n||null==(t=n.data)?void 0:t.all_boards)||[]).length>0?o("web_curation_board_picker_tune_complex_board_picker").group:"control",a=3;switch(i){case"enabled_2":a=2;break;case"enabled_4":a=4;break;case"enabled_5":a=5;break;default:a=3}return a}),ep(e_(e),"refHandler",function(t){e.removeEventListeners(),t&&t.addEventListener("scroll",e.handleScroll,{once:!0}),e._container=t}),ep(e_(e),"getItems",function(t){var r=e.props,n=r.boardResource,o=r.showSaveToProfile,i=r.checkExperiment;if(!(null!=n&&n.data))return[];var a=n.data.all_boards,s=a.length>=e.getComplexBoardPickerThreshold(),l=o&&a.length&&i("web_curation_board_picker_reorder_profile_option").anyEnabled,c=[{boardId:"",image_cover_url:"",is_collaborative:!1,isOpen:!1,name:e.props.i18n._('Profile', 'pinBetterSave.initialSelection.boardlessPinsOption', 'Option to save to profile without a board.'),privacy:"public",section_count:0,type:"boardless",url:"/me/"}],d=e.getAllBoards().map(function(t,r){return e.mapBoards(t,eb,r)}),u=e.getShortlist().map(function(t,r){return e.mapBoards(t,ey,r)}),_=e.state.searchQuery;return _.length>=b.Z?ec((0,en.j)(d,_)):[].concat(ec(s||!o||l?[]:[{type:"header",title:e.props.i18n._('Quick save and organize later', 'BoardFlyout.inPinBetterSaveAndLessThanThreeBoards.boardlessPinsTitle', 'Header saving to profile')}].concat(c)),ec(s&&s&&o&&!l?c:[]),ec(s&&null!=u&&u.length?[{category:ey,type:"header",title:t?e.props.i18n._('Top choices', 'PinBetterSave.BoardFlyout.TopChoicesSectionTitle', 'Header for top suggestions in board picker'):e.props.i18n._('Top board suggestions', 'Header for top suggesions in board picker', 'Header for top suggesions in board picker')}].concat(ec(u)):[]),ec(a.length>0?[{type:"header",title:!s&&o?e.props.i18n._('Save to board', 'BoardFlyout.inPinBetterSaveAndLessThanThreeBoards.saveToBoardTitle', 'Header for boards when there are less than 3 boards in board picker'):e.props.i18n._('All boards', 'Header for all boards in board picker', 'Header for all boards in board picker')}].concat(ec(d),ec(l?c:[])):[]))}),ep(e_(e),"mapBoards",function(t,r,n){var o=e.state,i=o.selectedBoardId,a=o.selectedBoardCategory,s=t.id===i&&r===a;return el(el({},t),{},{category:r,isOpen:s,gridIndex:n})}),ep(e_(e),"handleBack",function(){var t=e.props.setBoardWithSection;e.setState({isSectionOpen:!1,selectedBoardId:"",selectedBoardCategory:""}),t&&t(null)}),ep(e_(e),"handleSectionClick",function(t,r){var n=e.props,o=n.clientTrackingParams,i=n.imageSignature,a=n.logContextEvent,s=n.onItemChosen,l=n.pinId,c=n.surfaceOriginViewParameter,d=e.state,u=d.saveSessionId,_=d.searchQuery;a({event_type:101,clientTrackingParams:o,component:13282,element:36,object_id_str:r.id,view_type:91,view_parameter:3133,aux_data:{board_id:r.id,board_picker_surface_origin:c,board_picker_suggested_boards:JSON.stringify(e.getTopChoiceBoardsAuxData()),board_title_suggestions:JSON.stringify(e.getBoardTitleSuggestionsAuxData()),board_index:r.gridIndex,image_signature:i,is_profile_save:!1,pin_id:l,save_session_id:u,search_query:_,section_id:t.id}}),s({boardId:r.id,url:t.slug?"".concat(r.url).concat(t.slug,"/"):r.url,sectionId:t.id,title:t.title||"",type:t.type,imageCoverUrl:r.image_cover_url,ownerUsername:r.owner&&r.owner.username||""})}),ep(e_(e),"getPinBuilderSuggestions",(t=regeneratorRuntime.mark(function t(){var r,n,o,i,a,s,c,d,u;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=(r=e.props).clientTrackingParams,o=r.imageSignature,i=r.logContextEvent,a=r.pinId,s=r.surfaceOriginViewParameter,c=e.state.saveSessionId,!a){t.next=7;break}return t.next=5,(0,l.Z)({url:"/v3/pins/".concat(a,"/board_title_suggestions/"),data:{pin_id:a}});case 5:(d=t.sent).resource_response.data&&(u=d.resource_response.data.map(function(e){var t;return{title:e.title,metadata:JSON.parse(null!=(t=null==e?void 0:e.metadata)?t:"{}")}})||[],e.setState({boardSuggestions:u}),i({aux_data:{board_picker_surface_origin:s,board_picker_suggested_boards:JSON.stringify(e.getTopChoiceBoardsAuxData()),board_title_suggestions:JSON.stringify(e.getBoardTitleSuggestionsAuxData()),image_signature:o,pin_id:a,save_session_id:c},component:13282,clientTrackingParams:n,event_type:13,view_parameter:3992,view_type:21}));case 7:case"end":return t.stop()}},t)}),function(){var e=this,r=arguments;return new Promise(function(n,o){var i=t.apply(e,r);function a(e){ea(i,n,o,a,s,"next",e)}function s(e){ea(i,n,o,a,s,"throw",e)}a(void 0)})})),ep(e_(e),"getAllBoards",function(){var t,r=e.props,n=r.boardResource,o=r.advertiser_id;return((null==n||null==(t=n.data)?void 0:t.all_boards)||[]).filter(function(e){return!o||"secret"!==e.privacy})}),ep(e_(e),"getShortlist",function(){var t,r=e.props,n=r.suggestedBoardsShortListResource,o=r.displayShortlistMostRecentBoard,i=r.boardResource,a=(null==i||null==(t=i.data)?void 0:t.boards_shortlist)||[];return o?a:(null==n?void 0:n.data)||[]}),ep(e_(e),"getBoards",function(t){return t===eb?e.getAllBoards():t===ey?e.getShortlist():[]}),ep(e_(e),"getSuggestedBoardsIds",function(){var t=e.props.showSaveToProfile,r=(t?e.getShortlist().slice(0,2):e.getShortlist()).map(function(e){return e.id});return t&&r.unshift("PROFILE_PINS"),r}),ep(e_(e),"getTopChoiceBoardsAuxData",function(){return(e.props.showSaveToProfile?e.getShortlist().slice(0,2):ec(e.getShortlist())).map(function(e){var t,r;return{board_title_id:String(e.id),board_title_kind:JSON.parse(null!=(t=e.recommendation_reason)?t:"{}").reason,board_title:String(e.name),board_title_score:JSON.parse(null!=(r=e.recommendation_reason)?r:"{}").score}})}),ep(e_(e),"getBoardTitleSuggestionsAuxData",function(){return e.state.boardSuggestions.map(function(e){return{board_title_id:String(e.metadata.value),board_title_kind:String(e.metadata.kind),board_title:String(e.title),board_title_score:String(e.metadata.confidence)}})}),ep(e_(e),"handleBoardWithSectionsClick",function(t){var r=e.props,n=r.clientTrackingParams,o=r.logContextEvent,i=r.pinId,a=r.setBoardWithSection,s=r.surfaceOriginViewParameter,l=e.state,c=l.saveSessionId,d=l.searchQuery,u=l.selectedBoardId,_=l.selectedBoardCategory,g=e.getBoards(t.category).find(function(e){return e.id===t.id}),h=u===t.id&&_===t.category;o({event_type:13,clientTrackingParams:n,component:13282,element:36,object_id_str:t.id,view_type:275,aux_data:{board_id:t.id,board_picker_surface_origin:s,board_picker_suggested_boards:JSON.stringify(e.getTopChoiceBoardsAuxData()),board_title_suggestions:JSON.stringify(e.getBoardTitleSuggestionsAuxData()),board_index:t.gridIndex,is_profile_save:!1,pin_id:i,save_session_id:c,search_query:d}}),g&&a&&a(g),e.setState({isSectionOpen:!0,selectedBoardId:h?"":t.id,selectedBoardCategory:h?"":t.category})}),ep(e_(e),"handleBoardClick",function(t){var r=t.board,n=t.toggleSections,o=e.props,i=o.clientTrackingParams,a=o.imageSignature,s=o.logContextEvent,l=o.onItemChosen,c=o.pinId,d=o.surfaceOriginViewParameter,u=e.state,_=u.saveSessionId,g=u.searchQuery;e.setState({searchBoxFocused:!1}),n?(s({event_type:101,component:13282,element:36,clientTrackingParams:i,object_id_str:r.id,view_type:91,view_parameter:r.category===ey?3988:3989,aux_data:{board_id:r.id,board_component:r.category===ey?3988:3989,board_picker_surface_origin:d,board_picker_suggested_boards:JSON.stringify(e.getTopChoiceBoardsAuxData()),board_title_suggestions:JSON.stringify(e.getBoardTitleSuggestionsAuxData()),board_index:r.gridIndex,image_signature:a,is_profile_save:!1,pin_id:c,save_session_id:_,search_query:g}}),e.handleBoardWithSectionsClick({category:r.category,gridIndex:r.gridIndex,id:r.id})):(s("boardless"===r.type?{event_type:101,clientTrackingParams:i,component:13282,element:36,object_id_str:r.id,view_type:91,view_parameter:3990,aux_data:{board_id:r.id,board_component:3990,board_picker_surface_origin:d,board_picker_suggested_boards:JSON.stringify(e.getTopChoiceBoardsAuxData()),board_title_suggestions:JSON.stringify(e.getBoardTitleSuggestionsAuxData()),board_index:r.gridIndex,image_signature:a,is_profile_save:!0,pin_id:c,save_session_id:_,search_query:g}}:{event_type:101,clientTrackingParams:i,component:13282,element:36,object_id_str:r.id,view_type:91,view_parameter:r.category===ey?3988:3989,aux_data:{board_id:r.id,board_component:r.category===ey?3988:3989,board_picker_surface_origin:d,board_picker_suggested_boards:JSON.stringify(e.getTopChoiceBoardsAuxData()),board_title_suggestions:JSON.stringify(e.getBoardTitleSuggestionsAuxData()),board_index:r.gridIndex,image_signature:a,is_profile_save:"boardless"===r.type,pin_id:c,save_session_id:_,search_query:g}}),l({boardId:r.id,url:r.url,title:r.name||"",type:r.type,imageCoverUrl:r.image_cover_url,privacy:r.privacy}))}),ep(e_(e),"handleSearchQueryUpdate",function(t){e.setState(function(e){return el(el({},e),{},{searchQuery:t})})}),ep(e_(e),"handleCreateBoardClick",function(t){var r=e.props,n=r.clientTrackingParams,o=r.imageSignature,i=r.logContextEvent,a=r.onBoardCreate,s=r.pinId,l=r.surfaceOriginViewParameter,c=r.surface,d=e.state,u=d.saveSessionId,_=d.searchQuery;i({event_type:101,clientTrackingParams:n,component:13282,element:249,view_type:91,view_parameter:t?87:3132,aux_data:{board_component:t?87:3132,board_picker_surface_origin:l,board_picker_suggested_boards:JSON.stringify(e.getTopChoiceBoardsAuxData()),board_title_suggestions:JSON.stringify(e.getBoardTitleSuggestionsAuxData()),image_signature:o,pin_id:s,save_session_id:u,search_query:_,source:null!=c?c:m.Z.BOARD_PICKER}}),a({title:_})}),ep(e_(e),"handleBoardSuggestionClick",function(t){var r=e.props,n=r.clientTrackingParams,o=r.imageSignature,i=r.logContextEvent,a=r.onBoardCreate,s=r.pinId,l=r.surfaceOriginViewParameter,c=e.state.saveSessionId;i({event_type:101,clientTrackingParams:n,component:13282,element:23,view_type:91,view_parameter:3992,aux_data:{board_picker_surface_origin:l,board_title_suggestions:JSON.stringify(e.getBoardTitleSuggestionsAuxData()),image_signature:o,pin_id:s,save_session_id:c}}),a(t)}),e}return r=[{key:"componentWillUnmount",value:function(){this.removeEventListeners()}},{key:"componentDidMount",value:function(){var e=this.props,t=e.clientTrackingParams,r=e.logContextEvent,n=e.imageSignature,o=e.pinId,i=e.setBoardWithSection,a=e.surfaceOriginViewParameter,s=this.state.saveSessionId;i&&i(null),r({event_type:13,component:13282,clientTrackingParams:t,element:10960,aux_data:{board_picker_surface_origin:a,board_picker_suggested_boards:JSON.stringify(this.getTopChoiceBoardsAuxData()),image_signature:n,pin_id:o,save_session_id:s}})}},{key:"componentDidUpdate",value:function(e){var t,r,n=this.state.saveSessionId,o=this.props.clientTrackingParams;!(null!=(t=e.suggestedBoardsShortListResource)&&t.isLoaded)&&null!=(r=this.props.suggestedBoardsShortListResource)&&r.isLoaded&&this.getSuggestedBoardsIds().length>0&&this.props.logContextEvent({event_type:13,clientTrackingParams:o,component:13282,element:1001,aux_data:{pin_id:this.props.pinId,board_picker_suggested_boards:JSON.stringify(this.getTopChoiceBoardsAuxData()),save_session_id:n}})}},{key:"removeEventListeners",value:function(){var e=this._container;e&&e.removeEventListener("scroll",this.handleScroll)}},{key:"render",value:function(){var e,t,r,o,i,s,l,c=this,d=this.props,g=d.accessibilityLabelText,h=d.boardResource,p=d.buttonText,f=d.changeBoardModal,b=d.clientTrackingParams,y=d.customItem,v=d.headerText,m=d.hideAlreadySavedMsg,S=d.imageSignature,B=d.onButtonClick,A=d.paneHeight,k=d.paneWidth,O=d.pinAlreadySavedBoard,C=d.pinId,T=d.requestContext,L=d.sectionText,I=d.showSaveToProfile,E=d.showSearchField,R=d.showCreateBoardButton,F=d.showFlyoutSaveButton,D=d.showSections,Z=d.showSectionSaveButton,N=d.suggestedBoardsShortListResource,H=d.surfaceOriginViewParameter,M=d.useStoryboardStyle,J=d.useLegoLayout,W=d.boardFlyoutStyle,U=this.state,q=U.boardSuggestions,Q=U.isSectionOpen,Y=U.saveSessionId,$=U.searchBoxFocused,X=U.searchQuery;if(!h)return null;var K=h.isLoaded,ee=h.error,et=[];(K&&!ee||N&&N.data&&!N.error)&&(et=this.getItems(!!J));var en=et.filter(function(e){return e&&e.category===eb}).length,ei=en>this.getComplexBoardPickerThreshold();ei||0!==q.length||this.getPinBuilderSuggestions();var ea=M?200:322,es=M?214:334,el=A||290,ec=JSON.stringify(this.getTopChoiceBoardsAuxData()),ed=T.isRTL?"BoardsSlideRightRTL":"BoardsSlideLeft",eu="";null!==Q&&(eu=T.isRTL?"BoardsSlideLeftRTL":"BoardsSlideRight");var e_=function(e){return(0,P.jsxs)(n.Fragment,{children:[!J&&(0,P.jsx)(a.iz,{}),(0,P.jsx)(a.xu,{borderStyle:J&&en>=3&&et.length>1?"shadow":"none",dangerouslySetInlineStyle:{__style:{borderBottomRightRadius:8,borderBottomLeftRadius:8}},height:J?80:52,overflow:"hidden",children:(0,P.jsx)(er,{isBoardCreate:e,onCreateBoardClick:function(t){t.event.stopPropagation(),c.handleCreateBoardClick(e)},useLegoLayout:J})})]})};return(0,P.jsxs)(a.xu,{color:"default","data-test-id":"board-picker-flyout",height:M||f?"100%":J?498:439,overflow:"hidden",rounding:2,width:J&&!f?"100%":k,zIndex:x.lI,children:[(0,P.jsx)(u.Z,{unsafeCSS:"\n.BoardsSlideLeft {\n  animation: boardFlyoutSlideLeft 0.5s cubic-bezier(0.165, 0.84, 0.44, 1) forwards;\n}\n\n.BoardsSlideRight {\n  animation: boardFlyoutSlideRight 0.5s cubic-bezier(0.165, 0.84, 0.44, 1) forwards;\n}\n\n.BoardsSlideLeftRTL {\n  animation: boardFlyoutSlideLeftRTL 0.5s cubic-bezier(0.165, 0.84, 0.44, 1) forwards;\n}\n\n.BoardsSlideRightRTL {\n  animation: boardFlyoutSlideRightRTL 0.5s cubic-bezier(0.165, 0.84, 0.44, 1) forwards;\n}\n\n@keyframes boardFlyoutSlideLeft {\n  from {\n    margin-left: 0%;\n  }\n\n  to {\n    margin-left: -100%;\n  }\n}\n\n@keyframes boardFlyoutSlideRight {\n  from {\n    margin-left: -100%;\n  }\n\n  to {\n    margin-left: 0%;\n  }\n}\n\n@keyframes boardFlyoutSlideLeftRTL {\n  from {\n    margin-right: -100%;\n  }\n\n  to {\n    margin-right: 0%;\n  }\n}\n\n@keyframes boardFlyoutSlideRightRTL {\n  from {\n    margin-right: 0%;\n  }\n\n  to {\n    margin-right: -100%;\n  }\n}\n"}),K?null:(0,P.jsx)(a.kC,{alignItems:"center",height:"100%",justifyContent:"center",minHeight:200,width:J&&!f?360:k,children:(0,P.jsx)(a.xH,{accessibilityLabel:this.props.i18n._('loading board picker', 'accessibility text for loading spinner', 'accessibility text for loading spinner'),show:!0})}),(0,P.jsx)(a.kC,{direction:"row",children:K&&(0,P.jsx)("div",{className:Q?ed:eu,children:(0,P.jsx)(a.xu,{position:"relative",children:(0,P.jsxs)(a.xu,{direction:"row",display:"flex",width:J&&!f?720:(null!=k?k:0)*2,zIndex:new a.Ry(0),children:[(0,P.jsxs)(a.kC,{alignItems:"stretch",direction:"column",justifyContent:"start",width:J&&!f?360:k,children:[J&&!f&&(0,P.jsx)(a.kC,{alignItems:"center",height:64,justifyContent:"center",children:(0,P.jsx)(j,{headingLevel:2,size:"300",textWeight:"bold",children:v||(I?this.props.i18n._('Save', 'PinBetterSave.BoardFlyout.SavePlaceholder', 'flyout header text to indicate save options'):this.props.i18n._('Save to board', 'PinBetterSave.BoardFlyout.SaveToBoardPlaceholder', 'flyout header text'))})}),(null!=E?E:!f)&&(0,P.jsxs)(a.xu,{"data-test-id":"search-boards-field-container",height:J?64:"auto",padding:null!=(e=null==W||null==(t=W.searchFieldStyle)?void 0:t.padding)?e:3*!J,paddingX:null!=(r=null==W||null==(o=W.searchFieldStyle)?void 0:o.paddingX)?r:J?4:3,paddingY:null==W||null==(i=W.searchFieldStyle)?void 0:i.paddingY,children:[(0,P.jsx)(eo.Z,{accessibilityClearButtonLabel:this.props.i18n._('Clear board search text', 'dropdown.searchField.clearButtonLabel', 'clear button label for search field in board picker'),accessibilityLabel:this.props.i18n._('Search through your boards', 'search bar placeholder text', 'search bar placeholder text'),focused:$,id:"pickerSearchField",onChange:function(e){var t=e.value;return c.handleSearchQueryUpdate(t)},placeholder:this.props.i18n._('Search', 'search bar placeholder text', 'search bar placeholder text'),size:null!=(s=null==W||null==(l=W.searchFieldStyle)?void 0:l.size)?s:"lg",value:X}),(0,P.jsx)(a.xu,{"aria-live":"assertive",display:"visuallyHidden",children:en?(0,_.Wc)(this.props.i18n.ngettext('Found a board', 'Found {{boardCount}} boards', en, 'PinBetterSave.BoardFlyout.BoardFoundsDropdown', 'Text to indicate how many boards were found in the board autocomplete. boardCount: the number of boards created by the user.'),{boardCount:en.toString()}):this.props.i18n._('No boards found', 'PinBetterSave.BoardFlyout.noBoardFoundsDropdown', 'Text to indicate no boards were found in the board autocomplete')})]}),(0,P.jsxs)(a.xu,{ref:this.refHandler,maxHeight:J?el:ea,minHeight:J?290:ea,overflow:"scrollY",children:[N&&!N.isLoaded?(0,P.jsx)(a.xu,{"data-test-id":"suggestedBoardsContainer",children:(0,P.jsx)(a.kC,{alignItems:"center",height:"100%",justifyContent:"center",minHeight:128.5,width:"100%",children:(0,P.jsx)(a.xH,{accessibilityLabel:this.props.i18n._('loading board picker', 'accessibility text for loading spinner', 'accessibility text for loading spinner'),show:!0})})}):null,y,et.map(function(e,t){return"header"===e.type?(0,P.jsx)(w,{boardPickerSuggestedBoards:ec,clientTrackingParams:b,imageSignature:S,index:t,item:e,pinId:C,saveSessionId:Y,surfaceOriginViewParameter:H,useLegoLayout:J},"".concat(e.title)):(0,P.jsx)(a.xu,{children:(0,P.jsx)(z,{accessibilityLabelText:g,board:e,boardPickerSuggestedBoards:ec,buttonText:p,clientTrackingParams:b,displayAlreadySavedMsg:O&&O.id===e.id&&!m,imageSignature:S,onButtonClick:B,onClick:function(e){c.handleBoardClick({board:e,toggleSections:D&&!!e.section_count})},pinId:C,saveSessionId:Y,shouldOpenSections:D,showFlyoutSaveButton:F,showSaveToProfile:I,surfaceOriginViewParameter:H,useLegoLayout:J})},"".concat(e.category,"-").concat(e.id))}),!ei&&q.length>0&&(0,P.jsx)(G,{inWebRepinFlowExp:J,onClick:this.handleBoardSuggestionClick,pinBuilderSuggestions:q})]}),R&&e_(!0)]}),Q&&(0,P.jsxs)(a.xu,{direction:"column",display:"flex",marginBottom:2*!!J,width:J&&!f?360:k,children:[(0,P.jsxs)(a.kC,{alignContent:"center",alignItems:"center",direction:"row",justifyContent:"center",children:[(0,P.jsx)(a.sg,{span:2,children:(0,P.jsx)(a.xu,{alignContent:"center",alignItems:"center",display:"flex",justifyContent:"start",marginStart:3,children:(0,P.jsx)(a.hU,{accessibilityLabel:"Back button",icon:"arrow-back",iconColor:"darkGray",onClick:this.handleBack,size:"sm"})})}),(0,P.jsx)(a.sg,{span:8,children:(0,P.jsx)(a.kC,{alignItems:"center",height:J?64:52,justifyContent:"center",children:(0,P.jsx)(j,{headingLevel:2,size:"300",textWeight:"bold",children:L||(J?this.props.i18n._('Save Pin to', 'PinBetterSave.BoardFlyout.SectionHeader', 'Header for section header'):this.props.i18n._('Choose section', 'Header for section header', 'Header for section header'))})})}),(0,P.jsx)(a.sg,{span:2,children:(0,P.jsx)(a.xu,{})})]}),!J&&(0,P.jsx)(a.iz,{}),(0,P.jsx)(a.xu,{maxHeight:J?el:es,minHeight:J?354:es,overflow:"scrollY",children:et?(0,P.jsx)(n.Fragment,{children:et&&et.map(function(e){return"header"===e.type?null:(0,P.jsx)(a.xu,{children:e.isOpen&&(0,P.jsxs)(n.Fragment,{children:[J&&(0,P.jsx)(a.xu,{marginStart:4,marginTop:2,paddingY:1,children:(0,P.jsx)(j,{headingLevel:3,size:"100",children:c.props.i18n._('Board', 'PinBetterSave.BoardFlyout.BoardPickerTitle', 'board title on section picker')})}),(0,P.jsx)(z,{board:e,boardPickerSuggestedBoards:ec,buttonText:p,displayAlreadySavedMsg:O&&O.id===e.id,isSectionOpen:!0,onButtonClick:B,onClick:function(e){c.handleBoardClick({board:e,toggleSections:!1})},saveSessionId:Y,shouldOpenSections:!1,showFlyoutSaveButton:F,useLegoLayout:J}),(0,P.jsx)(V,{board:e,buttonText:p,onButtonClick:B,onClick:c.handleSectionClick,showSectionSaveButton:Z,useLegoLayout:J})]})},"".concat(e.category,"-").concat(e.id))})}):null}),R&&!f&&e_(!1)]})]})})})})]})}}],function(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,ef(n.key),n)}}(s.prototype,r),Object.defineProperty(s,"prototype",{writable:!1}),s}(n.PureComponent);function em(e){var t=(0,s.u)().logContextEvent,r=(0,d.ZP)(),n=(0,g.Z)().checkExperiment;return(0,P.jsx)(ev,el(el({},e),{},{checkExperiment:n,i18n:r,logContextEvent:t,requestContext:(0,h.B)()}))}function ex(e,t,r){var n=e.advertiser,o={};if(r&&r.user&&r.user.username&&r.id!==(t.isAuth?t.id:void 0)&&(o.orbacActingAs=r,o.username=r.user.username),t&&n){var i=e.advertiser;if(t.isAuth&&i.is_impersonation)return el({hasMUA:i.owner_user_id!==t.id,advertiser_id:i.id,username:i.owner_user_id},o);if(t.isAuth&&i.owner_user_id!==t.id)return el({hasMUA:!0,advertiser_id:i.id,username:i.owner_user_id},o);if(t.isAuth&&i.owner_user_id===t.id)return{hasMUA:!1,advertiser_id:i.id,username:"me"}}return el({advertiser_id:void 0,hasMUA:void 0},o)}function eS(e){var t=e.advertiser_id,r=e.hasMUA,n=e.boardFilter,o=void 0===n?"all":n,i=e.username,a=el(el({field_set_key:"board_picker",filter:r?"protected":o},i?{username:i}:Object.freeze({})),t?{advertiser_id:t}:{});return e.orbacActingAs&&e.orbacActingAs.user&&e.orbacActingAs.user.username&&(a=el(el({},a),{},{username:e.orbacActingAs.user.username,orbac_subject_id:e.orbacActingAs.id,filter:o})),a}function eP(e,t){return function(r,n){return r((0,p.jB)("BoardPickerBoardsResource",eS(ex(n(),e,t))))}}function ej(e){var t=(0,c.Z)(),r=(0,o.v9)(function(r){return ex(r,t,e.orbacActingAs)}),n=el(el({},e),r),i=(0,f.Z)({name:"BoardPickerBoardsResource",options:eS(n)});return(0,P.jsx)(em,el(el({},n),{},{boardResource:i}))}function ew(e){var t=(0,y.Z)(),r=(0,c.Z)(),n=(0,v.lJ)(r,t);return(0,P.jsx)(ej,el(el({},e),{},{orbacActingAs:n?t:void 0}))}function eB(e){var t=(0,f.Z)({name:"BoardPickerBoardsShortlistResource",options:{pin_id:e.pinId,shortlist_length:2,num_shortlist_suggestions:2}}),r=(0,f.Z)({name:"ApiResource",options:{url:"/v3/pins/".concat(e.pinId,"/"),field_sets:["pin.pinned_to_board()"]},noCache:!0}).data;return(0,P.jsx)(em,el(el({},e),{},{pinAlreadySavedBoard:null==r?void 0:r.pinned_to_board,suggestedBoardsShortListResource:t}))}ep(ev,"defaultProps",{clientTrackingParams:void 0,paneWidth:320,showCreateBoardButton:!0,showFlyoutSaveButton:!0,showSections:!0,showSectionSaveButton:!0,useLegoLayout:!0})},247354:function(e,t,r){var n=r(20256),o=r(411544),i=r(494904),a=r(382718),s=function(e){var t=e.collaborator_count,r=e.useLegoLayout,o=e.type;return r?(0,a.jsx)(n.xu,{marginEnd:2*!!t,children:(0,a.jsx)(i.Z,{type:o})}):(0,a.jsx)(i.Z,{type:o})};t.Z=function(e){var t,r=e.board,l=e.showCollaborativeIcon,c=e.showPrivateIcon,d=e.showProtectedIcon,u=e.showSectionsIcon,_=e.useLegoLayout,g=(null==r||null==(t=r.collaborating_users)?void 0:t.length)||0;return l||c||d||u?(0,a.jsxs)(n.xu,{alignItems:"center",dangerouslySetInlineStyle:{__style:{paddingLeft:8}},"data-test-id":"board-picker-row-icon-list-box",direction:"row",display:"flex",marginEnd:5*!_,children:[c&&(0,a.jsx)(s,{collaborator_count:g,type:"secret",useLegoLayout:_}),d&&(0,a.jsx)(s,{collaborator_count:g,type:"protected",useLegoLayout:_}),l&&(_?(0,a.jsx)(o.Z,{board:r,isCompact:!0,ownerOnly:!1}):(0,a.jsx)(i.Z,{type:"group"})),u&&(0,a.jsx)(i.Z,{type:"sections"})]}):null}},288489:function(e,t,r){var n=r(20256),o=r(382718);t.Z=function(e){var t=e.image_url,r=e.naturalHeight,i=e.naturalWidth;return(0,o.jsx)(n.xu,{"aria-hidden":"true",height:48,marginBottom:1,marginEnd:2,marginTop:1,overflow:"hidden",width:48,children:(0,o.jsx)(n.zd,{height:48,rounding:2,wash:!0,width:48,children:(0,o.jsx)(n.Ee,{alt:"",naturalHeight:r,naturalWidth:i,src:t})})})}},411544:function(e,t,r){r.d(t,{Z:function(){return u}});var n=r(20256),o=r(821342),i=r(19585),a=r(302148),s=r(382718);function l(e){return function(e){if(Array.isArray(e))return c(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return c(e,void 0);var r=({}).toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?c(e,void 0):void 0}}(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function d(e){var t,r,n,o,i,a=null!=(t=null!=(r=null==e?void 0:e.imageMediumUrl)?r:null==e?void 0:e.image_medium_url)?t:"",s=null!=(n=null==e?void 0:e.avatar_color_index)?n:void 0;return{name:null!=(o=null!=(i=null==e?void 0:e.fullName)?i:null==e?void 0:e.full_name)?o:"",color:s,src:"https://s.pinimg.com/images/user/default_75.png"===a?void 0:a}}function u(e){var t,r,c,u,_,g=e.board,h=e.forceViewer,p=e.isCompact,f=e.ownerOnly,b=(0,i.ZP)(),y=(0,o.Z)(),v=f?[d(null==g?void 0:g.owner)]:(function(e,t,r){var n=null!=e?e:{},o=n.collaborated_by_me,i=n.collaborating_users,a=n.owner,s=null!=i?i:[],c=[a];if(o||r){var d=s.findIndex(function(e){return t.isAuth&&e.id===t.id});if(-1!==d){var u=s.splice(d,1)[0];c.push(u)}else c.push(t)}var _=l(s).sort(function(e,t){var r,n,o,i;return(null!=(r=e.full_name)?r:"")>(null!=(n=t.full_name)?n:"")?1:(null!=(o=t.full_name)?o:"")>(null!=(i=e.full_name)?i:"")?-1:0});return[].concat(c,l(_))})(g,y,h).map(d),m=v.slice(0,3).map(function(e){return e.name}),x="";switch(v.length){case 3:x=(0,a.Wc)("".concat(b._('{{ first }}, {{ second }}, and {{ last }}', 'CollaboratorsFacePile.AvatarGroup.accessibilityLabel.usernames.ThreeAvatars', 'List of three usernames')),{first:"".concat(null!=(t=m[0])?t:""),second:"".concat(null!=(r=m[1])?r:""),last:"".concat(null!=(c=m[2])?c:"")});break;case 2:x=(0,a.Wc)("".concat(b._('{{ first }} and {{ second }}', 'CollaboratorsFacePile.AvatarGroup.accessibilityLabel.usernames.TwoAvatars', 'List of two usernames.')),{first:"".concat(null!=(u=m[0])?u:""),second:"".concat(null!=(_=m[1])?_:"")});break;default:x=m.join(", ")}var S=v.length>3?(0,a.Wc)(", ".concat(b.ngettext('Collaborators: {{ userNames }} and {{ leftCount }} more.', 'Collaborators: {{ userNames }} and {{ leftCount }} more.', v.length - 3, 'CollaboratorsFacePile.AvatarGroup.accessibilityLabel.aboveThree', 'Accessibility label that lists the names of collaborators and a final count of non-displayed avatars')),{userNames:x,leftCount:"".concat(v.length-3)}):(0,a.Wc)(", ".concat(b._('Collaborators: {{ userNames }}.', 'CollaboratorsFacePile.AvatarGroup.accessibilityLabel.notAboveThree', 'Accessibility label that lists the names of collaborators')),{userNames:x});return(0,s.jsx)(n.HE,{accessibilityLabel:S,collaborators:v,size:p?"xs":"sm"})}},524558:function(e,t,r){r.d(t,{Z:function(){return a}});var n=r(586659),o=r(20256),i=r(382718);function a(e){var t=e.accessibilityClearButtonLabel,r=e.accessibilityLabel,a=e.focused,s=e.id,l=e.onBlur,c=e.onChange,d=e.onFocus,u=e.placeholder,_=e.value,g=e.size,h=(0,n.useRef)(null);return(0,n.useEffect)(function(){if(a){var e=h.current;window.requestAnimationFrame(function(){var t=e&&e.querySelector("input");t instanceof HTMLInputElement&&t.focus()})}},[a]),(0,i.jsx)(o.xu,{ref:h,children:(0,i.jsx)(o.Um,{accessibilityClearButtonLabel:t,accessibilityLabel:r,id:s,onBlur:l,onChange:c,onFocus:d,placeholder:u,size:void 0===g?"lg":g,value:_})})}},494904:function(e,t,r){var n=r(20256),o=r(19585),i=r(382718);t.Z=function(e){var t=e.type,r=(0,o.ZP)(),a={group:{accessibilityLabel:r._('group board', 'Board picker group board icon', 'Board picker group board icon'),icon:"people"},protected:{accessibilityLabel:r._('protected board', 'Board picker protected board icon', 'Board picker protected board icon'),icon:"protect"},secret:{accessibilityLabel:r._('secret board', 'Board picker secret board icon', 'Board picker secret board icon'),icon:"lock"},sections:{accessibilityLabel:r._('board with sections', 'Board picker board with sections icon', 'Board picker board with sections icon'),icon:"arrow-forward"},sectionsInline:{accessibilityLabel:r._('board with sections', 'Board picker board with sections icon', 'Board picker board with sections icon'),icon:"arrow-down"}}[t],s="sections"===t||"sectionsInline"===t;return(0,i.jsx)(n.xu,{marginStart:+!!s,children:(0,i.jsx)(n.xu,{marginStart:2*!!s,children:"sections"===t||"sectionsInline"===t?(0,i.jsx)(n.JO,{accessibilityLabel:a.accessibilityLabel,color:"default",icon:a.icon,size:"12"}):(0,i.jsx)(n.JO,{accessibilityLabel:a.accessibilityLabel,color:"default",icon:a.icon,size:16})})})}}}]);