"use strict";(self.legacyJsonp=self.legacyJsonp||[]).push([["52241"],{865540:function(e,t,r){r.d(t,{Z:function(){return c}});var n=r(821342),o=r(675973),i=r(647709),a=r(448505),u=r(7872);function c(e){var t=(0,i.HG)(),r=(0,o.Z)().checkExperiment,c=(0,a.Z)(),s=(0,n.Z)(),l=(0,u.lJ)(s,c),d=!t||r("web_sce_organic_pinbuilder_dep").anyEnabled;return!l&&(e&&r("sce_lightswitch_organic"),!t||!!d)}},918920:function(e,t,r){r.d(t,{Gt:function(){return n},LG:function(){return o},UO:function(){return i},ZB:function(){return a}});var n=function(e){return e.replace(/\s+/g,"-")},o=100,i=10,a=28;t.ZP={AMP_TRACKING_DOMAIN:"amp.pinterest.com",BoardPrivacy:{SECRET:"secret",PUBLIC:"public",PROTECTED:"protected"},BoardType:{PROTECTED:"protected"},BulkAction:{MOVE:"bulkMove",COPY:"bulkCopy",CREATE_SECTION:"bulkCreateSection",DELETE:"bulkDelete"},MAX_CHARS_FOR_BOARD_PIN_DESCRIPTION:500,MAX_CHARS_FOR_BOARD_TITLE:50,MAX_CHARS_FOR_FIRST_NAME:30,MAX_FETCH_NUM_FOLLOWERS_PER_PAGE:50,MAX_STORED_VISITED_PIN_PAGES:10,VIDEO_IFRAME_ID:"video-iframe"}},899678:function(e,t,r){r.d(t,{N:function(){return a},Z:function(){return i}});var n=r(20256),o=r(382718);function i(e){var t=e.children,r=e.fullWidth,i=e.overrideDataTestId;return(0,o.jsx)(n.xu,{dangerouslySetInlineStyle:{__style:{pointerEvents:"auto",width:r?"100%":void 0}},"data-test-id":i||"pointer-events-wrapper",children:t})}function a(e){var t=e.children;return e.enabled?(0,o.jsx)(i,{children:t}):t}},781011:function(e,t,r){r.d(t,{$N:function(){return _},Cu:function(){return h},GY:function(){return f},MZ:function(){return c},NR:function(){return p},S9:function(){return u},ar:function(){return s},bC:function(){return v},fm:function(){return n},id:function(){return i},kM:function(){return a},q6:function(){return o},qp:function(){return d},uV:function(){return m},ug:function(){return b},xL:function(){return l}});var n={DOWNLOAD_TEMPLATE:"DOWNLOAD_TEMPLATE",UPLOAD_TEMPLATE:"UPLOAD_TEMPLATE",HISTORY:"HISTORY",BULK_ID_LIBRARY:"BULK_ID_LIBRARY",RESOURCES:"RESOURCES"},o={GENERAL:"GENERAL",CAMPAIGNS:"CAMPAIGNS",AD_GROUPS:"AD_GROUPS",ADS:"ADS",KEYWORDS:"KEYWORDS",PRODUCT_GROUPS:"PRODUCT_GROUPS",ERROR_CODES:"ERROR_CODES"},i={INTEREST:"INTEREST",DEVICE:"DEVICE",LANGUAGE:"LANGUAGE",LOCATION:"LOCATION",LOCATION_COUNTRY:"LOCATION_COUNTRY",LOCATION_METRO:"LOCATION_METRO",LOCATION_REGION:"LOCATION_REGION",AUDIENCE:"AUDIENCE",TARGETING_TEMPLATE:"TARGETING_TEMPLATE",CONVERSION_TAG:"CONVERSION_TAG"},a={BILLING_HISTORY:"BILLING_HISTORY",BILLING_FORMS:"BILLING_FORMS",ORDER_LINES:"ORDER_LINES",PROMOTIONS:"PROMOTIONS",TAX_DOCUMENTS:"TAX_DOCUMENTS",DOCUMENTS:"DOCUMENTS",PREPAID_CAMPAIGN_SPEND:"PREPAID_CAMPAIGN_SPEND_SUMMARY",SUMMARY:"SUMMARY"},u={CREATE:"CREATE",MANAGE:"MANAGE",VIEW_REPORT:"VIEW_REPORT",AB_TEST_CREATE:"AB_TEST_CREATE"},c={GOOGLE_TAG_MANAGER:"Google Tag Manager",SHOPIFY:"Shopify",WOO_COMMERCE:"WooCommerce",WORDPRESS:"WordPress",SQUARESPACE:"Squarespace",WEEBLY:"Weebly",TEALIUM:"Tealium",MAGENTO:"Magento",ECWID:"Ecwid",BIG_COMMERCE:"BigCommerce",PREMMERCE:"Premmerce",SEGMENT:"Segment",BRANCH:"Branch",HIGHTOUCH:"Hightouch",EULERIAN:"Eulerian",ADOBE_CDP:"Adobe Real-Time CDP",ADOBE_COMMERCE:"Adobe Commerce",SALESFORCE_COMMERCE_CLOUD:"Salesforce Commerce Cloud",PINTEREST_CAPI_CONNECT:"Pinterest CAPI Connect"},s={GTM:c.GOOGLE_TAG_MANAGER,SHOPIFY:c.SHOPIFY,WORDPRESS:c.WORDPRESS,WOOCOMMERCE:c.WOO_COMMERCE,TEALIUM:c.TEALIUM},l={GTM:"GTM",SHOPIFY:"SHOPIFY",WORDPRESS:"WORDPRESS",WOOCOMMERCE:"WOOCOMMERCE",TEALIUM:"TEALIUM"},d={PINTEREST_TAG:"PINTEREST_TAG",PINTEREST_TAG_MANUAL_SETUP_FLOW:"PINTEREST_TAG_MANUAL_SETUP_FLOW",PINTEREST_TEST_EVENTS:"PINTEREST_TEST_EVENTS",PINTEREST_TAG_HEALTH:"PINTEREST_TAG_HEALTH",CONVERSION_HEALTH:"CONVERSION_HEALTH",CONVERSION_UPLOAD:"CONVERSION_UPLOAD",UPLOAD_HISTORY:"UPLOAD_HISTORY",PCA_UPLOAD_HISTORY:"PCA_UPLOAD_HISTORY",PCA_UPLOAD:"PCA_UPLOAD",CONVERSIONS_API:"CONVERSIONS_API",CONVERSIONS_API_ACCESS_TOKEN:"CONVERSIONS_API_ACCESS_TOKEN",CONVERSIONS_API_DEDUPLICATION:"CONVERSIONS_API_DEDUPLICATION",CONVERSIONS_API_PARTNER_SETUP_FLOW:"CONVERSIONS_API_PARTNER_SETUP_FLOW",CONVERSIONS_API_MANUAL_SETUP_FLOW:"CONVERSIONS_API_MANUAL_SETUP_FLOW",PINTEREST_EVENTS_OVERVIEW:"PINTEREST_EVENTS_OVERVIEW",CONVERSIONS:"CONVERSIONS",PINTEREST_EVENTS_OVERVIEW_BEFORE_SETUP:"PINTEREST_EVENTS_OVERVIEW_BEFORE_SETUP",PINTEREST_SETUP_API:"PINTEREST_SETUP_API",NOCODE_CONVERSIONS_API_SETUP_FLOW:"NOCODE_CONVERSIONS_API_SETUP_FLOW",PINTEREST_EVENTS_OVERVIEW_CAPI_TAB:"PINTEREST_EVENTS_OVERVIEW_CAPI_TAB",PINTEREST_EVENT_HISTORY_CAPI_TAB:"PINTEREST_EVENT_HISTORY_CAPI_TAB"},f={PINTEREST_TAG_DASHBOARD:"PINTEREST_TAG_DASHBOARD",PINTEREST_TAG_LANDING:"PINTEREST_TAG_LANDING",PINTEREST_TAG_INSTRUCTIONS:"PINTEREST_TAG_INSTRUCTIONS",CONVERSION_UPLOAD_LANDING:"CONVERSION_UPLOAD_LANDING",CONVERSION_UPLOAD_VALIDATION:"CONVERSION_UPLOAD_VALIDATION",CONVERSION_UPLOAD_HISTORY:"CONVERSION_UPLOAD_HISTORY",PCA_UPLOAD_HISTORY:"PCA_UPLOAD_HISTORY",PCA_UPLOAD_LANDING:"PCA_UPLOAD_LANDING",PCA_UPLOAD_VALIDATION:"PCA_UPLOAD_VALIDATION"},p={DESTINATION:"destination",EXPIRY:"expiry",SOURCE:"attributionsrc",SOURCE_EVENT_ID:"source_event_id",SOURCE_EVENT_TYPE:"source_event_type",PRIORITY:"priority",CLICK_PRIORITY:"2",VIEW_PRIORITY:"1",HOSTNAME:"hostname",CAMPAIGN_ID:"campaign_id",ADVERTISER_ID:"advertiser_id"},m="604800",b="86400",_={ATTRIBUTION_SOURCE_ID:"attributionsourceid",ATTRIBUTE_DESTINATION:"attributiondestination",ATTRIBUTE_ON:"attributeon"},v="click",h="view"},293565:function(e,t,r){r.d(t,{G6:function(){return i},i7:function(){return a},oi:function(){return n},u$:function(){return o},un:function(){return c},vU:function(){return u},w1:function(){return s}});var n=Object.freeze({OTHER:0,CHROME:1,SAFARI:2,IE:3,FIREFOX:4,OPERA:5,EDGE:6}),o=function(e){return e?e.includes("Chrome")?n.CHROME:e.includes("Safari")?n.SAFARI:e.includes("Firefox")?n.FIREFOX:e.includes("Opera")?n.OPERA:e.includes("IE")?n.IE:e.includes("Edge")?n.EDGE:n.OTHER:n.OTHER};function i(e){return o(e)===n.SAFARI}function a(e){return o(e)===n.CHROME}function u(e){return o(e)===n.FIREFOX}function c(e){return o(e)===n.EDGE}function s(e){return o(e)===n.IE}},469987:function(e,t,r){r.d(t,{Z:function(){return n}});function n(e){var t=Math.round(e/1e3),r=Math.floor(t/60),n=t%60;return r+":"+(n<10?"0":"")+n}},417162:function(e,t,r){r.d(t,{g:function(){return a},t:function(){return i}});var n=r(586659),o=(0,n.createContext)(null),i=o,a=function(){return(0,n.useContext)(o)}},18468:function(e,t,r){r.d(t,{$P8:function(){return g},$rz:function(){return _},A6H:function(){return y},Bz5:function(){return h},CIX:function(){return m},KSH:function(){return D},M25:function(){return I},Mbi:function(){return O},OxT:function(){return b},Ufh:function(){return P},W6M:function(){return i},XqD:function(){return l},Y6X:function(){return s},_ie:function(){return E},bm6:function(){return w},bsG:function(){return o},d9H:function(){return f},gU$:function(){return C},iO$:function(){return n},iiJ:function(){return u},jMQ:function(){return A},ltu:function(){return a},oVN:function(){return S},of3:function(){return T},scJ:function(){return R},t07:function(){return d},te3:function(){return v},wZV:function(){return c},xKT:function(){return p}});var n="var(--base-color-pinterest)",o="var(--base-color-grayscale-0)",i="var(--base-color-grayscale-25)",a="var(--base-color-grayscale-50)",u="var(--base-color-grayscale-100)",c="var(--base-color-grayscale-150)",s="var(--base-color-grayscale-200)",l="var(--base-color-grayscale-250)",d="var(--base-color-grayscale-350)",f="var(--base-color-grayscale-400)",p="var(--base-color-grayscale-500)",m="var(--base-color-red-100)",b="var(--base-color-red-200)",_="var(--base-color-red-300)",v="var(--base-color-red-400)",h="var(--base-color-red-500)",y="var(--base-color-purple-100)",g="var(--base-color-purple-200)",P="var(--base-color-purple-400)",O="var(--base-color-blue-100)",S="var(--base-color-blue-400)",E="var(--base-color-blue-500)",I="var(--base-color-green-100)",A="var(--base-color-green-500)",T="var(--base-color-orange-100)",R="var(--base-font-size-16)",C="var(--base-font-family-default-latin)",D="var(--base-font-family-code)",w="var(--base-motion-easing-expressive)"},461951:function(e,t,r){r.d(t,{$9u:function(){return ea},$wC:function(){return em},$wd:function(){return A},AEu:function(){return R},AMH:function(){return K},AmI:function(){return J},Apc:function(){return eA},BJZ:function(){return ep},ByL:function(){return $},C9x:function(){return V},CkT:function(){return et},EFb:function(){return ey},Ecf:function(){return el},EvS:function(){return I},FCL:function(){return eP},F_B:function(){return u},G4W:function(){return O},Gh8:function(){return k},GnN:function(){return eR},Hgl:function(){return eT},Klx:function(){return H},KtD:function(){return eo},LZO:function(){return d},N$$:function(){return eE},NKq:function(){return er},OHS:function(){return D},QJA:function(){return w},QO3:function(){return l},RdP:function(){return e_},Ryt:function(){return N},Tp5:function(){return eC},Twt:function(){return m},UON:function(){return eD},UTl:function(){return j},V9q:function(){return eS},Vrx:function(){return ew},Wmm:function(){return n},Wyp:function(){return _},XSG:function(){return s},XgG:function(){return z},YmI:function(){return G},_HG:function(){return a},_dC:function(){return E},a85:function(){return S},b2_:function(){return h},b9x:function(){return ei},bJI:function(){return Z},bcf:function(){return v},buv:function(){return es},cYF:function(){return eb},cpp:function(){return y},cxq:function(){return U},d40:function(){return ev},dUT:function(){return C},etl:function(){return f},fcC:function(){return L},hWn:function(){return ec},hio:function(){return p},ilB:function(){return b},jKP:function(){return M},jKo:function(){return ef},jc_:function(){return T},k29:function(){return Q},kWh:function(){return Y},klq:function(){return W},lbE:function(){return P},lwx:function(){return eg},nTo:function(){return F},o6z:function(){return eu},oVm:function(){return en},qiK:function(){return o},qqC:function(){return c},r1i:function(){return X},rEw:function(){return g},saV:function(){return eh},v$5:function(){return x},v2p:function(){return ed},v6B:function(){return eO},vvv:function(){return eI},xW7:function(){return q},z6F:function(){return B},zsO:function(){return i},zuj:function(){return ee}});var n="var(--sema-color-background-default)",o="var(--sema-color-background-primary)",i="var(--sema-color-background-secondary)",a="var(--sema-color-background-tertiary)",u="var(--sema-color-background-subtle)",c="var(--sema-color-background-selected)",s="var(--sema-color-background-education)",l="var(--sema-color-background-elevation)",d="var(--sema-color-background-scrim)",f="var(--sema-color-background-inverse)",p="var(--sema-color-background-light)",m="var(--sema-color-background-dark)",b="var(--sema-color-background-disabled)",_="var(--sema-color-background-transparent)",v="var(--sema-color-background-info-default)",h="var(--sema-color-background-info-weak)",y="var(--sema-color-background-recommendation-default)",g="var(--sema-color-background-recommendation-weak)",P="var(--sema-color-background-success-default)",O="var(--sema-color-background-success-weak)",S="var(--sema-color-background-warning-default)",E="var(--sema-color-background-warning-weak)",I="var(--sema-color-background-error-default)",A="var(--sema-color-background-error-weak)",T="var(--sema-color-background-wash-scrims-opaque)",R="var(--sema-color-background-gradient-darken-bottom-weak)",C="var(--sema-color-background-gradient-darken-bottom-strong)",D="var(--sema-color-background-gradient-darken-top-weak)",w="var(--sema-color-background-gradient-darken-top-strong)",j="var(--sema-color-border-decorative)",N="var(--sema-color-border-interactive)",x="var(--sema-color-border-selected)",U="var(--sema-color-border-disabled)",M="var(--sema-color-border-error)",k="var(--sema-color-border-education)",B="var(--sema-color-border-inverse)",L="var(--sema-color-border-transparent)",F="var(--sema-color-border-focus-outer-default)",Z="var(--sema-color-border-focus-inner-default)",z="var(--sema-color-text-default)",V="var(--sema-color-text-subtle)",G="var(--sema-color-text-inverse)",H="var(--sema-color-icon-primary)",W="var(--sema-color-dataviz-10)",Y="var(--sema-color-dataviz-11)",X="var(--sema-color-dataviz-12)",Q="var(--sema-color-dataviz-01)",K="var(--sema-color-dataviz-02)",q="var(--sema-color-dataviz-03)",J="var(--sema-color-dataviz-04)",$="var(--sema-color-dataviz-05)",ee="var(--sema-color-dataviz-06)",et="var(--sema-color-dataviz-07)",er="var(--sema-color-dataviz-08)",en="var(--sema-color-dataviz-09)",eo="var(--sema-color-hover-background-default)",ei="var(--sema-color-hover-background-elevation)",ea="var(--sema-color-hover-border-decorative)",eu="var(--sema-color-hover-border-error)",ec="var(--sema-color-pressed-background-default)",es="var(--sema-color-pressed-background-elevation)",el="var(--sema-elevation-shadow-floating)",ed="var(--sema-font-weight-heading-700)",ef="var(--sema-font-weight-UI-100)",ep="var(--sema-font-size-body-100)",em="var(--sema-font-family-heading-700)",eb="var(--sema-font-family-body-SM)",e_="var(--sema-rounding-200)",ev="var(--sema-rounding-300)",eh="var(--sema-rounding-400)",ey="var(--sema-rounding-pill)",eg="var(--sema-space-0)",eP="var(--sema-space-25)",eO="var(--sema-space-50)",eS="var(--sema-space-100)",eE="var(--sema-space-200)",eI="var(--sema-space-300)",eA="var(--sema-space-400)",eT="var(--sema-space-500)",eR="var(--sema-space-800)",eC="var(--sema-space-1000)",eD="var(--sema-space-1200)",ew="var(--sema-space-1400)"},906553:function(e,t,r){r.d(t,{Z:function(){return f}});var n=r(19585),o=r(473728);function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach(function(t){var n,o;n=t,o=r[t],(n=function(e){var t=function(e,t){if("object"!=i(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=i(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==i(t)?t:t+""}(n))in e?Object.defineProperty(e,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[n]=o}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var c=function(e,t){var r=t||0,n=Math.pow(10,r),o=+(r?e*n:e).toFixed(8),i=Math.floor(o),a=o-i,u=a>.49999999&&a<.50000001?i%2==0?i:i+1:Math.round(o);return r?u/n:u},s=function(e){var t=e.maximumFractionDigits,r=e.minimumFractionDigits,n=e.style,o=e.currency,i={maximumFractionDigits:t,minimumFractionDigits:r};return n?u(u({},i),{},{style:n},"currency"===n?{currency:o,currencyDisplay:"symbol"}:{}):i},l=function(e){try{0..toLocaleString([e])}catch(e){return!1}return!0},d=function(e,t){if(t){var r=new Intl.NumberFormat(e,{style:"currency",currency:t}).resolvedOptions(),n=r.minimumFractionDigits,o=r.maximumFractionDigits;if(void 0!==n&&void 0!==o)return{minimumFractionDigits:n,maximumFractionDigits:o}}return{minimumFractionDigits:2,maximumFractionDigits:2}};function f(){var e=(0,n.ZP)();return function(t,r,n){var i=0,a=0,u=n&&n.style||void 0,f=n&&n.shortform||!1,p=n&&n.uplimit||void 0,m=n&&n.currency||void 0,b=!!p&&r>=p,_=p&&b?p:r;if("currency"===u){var v=d(t,m),h=v.minimumFractionDigits,y=v.maximumFractionDigits;i=void 0===n||void 0===n.maximum_fraction_digits?y:n.maximum_fraction_digits,a=void 0===n||void 0===n.minimum_fraction_digits?h:n.minimum_fraction_digits}else i=void 0===n||void 0===n.maximum_fraction_digits?0:n.maximum_fraction_digits,a=void 0===n||void 0===n.minimum_fraction_digits?0:n.minimum_fraction_digits;if(f&&_>999&&(i=void 0===n||void 0===n.shortform_maximum_fraction_digits?2:n.shortform_maximum_fraction_digits,a=0),i<a)return String(_);var g=_,P="",O=[{"100m":{value:1e8,localeKey:e._('億', 'Abbreviation for one hundred millions. This abbreviation is only used in Chinese, Japanese and Korean.', 'Abbreviation for one hundred millions. This abbreviation is only used in Chinese, Japanese and Korean.')}},{"10k":{value:1e4,localeKey:e._('万', 'Abbreviation for ten thousand. This abbreviation is only used in Chinese, Japanese and Korean.', 'Abbreviation for ten thousand. This abbreviation is only used in Chinese, Japanese and Korean.')}}],S=[{b:{value:1e9,localeKey:e._('b', 'Used in number formatting to abbreviate large values in billions.', 'Abbreviation for one billion.')}},{m:{value:1e6,localeKey:e._('m', 'Used in number formatting to abbreviate large values in millions.', 'Abbreviation for one million.')}},{k:{value:1e3,localeKey:e._('k', 'Used in number formatting to abbreviate large values in thousands.', 'Abbreviation for one thousand.')}}],E=/^zh|ja|ko/.test(t);if(f&&_>999)for(var I=E?O:S,A=0;A<I.length;A+=1){var T=Object.keys(I[A])[0],R=I[A][T].value;if(_>=R){g=c(_/R*Math.pow(10,i))/Math.pow(10,i),P=I[A][T].localeKey;break}}if(null==g)return"";var C=g.toLocaleString([l(t)&&"ar-SA"!==t?t:"en-US"],s({maximumFractionDigits:i,minimumFractionDigits:a,currency:m,style:u}));return P&&P.length>0?(0,o.Z)(e._('{{formattedNumber}}{{numberSuffix}}', 'i18n.usePrettyNumberFormat.prettyNumberFormat', 'String used to concatenate formatted number and localized number suffix'),{formattedNumber:C,numberSuffix:P})+(b?"+":""):C+(b?"+":"")}}},274320:function(e,t,r){r.d(t,{a:function(){return o},r:function(){return i}});var n=(0,r(729434).Z)("ExperimentContext"),o=n.Provider,i=n.get},942230:function(e,t){t.Z=function(e){switch(e){case"BR":case"MX":case"AR":case"CL":case"CO":return"LatAm";case"US":return"US";default:return"OTHER"}}},929915:function(e,t,r){r.d(t,{l:function(){return i},r:function(){return a}});var n=r(586659),o=(0,n.createContext)(null),i=function(){return(0,n.useContext)(o)},a=o},483180:function(e,t,r){r.d(t,{AO:function(){return m},Ag:function(){return i},C0:function(){return c},L1:function(){return f},Vi:function(){return a},Wm:function(){return b},YD:function(){return d},kS:function(){return o},oo:function(){return u},p3:function(){return p},vC:function(){return s},vI:function(){return l}});var n=r(805205),o="https://www.pinterest.com/business/hub/",i="https://www.pinterest.com/homefeed/",a="www.pinterest.com",u="https://www.pinterest.com/_/_/help",c="".concat((0,n.Z)({site:"www"})),s=(0,n.Z)({site:"developers"}),l="".concat((0,n.Z)({site:"sterling"})),d="".concat((0,n.Z)({site:"analytics"})),f="".concat((0,n.Z)({site:"trends"})),p="".concat((0,n.Z)({site:"www",path:"/business/catalogs/?advertiserId="})),m="".concat((0,n.Z)({site:"business"})),b="https://www.pinterest.com/_/_/policy"},576087:function(e,t,r){r.d(t,{Z:function(){return o}});var n=r(869273),o=function(e){var t=e.url,r=(0,n.Z)("/");return 0===t.lastIndexOf(r,0)?t.substr(r.length-1):t}},194737:function(e,t){t.Z=function(e){var t=e.url;return""===t||/^(https?:\/\/)?[a-z0-9_\-]+\..+/i.test(t)}},271910:function(e,t,r){r.d(t,{q:function(){return u}});var n=r(586659);function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,u=[],c=!0,s=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(u.push(n.value),u.length!==t);c=!0);}catch(e){s=!0,o=e}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(s)throw o}}return u}}(e,t)||function(e,t){if(e){if("string"==typeof e)return i(e,t);var r=({}).toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?i(e,t):void 0}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var a=function(){var e=o((0,n.useState)(!1),2),t=e[0],r=e[1],i=o((0,n.useState)(!1),2),a=i[0],u=i[1],c=o((0,n.useState)(!1),2),s=c[0],l=c[1];return{active:t,focused:a,hovered:s,onBlur:function(){u(!1),r(!1)},onFocus:function(){return u(!0)},onMouseDown:function(){return r(!0)},onMouseEnter:function(){return l(!0)},onMouseLeave:function(){l(!1),r(!1)},onMouseUp:function(){return r(!1)}}};function u(e){return(0,e.children)(a())}t.Z=a},792171:function(e,t,r){r.d(t,{H:function(){return h},W:function(){return y}});var n=r(586659),o=r(980787),i=r(729434),a=r(675973),u=r(382718);function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e){return function(e){if(Array.isArray(e))return b(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||m(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function d(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach(function(t){f(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function f(e,t,r){var n;return(n=function(e,t){if("object"!=c(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=c(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==c(n)?n:n+"")in e)?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function p(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,u=[],c=!0,s=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(u.push(n.value),u.length!==t);c=!0);}catch(e){s=!0,o=e}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(s)throw o}}return u}}(e,t)||m(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e,t){if(e){if("string"==typeof e)return b(e,t);var r=({}).toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?b(e,t):void 0}}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var _=(0,i.Z)("VideoPlayer"),v=_.Provider,h=_.get;function y(e){var t=e.children,r=(0,o.u)(),i=r.logContextEvent,c=r.logImpression,l=(0,a.Z)().checkExperiment,m=p((0,n.useState)(!1),2),b=m[0],_=m[1],h=p((0,n.useState)([]),2),y=h[0],g=h[1],P=p((0,n.useState)([]),2),O=P[0],S=P[1],E=p((0,n.useState)({}),2),I=E[0],A=E[1],T=l("web_ads_mrc_video_impression").anyEnabled,R=function(e){A(function(t){return d(d({},t),{},f({},e,!0))})},C=(0,n.useCallback)(function(e){var t,r;if(18===e.event_type&&null!=(t=e.event_data)&&null!=(r=t.pinImpressions)&&r.length){var n,o=e.event_data.pinImpressions[0].isNativeVideoAndWatchable,i=JSON.stringify((null==(n=e.aux_data)?void 0:n.commerce_data)||"").includes("story_pin_id");T&&(o||i)&&g(function(t){return[].concat(s(t),[e]).slice(-1e3)})}},[T]),D=(0,n.useCallback)(function(e){18===e.eventType&&T&&S(function(t){return[].concat(s(t),[e]).slice(-1e3)})},[T]),w=function(e){var t=e.event_data.pinImpressions[0].time;return d(d({},e),{},{event_data:d(d({},e.event_data),{},{pinImpressions:[d(d({},e.event_data.pinImpressions[0]),{},{isMrcBtr:!0,endTime:t,renderDuration:0})]})})},j=function(e){if(e.eventData){var t=e.eventData.time;return d(d({},e),{},{eventData:d(d({},e.eventData),{},{isMrcBtr:!0,endTime:null!=t?t:0})})}return null};(0,n.useEffect)(function(){var e=y.filter(function(e){return!I[e.event_data.pinImpressions[0].pinIdStr]||!T||(i(w(e)),!1)});e.length!==y.length&&g(e)},[y,T,i,I]),(0,n.useEffect)(function(){var e=O.filter(function(e){var t,r=null==(t=e.eventData)?void 0:t.pinIdStr;if(!r)return!1;if(I[r]&&T){var n=j(e);return n&&c(n),!1}return!0});e.length!==O.length&&S(e)},[O,T,c,I]);var N=(0,n.useMemo)(function(){return{captionsEnabled:b,logMrcVideoAdImpressionOnPlay:D,logMrcVideoAdEventOnPlay:C,setCaptionsEnabled:_,setVideoPlayed:R,videosPlayed:I}},[b,C,D,I]);return(0,u.jsx)(v,{value:N,children:t})}},947810:function(e,t,r){var n=r(821342),o=r(448505),i=r(7872);t.Z=function(){var e=(0,n.Z)(),t=(0,o.Z)();return(0,i.lJ)(e,t)}},218119:function(e,t,r){r.d(t,{Z:function(){return d}});var n=r(20256),o=r(19585),i=r(382718);function a(){var e=(0,o.ZP)();return(0,i.jsx)(n.kC,{alignItems:"center",justifyContent:"center",children:(0,i.jsx)(n.xH,{accessibilityLabel:e._('Loading editor', 'EditorWithMentionsFallback.loading', 'Message shown while waiting for the editor to load'),show:!0})})}function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach(function(t){var n,o;n=t,o=r[t],(n=function(e){var t=function(e,t){if("object"!=u(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=u(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==u(t)?t:t+""}(n))in e?Object.defineProperty(e,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[n]=o}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var l=(0,r(78762).Z)(function(){return Promise.all([r.e("52949"),r.e("96310")]).then(r.bind(r,493123))},void 0,function(e){return 493123},"app-www-EditorWithMentions-EditorWithMentionsInternal",function(e){return ["52949","96310"]});function d(e){return(0,i.jsx)(l,s(s({},e),{},{fallback:(0,i.jsx)(a,{})}))}},97245:function(e,t,r){r.d(t,{Z:function(){return i}});var n=r(20256),o=r(382718);function i(e){var t=e.htmlFor,r=e.errorMessage,i=e.errorMessageColor,a=e.icon;return(0,o.jsx)(n.__,{htmlFor:t,children:(0,o.jsx)(n.xu,{marginTop:1,children:(0,o.jsxs)(n.kC,{direction:"row",gap:2,children:[a,(0,o.jsx)(n.xv,{color:void 0===i?"error":i,size:"200",children:r})]})})})}},793698:function(e,t,r){r.d(t,{LO:function(){return f},cm:function(){return d},dM:function(){return s},kY:function(){return p},mN:function(){return l}});var n=r(581722),o=r(729434),i=r(821342),a=r(382718),u=(0,o.Z)("Users"),c=u.Provider,s=u.get;function l(){var e=s();return function(t){return e[t]}}function d(){var e=s();return function(t){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=Object.keys(e).find(function(r){return e[r].username===t});if(n||!r)return e[null!=n?n:""]}}function f(){var e=(0,i.Z)();return s()[e.isAuth?e.id:""]}function p(e){var t=e.children,r=(0,n.v9)(function(e){return e.users},n.wU);return(0,a.jsx)(c,{value:r,children:t})}},317923:function(e,t,r){r.d(t,{Z:function(){return j}});var n=r(586659),o=r(581722),i=r(20256),a=r(918920),u=r(821342),c=r(19585),s=r(72918),l=r(886981),d=r(684148),f=r(448505),p=r(947810),m=r(7872),b=r(168844),_=r(443962),v=r(341570),h=r(494904),y=r(890774),g=r(382718);function P(e){return(P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function O(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function S(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?O(Object(r),!0).forEach(function(t){R(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):O(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function E(e,t){return(E=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function I(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function A(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(A=function(){return!!e})()}function T(e){return(T=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function R(e,t,r){return(t=C(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function C(e){var t=function(e,t){if("object"!=P(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=P(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==P(t)?t:t+""}function D(e){var t=e.board,r=e.hovered,n=e.searchQuery,o=t.privacy===a.ZP.BoardPrivacy.SECRET;return(0,g.jsxs)(i.xu,{color:r?"secondary":"default",display:"flex",padding:2,rounding:2,children:[(0,g.jsx)(i.xu,{flex:"grow",children:(0,g.jsx)(i.xv,{weight:"bold",children:(0,v.W)(n,t.name)})}),(0,g.jsxs)(i.kC,{alignItems:"stretch",direction:"row",flex:"none",justifyContent:"start",children:[o&&(0,g.jsx)(h.Z,{type:"secret"}),t.is_collaborative&&(0,g.jsx)(h.Z,{type:"group"})]})]})}var w=function(e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");o.prototype=Object.create(e&&e.prototype,{constructor:{value:o,writable:!0,configurable:!0}}),Object.defineProperty(o,"prototype",{writable:!1}),e&&E(o,e);var t,r,n=(t=A(),function(){var e,r=T(o);return e=t?Reflect.construct(r,arguments,T(this).constructor):r.apply(this,arguments),function(e,t){if(t&&("object"==P(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return I(e)}(this,e)});function o(e){var t;if(!(this instanceof o))throw TypeError("Cannot call a class as a function");return R(I(t=n.call(this,e)),"getSections",function(){if(!(null!=(e=t.props.boardResource.data)&&e.all_boards))return[];var e,r=t.state.searchQuery,n=t.props.boardResource.data.all_boards;return r.length>=d.Z?[{items:(0,_.j)(n,r)}]:[{items:n}]}),R(I(t),"createBtnDisabled",function(){if(!(null!=(e=t.props.boardResource.data)&&e.all_boards))return!1;var e,r=t.props.boardResource.data.all_boards,n=t.state.searchQuery;return r.some(function(e){var t;return(null==(t=e.name)?void 0:t.toLowerCase())===n.toLowerCase()})}),R(I(t),"handleBoardCreate",function(){return function(){var e=t.state.searchQuery;if(e){var r=t.props,n=r.createBoard,o=r.invalidateBoardPickerBoardsResource,i=r.onBoardCreate;if(o(),i)return void i(e);n({name:e,privacy:"public",aux_data:{source:"board_picker_flyout"}}).then(function(e){(0,t.props.onBoardChosen)(e)})}}}),R(I(t),"handleBoardSelected",function(e){t.props.onBoardChosen(e),t.setState({selectedBoard:e})}),R(I(t),"handleSearchQueryUpdate",function(e){t.setState({searchQuery:e})}),R(I(t),"renderRow",function(e){var r=e.item,n=e.hovered,o=t.state.searchQuery;return(0,g.jsx)(D,{board:r,hovered:n,searchQuery:o})}),t.state={searchQuery:"",selectedBoard:e.board},t}return r=[{key:"render",value:function(){var e=this.props,t=e.boardResource,r=e.board,n=e.isBoardlessPinsBoard,o=e.isQuickCreatesBoard,a=e.isStoryPin,u=this.state,c=u.searchQuery,s=u.selectedBoard,l=this.props.i18n._('Select a board', 'Label for selecting a board in Edit Pin Modal', 'Label for selecting a board in Edit Pin Modal');return r?l=o?this.props.i18n._('Choose board', 'BoardPickerFlyout.displayBoardName.quickCreatesBoard', 'Title for board picker when current board is a quick creates board'):n?this.props.i18n._('Profile', 'BoardPickerFlyout.displayBoarName.boardlessPins', 'Title indicating the pin is saved to profile'):r.name:s&&(l=s.name),(0,g.jsxs)(i.xu,{children:[(0,g.jsx)(i.xH,{accessibilityLabel:this.props.i18n._('loading board picker', 'accessibility text for loading spinner', 'accessibility text for loading spinner'),show:!t.isLoaded}),t.data&&(0,g.jsx)(b.Z,{createBtnDisabled:this.createBtnDisabled(),dropdownValue:l||"",isStoryPin:a,onCreate:this.handleBoardCreate(),onSearchQueryUpdate:this.handleSearchQueryUpdate,onSelect:this.handleBoardSelected,renderRow:this.renderRow,searchQuery:c,sections:this.getSections()})]})}}],function(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,C(n.key),n)}}(o.prototype,r),Object.defineProperty(o,"prototype",{writable:!1}),o}(n.Component);function j(e){var t=(0,y.Z)(),r=(0,c.ZP)(),n=(0,o.I0)(),i=(0,u.Z)(),a=(0,o.v9)(function(e){return e.advertiser}),d=i.isAuth&&a&&a.owner_user_id!==i.id,b=d?a.id:null,_=d?a.owner_user_id:null,v=(0,f.Z)(),h=(0,p.Z)(),P=(0,m.Ms)(i,v),O=P||_,E=(0,l.Z)({name:"BoardPickerBoardsResource",options:S(S({pin_id:e.pinId,field_set_key:"board_picker",onlyFetchBoards:!0,username:O},b&&_?{advertiser_id:b,filter:"protected",username:_}:{}),{},{orbac_subject_id:h}),noCache:!0});return(0,g.jsx)(w,S(S({},e),{},{advertiser_id:b,boardResource:E,createBoard:function(e){return t({boardCreateOptions:S(S({},e),{},{aux_data:{source:"board_picker_flyout"}})})},i18n:r,invalidateBoardPickerBoardsResource:function(){n((0,s.jB)("BoardPickerBoardsResource",S({field_set_key:"board_picker"},P?{username:P}:{username:_})))},username:_,viewer:i}))}},874642:function(e,t,r){r.d(t,{Z:function(){return C},x:function(){return R}});var n=r(586659),o=r(581722),i=r(20256),a=r(521009),u=r(19585),c=r(886981),s=r(684148),l=r(816676),d=r(168844),f=r(443962),p=r(341570),m=r(382718);function b(e){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function v(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?_(Object(r),!0).forEach(function(t){S(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function y(e,t){return(y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function g(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function P(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(P=function(){return!!e})()}function O(e){return(O=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function S(e,t,r){return(t=E(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function E(e){var t=function(e,t){if("object"!=b(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=b(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==b(t)?t:t+""}var I="NO_SECTION_VALUE";function A(e){var t=e.section,r=e.hovered,n=e.searchQuery;return(0,m.jsxs)(i.xu,{children:[(0,m.jsx)(i.xu,{color:r?"secondary":"default",display:"flex",padding:2,rounding:2,children:(0,m.jsx)(i.xu,{flex:"grow",children:(0,m.jsx)(i.xv,{weight:"bold",children:(0,p.W)(n,t.title)})})}),t.id===I&&(0,m.jsx)(i.iz,{})]})}var T=function(e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");o.prototype=Object.create(e&&e.prototype,{constructor:{value:o,writable:!0,configurable:!0}}),Object.defineProperty(o,"prototype",{writable:!1}),e&&y(o,e);var t,r,n=(t=P(),function(){var e,r=O(o);return e=t?Reflect.construct(r,arguments,O(this).constructor):r.apply(this,arguments),function(e,t){if(t&&("object"==b(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return g(e)}(this,e)});function o(){var e;if(!(this instanceof o))throw TypeError("Cannot call a class as a function");for(var t=arguments.length,r=Array(t),i=0;i<t;i++)r[i]=arguments[i];return S(g(e=n.call.apply(n,[this].concat(r))),"state",{searchQuery:""}),S(g(e),"getPickerSections",function(){var t,r=e.state.searchQuery,n=e.props,o=n.sectionsResource,i=n.mergingFromSectionId,a=o&&o.data||[];return a=i?a.filter(function(e){return e.id!==i}):[{id:I,title:e.props.i18n._('No section', 'default dropdown option for selecting a board section on pin edit', 'default dropdown option for selecting a board section on pin edit')}].concat(function(e){if(Array.isArray(e))return h(e)}(t=a)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||function(e,t){if(e){if("string"==typeof e)return h(e,void 0);var r=({}).toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?h(e,void 0):void 0}}(t)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),r.length>=s.Z&&(a=(0,f.j)(a,r,"title")),[{items:a}]}),S(g(e),"createBtnDisabled",function(){var t=e.props.sectionsResource,r=e.state.searchQuery;return!!t&&!!t.data&&t.data.some(function(e){var t;return(null==(t=e.title)?void 0:t.toLowerCase())===r.toLocaleLowerCase()})}),S(g(e),"handleSectionCreate",function(){var t=e.props,r=t.board,n=t.onSectionChange,o=t.sectionsResource,i=t.dispatch,a=t.onSectionCreate,u=t.logContextEvent,c=e.state.searchQuery;if(a)return void a(c);i&&r.id&&i((0,l.Z)({boardId:r.id,name:c},e.props.i18n,void 0,u)).then(function(t){o&&o.refresh(),e.setState({searchQuery:""}),n(t)})}),S(g(e),"handleSectionSelected",function(t){(0,e.props.onSectionChange)(t.id===I?null:t),e.setState({searchQuery:""})}),S(g(e),"handleSearchQueryUpdate",function(t){e.setState({searchQuery:t})}),S(g(e),"renderRow",function(t){var r=t.item,n=t.hovered,o=e.state.searchQuery;return(0,m.jsx)(A,{hovered:n,searchQuery:o,section:r})}),e}return r=[{key:"componentDidUpdate",value:function(e){var t=e.selectedSectionId;if(this.props.selectedSectionId!==t){var r=this.props.sectionsResource;r&&r.refresh()}}},{key:"render",value:function(){var e,t=this.props,r=t.idealDirection,n=t.isStoryPin,o=t.sectionsResource,a=t.selectedSectionId,u=t.mergingFromSectionId,c=t.selectedSectionName,s=this.state.searchQuery,l=u?this.props.i18n._('Pick a section', 'default dropdown option for selecting a board section to merge to', 'default dropdown option for selecting a board section to merge to'):this.props.i18n._('No section', 'default dropdown option for selecting a board section on pin edit', 'default dropdown option for selecting a board section on pin edit');return a?(o&&o.data&&(e=o.data.find(function(e){return e.id===a})),l=e&&e.title||l):c&&(l=c),(0,m.jsxs)(i.xu,{children:[(0,m.jsx)(i.xH,{accessibilityLabel:this.props.i18n._('loading section picker', 'accessibility text for loading spinner', 'accessibility text for loading spinner'),show:!!o&&!o.isLoaded}),(!o||o&&o.isLoaded)&&(0,m.jsx)(d.Z,{createBtnDisabled:this.createBtnDisabled(),dropdownValue:l,idealDirection:r,isStoryPin:n,onCreate:u?null:this.handleSectionCreate,onSearchQueryUpdate:this.handleSearchQueryUpdate,onSelect:this.handleSectionSelected,renderRow:this.renderRow,searchQuery:s,sections:this.getPickerSections()})]})}}],function(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,E(n.key),n)}}(o.prototype,r),Object.defineProperty(o,"prototype",{writable:!1}),o}(n.Component);function R(e){var t=(0,u.ZP)();return(0,m.jsx)(T,v(v({},e),{},{dispatch:(0,o.I0)(),i18n:t,logContextEvent:(0,a.Z)()}))}function C(e){var t=(0,c.Z)({name:"BoardSectionsRepinResource",options:{board_id:e.board.id},noCache:!0});return(0,m.jsx)(R,v(v({},e),{},{sectionsResource:t}))}},271597:function(e,t,r){r.d(t,{AC:function(){return a},FC:function(){return l},FP:function(){return c},M0:function(){return u},SA:function(){return f},Xq:function(){return d},Y_:function(){return i},o2:function(){return o},s0:function(){return n},z9:function(){return s}});var n=44,o=40,i=49,a=69,u=236,c=157,s=320,l=213,d=7,f=["US","GB","CA","FR","DE","AT","CH","IT","ES","AU","BR","NL","MX"]},601686:function(e,t,r){r.d(t,{bq:function(){return d},x4:function(){return f}});var n=r(586659),o=r(611499),i=r(382718);function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(Object(r),!0).forEach(function(t){var n,o;n=t,o=r[t],(n=function(e){var t=function(e,t){if("object"!=a(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=a(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==a(t)?t:t+""}(n))in e?Object.defineProperty(e,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[n]=o}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var s={showCloseupContentRight:!0,showProductDetailPage:!1,viewportSize:"lg",paneWidth:o.Gg,maxWidth:o.u6,descriptionPaneWidth:o.u6-o.Gg,isCommentAttachmentSelectorOpen:!1,isCommentComposerFocused:!1,isCommentPopoverInteractionActive:!1,isCommentThreadExpanded:!1,isCloseupMediaViewerOpen:!1,isMediaViewerOpen:!1,isShoppingModuleExpanded:!1,closeupWithinMasonryEnabled:!1,peekCloseupEnabled:!1,calculatedImageHeight:0,setAbortNoActionPlacementTimeout:function(){},setIsCloseupMediaViewerOpen:function(){},setIsCommentAttachmentSelectorOpen:function(){},setIsCommentComposerFocused:function(){},setIsCommentPopoverInteractionActive:function(){},setIsMediaViewerOpen:function(){},setIsShoppingModuleExpanded:function(){},setCalculatedImageHeight:function(){},setViewportSize:function(){}},l=(0,n.createContext)(s);function d(e){var t=e.children,r=e.value,o=(0,n.useMemo)(function(){return c(c({},s),r)},[r]);return(0,i.jsx)(l,{value:o,children:t})}function f(){var e=(0,n.useContext)(l);if(!e)throw Error("useCloseupContext must be used within CloseupContextProvider");return e}},611499:function(e,t,r){r.d(t,{$T:function(){return b},CI:function(){return a},Ch:function(){return c},E$:function(){return S},ER:function(){return m},Gb:function(){return s},Gg:function(){return o},Hf:function(){return h},Id:function(){return P},Ie:function(){return d},KP:function(){return f},Kn:function(){return u},O5:function(){return _},d2:function(){return l},dm:function(){return O},fF:function(){return g},g9:function(){return p},iB:function(){return y},rv:function(){return v},u6:function(){return i}});var n=r(20256),o=508,i=1016,a=488,u=992,c=672,s=1176,l=40,d=72,f=740,p=32,m=16,b=24,_=2,v=1,h=new n.Ry(5),y={ARTICLE:"https://schema.org/Article",BRAND:"https://schema.org/Brand",PRODUCT:"https://schema.org/Product",RECIPE:"https://schema.org/Recipe",OFFER:"https://schema.org/Offer",OUT_OF_STOCK:"https://schema.org/OutOfStock",PERSON:"https://schema.org/Person"},g={boxShadow:"0 2px 5px rgba(0, 0, 0, 0.06)",transition:"box-shadow 200ms ease-in-out"},P="calc(90vh - 80px)",O="calc(55vh + 80px)",S="calc(75vh - 80px)"},712172:function(e,t,r){r.d(t,{CU:function(){return u},GH:function(){return l},Iw:function(){return s},c3:function(){return m},gA:function(){return d},tD:function(){return c},vF:function(){return f},yR:function(){return p}});var n=function(e){var t=e.index;return e.numberOfSlides-t-Math.floor(e.slidesShownPerPosition)<1},o=function(e){var t=e.slidesShownPerPosition,r=e.slotAndGapWidth;return r-(t-parseInt(t,10))*r},i=function e(t){var r=t.containerWidth,n=t.contentWidth,o=t.index,i=t.slotAndGapWidth,a=o-1,u=a*i;return n-u>=r?u:e({index:a,slotAndGapWidth:i,containerWidth:r,contentWidth:n})},a=function(e){var t=e.containerWidth,r=e.contentWidth,n=e.gap,a=e.index,u=e.slidesShownPerPosition,c=e.slotAndGapWidth,s=e.paddingX;return i({containerWidth:t,contentWidth:r,index:a,slotAndGapWidth:c})+o({slidesShownPerPosition:u,slotAndGapWidth:c})-n+(void 0===s?0:s)},u=function(e){var t=e.containerWidth,r=e.gap,o=e.index,i=e.numberOfSlides,u=e.slotWidth,c=e.paddingX,s=u+r,l=s*i,d=c?t-c:t;if(l<=d)return 0;var f=d/s,p=n({index:o,numberOfSlides:i,slidesShownPerPosition:f})?a({containerWidth:d,contentWidth:l,gap:r,index:o,slidesShownPerPosition:f,slotAndGapWidth:s,paddingX:c}):o*s;return p?Math.round(-p):0},c=function(e){var t=e.containerWidth,r=e.gap,n=e.index,o=e.numberOfSlides,i=e.slotWidth,a=e.isHorizontalScrollable,c=e.paddingX,s=e.rows,l=o/(void 0===s?1:s)*i+r*(o-1),d=c?t-c:t;return 0!==t&&(l<=d||(a?l<=d:Math.abs(u({containerWidth:t,gap:r,index:n,numberOfSlides:o,slotWidth:i,paddingX:c}))+r>=l-d))},s=function(e){var t=e.containerWidth,r=e.currentIndex,n=e.gap,o=e.index,i=e.numberOfSlides,a=e.slotWidth,c=e.paddingX,s=a+n,l=c?t-c:t;if(s*i<=l||0===t)return!0;var d=u({containerWidth:t,gap:n,index:r,numberOfSlides:i,slotWidth:a,paddingX:c}),f=c?l+s+c:t+s;return d+s*o<f},l=function(e,t,r){return e||"".concat(t._('carousel image', 'Alternate text for a carousel image that indicates it is a carousel pin, with carousel index followed', 'Alternate text for a carousel image that indicates it is a carousel pin, with carousel index followed')," ").concat(r)};function d(e){var t,r,n,o,i,a=e.highResOnly,u=e.slot.images;return a?"".concat(null!=(o=null==u||null==(i=u["564x"])?void 0:i.url)?o:""," 1x"):[(null==u?void 0:u["474x"])&&"".concat(null!=(t=u["474x"].url)?t:""," 2x"),(null==u?void 0:u["736x"])&&"".concat(null!=(r=u["736x"].url)?r:""," 3x"),(null==u?void 0:u.orig)&&"".concat(null!=(n=u.orig.url)?n:""," 4x")].filter(Boolean).join(", ")}var f=function(e,t,r,n){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,i=arguments.length>5?arguments[5]:void 0,a=i?r-i:r;if(a===t)return-(n*t*1)+(i||0);var u=Math.floor(a-t),c=t+o;return n===e-1?-1*n*c+u+(i||0):-1*n*c+(i||0)},p=function(e,t,r,n,o,i,a){if(!e||t<=0)return 0;var u=Math.floor(r*n),c=(null==e?void 0:e.clientWidth)||i*u;return Math.round(((a?t-a:t)+(a?c-a:c)-u/2)/(u+o))-1},m=function(e,t,r,n,o,i){e.current&&t&&e.current.scrollBy({left:(r-n)*(o+i),behavior:"smooth"})}},280670:function(e,t,r){r.d(t,{O:function(){return d},Z:function(){return f}});var n=r(586659),o=r(20256),i=r(19585),a=r(694955),u=r(382718);function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var s=(0,n.lazy)(function(){return r.e("28168").then(r.bind(r,494818))}),l={xs:12,sm:16,md:20,lg:24};function d(e){var t=e.children,r=(0,i.ZP)();return(0,u.jsx)(o.u,{dataTestId:"verified-badge-tooltip",link:(0,u.jsx)(o.rU,{href:a.vBy,target:"blank",children:(0,u.jsx)(o.xv,{color:"inverse",size:"100",weight:"bold",children:r._('Learn more', 'verifiedBadge.tooltip.link', 'Learn more about Pinterest\'s Merchant Guidelines')})}),text:r._('This retailer meets Pinterest\'s Merchant Guidelines', 'merchantVerification.badge.tooltip', 'Badge indicating that a merchant or user is verified'),children:t})}function f(e){var t,r=e.iconOnly,a=e.isVerifiedIdentity,f=e.isVerifiedMerchant,p=e.showText,m=e.size,b=e.inspirationalBadges,_=e.inspirationalBadgesColor,v=(0,i.ZP)(),h=function(e){if(Array.isArray(e))return e}(t=(0,n.useState)(!1))||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,u=[],c=!0,s=!1;try{for(i=(r=r.call(e)).next;!(c=(n=i.call(r)).done)&&(u.push(n.value),2!==u.length);c=!0);}catch(e){s=!0,o=e}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(s)throw o}}return u}}(t,2)||function(e,t){if(e){if("string"==typeof e)return c(e,2);var r=({}).toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?c(e,2):void 0}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),y=h[0],g=h[1],P=(0,u.jsxs)(o.xu,{alignItems:"center","data-test-id":"verified-badge-icon",display:"flex",justifyContent:"start",children:[(0,u.jsx)(o.iP,{onTap:function(){return g(!0)},children:(0,u.jsx)(o.JO,{accessibilityLabel:v._('Merchant verification badge icon', 'merchantVerification.badge.icon', 'Badge indicating that a merchant or user is verified'),color:"info",icon:"check-circle-fill",inline:!0,size:l[m]})}),p&&(0,u.jsx)(o.xu,{marginStart:2,children:(0,u.jsx)(o.xv,{color:"shopping",inline:!0,weight:"bold",children:v._('Verified merchant', 'creator.header.verifiedMerchant', 'this merchant is a verified merchant')})})]});return(0,u.jsxs)(n.Fragment,{children:[f&&!r&&(0,u.jsx)(d,{children:P}),f&&r&&P,a&&!f&&(0,u.jsx)(o.JO,{accessibilityLabel:v._('Domain verification icon', 'domainVerification.badge.icon', 'Badge indicating that a merchant or user is verified'),color:"error",icon:"check-circle-fill",size:l[m]}),!a&&!r&&f&&y&&(0,u.jsx)(n.Suspense,{children:(0,u.jsx)(s,{inspirationalBadges:b,inspirationalBadgesColor:_,setShowModal:g,showModal:y})})]})}},33618:function(e,t,r){r.d(t,{Z:function(){return n}});function n(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4?arguments[4]:void 0;return{privacy_filter:t?"secret":"public",sort:r||"last_pinned_to",field_set_key:"profile_grid_item",username:e,isRetrievalHub:n,filter_types:o}}},356299:function(e,t){t.Z=function(e,t,r){return"".concat(e,":").concat(t||"",":").concat(r||"")}},214239:function(e,t,r){r.d(t,{O:function(){return s},Q:function(){return l}});var n=r(72918),o=r(356299),i=r(189976);function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}var c=["alphabetical","last_pinned_to","oldest","newest","group_boards_at_top","custom"],s={name:"BoardsResource",key:"boardsResource",options:function(e,t){var r=e.boardOrder,n=e.filterStories,o=e.mixPublicSecret,i=e.username,c=e.privacyFilter,s=e.filterAllPins,l=e.includeArchived;return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(Object(r),!0).forEach(function(t){var n,o;n=t,o=r[t],(n=function(e){var t=function(e,t){if("object"!=a(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=a(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==a(t)?t:t+""}(n))in e?Object.defineProperty(e,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[n]=o}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({privacy_filter:void 0===c?"all":c,sort:r||"last_pinned_to",field_set_key:"profile_grid_item",filter_stories:n,username:i,page_size:25,group_by:o?"mix_public_private":"visibility",include_archived:void 0===l||l,redux_normalize_feed:!0,filter_all_pins:void 0!==s&&s},t?{orbac_subject_id:t}:Object.freeze({}))}},l=function(e){return c.reduce(function(t,r){var a=[(0,i.N8)("profileBoards",(0,o.Z)(e,r))];return[!0,!1].forEach(function(t){[!0,!1].forEach(function(o){a.push((0,n.jB)(s.name,s.options({username:e,boardOrder:r,mixPublicSecret:t,filterStories:o})))})}),t.concat(a)},[])}},889229:function(e,t,r){function n(e,t){return{type:"SECTION_ADDED",payload:{boardId:e,section:t}}}function o(e,t){return{type:"SECTION_DELETED",payload:{boardId:e,sectionId:t}}}r.d(t,{HG:function(){return o},OQ:function(){return i},hd:function(){return n}});var i=function(e,t){return{type:"BOARD_SECTION_EDIT",payload:t}}},816676:function(e,t,r){r.d(t,{Z:function(){return f}});var n=r(575108),o=r(72918),i=r(74105),a=r(889229),u=r(189976),c=r(831786),s=r(696323);function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function f(e,t,r,f){var p=e.boardId,m=e.sourceBoardId,b=void 0===m?"":m,_=e.sourceSectionId,v=void 0===_?"":_,h=e.name,y=e.nameSource,g=e.pinImport,P=e.initialPinIds,O=0;"RECOMMENDATION"===y?O=1:"EDITED_RECOMMENDATION"===y&&(O=2);var S=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?d(Object(r),!0).forEach(function(t){var n,o;n=t,o=r[t],(n=function(e){var t=function(e,t){if("object"!=l(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=l(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==l(t)?t:t+""}(n))in e?Object.defineProperty(e,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[n]=o}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({board_id:p,initial_pins:g&&!g.all?g.pinIds:void 0===P?[]:P,name:h,name_source:O},r?{orbac_subject_id:r}:Object.freeze({}));return function(e){return n.Z.create("BoardSectionResource",S).callCreate({showError:!1}).then(function(n){var l=n.resource_response.data;f({event_type:7100,object_id_str:l.id}),e((0,a.hd)(p,l)),e((0,u.vX)({feedId:p,feedType:s.Z.BOARD_SECTIONS,itemIds:[l.id],itemType:"boardsection"})),e((0,i.Z)(p,"pin_count")),e((0,o.jB)("BoardSectionsRepinResource",{board_id:p,orbac_subject_id:r}));var d=g||{all:!1,pinIds:[]},m=d.all,_=d.pinIds;return m?new Promise(function(r,n){return e((0,c.Z)({inverseSelection:!0,selectedPinIds:_,source:{boardId:b||p,sectionId:v||null},target:{boardId:p,sectionId:l.id}},t)).then(function(){return r(l)}).catch(n)}):(_.length>0&&e((0,u.EX)({feedId:p,feedType:s.Z.BOARDFEED,itemIds:_,itemType:"pin"})),l)})}}},225013:function(e,t,r){r.d(t,{Z:function(){return o}});var n=r(536652);function o(e,t){return function(r){return r((0,n.U)("BoardSectionResource",{options:{field_set_key:t||"board_page",section_id:e}}))}}},74105:function(e,t,r){r.d(t,{Z:function(){return a}});var n=r(536652);function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function a(e,t,r){return(0,n.U)("BoardResource",{options:function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach(function(t){var n,i;n=t,i=r[t],(n=function(e){var t=function(e,t){if("object"!=o(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=o(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==o(t)?t:t+""}(n))in e?Object.defineProperty(e,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[n]=i}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({board_id:e,field_set_key:t},r?{orbac_subject_id:r}:{})})}},548286:function(e,t,r){r.d(t,{Br:function(){return b},Cr:function(){return O},K8:function(){return y},L1:function(){return R},YQ:function(){return T},ZP:function(){return S},aX:function(){return E},eo:function(){return v},md:function(){return _},oG:function(){return h},oL:function(){return I},of:function(){return g},xQ:function(){return P},xR:function(){return A},yT:function(){return m}});var n=r(575108),o=r(918920),i=r(536652),a=r(72918),u=r(33618),c=r(214239);function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t,r,n,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void r(e)}u.done?t(c):Promise.resolve(c).then(n,o)}function d(e){return function(){var t=this,r=arguments;return new Promise(function(n,o){var i=e.apply(t,r);function a(e){l(i,n,o,a,u,"next",e)}function u(e){l(i,n,o,a,u,"throw",e)}a(void 0)})}}function f(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function p(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?f(Object(r),!0).forEach(function(t){var n,o;n=t,o=r[t],(n=function(e){var t=function(e,t){if("object"!=s(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=s(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==s(t)?t:t+""}(n))in e?Object.defineProperty(e,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[n]=o}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function m(e){return{type:"BOARD_UPDATE_COMPLETE",payload:{board:e}}}function b(e){return{type:"BOARD_PIN_COUNT_CHANGED",payload:e}}function _(e,t){return{type:"BOARD_FOLLOW",payload:{boardId:e,value:t}}}function v(e){return{type:"BOARD_DELETE",payload:{viewingUserId:e.viewingUserId,viewingUsername:e.viewingUsername,boardId:e.boardId,boardPinCount:e.boardPinCount}}}var h=function(e,t){return function(r){return r((0,i.U)("BoardResource",{options:{board_id:e,field_set_key:t}}))}};function y(e){return function(t){e&&(0,c.Q)(e).forEach(function(e){t(e)})}}var g=function(e){return{type:"BOARD_DISMISS_SENSITIVITY_SCREEN",payload:{boardId:e}}},P=function(e){return h(e,"pin_count")},O=function(e,t){return{type:"BOARD_COVER_IMAGE_UPDATED",payload:{boardId:e,coverPin:t}}},S=function(e){return{type:"BOARD_DISABLE_MORE_IDEAS_BADGING",payload:{boardId:e}}};function E(e,t,r){var i=p({name:e,privacy:o.ZP.BoardPrivacy.PUBLIC,username:t},r?{orbac_subject_id:r}:Object.freeze({}));return function(e){return n.Z.create("BoardResource",i).callCreate().then(function(r){var n=r.resource_response.data;return e(t&&(0,a.jB)("BoardsResource",(0,u.Z)(t,!1))),n})}}function I(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0;return{type:"BOARD_CREATE_COMPLETE",payload:{options:e,board:t},error:r}}var A=function(e,t,r){var o;return o=d(regeneratorRuntime.mark(function o(i){var a;return regeneratorRuntime.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return i({type:"BOARD_INVITE_DENIED_BY_VIEWER",payload:{boardId:e,userId:t}}),o.next=3,n.Z.create("BoardInviteResource",{board_id:e,invited_user_id:t}).callDelete();case 3:return(a=o.sent).resource_response.error||r({event_type:29,object_id_str:e}),o.abrupt("return",a);case 6:case"end":return o.stop()}},o)})),function(e){return o.apply(this,arguments)}},T=function(e,t,r,o,i,a){var u;return u=d(regeneratorRuntime.mark(function u(c){var s,l,d;return regeneratorRuntime.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return l="accepted"===t?"BoardCollaboratorResource":"BoardInviteResource",c({type:"BOARD_COLLABORATOR_DELETE",payload:{boardId:e,userId:null!=(s=null==o?void 0:o.id)?s:"",viewingUser:r}}),u.prev=2,u.next=5,n.Z.create(l,p({board_id:e,field_set_key:"boardEdit",invited_user_id:null!=(d=null==o?void 0:o.id)?d:""},a?{orbac_subject_id:a}:{})).callDelete();case 5:u.sent.resource_response.error||i({event_type:"accepted"===t?25:29,object_id_str:e}),u.next=12;break;case 9:u.prev=9,u.t0=u.catch(2),c({type:"BOARD_COLLABORATOR_ADD",payload:{boardId:e,viewingUser:r,status:t,collaboratingUsers:[o]}});case 12:case"end":return u.stop()}},u,null,[[2,9]])})),function(e){return u.apply(this,arguments)}},R=function(e,t,r,o){return function(i){var a=n.Z.create("BoardResource",{board_id:r}).callDelete();return i(v({viewingUserId:e,viewingUsername:t,boardId:r,boardPinCount:o})),a}}},189976:function(e,t,r){function n(e){return{type:"FEED_ITEM_REORDERED",payload:e}}function o(e,t){return{type:"FEED_INVALIDATE",payload:{feedType:e,feedId:t}}}r.d(t,{EX:function(){return a},N8:function(){return o},Qv:function(){return i},_f:function(){return n},vX:function(){return u}});var i=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Object.freeze({});return{type:"APPEND_FEED_ITEMS",payload:{id:e,options:r,items:t}}};function a(e){return{type:"FEED_ITEMS_REMOVED",payload:e}}function u(e){return{type:"FEED_ITEMS_ADDED",payload:e}}},831786:function(e,t,r){r.d(t,{S:function(){return p},Z:function(){return m}});var n=r(575108),o=r(74105),i=r(225013),a=r(189976),u=r(686231),c=r(696323),s=r(697063),l=function(e){return function(t){s.Z.showError(function(e,t){switch(e.api_error_code){case 2171:case 2172:case 2173:return t._('Please wait until the previous board action finishes.', ' - ', ' -- ');default:return e.message}}(t,e))}},d=function(e){return(0,a.N8)(e.sectionId?c.Z.BOARD_SECTION_PINS:c.Z.BOARDFEED,e.sectionId||e.boardId)};function f(e,t){var r=e.source,n=e.target;n.boardId!==r.boardId?(t((0,o.Z)(r.boardId,"pin_count")),t((0,o.Z)(n.boardId,"pin_count"))):r.sectionId&&n.sectionId||t((0,o.Z)(n.boardId,"pin_count")),r.sectionId&&t((0,i.Z)(r.sectionId)),n.sectionId&&t((0,i.Z)(n.sectionId))}function p(e){return function(t){var r=e.selectedPinIds,n=e.source,o=e.target;t((0,a.EX)({feedId:n.sectionId||n.boardId,feedType:n.sectionId?c.Z.BOARD_SECTION_PINS:c.Z.BOARDFEED,itemIds:r,itemType:"pin"})),t((0,a.vX)({feedId:o.sectionId||o.boardId,feedType:o.sectionId?c.Z.BOARD_SECTION_PINS:c.Z.BOARDFEED,itemIds:r,itemType:"pin"})),r.forEach(function(e){t((0,u.Vp)({pinId:e,boardId:o.boardId,sectionId:o.sectionId||void 0,title:o.name||""}))}),f(e,t)}}function m(e,t){return function(r){var o=e.selectedPinIds,i=e.target;return o.forEach(function(e){r((0,u.Vp)({pinId:e,boardId:i.boardId,sectionId:i.sectionId||void 0,title:i.name||""}))}),(function(e,t,r){var o=e.inverseSelection,i=e.selectedPinIds,u=e.source,s=e.target,f=e.orbacSubjectId;if(u.boardId===s.boardId&&(u.sectionId||null)===(s.sectionId||null))return Promise.reject();if(o){var p={board_id:u.boardId,new_board_id:s.boardId,old_section_id:u.sectionId||void 0,new_section_id:s.sectionId||void 0,pin_ids:i,orbac_subject_id:f};return n.Z.create("BulkEditSelectAllResource",p).callUpdate({showError:!1}).then(function(){return Promise.all([t(d(u)),t(d(s))])}).catch(l(r))}var m=function(e,r){t((0,a.EX)({feedId:e.sectionId||e.boardId,feedType:e.sectionId?c.Z.BOARD_SECTION_PINS:c.Z.BOARDFEED,itemIds:i,itemType:"pin"})),t((0,a.vX)({feedId:r.sectionId||r.boardId,feedType:r.sectionId?c.Z.BOARD_SECTION_PINS:c.Z.BOARDFEED,itemIds:i,itemType:"pin"}))};m(u,s);var b=function(){return m(s,u)};if(s.boardId===u.boardId)if(s.sectionId){var _={section_id:s.sectionId,pins:i,orbac_subject_id:f};return n.Z.create("BoardSectionEditResource",_).callUpdate({showError:!1}).catch(function(e){b(),l(r)(e)})}else{var v={section_id:u.sectionId,pins:i,orbac_subject_id:f};return n.Z.create("BoardSectionPinsResource",v).callDelete({showError:!1}).catch(function(e){b(),l(r)(e)})}var h={board_id:s.boardId,section_id:s.sectionId||void 0,pin_ids:i,orbac_subject_id:f};return n.Z.create("BulkEditResource",h).callUpdate({showError:!1}).catch(function(e){b(),l(r)(e)})})(e,r,t).then(function(){return f(e,r)})}}},957010:function(e,t,r){r.d(t,{Z:function(){return c}});var n=r(672410),o=r(721903),i=r(349361),a=r(613505),u=r(506001);function c(e){var t=e.i18n,r=e.isAppend,c=e.isEmployee,s=e.pinDraft,l=e.pinDraftId,d=e.storyPinPublishStopwatch;return function(e){if(!s||!s.pinItemIds){var f=(0,n.Z)();e((s&&"story"===s.type?a.Z:i.Z)(l,f))}(null==s?void 0:s.type)==="story"&&e((0,u.Z)({i18n:t,isEmployee:c,pinDraftId:l,storyPinPublishStopwatch:d})),e((0,o.Z)(l,s,{isAppend:r}))}}},316095:function(e,t,r){r.r(t),r.d(t,{_isPristine:function(){return T},addPinBuilderAsset:function(){return A},addPinBuilderPinDraftItemUpload:function(){return D},clearCreatedPinIds:function(){return x},clearPinBuilderPinDrafts:function(){return v},clearSelectedPinBuilderPinDrafts:function(){return P},deselectAllPinBuilderPinDrafts:function(){return E},deselectPinBuilderPinDraft:function(){return g},duplicatePinDraft:function(){return h},removeCreatedPinId:function(){return N},selectAllPinBuilderPinDrafts:function(){return O},selectAllPinBuilderStoryPinDrafts:function(){return S},selectPinBuilderPinDraft:function(){return y},setCloseupImageSignature:function(){return U},setPinBuilderBatchEditMode:function(){return R},setPinBuilderEntryPoint:function(){return M},setPinBuilderPinItemUploadStatus:function(){return w},setPinBuilderPinItemUploadXhr:function(){return j},setPinBuilderSharedData:function(){return I},setPinEditorPinDraft:function(){return C},setShowDisabledPinCreationBanner:function(){return B},setShowFeedbackModal:function(){return k}});var n=r(672410),o=r(526435),i=r(721903),a=r(349361),u=r(669019),c=r(792849),s=r(613505),l=r(506001),d=r(263255),f=r(400704),p=["publishOption","scheduledDate","scheduledTime","selectedItem"];function m(e){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function b(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function _(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?b(Object(r),!0).forEach(function(t){var n,o;n=t,o=r[t],(n=function(e){var t=function(e,t){if("object"!=m(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=m(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==m(t)?t:t+""}(n))in e?Object.defineProperty(e,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[n]=o}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):b(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function v(){return{type:"PIN_BUILDER_CLEAR_PIN_DRAFTS"}}function h(e,t,r){return function(o,u){var f=u().pinbuilder,p=f.pinDrafts,m=f.pinItems,b=f.pinDraftIdUploadStatusMap,v=f.storyPinItems,h=f.storyPinItemBlocks,y=p[e],g=b&&b[e]?b[e]:null,P=(0,n.Z)();g&&o((0,c.g)(P,g.status));var O=y.pinItemIds.map(function(i){var u=(0,n.Z)();if(m[i])o((0,a.Z)(P,u,m[i]));else if(v[i]){var c=v[i],f=c.blockIds.map(function(e){return h[e]});o((0,l.Z)({i18n:t,isEmployee:r,pinDraftId:e,storyPinPublishStopwatch:void 0})),o((0,s.Z)(P,u,_(_({},c),{},{blockIds:[]}))),f.forEach(function(t){o((0,d.Uo)(e,u,(0,n.Z)(),_({},t)))})}return g&&g.items[i]&&o(D(P,u,{status:g.items[i].status,xhr:null})),u});return o((0,i.Z)(P,_(_({},y),{},{pinItemIds:O,storyPinDraftId:null}),{insertBefore:e})),P}}function y(e){return{type:"PIN_BUILDER_SELECT_PIN_DRAFT",payload:{pinDraftId:e}}}function g(e){return{type:"PIN_BUILDER_DESELECT_PIN_DRAFT",payload:{pinDraftId:e}}}function P(){return{type:"PIN_BUILDER_CLEAR_SELECTED_PIN_DRAFTS"}}function O(){return function(e,t){var r=t().pinbuilder,n=r.selectedPinDraftIds,i=r.pinDrafts;r.pinDraftIds.forEach(function(t){var r=i[t].status;n.includes(t)||o.x1.includes(r)||e(y(t))})}}function S(){return function(e,t){var r=t(),n=r.pinbuilder.selectedPinDraftIds,i=(0,f.Wp)(r);Object.keys(i).forEach(function(t){var r=i[t],a=r.status;r.storyPinDraftId&&t&&!n.includes(t)&&!o.x1.includes(a)&&e(y(t))})}}function E(){return function(e,t){t().pinbuilder.selectedPinDraftIds.forEach(function(t){e(g(t))})}}function I(e){return function(t,r){var o=r().pinbuilder.selectedPinDraftIds,i=e.publishOption,a=e.scheduledDate,c=e.scheduledTime,s=e.selectedItem,l=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r={};for(var n in e)if(({}).hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],-1===t.indexOf(r)&&({}).propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,p);o.forEach(function(e){t((0,u.NA)(e,_(_(_(_({},null!=i?{publishOption:i}:Object.freeze({})),void 0!==s?{selectedItem:s}:Object.freeze({})),void 0!==a?{scheduledDate:a}:Object.freeze({})),void 0!==c?{scheduledTime:c}:{}))),l.editorInstanceId=(0,n.Z)(),t((0,u.to)(e,l))})}}function A(e){return{type:"PIN_BUILDER_ADD_ASSET",payload:{asset:e}}}function T(e,t){var r=e.pinbuilder,n=r.pinDrafts,o=r.pinItems,i=n[t],a=i.selectedItem,u=i.pinItemIds,c=i.publishOption;return!a&&"publish-immediately"===c&&u.every(function(e){var t=o[e],r=t.description,n=t.link,i=t.media,a=t.title;return!r&&!n&&!a&&!i})}function R(e){return{type:"PIN_BUILDER_SET_BATCH_EDIT_MODE",payload:{isBatchEditMode:e}}}function C(e){return{type:"PIN_EDITOR_SET_PIN_DRAFT",payload:{editedPinDraftId:e}}}function D(e,t,r){return{type:"PIN_BUILDER_ADD_PIN_DRAFT_ITEM_UPLOAD",payload:{pinDraftId:e,pinItemId:t,upload:r}}}function w(e,t,r){return{type:"PIN_BUILDER_SET_PIN_ITEM_UPLOAD_STATUS",payload:{pinDraftId:e,pinItemId:t,status:r}}}function j(e,t,r){return{type:"PIN_BUILDER_SET_PIN_ITEM_UPLOAD_XHR",payload:{pinDraftId:e,pinItemId:t,xhr:r}}}function N(e){return{type:"PIN_BUILDER_REMOVE_CREATED_PIN_ID",payload:{pinId:e}}}function x(){return{type:"PIN_BUILDER_CLEAR_CREATED_PIN_IDS"}}function U(e){return{type:"PIN_BUILDER_SET_CLOSEUP_IMAGE_SIGNATURE",payload:{closeupImageSignature:e}}}function M(e){return{type:"PIN_BUILDER_ENTRY_POINT",payload:{entryPoint:e}}}function k(e){return{type:"PIN_BUILDER_SHOW_FEEDBACK_MODAL",payload:{showFeedbackModal:e}}}function B(e){return{type:"PIN_BUILDER_SHOW_DISABLE_PIN_CREATION_BANNER",payload:{showDisabledPinCreationBanner:e}}}},686231:function(e,t,r){function n(e){return{type:"PIN_BETTER_SAVE",payload:e}}function o(e){return{type:"PIN_BETTER_SAVE_CUTOUT",payload:e}}function i(e){return{type:"PIN_BETTER_UNSAVE",payload:e}}function a(e){return{type:"PIN_BETTER_UNSAVE_CUTOUT",payload:e}}function u(e){return{type:"PIN_BETTER_SELECT_BOARD_OR_SECTION",payload:e}}function c(e){return{type:"PIN_BETTER_SELECT_BOARD_CUTOUT",payload:e}}function s(e){return{type:"POST_REPIN_MORE_IDEAS_UPSELL_SHOWN",payload:{boardId:e}}}r.d(t,{ND:function(){return s},Vp:function(){return u},a1:function(){return n},b6:function(){return c},jg:function(){return i},o4:function(){return o},ti:function(){return a}})},613505:function(e,t,r){r.d(t,{Z:function(){return n}});function n(e,t,r,n){return{type:"PIN_DRAFT_ADD_STORY_PIN_ITEM",payload:{pinDraftId:e,pinItemId:t,pinItem:r,options:n}}}},295345:function(e,t,r){r.d(t,{Z:function(){return n}});function n(e){return function(t,r){t&&console.log("".concat(e," - ").concat(r))}}},506001:function(e,t,r){r.d(t,{Z:function(){return Z}});var n=r(47676),o=r(672410),i=r(657043),a=r(686319),u=r(302148),c=r(295345),s=r(984993);function l(e,t,r,n,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void r(e)}u.done?t(c):Promise.resolve(c).then(n,o)}var d=[200,201,204];function f(){var e;return e=regeneratorRuntime.mark(function e(t,r,n,o,i,a,c){var s,l,f,p,m,b,_,v,h,y;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return s=(null==i?void 0:i.upload_id)||"",l=(null==i?void 0:i.upload_url)||"",f=(null==i?void 0:i.upload_parameters)||{},p=o.onFailure,m=o.onFinishUpload,b=o.onStartUpload,_=o.onUploadProgress,b&&b(s),v=new Date,h=new XMLHttpRequest,"image"===r?h.open("POST",l.replace("pinterest-media-upload.s3.amazonaws","u.pinimg"),!0):h.open("POST",l,!0),h.onload=function(){if(d.includes(h.status)){if(m){var e=(Date.now()-v.getTime())/1e3,t=h.getResponseHeader("x-amz-request-id");m(s,{amzId2:h.getResponseHeader("x-amz-id-2"),amzRequestId:t,uploadTimeSec:e,statusCode:h.status})}}else{var n="image"===r?1:8;p({uploadId:s,errorMsg:(0,u.nk)(c._('Failed to upload the {{ mediaType }} with XHR status code: {{ xhrStatus }}', 'uploadMedia.xhrOnLoad.failure', 'Error message when media does not upload'),{mediaType:r,xhrStatus:h.status}).join(),mediaUploadFailureReason:n,retry:!0})}},h.onerror=function(){var e="image"===r?1:8;p({uploadId:s,errorMsg:(0,u.nk)(c._('Failed to upload the {{ mediaType }}', 'uploadMedia.xhrOnError.failure', 'Error message when media does not upload'),{mediaType:r}).join(),mediaUploadFailureReason:e,retry:!0})},_&&(h.upload.onprogress=function(e){_(Math.round(100*(e.loaded/e.total)))}),y=new FormData,Object.keys(f).forEach(function(e){e&&f[e]&&y.append(e,f[e])}),y.append("file",t),h.send(y),e.abrupt("return",{uploadId:s,xhr:h});case 16:case"end":return e.stop()}},e)}),(f=function(){var t=this,r=arguments;return new Promise(function(n,o){var i=e.apply(t,r);function a(e){l(i,n,o,a,u,"next",e)}function u(e){l(i,n,o,a,u,"throw",e)}a(void 0)})}).apply(this,arguments)}function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&b(e,t)}function b(e,t){return(b=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function _(e){var t=h();return function(){var r,n=y(e);return r=t?Reflect.construct(n,arguments,y(this).constructor):n.apply(this,arguments),function(e,t){if(t&&("object"==p(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return v(e)}(this,r)}}function v(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(h=function(){return!!e})()}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function g(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,E(n.key),n)}}function P(e,t,r){return t&&g(e.prototype,t),r&&g(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function O(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}function S(e,t,r){return(t=E(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function E(e){var t=function(e,t){if("object"!=p(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=p(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==p(t)?t:t+""}var I=["webImage","webVideo"],A=P(function e(t){var r=this;O(this,e),S(this,"upload",function(){}),S(this,"onFailure",function(e){var t=e.errorMsg,n=e.mediaUploadFailureReason,o=e.retry,i=e.uploadId;o&&r.numAttempts<r.maxUploadAttempts?r.upload():(r.status="failed",r.callbackHandlers.onFailure({errorMsg:t,mediaUploadFailureReason:n,uploadId:i,storyPinPublishStopwatch:r.storyPinPublishStopwatch}))}),S(this,"onFinishProcessing",function(e,t){r.signature=t.signature,r.callbackHandlers.onFinishProcessing&&r.callbackHandlers.onFinishProcessing(e,t,r.storyPinPublishStopwatch)}),S(this,"onFinishUpload",function(e,t){r.status="uploaded",r.callbackHandlers.onFinishUpload&&r.callbackHandlers.onFinishUpload(e,t,r.storyPinPublishStopwatch)}),S(this,"onStartProcessing",function(e,t){r.signature=t.signature,r.callbackHandlers.onStartProcessing&&r.callbackHandlers.onStartProcessing(e,t,r.storyPinPublishStopwatch)}),S(this,"cancel",function(){r.xhr&&(r.xhr.abort(),r.callbackHandlers.onCancel&&r.callbackHandlers.onCancel(r.uploadId||"",r.storyPinPublishStopwatch))}),this.i18n=t.i18n,this.maxUploadAttempts=t.maxUploadAttempts||1,this.media=t.media,this.numAttempts=0,this.storyPinPublishStopwatch=t.storyPinPublishStopwatch,this.vipRegistration=t.vipRegistration,this.vipType=t.vipType,this.callbackHandlers=t.callbackHandlers}),T=function(e){m(r,e);var t=_(r);function r(e){var n;return O(this,r),S(v(n=t.call(this,e)),"getClassName",function(){return"ImageUpload"}),S(v(n),"onProcessingFailed",function(e){if(n.uploadId){var t=(0,u.nk)(n.i18n._('Failed to process image with uploadId {{ uploadId }} and failureCode {{ failureCode }}', 'MediaUpload.ImageUpload.onProcessingFailed', 'Error message for when image processing fails'),{failureCode:e,uploadId:n.uploadId}).join("");n.onFailure({uploadId:n.uploadId,errorMsg:t,mediaUploadFailureReason:3,mediaStatusFailureReason:e})}}),S(v(n),"onProcessingTimeout",function(){if(n.uploadId){var e=(0,u.nk)(n.i18n._('Timed out on processing image with uploadId {{ uploadId }}', 'MediaUpload.ImageUpload.onProcessingTimeout', 'Error message for when image processing times out'),{uploadId:n.uploadId}).join("");n.onFailure({uploadId:n.uploadId,errorMsg:e,mediaUploadFailureReason:4})}}),S(v(n),"upload",function(){"localImage"===n.media.type&&(n.numAttempts+=1,(function(e,t,r,n,o,i,a){return f.apply(this,arguments)})(n.media.fileSrc?n.media.fileSrc:(0,s.Mi)(n.media.src),"image",n.vipType,{onFailure:function(e){return n.onFailure(e)},onFinishUpload:n.onFinishUpload,onStartUpload:n.callbackHandlers.onStartUpload,onUploadProgress:n.callbackHandlers.onUploadProgress},n.vipRegistration,n.storyPinPublishStopwatch,n.i18n).then(function(e){n.uploadId=e.uploadId,n.xhr=e.xhr,n.status="uploading"}))}),n.signature=I.includes(e.media.type)?e.media.signature:null,n.status=I.includes(e.media.type)?"uploaded":"pending",n}return P(r)}(A),R=function(e){m(r,e);var t=_(r);function r(e){var n;return O(this,r),S(v(n=t.call(this,e)),"getClassName",function(){return"VideoUpload"}),S(v(n),"onProcessingFailed",function(e){if(n.uploadId){var t=(0,u.nk)(n.i18n._('Failed to process video with uploadId {{ uploadId }} and failureCode {{ failureCode }}', 'MediaUpload.VideoUpload.onProcessingFailed', 'Error message when video processing fails'),{uploadId:n.uploadId,failureCode:e}).join("");n.onFailure({uploadId:n.uploadId,errorMsg:t,mediaUploadFailureReason:10,mediaStatusFailureReason:e,storyPinPublishStopwatch:n.storyPinPublishStopwatch})}}),S(v(n),"onProcessingTimeout",function(){if(n.uploadId){var e=(0,u.nk)(n.i18n._('Timed out on processing video with uploadId {{ uploadId }}', 'MediaUpload.VideoUpload.onProcessingTimeout', 'Error message when video processing times out'),{uploadId:n.uploadId}).join("");n.onFailure({uploadId:n.uploadId,errorMsg:e,mediaUploadFailureReason:11,storyPinPublishStopwatch:n.storyPinPublishStopwatch})}}),S(v(n),"upload",function(){"localVideo"===n.media.type&&(n.numAttempts+=1,(function(e,t,r,n,o,i,a){return f.apply(this,arguments)})(n.media.fileSrc,"video",n.vipType,{onFailure:function(e){return n.onFailure(e)},onFinishUpload:n.onFinishUpload,onStartUpload:n.callbackHandlers.onStartUpload,onUploadProgress:n.callbackHandlers.onUploadProgress},n.vipRegistration,n.storyPinPublishStopwatch,n.i18n).then(function(e){n.uploadId=e.uploadId,n.xhr=e.xhr,n.status="uploading"}))}),n.signature=I.includes(e.media.type)?e.media.signature:null,n.status=I.includes(e.media.type)?"uploaded":"pending",n}return P(r)}(A);function C(e){return"localImage"===e.type||"webImage"===e.type}var D=r(614699),w=r(603316);function j(e){return(j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function N(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function x(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?N(Object(r),!0).forEach(function(t){k(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):N(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function U(e,t,r,n,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void r(e)}u.done?t(c):Promise.resolve(c).then(n,o)}function M(e){return function(){var t=this,r=arguments;return new Promise(function(n,o){var i=e.apply(t,r);function a(e){U(i,n,o,a,u,"next",e)}function u(e){U(i,n,o,a,u,"throw",e)}a(void 0)})}}function k(e,t,r){return(t=B(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function B(e){var t=function(e,t){if("object"!=j(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=j(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==j(t)?t:t+""}var L=(0,c.Z)("[MEDIA UPLOAD MANAGER]"),F=function(){var e;function t(e){var r,n,c=this;if(!(this instanceof t))throw TypeError("Cannot call a class as a function");k(this,"getMediaRegistrationsFromVIP",(r=M(regeneratorRuntime.mark(function e(t){var r,n,s,l,d,f,p,m,b,_,v,h,y;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(n=t.count,s=t.durationMs,l=t.mediaMetadata,d=t.mediaType,p=void 0!==(f=t.shouldSkipPool)&&f,b=void 0===(m=t.retryCount)?0:m,_=n||("image"===d?2:1),p||(c.vipRegistrationPool[d].fetchingData=!0),c.debugLog("Getting media registration urls for ".concat(d,"s")),v=[],h=0;h<_;h+=1)v.push(x(x({id:(0,o.Z)(),media_type:"image"===d?"image-story-pin":"video-story-pin"},s?{upload_aux_data:{clips:[{durationMs:s,isFromImage:"image"===d,startTimestampMs:-1}]}}:{}),l?{media_metadata:{image_hash:l.imageHash,metadata:l.metadata,error_message:l.errorMessage}}:{}));return y=c.vipRegistrationRequestCounts[d],c.vipRegistrationRequestCounts[d]+=1,null==(r=c.storyPinPublishStopwatch)||r.subspanStart({name:"".concat(d,"_registration_").concat(y),bypassIsTimingCheck:!0}),e.abrupt("return",(0,a.Z)({url:"/v3/media/uploads/register/batch/",method:"POST",data:{media_info_list:JSON.stringify(v)},callOptions:{showError:3===b}}).then(function(e){var t,r="object"===j(e.resource_response.data)?Object.values(e.resource_response.data):[];return p||(c.vipRegistrationPool[d].data=r,c.vipRegistrationPool[d].fetchedLast=performance.now(),c.vipRegistrationPool[d].fetchingData=!1),null==(t=c.storyPinPublishStopwatch)||t.subspanStop({name:"".concat(d,"_registration_").concat(y),bypassIsTimingCheck:!0}),r},function(e){var t,r;return(0,w.nP)("storypin.publish.registration.".concat(d,".failure"),{sampleRate:1,tags:{reason:(0,i.Z)(e,"message"),retryCount:b}}),b<3?(c.debugLog("".concat(d," registration failed. ").concat(3-b," retries remaining. ").concat(e)),r=c.getMediaRegistrationsFromVIP({durationMs:s,mediaMetadata:l,mediaType:d,shouldSkipPool:p,count:n,retryCount:b+1})):(c.debugLog("".concat(d," registration failed. ").concat(e)),c.onFailure((0,u.nk)(c.i18n._('Failed to register {{ mediaType }} upload with message: {{ error }}', 'MediaUploadManager.getMediaRegistrationsFromVIP.failure', 'Error message for media upload'),{error:e,mediaType:d}).join(""),"image"===d?13:7),r=Promise.resolve(null)),null==(t=c.storyPinPublishStopwatch)||t.subspanStop({name:"".concat(d,"_registration_").concat(y),bypassIsTimingCheck:!0}),r}));case 10:case"end":return e.stop()}},e)})),function(e){return r.apply(this,arguments)})),k(this,"initVIPRegistrationPools",function(){c.getMediaRegistrationsFromVIP({mediaType:"image"}),c.getMediaRegistrationsFromVIP({mediaType:"video"})}),k(this,"checkAllUploadsProcessingOrCompleted",function(){for(var e=0,t=Object.keys(c.mediaUploadsMap),r=0;r<t.length;r++){var n=t[r],o=c.mediaUploadsMap[n];c.debugLog("Status of media upload ID ".concat(n," ").concat(o.mediaUpload.getClassName()," ").concat(o.status)),("completed"===o.status||"processing"===o.status&&"VideoUpload"===o.mediaUpload.getClassName())&&(e+=1)}return c.debugLog("Checking if all upload processes completed"),c.debugLog("Completed ".concat(e," out of ").concat(Object.keys(c.mediaUploadsMap).length)),e===Object.keys(c.mediaUploadsMap).length}),k(this,"checkUploadsFailed",function(){return!!Object.keys(c.mediaUploadsMap).find(function(e){return"failed"===c.mediaUploadsMap[e].status&&c.mediaUploadsMap[e].processingRetryCount>2})}),k(this,"updateUploadStatus",function(e,t){return c.mediaUploadsMap[e].status=t}),k(this,"updateVIPStatusMap",function(e){for(var t=new Date,r=function(e){var r=e.mediaId,n=e.mediaUpload,o=e.signature,i=e.uploadId,a=(t.getTime()-c.vipStatusMap[i].timeSet.getTime())/1e3;n.onFinishProcessing(i,{processingTimeSec:a,signature:o}),c.updateUploadStatus(r,"completed")},n=0,o=Object.keys(e);n<o.length;n++){var i=o[n],a=e[i],u=a.failureCode,s=a.signature,l=a.status;if(i in c.vipStatusMap){var d=c.vipStatusMap[i].mediaId,f=c.mediaUploadsMap[d];if(u&&c.mediaUploadsMap[d].processingRetryCount>2){f.mediaUpload.onProcessingFailed(u),c.updateUploadStatus(d,"failed");break}c.vipStatusMap[i].status!==l||"failed"===l?(c.vipStatusMap[i]=x(x({},c.vipStatusMap[i]),{},{status:l,timeSet:t}),"processing"===l?(f.mediaUpload.onStartProcessing(i,{signature:s}),c.debugLog("Skipping media completion"),r({mediaId:d,mediaUpload:f.mediaUpload,signature:s,uploadId:i})):"succeeded"===l?(c.debugLog("Waited for media completion"),r({mediaId:d,mediaUpload:f.mediaUpload,signature:s,uploadId:i})):"failed"===l&&(c.mediaUploadsMap[d].processingRetryCount+=1,c.debugLog("Media upload ".concat(i," failed, but will keep checking ").concat(3-c.mediaUploadsMap[d].processingRetryCount," times if a retry succeeds.")))):c.statusTimeoutMap[l]&&(t.getTime()-c.vipStatusMap[i].timeSet.getTime())/1e3>=c.statusTimeoutMap[l].timeoutSec&&(f.mediaUpload.onProcessingTimeout(),c.statusTimeoutMap[l].onTimeout(i,d,c.mediaUploadsMap[d].mediaUpload.getClassName()))}}}),k(this,"refreshImageRegistration",M(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return c.vipRegistrationPool.image={fetchedLast:0,data:[],fetchingData:!1},e.next=3,c.getMediaRegistrationsFromVIP({mediaType:"image"});case 3:case"end":return e.stop()}},e)}))),k(this,"getMediaRegistration",(n=M(regeneratorRuntime.mark(function e(t){var r,n,o,i,a,u,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=C(t)?"image":"video",o="localVideo"===t.type||"webVideo"===t.type?Math.round(1e3*(t.duration||0)):0,i="localImage"===t.type?t.mediaMetadata:void 0,!(o||i||!c.vipRegistrationPool[n])){e.next=8;break}return e.next=6,c.getMediaRegistrationsFromVIP({durationMs:o,mediaMetadata:i,mediaType:n,shouldSkipPool:!0,count:1});case 6:return u=e.sent,e.abrupt("return",null!=(a=null==u?void 0:u[0])?a:null);case 8:if(!c.vipRegistrationPool[n].fetchingData){e.next=11;break}return e.next=11,new Promise(function(e){var t=0,r=setInterval(function(){t+=1,c.vipRegistrationPool[n].fetchingData&&100!==t||(clearInterval(r),e(void 0))},100)});case 11:if(s=performance.now()-c.vipRegistrationPool[n].fetchedLast>=18e5,!(0===c.vipRegistrationPool[n].data.length||s)){e.next=15;break}return e.next=15,c.getMediaRegistrationsFromVIP({durationMs:o,mediaType:n});case 15:return e.abrupt("return",Promise.resolve(null!=(r=c.vipRegistrationPool[n].data.pop())?r:null));case 16:case"end":return e.stop()}},e)})),function(e){return n.apply(this,arguments)})),k(this,"hasAnyVideoUploads",function(){for(var e=0,t=Object.keys(c.mediaUploadsMap);e<t.length;e++){var r=t[e];if("VideoUpload"===c.mediaUploadsMap[r].mediaUpload.getClassName())return!0}return!1}),k(this,"getVipMapStatusesToString",function(){for(var e="{",t=0,r=Object.keys(c.vipStatusMap);t<r.length;t++){var n,o=r[t];e+="[".concat(o,"]:").concat(null!=(n=c.vipStatusMap[o].status)?n:"null"," ")}return e+"}"}),k(this,"handleFailure",function(e,t){c.failed||(c.onFailure(e,t),c.failed=!0)}),k(this,"handleCheckUploadsCompleted",function(){var e=c.checkAllUploadsProcessingOrCompleted();return e&&!c.completed&&(c.debugLog("All submitted media processed, calling onCompleted if it exists"),c.completed=!0,c.onCompleted()),e}),k(this,"onFinishUpload",function(e,t){c.vipStatusMap[e]={mediaId:t,status:null,timeSet:new Date},c.updateUploadStatus(t,"uploaded"),c.debugLog("Finished uploading media ID ".concat(t)),c.statusCheckInProgress||(c.statusCheckInProgress=!0,c.waitThenCheckStatus())}),k(this,"onUploadFailed",function(e,t,r){c.updateUploadStatus(e,"failed"),c.handleFailure(t,r),c.debugLog("Failed uploading media ID ".concat(e))}),k(this,"removeMediaUpload",function(e){c.mediaUploadsMap[e]&&(c.mediaUploadsMap[e].mediaUpload.cancel(),delete c.mediaUploadsMap[e])}),k(this,"addMediaUpload",function(e){var t=e.media,r=e.mediaId,n=e.uploadHandlers;c.getMediaRegistration(t).then(function(e){var o=x(x({},n),{},{onFailure:function(e){var t=e.uploadId,o=e.errorMsg,i=e.mediaUploadFailureReason;c.onUploadFailed(r,o,i),n.onFailure({uploadId:t,errorMsg:o,mediaUploadFailureReason:i})},onFinishUpload:function(e,t){c.onFinishUpload(e,r),n.onFinishUpload&&n.onFinishUpload(e,t)}}),i=C(t)?new T({callbackHandlers:o,i18n:c.i18n,maxUploadAttempts:c.maxMediaUploadAttempts,media:t,storyPinPublishStopwatch:c.storyPinPublishStopwatch,vipRegistration:e,vipType:"image-story-pin"}):new R({callbackHandlers:o,i18n:c.i18n,maxUploadAttempts:c.maxMediaUploadAttempts,media:t,storyPinPublishStopwatch:c.storyPinPublishStopwatch,vipRegistration:e,vipType:"video-story-pin"});if(c.mediaUploadsMap[r]){c.debugLog("Cancelling existing upload media ID ".concat(r)),c.mediaUploadsMap[r].mediaUpload.cancel();var a=c.mediaUploadsMap[r].mediaUpload.uploadId;a&&a in c.vipStatusMap&&delete c.vipStatusMap[a]}c.debugLog("Added media ID to upload ".concat(r)),c.mediaUploadsMap[r]={mediaUpload:i,status:"pending",processingRetryCount:0},i.upload(),c.updateUploadStatus(r,"uploading")})}),k(this,"reset",function(){c.failed=!1,c.statusCheckFailureCount=0,c.completed=!1}),k(this,"cancelAll",function(){for(var e=0,t=Object.keys(c.mediaUploadsMap);e<t.length;e++){var r=t[e];"uploading"===c.mediaUploadsMap[r].status&&c.mediaUploadsMap[r].mediaUpload.cancel()}}),k(this,"checkStatus",M(regeneratorRuntime.mark(function e(){var t,r,n,o,a,s,l,d,f,p,m;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!c.checkUploadsFailed()){e.next=4;break}return c.statusCheckInProgress=!1,c.debugLog("There is a failure in check status ".concat(c.getVipMapStatusesToString())),e.abrupt("return");case 4:if(c.debugLog("Checking status ".concat(c.getVipMapStatusesToString())),c.statusCheckInProgress=!0,!((t=Object.keys(c.vipStatusMap)).length>0)){e.next=26;break}return e.prev=8,e.next=11,(0,D.Z)(t,c.statusCheckFailureCount);case 11:for(r=e.sent,c.updateVIPStatusMap(r),c.debugLog("Check status response received ".concat(c.getVipMapStatusesToString())),n=c.handleCheckUploadsCompleted(),o=Object.keys(c.vipStatusMap),a=0,s=o;a<s.length;a++)l=s[a],d=c.vipStatusMap[l].mediaId,c.mediaUploadsMap[d]?"completed"===c.mediaUploadsMap[d].status&&(f=c.mediaUploadsMap[d].mediaUpload.signature,c.mediaUploadsMap[d].mediaUpload.vipType.includes("video")&&f&&(null==(p=c.storyPinPublishStopwatch)||p.updateSubspanName({currentName:"video_page_upload-".concat(l),newName:"video_page_upload-".concat(f),bypassIsTimingCheck:!0}),null==(m=c.storyPinPublishStopwatch)||m.updateSubspanName({currentName:"video_page_publish-".concat(l),newName:"video_page_publish-".concat(f),bypassIsTimingCheck:!0})),delete c.vipStatusMap[l]):(0,w.nP)("storypin.publish.media_uploads_map.missing_upload_id",{sampleRate:1,tags:{retryCount:c.statusCheckFailureCount,mediaId:d,vipId:l,mediaType:void 0}});n?c.statusCheckInProgress=!1:c.waitThenCheckStatus(),e.next=24;break;case 20:e.prev=20,e.t0=e.catch(8),c.statusCheckFailureCount+=1,c.statusCheckFailureCount>4?(c.debugLog("Failing upload because status check failed ".concat(c.statusCheckFailureCount," times")),c.handleFailure((0,u.nk)(c.i18n._('Could not check VIP status with error: {{ errorName }} {{ errorMessage }}', 'MediaUploadManager.checkStatus.error', 'Error message for media upload'),{errorName:(0,i.Z)(e.t0,"name"),errorMessage:(0,i.Z)(e.t0,"message")}).join(""),14),c.statusCheckInProgress=!1):(c.debugLog("Continuing upload because status check only failed ".concat(c.statusCheckFailureCount," times")),c.waitThenCheckStatus());case 24:e.next=27;break;case 26:c.handleCheckUploadsCompleted()||c.waitThenCheckStatus();case 27:case"end":return e.stop()}},e,null,[[8,20]])}))),k(this,"waitThenCheckStatus",function(){setTimeout(c.checkStatus,c.hasAnyVideoUploads()?3e3:1e3)}),this.onCancel=e.onCancel,this.onCompleted=e.onCompleted,this.onFailure=e.onFailure,this.statusTimeoutMap=e.statusTimeoutMap,this.maxMediaUploadAttempts=e.maxMediaUploadAttempts,this.inDebugMode=e.inDebugMode,this.storyPinPublishStopwatch=e.storyPinPublishStopwatch,this.i18n=e.i18n,this.statusCheckInProgress=!1,this.completed=!1,this.failed=!1,this.vipRegistrationPool={image:{fetchedLast:0,data:[],fetchingData:!1},video:{fetchedLast:0,data:[],fetchingData:!1}},this.vipRegistrationRequestCounts={image:0,video:0},this.statusCheckFailureCount=0,this.mediaUploadsMap={},this.vipStatusMap={}}return e=[{key:"debugLog",value:function(e){L(this.inDebugMode,e)}}],function(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,B(n.key),n)}}(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}();function Z(e){var t=this,r=e.i18n,o=e.isEmployee,i=e.pinDraftId,a=e.storyPinPublishStopwatch;return function(e){var u=new F({i18n:r,inDebugMode:o,maxMediaUploadAttempts:n.dD,onCancel:function(){},onCompleted:function(){},onFailure:function(){},statusTimeoutMap:{registered:{onTimeout:function(e,r,n){(0,w.nP)("storypin.publish.media_uploads_map.timeout.registered",{sampleRate:1,tags:{retryCount:t.statusCheckFailureCount,mediaId:r,uploadId:e,mediaType:n}})},timeoutSec:240},processing:{onTimeout:function(e,r,n){(0,w.nP)("storypin.publish.media_uploads_map.timeout.processing",{sampleRate:1,tags:{retryCount:t.statusCheckFailureCount,mediaId:r,uploadId:e,mediaType:n}})},timeoutSec:180}},storyPinPublishStopwatch:a});u.initVIPRegistrationPools(),e({type:"PIN_DRAFT_SET_STORY_PIN_UPLOAD_MANAGER",payload:{pinDraftId:i,uploadManager:u}})}}},401450:function(e,t,r){r.d(t,{Ge:function(){return f},JS:function(){return c},OF:function(){return v},P_:function(){return s},Q_:function(){return b},b8:function(){return _},cg:function(){return l},h2:function(){return p},h6:function(){return m}});var n=r(575108),o=r(686319),i=r(843466);function a(e,t,r,n,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void r(e)}u.done?t(c):Promise.resolve(c).then(n,o)}function u(e){return function(){var t=this,r=arguments;return new Promise(function(n,o){var i=e.apply(t,r);function u(e){a(i,n,o,u,c,"next",e)}function c(e){a(i,n,o,u,c,"throw",e)}u(void 0)})}}function c(e){return{type:"UPDATE_USER_PIN_COUNT",payload:e}}var s=function(e,t){return{type:"USER_FOLLOW",payload:{id:e,value:t}}},l=function(e,t){return{type:"USER_FOLLOWING_COUNT",payload:{id:e,following:t}}},d=function(e,t){return{type:"USER_BLOCK",payload:{id:e,value:t}}},f=function(e){var t,r=e.id,o=e.orbacSubjectId,i=e.blockSource,a=e.blockContext,c=e.logContextEvent;return t=u(regeneratorRuntime.mark(function e(t){var u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t(d(r,!0)),e.next=3,n.Z.create("UserBlockResource",{blocked_user_id:r,orbac_subject_id:o,block_source:i,block_context:a}).callCreate().catch(function(){return t(d(r,!1))});case 3:return u=e.sent,c({event_type:54,object_id_str:r}),e.abrupt("return",u);case 6:case"end":return e.stop()}},e)})),function(e){return t.apply(this,arguments)}},p=function(e,t){var r;return r=u(regeneratorRuntime.mark(function r(o){var i;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return o(d(e,!1)),r.next=3,n.Z.create("UserBlockResource",{blocked_user_id:e}).callDelete().catch(function(){return o(d(e,!0))});case 3:return i=r.sent,t({event_type:55,object_id_str:e}),r.abrupt("return",i);case 6:case"end":return r.stop()}},r)})),function(e){return r.apply(this,arguments)}};function m(e){return{type:"UPDATE_USER_SCHEDULED_PIN_COUNT",payload:e}}var b=function(e,t){return function(){return n.Z.create("UserStateResource",{state:e,value:t}).callCreate()}},_=function(e,t,r){return function(n,a){(0,o.Z)({url:"/v3/users/me/",method:"POST"}).then(function(){r({event_type:48,object_id_str:a().session.userId}),e(),(0,i.Z)()},t)}},v=function(e){return(0,o.Z)({url:"/v3/register/exists/",data:{email:e}})}},696323:function(e,t){t.Z={AGGREGATED_COMMENTS:"aggregatedComments",AGGREGATED_COMMENT_REPLIES:"aggregated-comment-replies",AUTOMAGICAL_BOARD_FEED:"automagical-board-feed",BOARDFEED:"boardfeed",BOARDLESS_PINS:"boardless-pins",BOARD_SECTIONS:"board-sections",BOARD_SECTION_PINS:"board-section-pins",STORY_PINS_FEED:"story-pins-feed",PROFILE_PINS_FEED:"profile-pins-feed",PROFILE_BOARDS:"profileBoards",SEARCH_PINS:"searchPins",STORY_PIN_DATA:"storyPinData",TODAY_ARTICLE_INTEREST_FEED:"todayArticleInterestFeed",TODAY_TAB:"todayTabFeed",UNIFIED_COMMENTS:"unified-comments",USE_CASE_TAB:"useCaseFeed",TRIED_IT_FEED:"trieditfeed"}},845154:function(e,t,r){r.d(t,{Z:function(){return s}});var n=r(586659),o=r(20256),i=r(19585),a=r(310916),u=r(317923),c=r(382718);function s(e){var t=e.board,r=void 0===t?{}:t,s=e.canEdit,l=e.isAdsOnlyBoard,d=e.isStoryPin,f=e.isOriginallyQuickCreatesBoard,p=e.onBoardChange,m=e.onBoardCreate,b=e.viewerId,_=(0,i.ZP)(),v=(0,a.Xt)(b).boardlessPinsEnabled,h=(null==r?void 0:r.layout)==="quick_saves"&&v,y=(null==r?void 0:r.layout)==="quick_creates";return(0,c.jsx)(n.Fragment,{children:d?(0,c.jsxs)(o.xu,{direction:"column",display:"flex",justifyContent:"between",paddingY:3,children:[(0,c.jsx)(o.xu,{paddingY:2,children:(0,c.jsx)(o.__,{htmlFor:"BoardPicker",children:(0,c.jsx)(o.xv,{size:"100",children:_._('Board', 'editPinModal.editBoard.optionalBoardLabel', 'Label for board dropdown to select optional board')})})}),(0,c.jsxs)(o.xu,{"data-test-id":"edit-board",children:[!l&&(0,c.jsx)(u.Z,{board:r,isBoardlessPinsBoard:h,isQuickCreatesBoard:y,isStoryPin:d,onBoardChosen:p,onBoardCreate:m}),l&&(0,c.jsx)(o.xu,{paddingX:1,children:(0,c.jsx)(o.xv,{color:"subtle",size:"300",children:_._('This is an ad-only Pin. It can\u2019t be moved out of the ad-only Pins board.', 'editPinModal.editBoard.adsOnlyPinText', 'Displays when a pin is ads-only, preventing movement of pin from the board')})})]})]}):(0,c.jsxs)(o.xu,{justifyContent:"between",mdDisplay:"flex",paddingX:4,paddingY:3,children:[(0,c.jsx)(o.xu,{column:12,mdColumn:3,paddingY:2,children:(0,c.jsx)(o.__,{htmlFor:"BoardPicker",children:(0,c.jsx)(o.xv,{size:"200",children:f?_._('Organize to a board (optional)', 'editPinModal.editBoard.optionalBoardLabel', 'Label for board dropdown to select optional board'):_._('Board', ' - ', ' -- ')})})}),s&&(0,c.jsxs)(o.xu,{column:12,"data-test-id":"edit-board",mdColumn:8,children:[!l&&(0,c.jsx)(u.Z,{board:r,isBoardlessPinsBoard:h,isQuickCreatesBoard:y,onBoardChosen:p,onBoardCreate:m}),l&&(0,c.jsx)(o.xu,{paddingX:1,children:(0,c.jsx)(o.xv,{color:"subtle",size:"300",children:_._('This is an ad-only Pin. It can\u2019t be moved out of the ad-only Pins board.', 'editPinModal.editBoard.adsOnlyPinText', 'Displays when a pin is ads-only, preventing movement of pin from the board')})})]}),!s&&r.name&&(0,c.jsx)(o.xu,{column:12,mdColumn:8,paddingY:2,children:(0,c.jsx)(o.xv,{size:"200",weight:"bold",children:r.name})})]})})}},510094:function(e,t,r){r.d(t,{Z:function(){return c}});var n=r(586659),o=r(20256),i=r(19585),a=r(874642),u=r(382718);function c(e){var t=e.board,r=e.canEdit,c=e.currentSection,s=e.idealDirection,l=e.isStoryPin,d=e.onSectionChange,f=e.onSectionCreate,p=e.sectionId,m=e.sectionName,b=(0,i.ZP)(),_=null!=t&&t.id?a.Z:a.x;return(null==t?void 0:t.layout)==="quick_creates"?null:(0,u.jsx)(n.Fragment,{children:l?(0,u.jsxs)(o.xu,{direction:"column",display:"flex",justifyContent:"between",paddingY:3,children:[(0,u.jsx)(o.xu,{paddingY:2,children:(0,u.jsx)(o.__,{htmlFor:"SectionPicker",children:(0,u.jsx)(o.xv,{size:"100",children:b._('Section', 'editPinModal.editSection.optionalSectionLabel', 'Label for editing a Pin\'s board section')})})}),r&&t?(0,u.jsx)(o.xu,{"data-test-id":"edit-board-section",children:(0,u.jsx)(_,{board:t,idealDirection:s,isStoryPin:l,onSectionChange:d,onSectionCreate:f,selectedSectionId:p,selectedSectionName:m})}):(0,u.jsx)(o.xu,{children:(0,u.jsx)(o.xv,{size:"200",weight:"bold",children:c&&!(t||{}).is_collaborative?c.title:b._('No section', 'editPinModal.editSection.optionalSectionLabel', 'Default dropdown option for selecting a board section on pin edit')})})]}):(0,u.jsxs)(o.xu,{justifyContent:"between",mdDisplay:"flex",paddingX:4,paddingY:3,children:[(0,u.jsx)(o.xu,{column:12,mdColumn:3,paddingY:3,children:(0,u.jsx)(o.__,{htmlFor:"SectionPicker",children:(0,u.jsx)(o.xv,{size:"200",children:b._('Section', 'label for editing a Pin\'s board section', 'label for editing a Pin\'s board section')})})}),r&&t?(0,u.jsx)(o.xu,{column:12,mdColumn:8,children:(0,u.jsx)(_,{board:t,onSectionChange:d,onSectionCreate:f,selectedSectionId:p,selectedSectionName:m})}):(0,u.jsx)(o.xu,{column:12,mdColumn:8,paddingY:2,children:(0,u.jsx)(o.xv,{size:"200",weight:"bold",children:c&&!(t||{}).is_collaborative?c.title:b._('No section', 'default dropdown option for selecting a board section on pin edit', 'default dropdown option for selecting a board section on pin edit')})})]})})}},614699:function(e,t,r){r.d(t,{Z:function(){return a}});var n=r(575108),o=r(603316);function i(e,t,r,n,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void r(e)}u.done?t(c):Promise.resolve(c).then(n,o)}function a(e,t){return u.apply(this,arguments)}function u(){var e;return e=regeneratorRuntime.mark(function e(t,r){var i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.Z.create("VIPResource",{upload_ids:t}).callGet();case 2:return i=e.sent.resource_response.data,e.abrupt("return",t.reduce(function(e,t){return i[t]?e[t]={failureCode:i[t].failure_code,signature:i[t].signature,status:i[t].status}:(0,o.nP)("storypin.publish.vip_status_check.missing_upload_id",{sampleRate:1,tags:{retryCount:r}}),e},{}));case 5:case"end":return e.stop()}},e)}),(u=function(){var t=this,r=arguments;return new Promise(function(n,o){var a=e.apply(t,r);function u(e){i(a,n,o,u,c,"next",e)}function c(e){i(a,n,o,u,c,"throw",e)}u(void 0)})}).apply(this,arguments)}},890774:function(e,t,r){r.d(t,{Z:function(){return d}});var n=r(581722),o=r(60101),i=r(575108),a=r(877956),u=r(440568),c=r(536652),s=r(72918);function l(e,t,r,n,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void r(e)}u.done?t(c):Promise.resolve(c).then(n,o)}function d(){var e,t,r=(0,n.I0)(),d=(0,n.v9)(function(e){return e.resources});return e=regeneratorRuntime.mark(function e(t){var n,l,f,p,m,b,_,v;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return l=t.boardCreateOptions,f=t.deprecatedSchemaForNormalization,e.next=3,i.Z.create("BoardResource",l).callCreate();case 3:return m=(p=e.sent).resource_response.data,b=f?(0,o.Fv)(m,f):void 0,r((0,s.XM)("BoardResource",l,p,b)),r((0,a.fO)({event_type:20})),null!=(n=m.owner)&&n.id&&r((0,c.b)("UserResource",{options:{user_id:m.owner.id,field_set_key:"save_behavior"}})),_=d.BoardsResource||{},v=d.BoardsFeedResource||{},Object.keys(_).forEach(function(e){var t;(0,u.k)(e).username===(null==(t=m.owner)?void 0:t.username)&&r((0,s.jB)("BoardsResource",e))}),Object.keys(v).forEach(function(e){var t;(0,u.k)(e).username===(null==(t=m.owner)?void 0:t.username)&&r((0,s.jB)("BoardsFeedResource",e))}),e.abrupt("return",m);case 14:case"end":return e.stop()}},e)}),t=function(){var t=this,r=arguments;return new Promise(function(n,o){var i=e.apply(t,r);function a(e){l(i,n,o,a,u,"next",e)}function u(e){l(i,n,o,a,u,"throw",e)}a(void 0)})},function(e){return t.apply(this,arguments)}}},947631:function(e,t,r){r.d(t,{Z:function(){return n}});function n(e,t){if(t.length<e)throw TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}},537765:function(e,t,r){r.d(t,{Z:function(){return n}});function n(e){if(null===e||!0===e||!1===e)return NaN;var t=Number(e);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)}},663158:function(e,t,r){r.d(t,{Z:function(){return i}});var n=r(947631);function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e){(0,n.Z)(1,arguments);var t=Object.prototype.toString.call(e);return e instanceof Date||"object"===o(e)&&"[object Date]"===t?new Date(e.getTime()):"number"==typeof e||"[object Number]"===t?new Date(e):(("string"==typeof e||"[object String]"===t)&&"undefined"!=typeof console&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://git.io/fjule"),console.warn(Error().stack)),new Date(NaN))}}}]);