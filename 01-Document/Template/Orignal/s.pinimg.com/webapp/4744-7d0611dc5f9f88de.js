"use strict";(self.legacyJsonp=self.legacyJsonp||[]).push([["4744"],{29859:function(e,t,r){r.d(t,{Z:function(){return B}});var o=r(586659),n=r(581722),i=r(20256),a=r(575108),c=r(461951),s=r(821342),l=r(19585),u=r(15667),d=r(742723),f=r(789302),p=r(215710),b=r(251426),h=r(382718);function y(e){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,o)}return r}function v(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?m(Object(r),!0).forEach(function(t){S(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function _(e,t){return(_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function g(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function j(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(j=function(){return!!e})()}function I(e){return(I=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function S(e,t,r){return(t=w(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function w(e){var t=function(e,t){if("object"!=y(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=y(o))return o;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==y(t)?t:t+""}var O={border:"1px solid ".concat(c.bJI),outline:"2px solid ".concat(c.nTo)},x={alignItems:"center",backgroundColor:"#efefef",border:"none",cursor:"pointer",display:"flex",flexGrow:1,height:40,justifyContent:"space-between",minWidth:0,outline:0,padding:"0 14px",position:"relative"},P={border:"none",cursor:"pointer",flex:"none",height:40,outline:0,padding:"0 14px"},E=function(e,t){var r=c.UTl;return e&&(r=c.jKP),t&&(r=c.cxq),{dropdown:{alignItems:"center",backgroundColor:"".concat(t?c.ilB:c.Wmm),border:"1px solid ".concat(r),cursor:t?"default":"pointer",display:"flex",flexGrow:1,height:48,justifyContent:"space-between",minWidth:0,outline:0,position:"relative",borderRadius:16}}},C=function(e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");c.prototype=Object.create(e&&e.prototype,{constructor:{value:c,writable:!0,configurable:!0}}),Object.defineProperty(c,"prototype",{writable:!1}),e&&_(c,e);var t,r,n=(t=j(),function(){var e,r=I(c);return e=t?Reflect.construct(r,arguments,I(this).constructor):r.apply(this,arguments),function(e,t){if(t&&("object"==y(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return g(e)}(this,e)});function c(){var e;if(!(this instanceof c))throw TypeError("Cannot call a class as a function");for(var t=arguments.length,r=Array(t),o=0;o<t;o++)r[o]=arguments[o];return S(g(e=n.call.apply(n,[this].concat(r))),"state",{selectedBoard:null,showBoardCreate:!1,showFlyout:!1,suggestedBoardName:"",dropdownFocused:!1}),S(g(e),"_setDefaultBoard",function(){a.Z.create("BoardPickerBoardsResource",{field_set_key:"board_picker",sort:"last_pinned_to",onlyFetchBoards:!0}).callGet({showError:!1}).then(function(t){var r=(((t||{}).resource_response||{}).data||{}).all_boards;if(r&&r.length>0){var o=r[0],n=o.id,i=o.image_cover_url,a=o.owner,c=o.privacy,s=o.name,l=o.url;if(e.props.selectedItem)return;e.handleItemChosen({boardId:n,imageCoverUrl:i,ownerUsername:null==a?void 0:a.username,privacy:c,title:s||"",url:l},!1)}})}),S(g(e),"setButtonRef",function(t){e.buttonRef=t}),S(g(e),"handleBoardDropdownClick",function(){e.setState(function(e){return{showFlyout:!e.showFlyout}})}),S(g(e),"handleSaveButtonClick",function(){var t=e.props,r=t.onSaveClick,o=t.selectedItem,n=t.disabledBoardPicker;(o||n)&&r?r():e.setState({showFlyout:!0})}),S(g(e),"handleFlyoutClose",function(){var t;e.setState({showFlyout:!1}),null==(t=e.buttonRef)||t.focus()}),S(g(e),"handleItemChosen",function(t){var r=!(arguments.length>1)||void 0===arguments[1]||arguments[1];(0,e.props.onItemChosen)(t),r&&e.handleFlyoutClose()}),S(g(e),"handleCreateSection",function(t){var r=e.state.selectedBoard;if(r){var o=r.id,n=r.privacy,i=t.id,a=t.title;e.handleItemChosen({boardId:o,privacy:n,sectionId:i,title:a||""})}e.handleBoardCreateClose()}),S(g(e),"handleBoardCreateShow",function(t){var r=t.title;e.setState({showBoardCreate:!0,showFlyout:!1,suggestedBoardName:r})}),S(g(e),"handleBoardCreateClose",function(){e.setState({showBoardCreate:!1,selectedBoard:null})}),S(g(e),"handleBoardCreate",function(t){e.props.invalidateBoardPickerBoardsResource();var r=t.id,o=t.name,n=t.privacy,i=t.url;e.handleItemChosen({boardId:r,privacy:n,title:o||"",url:i}),e.handleBoardCreateClose()}),S(g(e),"handleSetBoardWithSection",function(t){e.setState({selectedBoard:t})}),S(g(e),"handleDropdownFocused",function(){e.setState({dropdownFocused:!0})}),S(g(e),"handleDropdownBlur",function(){e.setState({dropdownFocused:!1})}),e}return r=[{key:"componentDidMount",value:function(){var e=this.props,t=e.selectedItem,r=e.useDefaultBoard,o=e.disableDefaultBoard;!(void 0!==o&&o)&&(void 0!==r&&r?this._setDefaultBoard():t||this._setDefaultBoard())}},{key:"render",value:function(){var e=this.props,t=e.accessibilityLabelText,r=e.buttonText,n=e.customItem,a=e.disabled,c=e.disabledBoardPicker,s=e.flyoutSize,l=e.flyoutZIndex,u=e.hasError,d=e.idealDirection,y=e.onSaveClick,m=e.placeholder,_=e.requestContext,g=e.selectedItem,j=e.showBoardCover,I=e.showButton,S=e.showCreateBoardButton,w=e.showFlyoutSaveButton,C=e.showSections,B=e.showSectionSaveButton,T=e.boardFilter,D=e.useLayer,R=e.useStoryboardStyle,A=e.useCreateModalWithNoLayer,N=e.showSaveToProfile,k=this.state,Z=k.selectedBoard,z=k.showBoardCreate,F=k.showFlyout,U=k.suggestedBoardName,L=k.dropdownFocused,M=_.isRTL,W=R?16:8,X="".concat(W,"px 0 0 ").concat(W,"px"),H="0 ".concat(W,"px ").concat(W,"px 0"),G=(g||{}).title,V=j&&!!g&&G,J=a||c,q=v(v({},R?E(u,J).dropdown:x),{},{borderRadius:F||!I?W:M?H:X,padding:V?"0 14px 0 7px":"0 14px",cursor:J?"default":"pointer",pointerEvents:J?"none":"auto"},L?O:{}),K=v(v(v({},P),{},{borderRadius:M?X:H},a?{backgroundColor:"#efefef",cursor:"default"}:{}),{},{pointerEvents:a?"none":"auto"});return(0,h.jsxs)(i.xu,{column:12,dangerouslySetInlineStyle:{__style:{borderRadius:8,boxShadow:u&&!R?"0 0 0 1px #e60023":void 0,zIndex:F?l:void 0}},position:"relative",children:[(0,h.jsxs)(i.kC,{alignItems:"center",justifyContent:"start",width:"100%",children:[(0,h.jsx)(i.iP,{ref:this.setButtonRef,accessibilityLabel:a?void 0:"","aria-expanded":F,dataTestId:"board-dropdown-select-button",disabled:a,onBlur:this.handleDropdownBlur,onFocus:this.handleDropdownFocused,onTap:this.handleBoardDropdownClick,rounding:4,children:(0,h.jsxs)(i.xu,{dangerouslySetInlineStyle:{__style:q},children:[(0,h.jsxs)(i.xu,{alignItems:"center","data-test-id":g?"board-dropdown-item-selected":"board-dropdown-placeholder",display:"flex",marginEnd:2,minWidth:0,overflow:"hidden",children:[V&&(0,h.jsx)(i.xu,{marginEnd:2,children:(0,h.jsx)(i.zd,{height:32,rounding:2,width:32,children:null!=g&&g.imageCoverUrl?(0,h.jsx)(i.Ee,{alt:"",color:"lightGray",fit:"cover",naturalHeight:1,naturalWidth:1,src:g.imageCoverUrl}):(0,h.jsx)(i.xu,{color:"secondary",height:"100%",width:"100%"})})}),(0,h.jsx)(i.xv,{lineClamp:1,children:(0,h.jsx)(i.xu,{dangerouslySetInlineStyle:{__style:{color:g?"#111":"#6c6c6c"}},children:g&&G?G:m})})]}),(0,h.jsx)(i.xu,{flex:"none",marginEnd:-1,children:(0,h.jsx)(i.JO,{accessibilityLabel:F?this.props.i18n._('Close dropdown', 'createPin.chooseBoardDropdown.iconButton.closeDropdown', 'Icon button for closing choose board dropdown'):this.props.i18n._('Open dropdown', 'createPin.chooseBoardDropdown.iconButton.openDropdown', 'Icon button for opening choose board dropdown'),color:J?"subtle":"default",icon:"arrow-down",size:12})})]})}),!F&&I&&(0,h.jsx)(i.xu,{alignItems:"center",color:"primary",dangerouslySetInlineStyle:{__style:K},display:"flex",justifyContent:"center",children:(0,h.jsx)(i.iP,{accessibilityLabel:a?void 0:"",dataTestId:"board-dropdown-save-button",disabled:a,onTap:this.handleSaveButtonClick,children:(0,h.jsx)(i.xv,{color:a?"subtle":"inverse",weight:"bold",children:r||this.props.i18n._('Save', 'Button to create new Pin', 'Button to create new Pin')})})})]}),F&&(0,h.jsx)(i.J2,{anchor:this.buttonRef,idealDirection:d||"down",onDismiss:this.handleFlyoutClose,size:s,children:(0,h.jsx)(p.sR,{accessibilityLabelText:t,boardFilter:T,buttonText:r,customItem:n&&(0,o.cloneElement)(n,{onItemChosen:this.handleFlyoutClose}),onBoardCreate:this.handleBoardCreateShow,onButtonClick:y,onItemChosen:this.handleItemChosen,paneWidth:"number"==typeof s?s:void 0,setBoardWithSection:this.handleSetBoardWithSection,showCreateBoardButton:S,showFlyoutSaveButton:w,showSaveToProfile:N,showSections:C,showSectionSaveButton:B,useLegoLayout:!1,useStoryboardStyle:R})}),z&&!Z&&(0,h.jsx)(f.Z,{boardCreateSource:"board_picker",onBoardCreate:this.handleBoardCreate,onClose:this.handleBoardCreateClose,showSecretBoardCreateToggle:"public"===T,suggestedBoardName:U,useModalWithNoLayer:A}),z&&!!Z&&(0,h.jsx)(b.default,{onClose:this.handleBoardCreateClose,onSectionCreate:this.handleCreateSection,selectedBoard:Z,useLayer:D})]})}}],function(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,w(o.key),o)}}(c.prototype,r),Object.defineProperty(c,"prototype",{writable:!1}),c}(o.Component);function B(e){var t=(0,l.ZP)(),r=(0,n.I0)(),o=(0,s.Z)(),i=(0,d.Z)();return(0,h.jsx)(C,v(v({},e),{},{i18n:t,invalidateBoardPickerBoardsResource:function(){return r((0,p.DR)(o,i))},requestContext:(0,u.B)()}))}S(C,"defaultProps",{flyoutSize:"lg",flyoutZIndex:1,showButton:!0,disabled:!1})},734263:function(e,t,r){r.d(t,{Z:function(){return i}});var o=r(20256),n=r(382718);function i(e){var t=e.ariaHidden,r=e.color,i=e.size;return(0,n.jsx)("span",{"aria-hidden":void 0!==t&&t,style:{padding:"0 4px"},children:(0,n.jsx)(o.xv,{color:r,inline:!0,size:null!=i?i:"200",children:"\xb7"})})}},509120:function(e,t,r){r.d(t,{Z:function(){return b}});var o=r(586659),n=r(20256),i=r(382718);function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,o)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach(function(t){var o,n;o=t,n=r[t],(o=function(e){var t=function(e,t){if("object"!=a(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=a(o))return o;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==a(t)?t:t+""}(o))in e?Object.defineProperty(e,o,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[o]=n}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,o=Array(t);r<t;r++)o[r]=e[r];return o}function u(e){return"".concat(Math.min(100*e,100),"%")}function d(e){var t,r=e.customCover,n=e.imgPos,i=e.imgUrl,a=function(e){if(Array.isArray(e))return e}(t=(0,o.useState)({height:0,loaded:!1,width:0}))||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var o,n,i,a,c=[],s=!0,l=!1;try{for(i=(r=r.call(e)).next;!(s=(o=i.call(r)).done)&&(c.push(o.value),2!==c.length);s=!0);}catch(e){l=!0,n=e}finally{try{if(!s&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw n}}return c}}(t,2)||function(e,t){if(e){if("string"==typeof e)return l(e,2);var r=({}).toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?l(e,2):void 0}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),c=a[0],s=a[1],d=c.height,f=c.loaded,p=c.width;if((0,o.useEffect)(function(){var e=new Image;e.onload=function(){s({height:e.naturalHeight,loaded:!0,width:e.naturalWidth})},e.src=i},[i]),!r||!n||!d||!p)return{loaded:f,position:"center center"};var b=p-n.width,h=d-n.height,y=b>0?u(n.x/b):"center",m=h>0?u(n.y/h):"center";return{loaded:f,position:"".concat(y," ").concat(m)}}function f(e){var t=d(e),r=t.loaded,o=t.position,a=e.imgUrl;return(0,i.jsx)(n.xu,{"data-test-id":"cover-image-box",height:"100%",width:"100%",children:r&&(0,i.jsx)(n.xu,{dangerouslySetInlineStyle:{__style:{backgroundImage:"url(".concat(a,")"),backgroundPosition:o,backgroundRepeat:"no-repeat",backgroundSize:"cover",minHeight:"100%",backgroundColor:"#EFEFEF",position:"relative"}},"data-test-id":"cover-image",children:(0,i.jsx)("div",{className:"imageWash",style:{position:"absolute"}})})})}function p(e){var t=d(e),r=t.loaded,o=t.position,a=e.alt,c=e.color,s=e.imgUrl;return(0,i.jsx)(n.zd,{height:"100%",width:"100%",children:r&&(0,i.jsx)("img",{alt:a||"",src:s,style:{backgroundColor:c||"#EFEFEF",fetchPriority:"cover",height:"100%",loading:"auto",objectFit:"cover",objectPosition:o,width:"100%"}})})}function b(e){return e.renderAsImage?(0,i.jsx)(p,s({},e)):(0,i.jsx)(f,s({},e))}},271597:function(e,t,r){r.d(t,{AC:function(){return a},FC:function(){return u},FP:function(){return s},M0:function(){return c},SA:function(){return f},Xq:function(){return d},Y_:function(){return i},o2:function(){return n},s0:function(){return o},z9:function(){return l}});var o=44,n=40,i=49,a=69,c=236,s=157,l=320,u=213,d=7,f=["US","GB","CA","FR","DE","AT","CH","IT","ES","AU","BR","NL","MX"]},790427:function(e,t,r){r.d(t,{$8:function(){return u},Dk:function(){return l},Fk:function(){return n},fS:function(){return s},lI:function(){return i},mS:function(){return c},qW:function(){return a}});var o=r(20256),n=new o.Ry(1),i=new o.Ry(3),a=2,c=new o.Ry(a),s=3,l=new o.Ry(100),u=new o.H3([l])},422790:function(e,t,r){r.d(t,{Z:function(){return c}});var o=r(20256),n=r(382718),i={__style:{margin:"0 10px",borderRight:"3px solid transparent",borderTop:"3px solid #fff",animation:"spin .8s linear infinite"}};function a(){return(0,n.jsx)(o.xu,{alignItems:"center",color:"primary",display:"flex",height:"100%",justifyContent:"center",position:"absolute",rounding:8,width:"100%",children:(0,n.jsx)(o.xu,{dangerouslySetInlineStyle:i,"data-test-id":"submit-button-spinner",display:"inlineBlock",height:18,position:"relative",rounding:"circle",width:18})})}function c(e){var t=e.disabled,r=e.name,i=e.onClick,c=e.size,s=e.submitting,l=e.text;return(0,n.jsxs)(o.xu,{"data-test-id":"submit-button",display:"flex",position:"relative",children:[s&&(0,n.jsx)(a,{}),(0,n.jsx)(o.zx,{color:"red",disabled:t||s,name:r,onClick:i,size:c,text:l,type:"submit"})]})}},251426:function(e,t,r){r.r(t),r.d(t,{default:function(){return l}});var o=r(20256),n=r(982166),i=r(19585),a=r(15667),c=r(7257),s=r(382718);function l(e){var t=(0,i.ZP)(),r=e.onSectionCreate,l=e.onClose,u=e.selectedBoard,d=e.useLayer,f=(0,a.B)().isRTL,p=void 0===d||d?n.ZP:o.u_,b=(0,s.jsx)(o.xu,{paddingX:4,paddingY:6,position:"relative",children:(0,s.jsxs)(o.kC,{alignItems:"center",justifyContent:"center",children:[(0,s.jsx)(o.xu,{maxWidth:400,children:(0,s.jsx)(o.X6,{align:"center",size:"600",children:t._('Add section', 'Modal header for adding a section', 'Modal header for adding a section')})}),(0,s.jsx)(o.xu,{left:f,paddingX:6,paddingY:5,position:"absolute",right:!f,top:!0,children:(0,s.jsx)(o.hU,{accessibilityLabel:t._('Close', 'CreateSection.Modal.Icon', 'Icon to close section create modal'),icon:"cancel",iconColor:"darkGray",onClick:l,size:"lg"})})]})});return(0,s.jsx)(p,{accessibilityModalLabel:t._('Add a section to the board', 'modal to add a section to a board', 'modal to add a section to a board'),heading:b,onDismiss:l,size:"sm",children:(0,s.jsx)(o.xu,{color:"default",display:"flex",rounding:2,children:(0,s.jsx)(c.Z,{board:u,completeCreateSectionAction:r,onClearModal:l,positionRelative:!0,showTitle:!1})})})}},889229:function(e,t,r){function o(e,t){return{type:"SECTION_ADDED",payload:{boardId:e,section:t}}}function n(e,t){return{type:"SECTION_DELETED",payload:{boardId:e,sectionId:t}}}r.d(t,{HG:function(){return n},OQ:function(){return i},hd:function(){return o}});var i=function(e,t){return{type:"BOARD_SECTION_EDIT",payload:t}}},816676:function(e,t,r){r.d(t,{Z:function(){return f}});var o=r(575108),n=r(72918),i=r(74105),a=r(889229),c=r(189976),s=r(831786),l=r(696323);function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,o)}return r}function f(e,t,r,f){var p=e.boardId,b=e.sourceBoardId,h=void 0===b?"":b,y=e.sourceSectionId,m=void 0===y?"":y,v=e.name,_=e.nameSource,g=e.pinImport,j=e.initialPinIds,I=0;"RECOMMENDATION"===_?I=1:"EDITED_RECOMMENDATION"===_&&(I=2);var S=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?d(Object(r),!0).forEach(function(t){var o,n;o=t,n=r[t],(o=function(e){var t=function(e,t){if("object"!=u(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=u(o))return o;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==u(t)?t:t+""}(o))in e?Object.defineProperty(e,o,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[o]=n}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({board_id:p,initial_pins:g&&!g.all?g.pinIds:void 0===j?[]:j,name:v,name_source:I},r?{orbac_subject_id:r}:Object.freeze({}));return function(e){return o.Z.create("BoardSectionResource",S).callCreate({showError:!1}).then(function(o){var u=o.resource_response.data;f({event_type:7100,object_id_str:u.id}),e((0,a.hd)(p,u)),e((0,c.vX)({feedId:p,feedType:l.Z.BOARD_SECTIONS,itemIds:[u.id],itemType:"boardsection"})),e((0,i.Z)(p,"pin_count")),e((0,n.jB)("BoardSectionsRepinResource",{board_id:p,orbac_subject_id:r}));var d=g||{all:!1,pinIds:[]},b=d.all,y=d.pinIds;return b?new Promise(function(r,o){return e((0,s.Z)({inverseSelection:!0,selectedPinIds:y,source:{boardId:h||p,sectionId:m||null},target:{boardId:p,sectionId:u.id}},t)).then(function(){return r(u)}).catch(o)}):(y.length>0&&e((0,c.EX)({feedId:p,feedType:l.Z.BOARDFEED,itemIds:y,itemType:"pin"})),u)})}}},225013:function(e,t,r){r.d(t,{Z:function(){return n}});var o=r(536652);function n(e,t){return function(r){return r((0,o.U)("BoardSectionResource",{options:{field_set_key:t||"board_page",section_id:e}}))}}},74105:function(e,t,r){r.d(t,{Z:function(){return a}});var o=r(536652);function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,o)}return r}function a(e,t,r){return(0,o.U)("BoardResource",{options:function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach(function(t){var o,i;o=t,i=r[t],(o=function(e){var t=function(e,t){if("object"!=n(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=n(o))return o;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==n(t)?t:t+""}(o))in e?Object.defineProperty(e,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[o]=i}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({board_id:e,field_set_key:t},r?{orbac_subject_id:r}:{})})}},831786:function(e,t,r){r.d(t,{S:function(){return p},Z:function(){return b}});var o=r(575108),n=r(74105),i=r(225013),a=r(189976),c=r(686231),s=r(696323),l=r(697063),u=function(e){return function(t){l.Z.showError(function(e,t){switch(e.api_error_code){case 2171:case 2172:case 2173:return t._('Please wait until the previous board action finishes.', ' - ', ' -- ');default:return e.message}}(t,e))}},d=function(e){return(0,a.N8)(e.sectionId?s.Z.BOARD_SECTION_PINS:s.Z.BOARDFEED,e.sectionId||e.boardId)};function f(e,t){var r=e.source,o=e.target;o.boardId!==r.boardId?(t((0,n.Z)(r.boardId,"pin_count")),t((0,n.Z)(o.boardId,"pin_count"))):r.sectionId&&o.sectionId||t((0,n.Z)(o.boardId,"pin_count")),r.sectionId&&t((0,i.Z)(r.sectionId)),o.sectionId&&t((0,i.Z)(o.sectionId))}function p(e){return function(t){var r=e.selectedPinIds,o=e.source,n=e.target;t((0,a.EX)({feedId:o.sectionId||o.boardId,feedType:o.sectionId?s.Z.BOARD_SECTION_PINS:s.Z.BOARDFEED,itemIds:r,itemType:"pin"})),t((0,a.vX)({feedId:n.sectionId||n.boardId,feedType:n.sectionId?s.Z.BOARD_SECTION_PINS:s.Z.BOARDFEED,itemIds:r,itemType:"pin"})),r.forEach(function(e){t((0,c.Vp)({pinId:e,boardId:n.boardId,sectionId:n.sectionId||void 0,title:n.name||""}))}),f(e,t)}}function b(e,t){return function(r){var n=e.selectedPinIds,i=e.target;return n.forEach(function(e){r((0,c.Vp)({pinId:e,boardId:i.boardId,sectionId:i.sectionId||void 0,title:i.name||""}))}),(function(e,t,r){var n=e.inverseSelection,i=e.selectedPinIds,c=e.source,l=e.target,f=e.orbacSubjectId;if(c.boardId===l.boardId&&(c.sectionId||null)===(l.sectionId||null))return Promise.reject();if(n){var p={board_id:c.boardId,new_board_id:l.boardId,old_section_id:c.sectionId||void 0,new_section_id:l.sectionId||void 0,pin_ids:i,orbac_subject_id:f};return o.Z.create("BulkEditSelectAllResource",p).callUpdate({showError:!1}).then(function(){return Promise.all([t(d(c)),t(d(l))])}).catch(u(r))}var b=function(e,r){t((0,a.EX)({feedId:e.sectionId||e.boardId,feedType:e.sectionId?s.Z.BOARD_SECTION_PINS:s.Z.BOARDFEED,itemIds:i,itemType:"pin"})),t((0,a.vX)({feedId:r.sectionId||r.boardId,feedType:r.sectionId?s.Z.BOARD_SECTION_PINS:s.Z.BOARDFEED,itemIds:i,itemType:"pin"}))};b(c,l);var h=function(){return b(l,c)};if(l.boardId===c.boardId)if(l.sectionId){var y={section_id:l.sectionId,pins:i,orbac_subject_id:f};return o.Z.create("BoardSectionEditResource",y).callUpdate({showError:!1}).catch(function(e){h(),u(r)(e)})}else{var m={section_id:c.sectionId,pins:i,orbac_subject_id:f};return o.Z.create("BoardSectionPinsResource",m).callDelete({showError:!1}).catch(function(e){h(),u(r)(e)})}var v={board_id:l.boardId,section_id:l.sectionId||void 0,pin_ids:i,orbac_subject_id:f};return o.Z.create("BulkEditResource",v).callUpdate({showError:!1}).catch(function(e){h(),u(r)(e)})})(e,r,t).then(function(){return f(e,r)})}}},686231:function(e,t,r){function o(e){return{type:"PIN_BETTER_SAVE",payload:e}}function n(e){return{type:"PIN_BETTER_SAVE_CUTOUT",payload:e}}function i(e){return{type:"PIN_BETTER_UNSAVE",payload:e}}function a(e){return{type:"PIN_BETTER_UNSAVE_CUTOUT",payload:e}}function c(e){return{type:"PIN_BETTER_SELECT_BOARD_OR_SECTION",payload:e}}function s(e){return{type:"PIN_BETTER_SELECT_BOARD_CUTOUT",payload:e}}function l(e){return{type:"POST_REPIN_MORE_IDEAS_UPSELL_SHOWN",payload:{boardId:e}}}r.d(t,{ND:function(){return l},Vp:function(){return c},a1:function(){return o},b6:function(){return s},jg:function(){return i},o4:function(){return n},ti:function(){return a}})},7257:function(e,t,r){var o=r(586659),n=r(581722),i=r(20256),a=r(521009),c=r(821342),s=r(19585),l=r(765533),u=r(448505),d=r(7872),f=r(422790),p=r(816676),b=r(382718);function h(e){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function y(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,o)}return r}function m(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?y(Object(r),!0).forEach(function(t){I(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):y(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function v(e,t){return(v=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function _(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(g=function(){return!!e})()}function j(e){return(j=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function I(e,t,r){return(t=S(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function S(e){var t=function(e,t){if("object"!=h(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=h(o))return o;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==h(t)?t:t+""}var w=function(e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&v(n,e);var t,r,o=(t=g(),function(){var e,r=j(n);return e=t?Reflect.construct(r,arguments,j(this).constructor):r.apply(this,arguments),function(e,t){if(t&&("object"==h(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return _(e)}(this,e)});function n(e){var t;if(!(this instanceof n))throw TypeError("Cannot call a class as a function");return I(_(t=o.call(this,e)),"onCreateSection",function(){var e=t.props,r=e.board,o=e.sourceBoard,n=e.sourceSection,i=e.dispatch,a=e.completeCreateSectionAction,c=e.pinImport,s=e.viewer,l=e.orbacActingAs,u=e.logContextEvent,f=(0,d.lJ)(s,l);return t.setState({isSaving:!0}),i((0,p.Z)({boardId:r.id,sourceBoardId:o&&o.id,sourceSectionId:n&&n.id,name:t.state.inputName.trim(),pinImport:c},t.props.i18n,f,u)).then(function(e){t.setState({isSaving:!1}),a(e)}).catch(function(e){t.setState({createError:e.message_detail||e.message,isSaving:!1})})}),I(_(t),"handleKeyDown",function(e){var r=e.event,o=t.state,n=o.createError,i=o.inputName;[l.Z.ENTER,l.Z.NUMPAD_ENTER].includes(r.which)&&!n&&i.trim()&&t.onCreateSection()}),I(_(t),"handleChangeName",function(e){var r=e.value;t.setState({createError:null,inputName:r})}),I(_(t),"handleInputRef",function(e){t.setState({inputRef:e})}),t.state={createError:null,inputName:e.initialName||"",inputRef:null,isSaving:!1},t}return r=[{key:"componentDidUpdate",value:function(e,t){var r=this.state,o=r.createError,n=r.inputRef;n&&(!t.inputRef||o)&&n.focus()}},{key:"render",value:function(){var e=this.props,t=e.showTitle,r=e.positionRelative,o=this.state,n=o.createError,a=o.inputName,c=o.isSaving,s=!!a.trim()&&!n;return(0,b.jsxs)(i.xu,{bottom:!0,color:"default",dangerouslySetInlineStyle:{__style:{borderLeft:"1px solid #f5f5f5"}},direction:"column",display:"flex",flex:"grow",position:r?"relative":"absolute",right:!0,rounding:2,top:!0,width:"100%",children:[t&&(0,b.jsx)(i.xu,{marginTop:3,paddingX:6,paddingY:3,children:(0,b.jsx)(i.X6,{size:"400",children:this.props.i18n._('Add section', 'Title in the add section modal', 'Title in the add section modal')})}),(0,b.jsxs)(i.xu,{padding:4,children:[(0,b.jsx)(i.xu,{marginBottom:2,children:(0,b.jsx)(i.__,{htmlFor:"sectionEditName",children:(0,b.jsx)(i.xv,{color:n?"error":"subtle",size:"200",children:this.props.i18n._('Name', 'Board section name', 'Board section name')})})}),(0,b.jsx)(i.xu,{children:(0,b.jsx)(i.xu,{ref:this.handleInputRef,children:(0,b.jsx)(i.nv,{errorMessage:n||"",id:"sectionEditName",name:"sectionName",onChange:this.handleChangeName,onKeyDown:this.handleKeyDown,placeholder:this.props.i18n._('Like "Lighting"', 'Placeholder for board section name', 'Placeholder for board section name'),size:"lg",type:"text",value:a})})})]}),(0,b.jsx)(i.kC,{alignItems:"stretch",flex:"grow",justifyContent:"start"}),(0,b.jsx)(i.xu,{padding:4,children:(0,b.jsx)(i.kC,{alignItems:"stretch",justifyContent:"end",children:(0,b.jsx)(f.Z,{disabled:!s||c,onClick:this.onCreateSection,submitting:c,text:this.props.i18n._('Add', 'add a new section', 'add a new section')})})})]})}}],function(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,S(o.key),o)}}(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n}(o.Component);t.Z=function(e){var t=(0,n.I0)(),r=(0,s.ZP)(),o=(0,c.Z)(),i=(0,u.Z)();return(0,b.jsx)(w,m(m({},e),{},{dispatch:t,i18n:r,logContextEvent:(0,a.Z)(),orbacActingAs:i,viewer:o}))}}}]);