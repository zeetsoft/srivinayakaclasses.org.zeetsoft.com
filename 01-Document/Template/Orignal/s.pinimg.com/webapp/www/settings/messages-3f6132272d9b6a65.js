(self.legacyJsonp=self.legacyJsonp||[]).push([["69819"],{936306:function(e,s,i){"use strict";var t=i(586659),n=i(20256),r=i(382718);s.Z=(0,t.forwardRef)(function(e,s){var i=e.heading,t=e.iconAccessibilityLabel,o=e.headingAccessibilityLevel,l=e.description,a=e.onTap,c=e.primarySettingsMenu;return(0,r.jsx)(n.iP,{onTap:void 0===a?function(){}:a,tapStyle:"none",children:(0,r.jsx)(n.xu,{padding:2*!!c,children:(0,r.jsxs)(n.kC,{alignItems:"stretch",justifyContent:"between",children:[(0,r.jsxs)(n.xu,{ref:s,children:[(0,r.jsx)(n.X6,{accessibilityLevel:void 0===o?3:o,size:"400",children:i}),l&&(0,r.jsx)(n.xu,{marginTop:2,children:(0,r.jsx)(n.xv,{color:"subtle",children:l})})]}),(0,r.jsx)(n.xu,{paddingY:1,children:(0,r.jsx)(n.JO,{accessibilityLabel:t,color:c?"subtle":"default",icon:"arrow-forward"})})]})})})})},533898:function(e,s,i){"use strict";var t=i(20256),n=i(382718);s.Z=function(e){var s=e.heading,i=e.description,r=e.switchId,o=e.onChange,l=e.switched,a=e.headingAccessibilityLevel;return(0,n.jsxs)(t.kC,{alignItems:"center",justifyContent:"between",children:[(0,n.jsx)(t.xu,{flex:"grow",marginEnd:4,children:(0,n.jsxs)(t.__,{htmlFor:r,children:[(0,n.jsx)(t.X6,{accessibilityLevel:a||3,size:"400",children:s}),i?(0,n.jsx)(t.xu,{flex:"grow",marginTop:2,children:(0,n.jsx)(t.xv,{color:"subtle",children:i})}):null]})}),(0,n.jsx)(t.rs,{id:r,onChange:o,switched:l})]})}},402426:function(e,s,i){"use strict";i.d(s,{Z:function(){return P}});var t=i(586659),n=i(581722),r=i(963489),o=i(20256),l=i(475498),a=i(821342),c=i(19585),d=i(588367),u=i(914061),g=i(886981),h=i(600861),_=i(936306),f=i(87853),m=i(647709),p=i(112864),x=i(448303),v=i(524789),b=i(533898),j=i(382718);function y(e,s){return function(e){if(Array.isArray(e))return e}(e)||function(e,s){var i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var t,n,r,o,l=[],a=!0,c=!1;try{if(r=(i=i.call(e)).next,0===s){if(Object(i)!==i)return;a=!1}else for(;!(a=(t=r.call(i)).done)&&(l.push(t.value),l.length!==s);a=!0);}catch(e){c=!0,n=e}finally{try{if(!a&&null!=i.return&&(o=i.return(),Object(o)!==o))return}finally{if(c)throw n}}return l}}(e,s)||function(e,s){if(e){if("string"==typeof e)return A(e,s);var i=({}).toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?A(e,s):void 0}}(e,s)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function A(e,s){(null==s||s>e.length)&&(s=e.length);for(var i=0,t=Array(s);i<s;i++)t[i]=e[i];return t}var P=function(){var e,s,i,A=(0,n.I0)(),P=(0,r.s0)(),w=(0,c.ZP)(),S=(0,m.HG)(),I=(0,a.Z)(),z=(0,f.dI)().showToast,L=(0,g.Z)({name:"UserSettingsResource",noCache:!0}),E=L.data,C=L.isLoaded,T=y((0,t.useState)(I.isAuth?null==(s=I.partner)?void 0:s.enable_profile_message:void 0),2),M=T[0],Z=T[1],H=y((0,t.useState)([]),2),O=H[0],D=H[1],N=y((0,t.useState)([]),2),B=N[0],F=N[1];(0,t.useEffect)(function(){var e,s=(null==E?void 0:E.messaging_permissions)||[];if(C&&s.length>0){var i=[],t=[];s.forEach(function(e){return e.eligible_levels.length>1?i.push(e):t.push(e)}),D(i),F(t)}Z(null==E||null==(e=E.partner)?void 0:e.enable_profile_message)},[null==E?void 0:E.messaging_permissions,null==E||null==(i=E.partner)?void 0:i.enable_profile_message,C]);var G=function(e){var s=e.groupId,i=e.selectedLevelId,t=(0,v.CE)({groupId:s,i18n:w}),n=(0,v.m8)({levelId:i,i18n:w});return t&&n&&(0,j.jsx)(o.xu,{"data-test-id":"".concat(t.route,"-message-setting"),marginBottom:6,children:(0,j.jsx)(_.Z,{description:n.label,heading:t.title,headingAccessibilityLevel:2,iconAccessibilityLabel:w._('Go to Edit title', 'profile.SocialPermissions.Messages.Icon', 'Edit Messages Icon on Social Permissions Page'),onTap:function(){t.route&&P("/settings/messages/".concat(t.route))}})},s)},R=function(e){var s=e.groupId,i=(0,v.CE)({groupId:s,i18n:w});return i&&(0,j.jsxs)(o.xu,{"data-test-id":"".concat(i.route,"-message-setting"),marginBottom:6,children:[(0,j.jsx)(o.X6,{accessibilityLevel:2,size:"400",children:i.title}),(0,j.jsx)(o.xu,{marginTop:2,children:(0,j.jsx)(o.xv,{color:"subtle",children:i.nonEditableSubtitle||""})})]},s)},X=O.length>0||B.length>0,k=I.isAuth&&I.partner?!!M&&X:X;if(!I.isAuth)return(0,j.jsx)(r.Fg,{replace:!0,to:v.NN});if(S)return(0,j.jsx)(r.Fg,{replace:!0,to:v.ic});if(!C)return(0,j.jsx)(o.kC,{alignContent:"center",alignItems:"stretch",direction:"column",height:"100vh",justifyContent:"center",width:"100vw",children:(0,j.jsx)(o.xH,{accessibilityLabel:w._('Loading messaging permissions edit page', 'userSettingsPage.socialPermissions.MessagingPermissions.loading', 'Loading state for the edit messaging permissions page'),show:!0})});var J=w._('You decide whether messages go to your inbox, requests, or if you don\u2019t receive them at all', 'userSettingsPage.SocialPermissions.MessagingPermissions.description', 'Description for the edit messaging permissions page');return(0,j.jsxs)(u.default,{hasFixedHeader:!0,children:[(0,j.jsx)(d.default,{zIndexForGestaltBug:2,children:(0,j.jsx)(p.default,{heading:w._('Messages', 'userSettingsPage.socialPermissions.MessagingPermissions.title', 'Page for the edit messaging permissions settings'),legoSettingsEnabled:!0,previousUrl:"/settings/permissions"})}),(0,j.jsxs)(o.xu,{"data-test-id":"settings-messages",marginBottom:2,paddingX:2,children:[(0,j.jsx)(o.xu,{marginBottom:6,marginTop:1,children:(0,j.jsx)(o.xv,{align:"start",size:"300",children:J})}),I.partner&&(0,j.jsx)(o.xu,{marginBottom:6,children:(0,j.jsx)(b.Z,{description:(e=w._('A message button will appear on your profile so others can message you.', 'profile.Messages.description', 'Settings toggle for enabling messages receival on bussines profile'),M&&(e+=" "+(w._('Change how you receive messages below.', 'settings.messagingPermissions.businessSetting.description.enabled', 'Additional line for business message setting when setting is enabled'))),e),heading:w._('Allow others to message my business', 'profile.Messages.title', 'Settings toggle for enabling messages receival on bussines profile'),headingAccessibilityLevel:2,onChange:function(){var e=!M;Z(e),A((0,x._L)({field:"enable_profile_message",value:e,onSettingSavedHn:function(){z(function(e){var s=e.hideToast;return(0,j.jsx)(l.Z,{duration:v.hN,onHide:s,text:w._('Message settings saved', 'profile.SocialPermissions.Messages.ToastMessage', 'Name of setting being saved for confirmation toast')})})},showErrorHn:function(){},surfaceTag:h.i.SETTINGS,userId:I.isAuth?I.id:""}))},switched:!!M,switchId:"partner-messages-switch"})}),k&&(0,j.jsxs)(t.Fragment,{children:[O.map(function(e){return G({groupId:e.group_id,selectedLevelId:e.selected_level})}),B.map(function(e){return R({groupId:e.group_id})})]})]})]})}},964100:function(e,s,i){(window.__PWS_LOADED_HANDLERS__=window.__PWS_LOADED_HANDLERS__||[]).push(["www/settings/messages",function(){return i(402426).Z}])}},function(e){e.O(0,["25418","30338","62148","8709","88038"],function(){return e(e.s=964100)}),e.O()}]);