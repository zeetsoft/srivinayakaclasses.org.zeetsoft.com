(self.legacyJsonp=self.legacyJsonp||[]).push([["71066"],{656405:function(e,t,s){"use strict";s.d(t,{Z:function(){return i}});var n=s(604969),r=s(603316);function i(e,t){if(e&&"output"in e){var s=navigator;document.body?window.Windows?n.f(e.filename,e.output,t):s.msSaveBlob?s.msSaveBlob(new Blob([e.output],{type:"text/csv;charset=utf-8"}),e.filename):n.F(e.filename,e.output):(0,r.nP)("".concat(t,".ui.export_csv.unable_to_start_download"),{sampleRate:1})}}},604969:function(e,t,s){"use strict";s.d(t,{F:function(){return i},f:function(){return r}});var n=s(603316),r=function(e,t,s){var r=new window.Windows.Storage.Pickers.FileSavePicker;r.suggestedStartLocation=window.Windows.Storage.Pickers.PickerLocationId.documentsLibrary,r.fileTypeChoices.insert("Comma Seperated Values",[".csv"]),r.suggestedFileName=e,r.pickSaveFileAsync().then(function(e){e&&(window.Windows.Storage.CachedFileManager.deferUpdates(e),window.Windows.Storage.FileIO.writeTextAsync(e,t).then(function(){return window.Windows.Storage.CachedFileManager.completeUpdatesAsync(e)}).then(function(e){e===window.Windows.Storage.Provider.FileUpdateStatus.complete?(0,n.nP)("".concat(s,".ui.export_csv.windows_completed_download"),{sampleRate:1}):(0,n.nP)("".concat(s,".ui.export_csv.windows_unable_to_start_download"),{sampleRate:1})}))})},i=function(e,t){if(document.body){var s=document.body,n=document.createElement("a");n.setAttribute("href","data:text/csv;charset=utf-8,"+encodeURIComponent(t)),n.setAttribute("download",e),n.style.display="none",s.appendChild(n),n.click(),s.removeChild(n)}}},584255:function(e,t,s){"use strict";var n=s(215944),r=s(549417),i=s(594036);t.Z=function(e){switch(e){case"ad-accounts":return{dataCurrentPageSelector:n.kt,dataTotalCountSelector:n.fp,dataPageSizeSelector:n.LG,dataSearchTermSelector:n.tB};case"asset-groups":return{dataCurrentPageSelector:n.W1,dataTotalCountSelector:n.H$,dataPageSizeSelector:n.cF,dataSearchTermSelector:n.uZ};case"profiles":return{dataCurrentPageSelector:n._8,dataTotalCountSelector:n.Wk,dataPageSizeSelector:n.wd,dataSearchTermSelector:n.IT};case"employees":return{dataCurrentPageSelector:n.xv,dataTotalCountSelector:n.Ys,dataPageSizeSelector:n.py,dataSearchTermSelector:n.Rs};case"partners":return{dataCurrentPageSelector:n.Ym,dataTotalCountSelector:n.nn,dataPageSizeSelector:n.TL,dataSearchTermSelector:n.T_};case"business-hierarchy-business-members":return{dataCurrentPageSelector:n.fz,dataTotalCountSelector:n.B_,dataPageSizeSelector:n.kE,dataSearchTermSelector:n.Xv};case"ad-accounts-detail":case"profiles-detail":return{dataCurrentPageSelector:i.Q$,dataTotalCountSelector:i.pr,dataPageSizeSelector:i.G1,dataSearchTermSelector:i.$p};case"catalogs":return{dataCurrentPageSelector:n.bn,dataTotalCountSelector:n.tv,dataPageSizeSelector:n.Gq,dataSearchTermSelector:n.A3};case"app-system-users":return{dataCurrentPageSelector:r.EG,dataTotalCountSelector:r.$$,dataPageSizeSelector:r.z1,dataSearchTermSelector:r.vu};default:return{dataCurrentPageSelector:function(){return 0},dataTotalCountSelector:function(){return 0},dataPageSizeSelector:function(){return 0},dataSearchTermSelector:function(){return""}}}}},372844:function(e,t,s){"use strict";s.d(t,{$2:function(){return P},FW:function(){return x},H6:function(){return I},R6:function(){return C},Vs:function(){return O},Z2:function(){return v},ew:function(){return z},if:function(){return j},lX:function(){return E},mz:function(){return A},uX:function(){return S},xu:function(){return y}});var n=s(581722),r=s(20256),i=s(86295),o=s(233519),a=s(224625),l=s(19585),c=s(302148),u=s(979658),d=s(403713),_=s(383873),m=s(464876),p=s(382718);function h(e){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function b(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),s.push.apply(s,n)}return s}function f(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?b(Object(s),!0).forEach(function(t){var n,r;n=t,r=s[t],(n=function(e){var t=function(e,t){if("object"!=h(e)||!e)return e;var s=e[Symbol.toPrimitive];if(void 0!==s){var n=s.call(e,t||"default");if("object"!=h(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==h(t)?t:t+""}(n))in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):b(Object(s)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))})}return e}var y="calc(100vh - 561px)",A=function(){var e=(0,l.ZP)();return(0,p.jsx)(r.xv,{color:"subtle",inline:!0,size:"200",children:(0,p.jsx)(r.rU,{accessibilityLabel:"visit https://help.pinterest.com/business/article/profile-permissions-in-business-access",display:"inlineBlock",href:"https://help.pinterest.com/business/article/profile-permissions-in-business-access",target:"blank",underline:"always",children:e._('Learn more', '[m10n]businessAccess.businessHierarchy.profile.learnMore', 'Text with link to a page to get more information about profile permissions')})})},v=function(){var e=(0,l.ZP)();return(0,p.jsx)(r.xv,{color:"subtle",inline:!0,size:"200",children:(0,p.jsx)(r.rU,{accessibilityLabel:"visit https://help.pinterest.com/business/article/share-and-manage-access-to-your-ad-accounts",display:"inlineBlock",href:"https://help.pinterest.com/business/article/share-and-manage-access-to-your-ad-accounts",target:"blank",underline:"always",children:e._('Learn more', '[m10n]businessAccess.businessHierarchy.adAccount.learnMore', 'Text with link to a page to get more information about ad account permissions')})})},g=function(){var e=(0,l.ZP)();return(0,p.jsx)(r.xv,{color:"subtle",inline:!0,size:"200",children:(0,p.jsx)(r.rU,{accessibilityLabel:"visit https://help.pinterest.com/business/article/share-and-manage-access-to-your-ad-accounts",display:"inlineBlock",href:"https://help.pinterest.com/business/article/share-and-manage-access-to-your-ad-accounts",target:"blank",underline:"always",children:e._('Learn more', '[m10n]businessAccess.businessHierarchy.adAccount.learnMore', 'Text with link to a page to get more information about ad account permissions')})})},S=function(){var e=(0,l.ZP)(),t=(0,p.jsxs)(r.kC,{alignItems:"center",direction:"column",justifyContent:"center",minHeight:y,children:[(0,p.jsx)(r.xv,{size:"300",children:e._('No assigned employees', '[m10n]businessAccess.businessHierarchy.partnerProfile.empty.title', 'Title shown on panel to indicate that the profile has no assigned employees')}),(0,p.jsx)(r.xu,{marginTop:2,maxWidth:480,children:(0,p.jsx)(r.kC,{alignItems:"center",direction:"column",justifyContent:"center",children:(0,p.jsx)(r.xv,{align:"center",color:"subtle",inline:!0,size:"200",children:(0,c.nk)(e._('Assign the Publisher permission to employees for them to work on your partner\'s profile, boards and Pins. {{learnMore}}', '[m10n]businessAccess.businessHierarchy.partnerProfile.empty.message', 'Message shown on panel to indicate that the profile has no assigned employees. learnMore: text with link to profile permissions help page'),{learnMore:(0,p.jsx)(A,{},1)})},0)})})]},"partner-profile-empty-state");return(0,p.jsx)(d.Z,{items:[t]})},P=function(){var e=(0,l.ZP)(),t=(0,p.jsxs)(r.kC,{alignItems:"center",direction:"column",justifyContent:"center",minHeight:y,children:[(0,p.jsx)(r.xv,{size:"300",children:e._('Your ad accounts will appear here', '[m10n]businessAccess.businessHierarchy.sharedPartnerAdAccount.empty.title', 'Title shown on panel to indicate that the shared partner has no ad accounts')}),(0,p.jsx)(r.xu,{marginTop:2,maxWidth:480,children:(0,p.jsx)(r.kC,{alignItems:"center",direction:"column",justifyContent:"center",children:(0,p.jsx)(r.xv,{align:"center",color:"subtle",inline:!0,size:"200",children:(0,c.nk)(e._('Request access to your partner\'s ad accounts and assign employees to work on them. {{learnMore}}', '[m10n]businessAccess.businessHierarchy.sharedPartnerAdAccount.empty.message', 'Message shown on panel to indicate that the business has no permission to the ad accounts of the shared partner. learnMore: text with link to ad account permissions help page'),{learnMore:(0,p.jsx)(v,{},1)})},0)})})]},"shared-partner-ad-account-empty-state");return(0,p.jsx)(d.Z,{items:[t]})},x=function(){var e=(0,l.ZP)(),t=(0,p.jsxs)(r.kC,{alignItems:"center",direction:"column",justifyContent:"center",minHeight:y,children:[(0,p.jsx)(r.xv,{size:"300",children:e._('Your ad accounts will appear here', '[m10n]businessAccess.businessHierarchy.partnerAdAccount.empty.title', 'Title shown on panel to indicate that the partner has no ad accounts')}),(0,p.jsx)(r.xu,{marginTop:2,maxWidth:480,children:(0,p.jsx)(r.kC,{alignItems:"center",direction:"column",justifyContent:"center",children:(0,p.jsx)(r.xv,{align:"center",color:"subtle",inline:!0,size:"200",children:(0,c.nk)(e._('Assign ad account access if you would like for your partner to work on them. {{learnMore}}', '[m10n]businessAccess.businessHierarchy.partnerAdAccount.empty.message', 'Message shown on panel to indicate that the partner has no permission to the ad accounts of your business. learnMore: text with link to ad account permissions help page'),{learnMore:(0,p.jsx)(v,{},1)})},0)})})]},"partner-ad-account-empty-state");return(0,p.jsx)(d.Z,{items:[t]})},C=function(){var e=(0,l.ZP)(),t=(0,p.jsx)(r.kC,{alignItems:"center",direction:"column",justifyContent:"center",minHeight:y,children:(0,p.jsx)(r.xv,{size:"300",children:e._('No assigned audiences', '[m10n]businessAccess.partnerAudience.empty.title', 'Title shown on panel to indicate that the partner has no audiences assigned')})},"partner-audience-empty-state");return(0,p.jsx)(d.Z,{items:[t]})},j=function(){var e=(0,l.ZP)(),t=(0,p.jsx)(r.kC,{alignItems:"center",direction:"column",justifyContent:"center",minHeight:y,children:(0,p.jsx)(r.xv,{size:"300",children:e._('No assigned ad accounts', '[m10n]businessAccess.businessHierarchy.employeeAdAccount.empty.title', 'Title shown on panel to indicate that the employee has no ad accounts assgined')})},"employee-ad-account-empty-state");return(0,p.jsx)(d.Z,{items:[t]})},I=function(){var e=(0,l.ZP)(),t=(0,p.jsx)(r.kC,{alignItems:"center",direction:"column",justifyContent:"center",minHeight:y,children:(0,p.jsx)(r.xv,{size:"300",children:e._('No assigned profiles', '[m10n]businessAccess.businessHierarchy.employeeProfile.empty.title', 'Title shown on panel to indicate that the employee has no profiles assgined')})},"employee-profile-empty-state");return(0,p.jsx)(d.Z,{items:[t]})},E=function(e){var t=e.isBrandBusiness,s=e.isPartnerRmn,h=e.isAgencyPartner,b=void 0!==h&&h,A=e.selectedPartner,v=void 0===A?void 0:A,S=(0,l.ZP)(),P=(0,n.I0)(),x=(0,u.y)().openSheet,C=(0,m.HU)().setAssignAdAccountsModal,j=(0,m.KJ)(),I=(0,m.nU)(),E=(0,o.ZP)((0,o.QK)(i.Q6.PARTNERS_DETAIL)),O=(0,p.jsxs)(r.kC,{alignItems:"center",direction:"column",height:"100%",justifyContent:"center",minHeight:y,width:"100%",children:[(0,p.jsx)(r.xu,{"aria-hidden":!0,height:200,width:200,children:(0,p.jsx)(r.Ee,{alt:"sad plant",naturalHeight:1,naturalWidth:1,src:a})}),(0,p.jsx)(r.xu,{marginBottom:2,marginTop:2,children:(0,p.jsx)(r.xv,{align:"center",size:"300",children:(0,c.nk)(S._('{{partnerName}} has not shared catalogs', '[m10n]businessAccess.emptyState.partnerCatalog.noCatalogsAssigned.title', 'Title shown on panel to indicate that the partner has not assigned catalogs. partnerName: name of the partner'),{partnerName:v?v.user.full_name:S._('This partner', '[m10n]businessAccess.emptyState.partnerCatalog.empty.title.partnerNameFallback', 'fallback text in case partner name is not available')})})}),(0,p.jsx)(r.xu,{width:500,children:(0,p.jsx)(r.xv,{align:"center",color:"subtle",size:"200",children:S._('Once your partner shares a catalog, it will appear here', '[m10n]businessAccess.emptyState.partnerCatalog.noCatalogsAssigned.subtitle', 'Subtitle shown on panel to indicate that the partner has not assigned catalogs')})})]},"rmn-catalog-empty-state"),z=(0,p.jsxs)(r.kC,{alignItems:"center",direction:"column",justifyContent:"center",minHeight:y,children:[(0,p.jsx)(r.xu,{maxWidth:b?500:400,children:(0,p.jsx)(r.xv,{align:"center",children:b?(0,c.nk)(S._('Assign {{partnerName}} access to catalogs', '[m10n]businessAccess.emptyState.partnerCatalog.empty.title.partnerName', 'Title shown on panel to indicate that the partner has no assigned catalogs partnerName: name of the partner'),{partnerName:v?v.user.full_name:S._('this partner', '[m10n]businessAccess.emptyState.partnerCatalog.empty.title.partnerNameFallback', 'fallback text in case partner name is not available')}):S._('Assign access to this catalog by adding partners or employees', '[m10n]businessAccess.emptyState.partnerCatalog.empty.title', 'Title shown on panel to indicate that the partner has no assigned catalogs')})}),(0,p.jsx)(r.xu,{marginTop:2,maxWidth:b?500:400,children:(0,p.jsx)(r.kC,{alignItems:"center",direction:"column",justifyContent:"center",children:(0,p.jsx)(r.xv,{align:"center",color:"subtle",inline:!0,size:"200",children:b?(0,c.nk)(S._('{{partnerName}} may be assigned catalog admin or catalog ad creator permission', '[m10n]businessAccess.emptyState.agencyPartner.empty.message', 'Message shown on panel to indicate which permissions their partner can share. partnerName: name of the partner'),{partnerName:v?v.user.full_name:S._('This partner', '[m10n]businessAccess.emptyState.partnerCatalog.empty.message.partnerNameFallback', 'fallback text in case partner name is not available')}):(0,c.nk)(S._('You can assign members to viewer or admin permissions. {{learnMore}}', '[m10n]businessAccess.emptyState.partnerCatalog.empty.message', 'Message shown on panel to indicate that partner has no assigned catalogs, learnMore: text with link learn more'),{learnMore:(0,p.jsx)(g,{},1)})},0)})}),b&&(0,p.jsx)(r.xu,{marginTop:2,maxWidth:b?500:400,children:(0,p.jsx)(r.kC,{alignItems:"center",direction:"column",justifyContent:"center",children:(0,p.jsx)(r.zx,{color:"red",onClick:function(){v?x("ASSIGN_ACCESS_FOR_CATALOG",{currentPartner:v,refreshData:function(){return P((0,_.Kb)(f(f({businessId:j,detailId:I},i.vk),{},{partnerType:"INTERNAL"})))},type:"ASSIGN_CATALOGS_ACCESS_FOR_AGENCY_PARTNER"}):C({selectedIds:[I],selectionType:i.c7.CATALOG,dataToRefresh:"PARTNER",assignmentType:"PARTNER"}),E({eventName:"BUSINESS_ACCESS_ACTION",component:"BUSINESS_ACCESS_CONTAINER",componentId:"catalogs-partner-page-empty",element:"BUSINESS_ACCESS_BUTTON",elementId:"empty-catalog-share-access"})},text:S._('Share access', '[m10n]businessAccess.catalog.emptyState.button.text', 'text of button to share first catalog')})})})]},"member-catalog-empty-state");return(0,p.jsx)(d.Z,{items:t&&s?[O]:[z]})},O=function(){var e=(0,l.ZP)(),t=(0,o.ZP)((0,o.QK)(i.Q6.CATALOGS)),s=(0,p.jsxs)(r.kC,{alignItems:"center",direction:"column",gap:6,justifyContent:"center",minHeight:y,children:[(0,p.jsx)(r.xu,{maxWidth:400,children:(0,p.jsx)(r.xv,{align:"center",children:e._('Upload, organize and promote your products at scale', '[m10n]businessAccess.emptyState.partnerCatalogNoCatalogs.empty.title', 'Title shown on panel to indicate that the partner has no assigned catalogs')})}),(0,p.jsx)(r.xu,{maxWidth:400,children:(0,p.jsx)(r.kC,{alignItems:"center",direction:"column",justifyContent:"center",children:(0,p.jsx)(r.xv,{align:"center",color:"subtle",inline:!0,size:"200",children:(0,c.nk)(e._('Create a catalog to share access with your employees and partners, or request access to a partner\u2019s catalog. {{learnMore}}', '[m10n]businessAccess.emptyState.partnerCatalogNoCatalogs.empty.message', 'Message shown on panel to indicate that partner has no assigned catalogs, learnMore: text with link learn more'),{learnMore:(0,p.jsx)(g,{},1)})},0)})}),(0,p.jsx)(r.zx,{color:"gray",iconEnd:"arrow-up-right",onClick:function(){t({eventName:"BUSINESS_ACCESS_ACTION",component:"BUSINESS_ACCESS_CONTAINER",componentId:"catalogs-partner-page-empty",element:"BUSINESS_ACCESS_BUTTON",elementId:"catalogs-page-empty-create-catalog"})},text:e._('Create catalog', '[m10n]bizAccess.createCatalog.button.text', 'text of button to redirect to catalogs page')})]},"member-catalog-empty-state");return(0,p.jsx)(d.Z,{items:[s]})},z=function(e){var t=e.isRmnBusiness,s=e.isPartnerBrand,n=e.partner,a=e.refreshData,_=(0,l.ZP)(),m=(0,u.y)().openSheet,h=(0,o.ZP)((0,o.QK)(i.Q6.SHARED_PARTNERS_DETAIL)),b=(0,p.jsxs)(r.kC,{alignItems:"center",direction:"column",justifyContent:"center",minHeight:y,children:[!(t&&s)&&(0,p.jsx)(r.xu,{maxWidth:500,children:(0,p.jsx)(r.xv,{align:"center",children:_._('Request access from partners to add catalogs', '[m10n]businessAccess.emptyState.sharedPartnerCatalog.empty.title', 'Title shown on panel to indicate that partner has not yet shared any catalogs')})}),(0,p.jsx)(r.xu,{marginTop:2,maxWidth:500,children:(0,p.jsx)(r.kC,{alignItems:"center",direction:"column",justifyContent:"center",children:(0,p.jsx)(r.xv,{align:"center",color:"subtle",inline:!0,size:"200",children:t&&s?_._('You can assign members Catalog admin or Catalog ad creator permission', '[m10n]businessAccess.emptyState.sharedRmnPartnerCatalog.empty.message', 'Message shown on panel to indicate which permissions their Rmn partner can share.'):(0,c.nk)(_._('The catalog owner can assign you viewer or admin permissions. {{learnMore}}', '[m10n]businessAccess.emptyState.sharedPartnerCatalog.empty.message', 'Message shown on panel to indicate which permissions their partner can share, learnMore: text with link learn more'),{learnMore:(0,p.jsx)(g,{},1)})},0)})}),t&&s&&(0,p.jsx)(r.xu,{marginTop:2,maxWidth:500,children:(0,p.jsx)(r.kC,{alignItems:"center",direction:"column",justifyContent:"center",children:(0,p.jsx)(r.zx,{color:"red",onClick:function(){m("ASSIGN_CATALOGS_ACCESS_FOR_PARTNER",{currentPartner:n,refreshData:a}),h({eventName:"BUSINESS_ACCESS_ACTION",component:"BUSINESS_ACCESS_CONTAINER",componentId:"catalogs-partner-page-empty",element:"BUSINESS_ACCESS_BUTTON",elementId:"empty-catalog-share-access"})},text:_._('Share access', '[m10n]businessAccess.catalog.emptyState.button.text', 'text of button to share first catalog')})})})]},"member-catalog-empty-state");return(0,p.jsx)(d.Z,{items:[b]})}},537721:function(e,t,s){"use strict";var n=s(650533),r=s(963489),i=s(20256),o=s(86295),a=s(233519),l=s(19585),c=s(302148),u=s(506662),d=s(372844),_=s(403713),m=s(464876),p=s(382718);t.Z=function(e){var t=e.partner,s=e.businessId,h=e.partnerRole,b=(0,n.$B)().params.businessHierarchyId,f=(0,l.ZP)(),y=(0,a.ZP)("BUSINESS_ACCESS_BUSINESS_HIERARCHY"),A=(0,r.TH)(),v=(0,m.HU)(),g=v.setAssignProfilesModal,S=v.setRemoveProfilePermissionsModal,P=!1;h&&(P=!0);var x=f._('Revoke access', '[m10n]bizAccess.profile.permissions.revoke.access', 'Button label for action to remove profile permissions for the partner'),C=(0,p.jsx)(i.xv,{inline:!0,size:"300",weight:"bold",children:f._('publisher permission', 'businessaccess.partner.profile.revokeAccess.message.publisherPermission', 'Text explaining profile permission assigned')},"publisher-permission"),j=(0,p.jsx)(i.xv,{inline:!0,size:"300",children:(0,c.nk)(f._('You have granted this partner {{publisherPermission}} to your profile. Publisher permission allows your partner to create, edit and organize your Pins and boards.', '[m10n]businessaccess.partner.profile.revokeAccess.message', 'Text explaining profile permission assigned. publisherPermission: bolded text for publisher permission'),{publisherPermission:C})},"publisher-permission-assigned"),I=(0,p.jsxs)(i.xu,{alignItems:"center",direction:"column",display:"flex",justifyContent:"center",margin:12,minHeight:d.xu,children:[(0,p.jsx)(i.xv,{size:"300",children:f._('You have not assigned profile access', '[m10n]businessAccess.businessManager.partnerProfile.noAssignedProfileAccess.title', 'Title shown to indicate no profile access has been assigned')}),(0,p.jsx)(i.xu,{marginTop:2,maxWidth:400,children:(0,p.jsx)(i.kC,{alignItems:"center",direction:"column",justifyContent:"center",children:(0,p.jsx)(i.xv,{align:"center",color:"subtle",inline:!0,size:"200",children:(0,c.nk)(f._('Assign the Publisher permission so that your partner can work on your profile, boards and Pins without sharing login credentials. {{learnMore}}', '[m10n]businessAccess.businessManager.partnerProfile.noAssignedProfileAccess.message', 'Message shown to inform user what profile access is. learnMore: text with link to profile permissions help page'),{learnMore:(0,p.jsx)(d.mz,{},1)})},0)})}),(0,p.jsx)(i.xu,{id:"assign-profile-access-button",marginTop:2,padding:3,children:(0,p.jsx)(i.zx,{color:"red",onClick:function(){g({selectedIds:[s],selectionType:o.Hl.PROFILE,dataToRefresh:"PARTNER_PROFILE",assignmentType:"PARTNER"})},size:"md",text:f._('Assign profile access', '[m10n]bizAccess.profiles.assign', 'Button label for action to assign access to profile')})})]},"partner-profile-no-assigned-access");return P?(0,p.jsx)(i.he,{message:j,primaryAction:{accessibilityLabel:f._('Revoke access button text', '[m10n]bizAccess.profile.permissions.revoke.access.accessibility', 'Revoke access button text'),label:x,onClick:function(){(0,u.dK)(A)&&y({eventName:"BUSINESS_ACCESS_ACTION",component:"BUSINESS_ACCESS_CONTAINER",componentId:"partner-profile-permissions",element:"BUSINESS_ACCESS_BUTTON",elementId:"remove-button",profile_id:s}),S({userData:t.user,selectionType:o.Hl.PARTNER,profileId:s,dataToRefresh:b?"HIERARCHY_PARTNER_PROFILE":"PARTNER_PROFILE"})}},type:"neutral"}):(0,p.jsx)(_.Z,{items:[I]})}},905656:function(e,t,s){"use strict";s.d(t,{Z:function(){return sx}});var n=s(86295),r=s(307815),i=s(20256),o=s(701831),a=s(937392),l=s(19585),c=s(302148),u=s(84672),d=s(750891),_=s(382718);function m(){var e=(0,l.ZP)();return(0,_.jsx)(d.Z,{children:(0,_.jsx)(a.a3,{eligibleIds:[505821],eligibleTypes:[9],placementId:1000519,children:function(t){var s=t.dismiss,n=t.complete;return(0,_.jsx)(u.Z,{bulletPoints:[{content:(0,_.jsx)(i.xv,{color:"default",size:"200",children:e._('View and manage your child businesses in one place', '[m10n].bizAccess.businessHierarchyIntro.bulletPoint.one', 'bullet point in business hierarchy introduction modal explain child businesses')})},{content:(0,_.jsx)(i.xv,{color:"dark",size:"200",children:e._('Get full visibility into employee and partner permissions across all your businesses', '[m10n].bizAccess.businessHierarchyIntro.bulletPoint.two', 'bullet point in business hierarchy introduction to explain visibility into permissions accross all businesses')})},{content:(0,_.jsx)(i.xv,{size:"200",children:e._('Make changes to account access and permissions at scale', '[m10n].bizAccess.businessHierarchyIntro.bulletPoint.three', 'bullet point in business hierarchy intro modal to note making changes at scale')})},{content:(0,_.jsx)(i.xv,{size:"200",children:e._('To create a business hierarchy, go to \u201CEdit Details\u201D on your dashboard', '[m10n].bizAccess.businessHierarchyIntro.bulletPoint.finalSubText', 'text in business hierarchy modal to explain where to go to create a business hierarchy')}),noBulletPoint:!0}],dismiss:s,heading:e._('Organize your business,  employees and partners', '[m10n].bizAccess.businessHierarchyIntro.heading', 'heading for business hierarchy feature intro modal'),image:{image:(0,_.jsx)(i.Ee,{alt:e._('image to introduce business hierarchy in business manager', '[m10n].bizAccess.businessHierarchyIntro.image', 'alt text for image to introduce business hierarchy in business manager'),fit:"cover",naturalHeight:480,naturalWidth:320,src:"https://s.pinimg.com/webapp/business_hierarchy_intro-4b4d4cf4.png"})},modalAccessibilityLabel:e._('modal to introduce business hierarchy feature in Business Manager', '[m10n].bizAccess.businessHierarchyIntro.a11y', 'accessibility label for business hierarchy feature intro modal'),primaryButton:{text:(0,o.Eb)(e),onClick:function(){return n()}},subtext:(0,_.jsx)(i.xv,{size:"200",children:(0,c.nk)(e._('{{businessHierarchyText}} creates parent-child account relationships to help manage complex organizational structures.', '[m10n].bizAccess.businessHierarchyIntro.bulletPoint.subtext', 'subtext for businessHierarchy intro modal summarizing how to use business hierarchy, businessHierarchyText: the words business hierarchy'),{businessHierarchyText:(0,_.jsx)(i.xv,{inline:!0,size:"200",weight:"bold",children:e._('Business hierarchy', '[m10n].bizAccess.businessHierarchyIntro.bulletPoint.subtext.businessHierarchy', 'bolded text for business hierarchy in subtext')},"businessHierarchy")})})})}})})}var p=s(586659),h=s(581722),b=s(650533),f=s(963489),y=s(656405),A=s(77168),v=s(789877),g=s(233519),S=s(686319),P=s(475498),x=s(821342),C=s(675973),j=s(15667),I=s(87853),E=s(567902),O=s(507533),z=s(621868),w=function(e){var t=e.createInviteButtonText,s=e.createInviteButtonAction,n=e.tabItems,r=e.selectedItemIndex,o=e.onChangeTab,a=e.exportButtonAction,c=(0,l.ZP)();return(0,_.jsxs)(p.Fragment,{children:[(0,_.jsx)(i.sY,{items:n,onChange:o,selectedItemIndex:r}),(0,_.jsx)(i.xu,{marginBottom:2}),(0,_.jsxs)(i.kC,{children:[(0,_.jsx)(i.xu,{"data-test-id":"business-hierarchy-invite-controls-button",flex:"grow",marginEnd:1,children:(0,_.jsx)(i.xu,{"data-test-id":"business-hierarchy-invite-controls-button",children:(0,_.jsx)(i.zx,{fullWidth:!0,onClick:function(){s()},text:t})})}),(0,_.jsx)(i.hU,{accessibilityLabel:c._('Export', '[m10n]bizAccess.sidePanel.button.export.accessibilityLabel', 'Accessibility text for the export button on the business hierarchy side panel'),bgColor:"lightGray",icon:"download",onClick:a,size:"md",tooltip:{text:c._('Export .csv file of all employees and partners', '[m10n]bizAccess.sidePanel.button.export.tooltip', 'Explanation of what the export button will do when clicked, when hovered over in a tooltip.')}})]})]})},T=s(507190),N=s(673630),B=s(744862),R=s(473728),D=s(240400),k=s(793698),H=function(e){var t=e.inviteStatus,s=e.inviteId,r=e.user,o=(0,l.ZP)(),a=(0,h.I0)(),u=(0,I.dI)().showToast,d=(0,b.$B)().params.businessHierarchyId||"",m=function(){a((0,D.As)({inviteId:s,businessEntityId:d,inviteType:"BUSINESS_HIERARCHY_CHILD",action:"CANCEL",onSuccess:function(){u(function(e){var t=e.hideToast;return(0,_.jsx)(P.Z,{duration:n.QE,onHide:t,text:o._('Invitation canceled', '[m10n]bizAccess.businessHierarchy.childBusiness.invite.panel.cancel.success', 'Toast message for successfully canceling an invite')})}),a((0,D.mH)({hierarchyId:d,type:"CHILD_BUSINESS"}))},onFailure:function(e){var t=o._('There was an error in canceling the invite. Please try again.', '[m10n]bizAccess.businessHierarchy.childBusiness.invite.panel.cancel.error', 'Error message if canceling an invite fails');u(function(s){var r=s.hideToast;return(0,_.jsx)(P.Z,{duration:n.QE,onHide:r,text:e.message_detail||t,type:"error"})})}}))},p=function(){a((0,D.As)({inviteId:s,businessEntityId:d,inviteType:"BUSINESS_HIERARCHY_CHILD",action:"RESEND",onSuccess:function(){u(function(e){var t=e.hideToast;return(0,_.jsx)(P.Z,{duration:n.QE,onHide:t,text:o._('Invitation re-sent', '[m10n]bizAccess.businessHierarchy.childBusiness.invite.panel.resend.success', 'Toast message for successfully re-sending an invite')})}),a((0,D.mH)({hierarchyId:d,type:"CHILD_BUSINESS"}))},onFailure:function(e){var t=o._('There was an error in re-sending the invite. Please try again.', '[m10n]bizAccess.businessHierarchy.childBusiness.invite.panel.resend.error', 'Error message if re-sending an invite fails');u(function(s){var r=s.hideToast;return(0,_.jsx)(P.Z,{duration:n.QE,onHide:r,text:e.message_detail||t,type:"error"})})}}))};switch(t){case"PENDING":return(0,_.jsx)(i.ci,{iconAccessibilityLabel:o._('Info', '[m10n]bizAccess.childBusinesses.invitePanel.inviteBanner.pending.icon', 'A11y description of info icon in invite banner for pending invite'),message:(0,_.jsx)(i.xv,{inline:!0,children:(0,c.nk)(o._('You have invited {{businessName}} to your business hierarchy. Once they accept, you will be able to manage their business account.', '[m10n]bizAccess.childBusinesses.invitePanel.inviteBanner.pending.description', 'Description for the pending business hierarchy callout  businessName: the name of the business user being invited'),{businessName:(0,_.jsx)(i.xv,{inline:!0,weight:"bold",children:r.full_name},"bannerPendingInviteBusinessName")})},"bannerPendingInviteDescription"),primaryAction:{accessibilityLabel:o._('Resend invite button', '[m10n]bizAccess.childBusinesses.invitePanel.inviteBanner.resend.accessibilityLabel', 'Accessibility label for the resend invite button'),label:o._('Resend invite', '[m10n]bizAccess.childBusinesses.invitePanel.inviteBanner.resend.buttonText', 'Button text to resend a business hierarchy invite'),onClick:function(){p()}},secondaryAction:{accessibilityLabel:o._('Cancel invite button', '[m10n]bizAccess.childBusinesses.invitePanel.inviteBanner.cancel.accessibilityLabel', 'Accessibility label for the cancel invite button'),label:o._('Cancel invite', '[m10n]bizAccess.childBusinesses.invitePanel.inviteBanner.cancel.buttonText', 'Button text to cancel a business hierarchy invite'),onClick:function(){m()}},title:o._('You\'ve sent an invite', '[m10n]bizAccess.childBusinesses.invitePanel.inviteBanner.pending.title', 'Title text for the pending business hierarchy invite banner'),type:"info"});case"EXPIRED":return(0,_.jsx)(i.ci,{iconAccessibilityLabel:o._('Warning', '[m10n]bizAccess.childBusinesses.invitePanel.inviteBanner.expired.icon', 'A11y description of warning icon in invite banner for expired invite'),message:(0,_.jsx)(i.xv,{inline:!0,children:(0,c.nk)(o._('{{businessName}} has not responded to your invite. You may resend or delete this invite.', '[m10n]bizAccess.childBusinesses.invitePanel.inviteBanner.expired.description', 'Description for the expired business hierarchy callout  businessName: the name of the business user being invited'),{businessName:(0,_.jsx)(i.xv,{inline:!0,weight:"bold",children:r.full_name},"bannerExpiredInviteBusinessName")})},"bannerExpiredInviteDescription"),primaryAction:{accessibilityLabel:o._('Resend invite button', '[m10n]bizAccess.childBusinesses.invitePanel.inviteBanner.resend.accessibilityLabel', 'Accessibility label for the resend invite button'),label:o._('Resend invite', '[m10n]bizAccess.childBusinesses.invitePanel.inviteBanner.resend.buttonText', 'Button text to resend a business hierarchy invite'),onClick:function(){p()}},secondaryAction:{accessibilityLabel:o._('Delete invite button', '[m10n]bizAccess.childBusinesses.invitePanel.inviteBanner.delete.accessibilityLabel', 'Accessibility label for the delete invite button'),label:o._('Delete invite', '[m10n]bizAccess.childBusinesses.invitePanel.inviteBanner.delete.buttonText', 'Button text to delete a business hierarchy invite'),onClick:function(){m()}},title:o._('Your invite has expired', '[m10n]bizAccess.childBusinesses.invitePanel.inviteBanner.expired.title', 'Title text for the expired business hierarchy invite banner'),type:"warning"});default:return null}},L=function(e){var t,s=e.invite,n=(0,l.ZP)(),r=s.user,o=s.invite_data,a=void 0===o?{}:o,c=s.id,u=a.last_updated_time,d=a.invite_status,m=(0,k.mN)()(null!=(t=r.id)?t:""),h=null==m?void 0:m.avatar_color_index,b=u?(0,T.Z)(Date.now(),(0,N.Z)(u/1e3)):null;return(0,_.jsxs)(p.Fragment,{children:[d&&r&&(0,_.jsx)(H,{inviteId:c,inviteStatus:d,user:r}),(0,_.jsx)(i.xu,{margin:3}),(0,_.jsx)(i.xu,{borderStyle:"sm",dangerouslySetInlineStyle:{__style:{borderColor:"#e9e9e9"}},flex:"grow",height:"100%",padding:4,rounding:4,children:(0,_.jsx)(i.kC,{alignItems:"center",flex:"grow",height:"100%",justifyContent:"center",children:(0,_.jsxs)(i.kC,{alignItems:"center",direction:"column",flex:"grow",height:"100%",justifyContent:"center",children:[(0,_.jsx)(B.qE,{color:h,name:(null==r?void 0:r.full_name)||"",size:"md",src:(null==r?void 0:r.image_medium_url)||""}),(0,_.jsx)(i.xu,{marginBottom:6}),(0,_.jsx)(i.X6,{size:"400",children:null==r?void 0:r.full_name}),(0,_.jsx)(i.xv,{size:"200",children:"".concat(n._('Business ID:', '[m10n]bizAccess.childBusinesses.invitePanel.userInfo.businessId.label', 'Label for the business ID in the invite panel user detail section')," ").concat((null==r?void 0:r.id)||"")}),(0,_.jsx)(i.xu,{marginBottom:2}),null!=b&&(0,_.jsx)(i.xv,{color:"subtle",size:"100",children:(0,R.Z)(n.ngettext('Sent {{daysSinceCreated}} day ago', 'Sent {{daysSinceCreated}} days ago', b, '[m10n]bizAccess.childBusinesses.invitePanel.inviteInfo.daysAgo', 'Label for the number of days that have elapsed since the invitation was created. daysSinceCreated: the number of days since the invite was created'),{daysSinceCreated:b.toString()})})]})})})]})},U=s(361981),Z=s(464876),M=function(e){var t=e.title,s=e.description,n=e.buttonText,r=(0,Z.HU)().setAddChildBusinessesModal;return(0,_.jsx)(i.xu,{borderStyle:"sm",dangerouslySetInlineStyle:{__style:{borderColor:"#e9e9e9"}},flex:"grow",height:"100%",padding:4,rounding:4,children:(0,_.jsx)(i.kC,{alignItems:"center",flex:"grow",height:"100%",justifyContent:"center",children:(0,_.jsxs)(i.kC,{alignItems:"center",direction:"column",height:"100%",justifyContent:"center",children:[(0,_.jsx)(i.xu,{"aria-hidden":!0,color:"default","data-test-id":"sadCoffee",height:160,width:160,children:(0,_.jsx)(i.Ee,{alt:"",naturalHeight:1,naturalWidth:1,src:U})}),(0,_.jsx)(i.xu,{marginBottom:6}),(0,_.jsx)(i.xv,{align:"center",size:"300",children:t}),(0,_.jsx)(i.xu,{marginBottom:6}),(0,_.jsx)(i.xv,{align:"center",color:"subtle",size:"200",children:s}),(0,_.jsx)(i.xu,{margin:4}),(0,_.jsx)(i.zx,{color:"red",onClick:function(){r()},text:n})]})})})},F=s(935106),Y=s(568217),G=s(761256),W=s(383873),Q=s(215944);function q(e){return(q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function K(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),s.push.apply(s,n)}return s}function V(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?K(Object(s),!0).forEach(function(t){var n,r;n=t,r=s[t],(n=function(e){var t=function(e,t){if("object"!=q(e)||!e)return e;var s=e[Symbol.toPrimitive];if(void 0!==s){var n=s.call(e,t||"default");if("object"!=q(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==q(t)?t:t+""}(n))in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):K(Object(s)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))})}return e}var J=function(e,t){var s=(0,C.Z)(),n=(0,h.I0)(),r=(0,Z.Dl)(),i=(0,h.v9)((0,Q.BK)(r));return!e||!t||(0,G.Z)(i)?null:function(r){var o=r||{},a=o.searchTerm,l=o.limit,c=o.page,u=o.sortBy,d=o.sortDirection,_=V(V(V({searchBy:a&&/\d{12}/.test(a)?"id":void 0,searchTerm:a,businessId:e,detailId:t,sortBy:u,sortDirection:d},l?{limit:l}:{}),c?{page:c}:{}),{},{experimentsClient:s});i.is_shared_partner?n((0,W.CM)(_)):n((0,W.ek)(_))}};function $(e){return($="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function X(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),s.push.apply(s,n)}return s}function ee(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?X(Object(s),!0).forEach(function(t){var n,r;n=t,r=s[t],(n=function(e){var t=function(e,t){if("object"!=$(e)||!e)return e;var s=e[Symbol.toPrimitive];if(void 0!==s){var n=s.call(e,t||"default");if("object"!=$(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==$(t)?t:t+""}(n))in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):X(Object(s)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))})}return e}var et=function(e,t){var s=(0,h.I0)();return e&&t?function(n){var r=n||{},i=r.searchTerm,o=r.limit,a=r.page,l=ee(ee({searchBy:i?"FULL_NAME":void 0,searchTerm:i,businessId:e,detailId:t,sortBy:r.sortBy,sortDirection:r.sortDirection},o?{limit:o}:{}),a?{page:a}:{});s((0,D.N_)(l))}:null};function es(e){return(es="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function en(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),s.push.apply(s,n)}return s}function er(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?en(Object(s),!0).forEach(function(t){var n,r;n=t,r=s[t],(n=function(e){var t=function(e,t){if("object"!=es(e)||!e)return e;var s=e[Symbol.toPrimitive];if(void 0!==s){var n=s.call(e,t||"default");if("object"!=es(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==es(t)?t:t+""}(n))in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):en(Object(s)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))})}return e}var ei=function(e,t){var s=(0,h.I0)();return e&&t?function(n){var r=n||{},i=r.searchTerm,o=r.limit,a=r.page,l=er(er({searchBy:i?"FULL_NAME":void 0,searchTerm:i,businessId:e,detailId:t,sortBy:r.sortBy,sortDirection:r.sortDirection},o?{limit:o}:{}),a?{page:a}:{});s((0,D.mS)(l))}:null},eo=s(584255),ea=s(40319),el=s(66475),ec=s(166379),eu=s(814369),ed=s(707152),e_=s(980787),em=s(506662),ep=function(e){var t=e.text;return(0,_.jsx)(i.xu,{minWidth:170,children:(0,_.jsx)(i.xv,{size:"300",weight:"bold",children:t})})},eh=function(e){var t=e.text;return(0,_.jsx)(i.xu,{minWidth:170,children:(0,_.jsx)(i.xv,{color:"subtle",size:"300",weight:"bold",children:t})})},eb=function(e){var t=e.text;return(0,_.jsx)(i.xu,{minWidth:170,children:(0,_.jsx)(i.xv,{color:"subtle",size:"200",children:t})})},ef=function(e){var t=e.title,s=e.reason;return(0,_.jsxs)(i.xu,{children:[(0,_.jsx)(eh,{text:t}),(0,_.jsx)(eb,{text:s})]})},ey=function(e){var t=e.moreIconButtonAccessibilityLabel,s=e.accessibilityControls,n=e.onDismissDropdown,r=e.moreIconButtonOnClick,o=e.dropdownItems,a=e.opened,l=(0,p.useRef)(null),c=o.map(function(e){return e.link?(0,_.jsx)(i.Lt.Link,{href:e.link.href,iconEnd:e.link.isExternal?"visit":void 0,onClick:function(t){var s,n,r=t.event,i=t.dangerouslyDisableOnNavigation;null!=(s=e.link)&&s.disableOnNavigation&&(r.preventDefault(),i()),null==(n=e.link)||n.onSelectOption({item:e.link.option})},option:e.link.option,children:e.link.content},e.link.key):e.item&&(0,_.jsx)(i.Lt.Item,{onSelect:function(t){var s,n=t.item;null==(s=e.item)||s.onSelectOption({item:n})},option:e.item.option},e.item.key)});return(0,_.jsxs)(p.Fragment,{children:[(0,_.jsx)(i.xu,{padding:1,children:(0,_.jsx)(i.hU,{ref:l,accessibilityControls:s,accessibilityExpanded:a,accessibilityHaspopup:!0,accessibilityLabel:t,bgColor:"lightGray",icon:"ellipsis",iconColor:"darkGray",onClick:r,selected:a,size:"md"})}),a&&(0,_.jsx)(i.Lt,{anchor:l.current,disableMobileUI:!0,id:s,onDismiss:n,children:c})]})},eA=s(435739);function ev(e){return(ev="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function eg(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),s.push.apply(s,n)}return s}function eS(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?eg(Object(s),!0).forEach(function(t){var n,r;n=t,r=s[t],(n=function(e){var t=function(e,t){if("object"!=ev(e)||!e)return e;var s=e[Symbol.toPrimitive];if(void 0!==s){var n=s.call(e,t||"default");if("object"!=ev(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ev(t)?t:t+""}(n))in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):eg(Object(s)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))})}return e}function eP(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var s=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=s){var n,r,i,o,a=[],l=!0,c=!1;try{if(i=(s=s.call(e)).next,0===t){if(Object(s)!==s)return;l=!1}else for(;!(l=(n=i.call(s)).done)&&(a.push(n.value),a.length!==t);l=!0);}catch(e){c=!0,r=e}finally{try{if(!l&&null!=s.return&&(o=s.return(),Object(o)!==o))return}finally{if(c)throw r}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return ex(e,t);var s=({}).toString.call(e).slice(8,-1);return"Object"===s&&e.constructor&&(s=e.constructor.name),"Map"===s||"Set"===s?Array.from(e):"Arguments"===s||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s)?ex(e,t):void 0}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ex(e,t){(null==t||t>e.length)&&(t=e.length);for(var s=0,n=Array(t);s<t;s++)n[s]=e[s];return n}var eC=function(e){var t,s,n=e.component,r=(0,Z.HU)(),i=r.setRemoveSharedAdAccountModal,o=r.businessAccess.businessId,a=(0,Z.Dw)(),c=(0,f.TH)(),u=(0,l.ZP)(),d=null==a||null==(t=a.client_business)?void 0:t.id,m=null==a||null==(s=a.created_by)?void 0:s.id,h=(0,e_.u)().logContextEvent,b=(0,g.ZP)("BUSINESS_ACCESS_BUSINESS_HIERARCHY"),y=(0,eA.IZ)(a),A=eP((0,p.useState)(!1),2),v=A[0],S=A[1],P=o===m||!!d,x=eP((0,p.useState)(),2),C=x[0],j=x[1],I={value:"visitAdAccount",label:u._('Visit ad account', '[m10n]bizAccess.adAccount.summary.visit.button', 'Text in button that redirects user to selected ad account')},E={value:"removeAdAccount",label:u._('Remove', '[m10n]bizAccess.adAccount.summary.remove.button', 'Text in button that removes current ad account')},O=function(e){var t=e.item;j(t.value);var s={event_type:101,component:n,element:13725,aux_data:{ad_account_id:null==a?void 0:a.asset.id}};"visitAdAccount"===t.value&&y?(0,em.dK)(c)?b({eventName:"BUSINESS_ACCESS_ACTION",component:"BUSINESS_ACCESS_NAVIGATION",componentId:"ad-account-summary",element:"BUSINESS_ACCESS_LINK",elementId:"visit-ad-account",ad_account_id:null==a?void 0:a.asset.id}):h(eS(eS({},s),{},{element:13724})):"removeAdAccount"!==t.value||P||((0,em.dK)(c)?b({eventName:"BUSINESS_ACCESS_ACTION",component:"BUSINESS_ACCESS_CONTAINER",componentId:"ad-account-summary",element:"BUSINESS_ACCESS_BUTTON",elementId:"remove-ad-account",ad_account_id:null==a?void 0:a.asset.id}):h(s),i({assetId:(null==a?void 0:a.asset.id)||""}))},z=y?(0,_.jsx)(ep,{text:I.label}):(0,_.jsx)(ef,{reason:u._('You may only visit ad accounts that partners have assigned permission', '[m10n]bizAccess.adAccount.visit.disabled.text', 'tooltip if you try to visit an ad account with no permissions for a landing page'),title:I.label}),w=[{link:{key:"visitAdAccount",disableOnNavigation:!y,content:z,onSelectOption:O,href:y||"#",isExternal:!0,option:I}},{link:{key:"removeAdAccount",disableOnNavigation:!0,content:P?(0,_.jsx)(ef,{reason:o===m?u._('You cannot remove ad accounts you have created. Contact support to learn more', '[m10n]bizAccess.adAccount.removeTooltip', 'tooltip if you try to remove an ad account you created'):u._('You cannot remove agency owned ad accounts. Contact support to learn more', '[m10n]bizAccess.adAccount.removeTooltipAoaa', 'tooltip if you try to remove an ad account that is agency owned'),title:E.label}):(0,_.jsx)(ep,{text:E.label}),onSelectOption:O,href:"#",option:E}}];return(0,_.jsx)(ey,{accessibilityControls:"more-ad-account-options",dropdownItems:w,moreIconButtonAccessibilityLabel:u._('More options', '[m10n]bizAccess.adAccount.summary.moreOptions', 'Button that triggers the more options dropdown'),moreIconButtonOnClick:function(){return S(!v)},onDismissDropdown:function(){C&&("visitAdAccount"!==C||!y)&&("removeAdAccount"!==C||P)||S(!1)},opened:v})},ej=s(403713),eI=s(789349);function eE(e){return(eE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function eO(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),s.push.apply(s,n)}return s}var ez=function(e){var t,s=e.adAccount,r=e.businessId,a=(null==s?void 0:s.client_business)!==null,u=a&&(null==s||null==(t=s.client_business)?void 0:t.id)!==r,d=(0,Z.HU)(),m=d.setEditAdAccountAccessModal,p=d.businessAccess.business,b=!a&&(null==s?void 0:s.owner.id)!==(null==p?void 0:p.user.id),f=(0,(0,C.Z)().checkExperiment)("web_m10n_business_hierarchy_beta").anyEnabled;return(0,_.jsxs)(i.xu,{children:[(0,_.jsx)(ej.Z,{items:[(0,_.jsx)(function(e){var t=e.adAccount,s=(0,l.ZP)();return(0,_.jsxs)(i.xu,{alignItems:"center",display:"flex",justifyContent:"between",padding:4,children:[(0,_.jsxs)(i.xu,{children:[(0,_.jsx)(i.xu,{marginBottom:1,children:(0,_.jsx)(i.xv,{size:"400",weight:"bold",children:null==t?void 0:t.asset.name})}),(0,_.jsxs)(i.xu,{children:[(0,_.jsxs)(i.kC,{alignItems:"center",children:[(0,_.jsx)(i.xv,{color:"subtle",size:"200",children:(0,c.nk)(s._('Ad account ID: {{accountId}}', '[m10n]bizAccess.adAccount.summary.description', 'The title to be displayed to an invoice detail, accountId:the account id that will be displayed'),{accountId:null==t?void 0:t.asset.id})}),(null==t?void 0:t.asset.id)&&(0,_.jsx)(eu.Z,function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?eO(Object(s),!0).forEach(function(t){var n,r;n=t,r=s[t],(n=function(e){var t=function(e,t){if("object"!=eE(e)||!e)return e;var s=e[Symbol.toPrimitive];if(void 0!==s){var n=s.call(e,t||"default");if("object"!=eE(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==eE(t)?t:t+""}(n))in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):eO(Object(s)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))})}return e}({page:n.Q6.BUSINESS_HIERARCHY,text:t.asset.id},(0,ed.i)(ed.O.AD_ACCOUNT_ID,s)))]}),a&&(0,_.jsxs)(i.kC,{alignItems:"center",justifyContent:"start",children:[(0,_.jsx)(i.xu,{marginEnd:2,marginTop:1,children:(0,_.jsx)(i.JO,{accessibilityLabel:s._('icon detailing type agency owned ad account status', '[m10n]businessAccess.adAccount.detailSidebar.adAccountStatus', 'accessibility label ad account status icon'),color:"success",icon:null!=t&&t.status?"workflow-status-in-progress":"workflow-status-ok"})},"action-icon-ad-account-status"),(0,_.jsx)(i.xv,{color:"subtle",size:"200",children:null!=t&&t.status?"Pending":"Approved"})]})]})]}),f&&(0,_.jsx)(eC,{component:14397})]})},{adAccount:s},"AdAccountSummaryTop"),b?(0,_.jsx)(function(e){var t,s=e.adAccount,n=(0,l.ZP)();return(0,_.jsxs)(i.xu,{direction:"row",display:"flex",padding:4,children:[(0,_.jsxs)(i.sg,{span:4,children:[(0,_.jsx)(i.xu,{marginBottom:1,children:(0,_.jsx)(i.xv,{size:"200",weight:"bold",children:n._('Ad account owner', '[m10n]bizAccess.adAccount.summary.adAccountOwner', 'Text close to ad account owner name for shared ad account')})}),(0,_.jsx)(i.xv,{size:"200",children:null==s?void 0:s.owner.full_name})]}),(0,_.jsxs)(i.sg,{span:4,children:[(0,_.jsx)(i.xu,{marginBottom:1,children:(0,_.jsx)(i.xv,{size:"200",weight:"bold",children:n._('Permissions granted', '[m10n]bizAccess.adAccount.detail.permissionsGranted', 'Label and value for pemissions granted on agency owned ad account, permissions: comma separated list of permissions')})}),(0,_.jsx)(i.xv,{size:"200",children:((null==s?void 0:s.permissions)||[]).map((0,eA.e6)(n)).join((0,o.bH)(n))})]}),(0,_.jsxs)(i.sg,{span:4,children:[(0,_.jsx)(i.xu,{marginBottom:1,children:(0,_.jsx)(i.xv,{size:"200",weight:"bold",children:n._('Added by', '[m10n]bizAccess.adAccount.detail.addedBy', 'Label or title of who shared the selected ad account and when.')})}),(0,_.jsx)(i.xv,{size:"200",children:(0,c.nk)(n._('{{accountCreator}} on {{creationDate}}', '[m10n]bizAccess.adAccount.summary.createdAt', 'Value to show who shared the selected ad account and when, creationDate: the date when account was created, accountCreator: the name of who created the ad account'),{creationDate:(0,_.jsx)(ec.Z,{dateFormatType:ec.k.LONG,useUTC:!1,value:new Date(1e3*((null==s?void 0:s.asset.created_time)||0))},"creation_date"),accountCreator:null==s||null==(t=s.created_by)?void 0:t.full_name})})]})]})},{adAccount:s},"SharedAccountSummaryBottom"):(0,_.jsx)(function(e){var t,s=e.adAccount,n=(0,l.ZP)();return(0,_.jsxs)(i.xu,{direction:"row",display:"flex",padding:4,children:[(0,_.jsxs)(i.sg,{span:6,children:[(0,_.jsx)(i.xu,{marginBottom:1,children:(0,_.jsx)(i.xv,{size:"200",weight:"bold",children:n._('Owner', '[m10n]bizAccess.adAccount.summary.owner', 'Text close to ad account owner name')})}),(0,_.jsx)(i.xv,{size:"200",children:null==s?void 0:s.owner.full_name})]}),(0,_.jsxs)(i.sg,{span:6,children:[(0,_.jsx)(i.xu,{marginBottom:1,children:(0,_.jsx)(i.xv,{size:"200",weight:"bold",children:n._('Ad account created', '[m10n]bizAccess.adAccount.summary.createdAt.description', 'Text close to ad account creation date')})}),(0,_.jsx)(i.xv,{size:"200",children:(0,c.nk)(n._('{{creationDate}} by {{accountCreator}}', '[m10n]bizAccess.adAccount.summary.createdAt', 'The title to be displayed to an invoice detail, creationDate: the date when account was created, accountCreator: the name of who created the ad account'),{creationDate:(0,_.jsx)(ec.Z,{dateFormatType:ec.k.LONG,useUTC:!1,value:new Date(1e3*((null==s?void 0:s.asset.created_time)||0))},"creation_date"),accountCreator:null==s||null==(t=s.created_by)?void 0:t.full_name})})]})]})},{adAccount:s},"AdAccountSummaryBottom")]}),a&&(0,_.jsx)(i.xu,{marginTop:2,children:(0,_.jsx)(ej.Z,{items:[(0,_.jsx)(function(e){var t,s,n,r=e.adAccount,a=(0,l.ZP)(),d=(0,h.v9)((0,eI.BK)((null==r||null==(t=r.client_business)?void 0:t.id)||"")).permissions;return(0,_.jsxs)(i.xu,{alignItems:"center",display:"flex",justifyContent:"between",padding:4,children:[(0,_.jsxs)(i.xu,{children:[(0,_.jsx)(i.xu,{marginBottom:1,children:(0,_.jsx)(i.xv,{size:"300",weight:"bold",children:(0,c.nk)(a._('Advertising for {{account_name}}', '[m10n]bizAccess.adAccount.detail.advertising for name', 'label for client business of agency owned ad account, account_name: full name'),{account_name:null==r||null==(s=r.client_business)?void 0:s.full_name})})}),u&&(0,_.jsx)(i.xv,{color:"subtle",size:"200",children:(0,c.nk)(a._('Partner permissions: {{permissions}}', '[m10n]bizAccess.adAccount.detail.partnerPermissions', 'Label and value for client business permission on agency owned ad account, permissions: comma separated list of permissions'),{permissions:(d||[]).map((0,eA.e6)(a)).join((0,o.bH)(a))})}),!u&&(0,_.jsx)(i.xv,{color:"subtle",size:"200",children:(0,c.nk)(a._('My permissions: {{permissions}}', '[m10n]bizAccess.adAccount.detail.myPermissions', 'Label and value for business permission on agency owned ad account, permissions: comma separated list of permissions'),{permissions:null==r||null==(n=r.permissions)?void 0:n.map((0,eA.e6)(a)).join((0,o.bH)(a))})})]}),f&&(0,_.jsx)(i.xu,{children:(0,_.jsx)(i.zx,{accessibilityLabel:a._('Edit partner permissions', '[m10n]bizAccess.adAccount.summary.edit.partner.permissions.a11y', 'Button to edit partner permissions'),onClick:function(){var e,t;m({resourceId:(null==r?void 0:r.asset.id)||"",principalId:(null==r||null==(e=r.client_business)?void 0:e.id)||"",clientBusinessId:(null==r||null==(t=r.client_business)?void 0:t.id)||"",rolesForAoaa:u?d:null==r?void 0:r.permissions,dataToRefresh:"AD_ACCOUNT_PARTNER",assignmentType:"PARTNER"})},text:a._('Edit partner permissions', '[m10n]bizAccess.adAccount.summary.edit.partner.permissions.button', 'Button to edit partner permissions')})})]})},{adAccount:s},"AoaaSummary")]})})]})},ew=function(e){var t=e.children,s=e.onBackClick,n=(0, l.ZP)()._('Back to business details', '[m10n]businessAccess.businessHierarchy.details.tab.label', 'business hierarcy details panel label');return(0,_.jsxs)(p.Fragment,{children:[(0,_.jsx)(i.xu,{marginBottom:5,children:(0,_.jsx)(i.iP,{onTap:function(){return s()},children:(0,_.jsxs)(i.kC,{alignItems:"center",gap:3,justifyContent:"start",children:[(0,_.jsx)(i.JO,{accessibilityLabel:n,color:"dark",icon:"directional-arrow-left",size:16}),(0,_.jsx)(i.xv,{size:"200",weight:"bold",children:n})]})})}),t]})},eT=s(526511);function eN(e,t,s,n,r,i,o){try{var a=e[i](o),l=a.value}catch(e){return void s(e)}a.done?t(l):Promise.resolve(l).then(n,r)}function eB(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var s=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=s){var n,r,i,o,a=[],l=!0,c=!1;try{if(i=(s=s.call(e)).next,0===t){if(Object(s)!==s)return;l=!1}else for(;!(l=(n=i.call(s)).done)&&(a.push(n.value),a.length!==t);l=!0);}catch(e){c=!0,r=e}finally{try{if(!l&&null!=s.return&&(o=s.return(),Object(o)!==o))return}finally{if(c)throw r}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return eR(e,t);var s=({}).toString.call(e).slice(8,-1);return"Object"===s&&e.constructor&&(s=e.constructor.name),"Map"===s||"Set"===s?Array.from(e):"Arguments"===s||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s)?eR(e,t):void 0}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function eR(e,t){(null==t||t>e.length)&&(t=e.length);for(var s=0,n=Array(t);s<t;s++)n[s]=e[s];return n}var eD=function(e,t){var s,n=(0,(0,C.Z)().checkExperiment)("web_m10n_business_hierarchy_beta").anyEnabled,r=eB((0,p.useState)(!1),2),i=r[0],o=r[1],a=eB((0,p.useState)(!1),2),l=a[0],c=a[1],u=(0,p.useCallback)((s=regeneratorRuntime.mark(function t(){var s,n,r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return o(!1),c(!0),t.prev=2,t.next=5,(0,eT.Eg)({id:e});case 5:(null==(r=t.sent)||null==(s=r.data)||null==(n=s.data)?void 0:n.length)>0?o(r.data.data.every(function(e){return e.is_shared_partner})):o(!1),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(2),o(!1);case 12:return t.prev=12,c(!1),t.finish(12);case 15:case"end":return t.stop()}},t,null,[[2,9,12,15]])}),function(){var e=this,t=arguments;return new Promise(function(n,r){var i=s.apply(e,t);function o(e){eN(i,n,r,o,a,"next",e)}function a(e){eN(i,n,r,o,a,"throw",e)}o(void 0)})}),[e]);return(0,p.useEffect)(function(){e&&(n&&!t?u():o(!1))},[n,t,u,e]),{areAllPartnersSharedLoading:l,areAllPartnersShared:i}};function ek(e,t){(null==t||t>e.length)&&(t=e.length);for(var s=0,n=Array(t);s<t;s++)n[s]=e[s];return n}var eH=function(e){var t,s=e.component,r=e.parentComponent,o=e.showAssignEmployeesOnly,a=(0,Z.Dw)(),c=(0,f.TH)(),u=(0,l.ZP)(),d=(0,e_.u)().logContextEvent,m=(0,g.ZP)("BUSINESS_ACCESS_BUSINESS_HIERARCHY"),h=function(e){if(Array.isArray(e))return e}(t=(0,p.useState)(!1))||function(e,t){var s=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=s){var n,r,i,o,a=[],l=!0,c=!1;try{for(i=(s=s.call(e)).next;!(l=(n=i.call(s)).done)&&(a.push(n.value),2!==a.length);l=!0);}catch(e){c=!0,r=e}finally{try{if(!l&&null!=s.return&&(o=s.return(),Object(o)!==o))return}finally{if(c)throw r}}return a}}(t,2)||function(e,t){if(e){if("string"==typeof e)return ek(e,2);var s=({}).toString.call(e).slice(8,-1);return"Object"===s&&e.constructor&&(s=e.constructor.name),"Map"===s||"Set"===s?Array.from(e):"Arguments"===s||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s)?ek(e,2):void 0}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),b=h[0],y=h[1],A=(0,p.useRef)(null),v=(0,Z.HU)().setAssignAdAccountsModal,S=function(e){var t=e.item,i=null==a?void 0:a.asset.id;(0,em.dK)(c)?m({eventName:"BUSINESS_ACCESS_ACTION",component:"BUSINESS_ACCESS_CONTAINER",componentId:"ad-account-details",element:"BUSINESS_ACCESS_BUTTON",elementId:"assign-ad-account",ad_account_id:i,option_selected:t.value}):d({event_type:101,component:s,element:13736,aux_data:{ad_account_id:i,option_selected:t.value,component_id:r.toString()}}),i&&("assignEmployees"===t.value?v({dataToRefresh:"HIERARCHY_AD_ACCOUNT_DETAILS_EMPLOYEES",selectedIds:[i],selectionType:n.c7.PERSON,assignmentType:"PEOPLE"}):"assignPartners"===t.value&&v({dataToRefresh:"HIERARCHY_AD_ACCOUNT_DETAILS_PARTNERS",selectedIds:[i],selectionType:n.c7.PARTNER,assignmentType:"PARTNER"}))},P=o?(0,_.jsx)(i.kC,{children:(0,_.jsx)(i.zx,{ref:A,color:"red",onClick:function(){return S({item:{label:"",value:"assignEmployees"}})},text:u._('Assign employees', '[m10n]businessAccess.businessHierarchy.assign.employees.option', 'Button for assigning employees option')})}):(0,_.jsx)(i.kC,{children:(0,_.jsx)(i.zx,{ref:A,accessibilityControls:"assign-ad-account-options",accessibilityExpanded:b,accessibilityHaspopup:!0,color:"red",fullWidth:!0,iconEnd:"arrow-down",onClick:function(){return y(!b)},selected:b,text:u._('Assign', '[m10n]businessAccess.businessHierarchy.assign.button.dropdown', 'Button to open assign dropdown')})});return(0,_.jsxs)(p.Fragment,{children:[P,b&&(0,_.jsxs)(i.Lt,{anchor:A.current,disableMobileUI:!0,id:"assign-ad-account-options",onDismiss:function(){return y(!1)},children:[(0,_.jsx)(i.Lt.Section,{label:u._('Employees', '[m10n]businessAccess.businessHierarchy.assign.employees.section', 'Label for assign employees section'),children:(0,_.jsx)(i.Lt.Item,{onSelect:S,option:{value:"assignEmployees",label:u._('Assign employees', '[m10n]businessAccess.businessHierarchy.assign.employees.option', 'Label for assign employees option')}})}),(0,_.jsx)(i.Lt.Section,{label:u._('Partners', '[m10n]businessAccess.businessHierarchy.assign.partners.section', 'Label for assign partners section'),children:(0,_.jsx)(i.Lt.Item,{onSelect:S,option:{value:"assignPartners",label:u._('Assign partners', '[m10n]businessAccess.businessHierarchy.assign.partners.option', 'Label for assign partners option')}})})]})]})};function eL(e,t){(null==t||t>e.length)&&(t=e.length);for(var s=0,n=Array(t);s<t;s++)n[s]=e[s];return n}var eU=function(e){var t,s,r,o=e.areAllPartnersShared,a=(0,l.ZP)(),c=(0,p.useRef)(null),u=(0,Z.HU)().setAssignProfilesModal,d=function(e){if(Array.isArray(e))return e}(t=(0,p.useState)(!1))||function(e,t){var s=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=s){var n,r,i,o,a=[],l=!0,c=!1;try{for(i=(s=s.call(e)).next;!(l=(n=i.call(s)).done)&&(a.push(n.value),2!==a.length);l=!0);}catch(e){c=!0,r=e}finally{try{if(!l&&null!=s.return&&(o=s.return(),Object(o)!==o))return}finally{if(c)throw r}}return a}}(t,2)||function(e,t){if(e){if("string"==typeof e)return eL(e,2);var s=({}).toString.call(e).slice(8,-1);return"Object"===s&&e.constructor&&(s=e.constructor.name),"Map"===s||"Set"===s?Array.from(e):"Arguments"===s||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s)?eL(e,2):void 0}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),m=d[0],h=d[1],b=(0,(0,C.Z)().checkExperiment)("web_m10n_business_hierarchy_beta").anyEnabled,y=(0,Z.KJ)(!0),A=(0,f.TH)(),v=(0,Z.Un)(),S=(0,g.ZP)("BUSINESS_ACCESS_BUSINESS_HIERARCHY"),P=(null==v||null==(s=v.permissions)?void 0:s.includes("OWNER"))||(null==v||null==(r=v.permissions)?void 0:r.includes("ADMIN")),x=ei(y,null==v?void 0:v.asset.id),j=et(y,null==v?void 0:v.asset.id);if(!b||!v)return null;var I=function(e){var t=e.item,s=v.asset.id;(0,em.dK)(A)&&S({eventName:"BUSINESS_ACCESS_ACTION",component:"BUSINESS_ACCESS_CONTAINER",componentId:"profile-details",element:"BUSINESS_ACCESS_BUTTON",elementId:"assign-profile",profile_id:s,option_selected:t.value}),s&&y&&("assignEmployees"===t.value?u({selectedIds:[s],selectionType:n.c7.PERSON,dataToRefresh:"PROFILE_PEOPLE",assignmentType:"PEOPLE",refreshData:x}):"assignPartners"===t.value&&u({selectedIds:[s],selectionType:n.c7.PARTNER,dataToRefresh:"PROFILE_PARTNERS",assignmentType:"PARTNER",refreshData:j}))};return P&&!o?(0,_.jsxs)(p.Fragment,{children:[(0,_.jsx)(i.zx,{ref:c,accessibilityControls:"assign-profile-dropdown",accessibilityExpanded:m,accessibilityHaspopup:!0,color:"red",iconEnd:"arrow-down",onClick:function(){h(!m)},selected:m,text:a._('Add', '[m10n]businessAccess.businessHierarchy.assign.employees.and.partners', 'Text in button that showns dropdown that triggers profile to employee or partner assignment')}),m&&(0,_.jsxs)(i.Lt,{anchor:c.current,disableMobileUI:!0,id:"assign-profile-dropdown",onDismiss:function(){return h(!1)},children:[(0,_.jsx)(i.Lt.Section,{label:a._('Employees', '[m10n]businessAccess.businessHierarchy.assign.employees.section', 'Label for assign employees section'),children:(0,_.jsx)(i.Lt.Item,{onSelect:I,option:{value:"assignEmployees",label:a._('Assign employees', '[m10n]businessAccess.businessHierarchy.assign.employees.option', 'Label for assign employees option')}})}),(0,_.jsx)(i.Lt.Section,{label:a._('Partners', '[m10n]businessAccess.businessHierarchy.assign.partners.section', 'Label for assign partners section'),children:(0,_.jsx)(i.Lt.Item,{onSelect:I,option:{value:"assignPartners",label:a._('Assign partners', '[m10n]businessAccess.businessHierarchy.assign.partners.option', 'Label for assign partners option')}})})]})]}):(0,_.jsx)(i.zx,{color:"red",onClick:function(){u({selectedIds:[v.asset.id],selectionType:n.c7.PERSON,dataToRefresh:"PROFILE_PEOPLE",assignmentType:"PEOPLE",refreshData:x})},text:a._('Assign employees', '[m10n]businessAccess.businessHierarchy.assign.employees', 'Text in button that triggers profile to employee assignment')})},eZ=s(989158),eM=s(531709),eF=s(296819);function eY(e,t){(null==t||t>e.length)&&(t=e.length);for(var s=0,n=Array(t);s<t;s++)n[s]=e[s];return n}var eG=function(e){var t,s=e.showAdAccountAssignDropdown,n=e.showProfilesAssignDropdown,r=e.parentComponent,o=e.employees,a=e.employeesTableConfiguration,c=e.employeesIsLoading,u=e.employeesFetchData,d=e.employeesColumnDefs,m=e.employeesOnRowClick,h=e.partners,b=e.partnersTableConfiguration,f=e.partnersIsLoading,y=e.partnersFetchData,A=e.partnersColumnDefs,v=e.partnersOnRowClick,g=e.hidePartnersTab,S=e.pageType,P=(0,l.ZP)(),x=(0,Z.KJ)(!0),j=function(e){if(Array.isArray(e))return e}(t=(0,p.useState)(0))||function(e,t){var s=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=s){var n,r,i,o,a=[],l=!0,c=!1;try{for(i=(s=s.call(e)).next;!(l=(n=i.call(s)).done)&&(a.push(n.value),2!==a.length);l=!0);}catch(e){c=!0,r=e}finally{try{if(!l&&null!=s.return&&(o=s.return(),Object(o)!==o))return}finally{if(c)throw r}}return a}}(t,2)||function(e,t){if(e){if("string"==typeof e)return eY(e,2);var s=({}).toString.call(e).slice(8,-1);return"Object"===s&&e.constructor&&(s=e.constructor.name),"Map"===s||"Set"===s?Array.from(e):"Arguments"===s||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s)?eY(e,2):void 0}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),I=j[0],E=j[1],O=(0,(0,C.Z)().checkExperiment)("web_m10n_business_hierarchy_beta").anyEnabled,z=eD(x,g),w=z.areAllPartnersShared,T=z.areAllPartnersSharedLoading;(0,p.useEffect)(function(){0===I?null==u||u({limit:eF.TJ["0"]}):1===I&&(null==y||y({limit:eF.TJ["0"]}))},[I]);var N=[{href:"#",text:P._('Employees', '[m10n]businessAccess.businessHierarchy.employees.tab.label', 'asset employees tab title')}];return g||N.push({href:"#",text:P._('Partners', '[m10n]businessAccess.businessHierarchy.partners.tab.label', 'asset partners tab label')}),(0,_.jsxs)(i.xu,{marginTop:4,children:[(0,_.jsxs)(i.kC,{justifyContent:"between",children:[(0,_.jsx)(i.mQ,{activeTabIndex:I,onChange:function(e){var t=e.activeTabIndex,s=e.event,n=e.dangerouslyDisableOnNavigation;s.preventDefault(),n(),E(t)},tabs:N}),!T&&n&&(0,_.jsx)(eU,{areAllPartnersShared:w}),s&&O&&(0,_.jsx)(eH,{component:14398,parentComponent:r,showAssignEmployeesOnly:g})]}),(0,_.jsxs)(i.xu,{marginTop:4,children:[0===I&&(0,_.jsx)(eZ.Z,{employees:o,employeesColumnDefs:d,employeesFetchData:u,employeesIsLoading:c,employeesOnRowClick:m,employeesTableConfiguration:a,pageType:S}),1===I&&!g&&(0,_.jsx)(eM.Z,{emptyState:O&&w&&(0,_.jsx)(i.he,{message:P._('You may only share your profile with businesses who you have invited or have requested to be your partner', '[m10n]businessAccess.businessHierarchy.partners.allpartnersshared.banner', 'Banner when all partners are shared')}),pageType:S,partners:h,partnersColumnDefs:A,partnersFetchData:y,partnersIsLoading:f,partnersOnRowClick:v,partnersTableConfiguration:b})]})]})},eW=function(e){var t=e.adAccount,s=e.onBackClick,n=e.closePanels,r=e.businessId,i=e.employees,o=e.employeesTableConfiguration,a=e.employeesIsLoading,l=e.employeesFetchData,c=e.employeesColumnDefs,u=e.employeesOnRowClick,d=e.partners,m=e.partnersTableConfiguration,h=e.partnersIsLoading,b=e.partnersFetchData,f=e.partnersColumnDefs,y=e.partnersOnRowClick,A=e.pageType,v=(0,Z.HU)(),g=v.setSelectedAdAccount,S=v.setSelectedDetail;n&&s(),(0,p.useEffect)(function(){var e;S({detailId:null!=(e=null==t?void 0:t.asset.id)?e:""}),g(t)},[t,g,S]),n&&s();var P=(null==t?void 0:t.client_business)!==null,x=r===(null==t?void 0:t.owner.id);return(0,_.jsx)(ew,{onBackClick:s||function(){},children:(0,_.jsxs)(p.Fragment,{children:[(0,_.jsx)(ez,{adAccount:t,businessId:r}),(0,_.jsx)(eG,{employees:i,employeesColumnDefs:c,employeesFetchData:l,employeesIsLoading:a,employeesOnRowClick:u,employeesTableConfiguration:o,hidePartnersTab:!x||P,pageType:A,parentComponent:14397,partners:d,partnersColumnDefs:f,partnersFetchData:b,partnersIsLoading:h,partnersOnRowClick:y,partnersTableConfiguration:m,showAdAccountAssignDropdown:!0})]})})};function eQ(e,t){(null==t||t>e.length)&&(t=e.length);for(var s=0,n=Array(t);s<t;s++)n[s]=e[s];return n}var eq=function(){var e,t=(0,g.ZP)("BUSINESS_ACCESS_BUSINESS_HIERARCHY"),s=(0,l.ZP)(),n=(0,p.useRef)(null),r=function(e){if(Array.isArray(e))return e}(e=(0,p.useState)(!1))||function(e,t){var s=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=s){var n,r,i,o,a=[],l=!0,c=!1;try{for(i=(s=s.call(e)).next;!(l=(n=i.call(s)).done)&&(a.push(n.value),2!==a.length);l=!0);}catch(e){c=!0,r=e}finally{try{if(!l&&null!=s.return&&(o=s.return(),Object(o)!==o))return}finally{if(c)throw r}}return a}}(e,2)||function(e,t){if(e){if("string"==typeof e)return eQ(e,2);var s=({}).toString.call(e).slice(8,-1);return"Object"===s&&e.constructor&&(s=e.constructor.name),"Map"===s||"Set"===s?Array.from(e):"Arguments"===s||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s)?eQ(e,2):void 0}}(e,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),o=r[0],a=r[1],c=(0,C.Z)().checkExperiment,u=(0,Z.HU)(),d=u.setAddPeopleModal,m=u.setCreateAdAccountModal,h=u.setInviteRequestPartnerModal;if(!c("web_m10n_business_hierarchy_beta").anyEnabled)return null;var b=function(e){var s=e.item;"createAdAccount"===s.value&&(m(),t({eventName:"BUSINESS_ACCESS_ACTION",component:"BUSINESS_ACCESS_CONTAINER",componentId:"business-hierarchy-details",element:"BUSINESS_ACCESS_BUTTON",elementId:"ad-accounts-create-button"})),"addEmployees"===s.value&&(d(),t({eventName:"BUSINESS_ACCESS_ACTION",component:"BUSINESS_ACCESS_CONTAINER",componentId:"business-hierarchy-details",element:"BUSINESS_ACCESS_BUTTON",elementId:"employees-add-button"})),"addPartners"===s.value&&(h({pageForLogger:"BUSINESS_ACCESS_BUSINESS_HIERARCHY"}),t({eventName:"BUSINESS_ACCESS_ACTION",component:"BUSINESS_ACCESS_CONTAINER",componentId:"business-hierarchy-details",element:"BUSINESS_ACCESS_BUTTON",elementId:"partners-add-button"}))};return(0,_.jsxs)(p.Fragment,{children:[(0,_.jsx)(i.zx,{ref:n,accessibilityControls:"add-child-business-options",accessibilityExpanded:o,accessibilityHaspopup:!0,accessibilityLabel:s._('Opens dropdown with operations allowed on selected child business', '[m10n]businessAccess.businessHierarchy.childBusiness.add.a11y', 'Accessibility text that describes what operation can be done on child business'),color:"red",iconEnd:"arrow-down",onClick:function(){a(!o)},selected:o,text:s._('Add', '[m10n]businessAccess.businessHierarchy.childBusiness.add', 'Text in button that showns dropdown that triggers ad accounts creation, employee invites and partner invites')}),o&&(0,_.jsxs)(i.Lt,{anchor:n.current,disableMobileUI:!0,id:"add-child-business-options",onDismiss:function(){return a(!1)},children:[(0,_.jsx)(i.Lt.Section,{label:s._('Assets', '[m10n]businessAccess.businessHierarchy.childBusiness.add.assets.section', 'Label for add assets section'),children:(0,_.jsx)(i.Lt.Item,{onSelect:b,option:{value:"createAdAccount",label:s._('Create ad account', '[m10n]businessAccess.businessHierarchy.childBusiness.createAdAccount.option', 'Label for creating ad account option')}})}),(0,_.jsxs)(i.Lt.Section,{label:s._('Members', '[m10n]businessAccess.businessHierarchy.childBusiness.addMembers.section', 'Label for add members section'),children:[(0,_.jsx)(i.Lt.Item,{onSelect:b,option:{value:"addEmployees",label:s._('Add employees', '[m10n]businessAccess.businessHierarchy.childBusiness.addEmployees.option', 'Label for inviting employees option')}}),(0,_.jsx)(i.Lt.Item,{onSelect:b,option:{value:"addPartners",label:s._('Add partners', '[m10n]businessAccess.businessHierarchy.childBusiness.addPartners.option', 'Label for inviting partners option')}})]})]})]})},eK=s(372844);function eV(e,t){(null==t||t>e.length)&&(t=e.length);for(var s=0,n=Array(t);s<t;s++)n[s]=e[s];return n}var eJ=function(){var e,t=(0,g.ZP)("BUSINESS_ACCESS_BUSINESS_HIERARCHY"),s=(0,l.ZP)(),r=(0,Z.nU)(!0),o=(0,p.useRef)(null),a=function(e){if(Array.isArray(e))return e}(e=(0,p.useState)(!1))||function(e,t){var s=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=s){var n,r,i,o,a=[],l=!0,c=!1;try{for(i=(s=s.call(e)).next;!(l=(n=i.call(s)).done)&&(a.push(n.value),2!==a.length);l=!0);}catch(e){c=!0,r=e}finally{try{if(!l&&null!=s.return&&(o=s.return(),Object(o)!==o))return}finally{if(c)throw r}}return a}}(e,2)||function(e,t){if(e){if("string"==typeof e)return eV(e,2);var s=({}).toString.call(e).slice(8,-1);return"Object"===s&&e.constructor&&(s=e.constructor.name),"Map"===s||"Set"===s?Array.from(e):"Arguments"===s||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s)?eV(e,2):void 0}}(e,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),c=a[0],u=a[1],d=(0,C.Z)().checkExperiment,m=(0,Z.HU)(),h=m.setAssignAdAccountsModal,b=m.setAssignProfilesModal;if(!d("web_m10n_business_hierarchy_beta").anyEnabled)return null;var f=function(e){var s=e.item;"assignAdAccounts"===s.value&&(h({selectedIds:[r],selectionType:n.c7.AD_ACCOUNT,dataToRefresh:"HIERARCHY_EMPLOYEE_DETAILS_AD_ACCOUNTS",assignmentType:"PEOPLE"}),t({eventName:"BUSINESS_ACCESS_ACTION",component:"BUSINESS_ACCESS_CONTAINER",componentId:"employee-details",element:"BUSINESS_ACCESS_BUTTON",elementId:"assign-ad-accounts-to-employee-button"})),"assignProfiles"===s.value&&(b({selectedIds:[r],selectionType:n.Hl.PROFILE,dataToRefresh:"HIERARCHY_EMPLOYEE_DETAILS_PROFILES",assignmentType:"PEOPLE"}),t({eventName:"BUSINESS_ACCESS_ACTION",component:"BUSINESS_ACCESS_CONTAINER",componentId:"employee-details",element:"BUSINESS_ACCESS_BUTTON",elementId:"assign-profiles-to-employee-button"}))};return(0,_.jsxs)(p.Fragment,{children:[(0,_.jsx)(i.zx,{ref:o,accessibilityControls:"add-employee-details-options",accessibilityExpanded:c,accessibilityHaspopup:!0,accessibilityLabel:s._('Opens dropdown with operations allowed on selected employee', '[m10n]businessAccess.businessHierarchy.employeeDetails.add.a11y', 'Accessibility text that describes what operation can be done on employee'),color:"red",iconEnd:"arrow-down",onClick:function(){u(!c)},selected:c,text:s._('Add', '[m10n]businessAccess.businessHierarchy.employeeDetails.add', 'Text in button that showns dropdown that triggers ad account and profile assignment to employees')}),c&&(0,_.jsxs)(i.Lt,{anchor:o.current,disableMobileUI:!0,id:"add-employee-details-options",onDismiss:function(){return u(!1)},children:[(0,_.jsx)(i.Lt.Section,{label:s._('Ad accounts', '[m10n]businessAccess.businessHierarchy.employeeDetails.assign.adAccounts.section', 'Label for assigning ad accounts section'),children:(0,_.jsx)(i.Lt.Item,{onSelect:f,option:{value:"assignAdAccounts",label:s._('Assign ad accounts', '[m10n]businessAccess.businessHierarchy.employeeDetails.assign.AdAccounts.option', 'Label for assigning ad account option')}})}),(0,_.jsx)(i.Lt.Section,{label:s._('Profiles', '[m10n]businessAccess.businessHierarchy.employeeDetails.assign.profiles.section', 'Label for assigning profile section'),children:(0,_.jsx)(i.Lt.Item,{onSelect:f,option:{value:"assignProfiles",label:s._('Assign profiles', '[m10n]businessAccess.businessHierarchy.employeeDetails.assign.profiles.option', 'Label for assigning profiles option')}})})]})]})},e$=s(593379),eX=s(250736),e0=s(16135),e1=s(765320);function e2(e){return(e2="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function e3(e,t){(null==t||t>e.length)&&(t=e.length);for(var s=0,n=Array(t);s<t;s++)n[s]=e[s];return n}function e6(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),s.push.apply(s,n)}return s}var e9=function(e){var t,s,r,a=e.employee,u=(0,l.ZP)(),d=(0,g.ZP)("BUSINESS_ACCESS_BUSINESS_HIERARCHY"),m=(0,Z.HU)().setEditPersonRoleModal,p=(0,h.v9)((0,e1.V7)(null!=(t=null==a?void 0:a.id)?t:"")),b=(0,h.v9)(e1.gB),f=(0,k.mN)()(null!=(s=null==a||null==(r=a.user)?void 0:r.id)?s:"");if(!a)return null;var y=a.user,A=y.id,v=y.full_name,S=y.email,P=y.image_small_url,x=null==f?void 0:f.avatar_color_index,C=p.business_roles,j=(null==C?void 0:C.map((0,eA.B)(u)).join((0,o.bH)(u)))||"";return b?(0,_.jsx)(i.xH,{accessibilityLabel:u._('Loading details...', '[m10n]businessAccess.businessHierarchy.employeeDetail.spinner', 'Accesibility label for spinner on employee details pages'),show:b}):(0,_.jsx)(i.xu,{borderStyle:"sm",dangerouslySetInlineStyle:{__style:{borderColor:"#e9e9e9"}},padding:4,rounding:4,children:(0,_.jsxs)(i.kC,{alignItems:"center",justifyContent:"between",children:[(0,_.jsxs)(i.kC,{alignItems:"center",gap:2,children:[(0,_.jsx)(B.qE,{color:x,name:v||"",size:"md",src:P}),(0,_.jsxs)(i.kC,{direction:"column",gap:1,children:[(0,_.jsx)(i.xv,{color:"default",size:"400",weight:"bold",children:v}),(0,_.jsx)(i.xv,{color:"subtle",size:"200",children:(0,c.nk)(u._('Role: {{ role }}', '[m10n]businessAccess.businessHierarchy.employeeDetail.role', 'Text to display the account role. role: Is the role of the account'),{role:j}).join("")}),(0,_.jsxs)(i.kC,{alignItems:"center",children:[(0,_.jsx)(i.xv,{color:"subtle",size:"200",children:(0,c.nk)(u._('Email: {{ email }}', '[m10n]businessAccess.businessHierarchy.employeeDetail.email', 'Text to display the account email. email: Is the email of the account'),{email:S}).join("")}),(0,_.jsx)(eu.Z,function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?e6(Object(s),!0).forEach(function(t){var n,r;n=t,r=s[t],(n=function(e){var t=function(e,t){if("object"!=e2(e)||!e)return e;var s=e[Symbol.toPrimitive];if(void 0!==s){var n=s.call(e,t||"default");if("object"!=e2(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==e2(t)?t:t+""}(n))in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):e6(Object(s)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))})}return e}({page:n.Q6.BUSINESS_HIERARCHY,text:S||""},(0,ed.i)(ed.O.EMAIL,u)))]})]})]}),(0,_.jsx)(i.zx,{onClick:function(){d({eventName:"BUSINESS_ACCESS_ACTION",component:"BUSINESS_ACCESS_CONTAINER",componentId:"employee-details-summary",element:"BUSINESS_ACCESS_BUTTON",elementId:"edit-employee-role"}),m({selectedId:A})},text:u._('Edit role', '[m10n]businessAccess.businessHierarchy.employeeDetail.summary.edit', 'Button to trigger employee edit flow in business hierarchy')})]})})},e4=function(e){var t,s=e.employee,r=e.onBackClick,o=e.closePanels,a=e.businessId,c=e.adAccounts,u=e.adAccountsIsLoading,d=e.adAccountsTableConfiguration,m=e.adAccountsCurrentPageSelector,b=e.adAccountsTotalCountSelector,f=e.adAccountsPageSizeSelector,y=e.adAccountsSearchTermSelector,A=e.adAccountsFetchData,v=e.adAccountsColumnDefs,g=e.adAccountsOnRowClick,S=e.profiles,P=e.profilesIsLoading,x=e.profilesTableConfiguration,j=e.profilesCurrentPageSelector,I=e.profilesTotalCountSelector,E=e.profilesPageSizeSelector,O=e.profilesSearchTermSelector,z=e.profilesFetchData,w=e.profilesColumnDefs,T=e.profilesOnRowClick,N=(0,l.ZP)(),B=(0,h.I0)(),R=function(e){if(Array.isArray(e))return e}(t=(0,p.useState)(0))||function(e,t){var s=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=s){var n,r,i,o,a=[],l=!0,c=!1;try{for(i=(s=s.call(e)).next;!(l=(n=i.call(s)).done)&&(a.push(n.value),2!==a.length);l=!0);}catch(e){c=!0,r=e}finally{try{if(!l&&null!=s.return&&(o=s.return(),Object(o)!==o))return}finally{if(c)throw r}}return a}}(t,2)||function(e,t){if(e){if("string"==typeof e)return e3(e,2);var s=({}).toString.call(e).slice(8,-1);return"Object"===s&&e.constructor&&(s=e.constructor.name),"Map"===s||"Set"===s?Array.from(e):"Arguments"===s||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s)?e3(e,2):void 0}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),D=R[0],k=R[1],H=(0,Z.HU)().setSelectedDetail,L=(0,C.Z)();o&&(null==r||r());var U=N._('Back to business details', '[m10n]businessAccess.businessHierarchy.assets.tab.label', 'business hierarcy assets tab label');return(0,p.useEffect)(function(){0===D?null==A||A({limit:eF.TJ["0"]}):1===D&&(null==z||z({limit:eF.TJ["0"]}))},[D]),(0,p.useEffect)(function(){var e;H({detailId:null!=(e=null==s?void 0:s.id)?e:""})},[s,H]),(0,p.useEffect)(function(){null!=s&&s.id&&a&&B((0,e0.Io)({getAssets:!1,businessId:a,detailId:s.id,reloadBugFix:!1,experimentsClient:L}))},[a,B,null==s?void 0:s.id,L]),(0,_.jsxs)(p.Fragment,{children:[(0,_.jsx)(i.xu,{marginBottom:5,children:(0,_.jsx)(i.iP,{onTap:function(){return null==r?void 0:r()},children:(0,_.jsxs)(i.kC,{alignItems:"center",gap:3,justifyContent:"start",children:[(0,_.jsx)(i.JO,{accessibilityLabel:U,color:"dark",icon:"directional-arrow-left",size:16}),(0,_.jsx)(i.xv,{size:"200",weight:"bold",children:U})]})})}),(0,_.jsx)(e9,{employee:s}),(0,_.jsxs)(i.xu,{marginTop:2,children:[(0,_.jsxs)(i.kC,{justifyContent:"between",children:[(0,_.jsx)(i.mQ,{activeTabIndex:D,onChange:function(e){var t=e.activeTabIndex,s=e.event,n=e.dangerouslyDisableOnNavigation;s.preventDefault(),n(),k(t)},tabs:[{href:"#",text:N._('Ad Accounts', '[m10n]businessAccess.businessHierarchy.employeeDetail.tab.adAccounts', 'Employee details ad accounts tab label')},{href:"#",text:N._('Profiles', '[m10n]businessAccess.businessHierarchy.employeeDetail.tab.profiles', 'Employee details profiles tab label')}]}),(0,_.jsx)(eJ,{})]}),(0,_.jsxs)(i.xu,{marginTop:5,children:[0===D&&(0,_.jsx)(e$.Z,{adAccounts:c,adAccountsColumnDefs:v,adAccountsCurrentPageSelector:m,adAccountsFetchData:A,adAccountsIsLoading:u,adAccountsOnRowClick:g,adAccountsPageSizeSelector:f,adAccountsSearchTermSelector:y,adAccountsTableConfiguration:d,adAccountsTotalCountSelector:b,emptyState:(0,_.jsx)(eK.if,{}),pageType:n.Q6.BUSINESS_HIERARCHY}),1===D&&(0,_.jsx)(eX.Z,{emptyState:(0,_.jsx)(eK.H6,{}),pageType:n.Q6.BUSINESS_HIERARCHY,profiles:S,profilesColumnDefs:w,profilesCurrentPageSelector:j,profilesFetchData:z,profilesIsLoading:P,profilesOnRowClick:T,profilesPageSizeSelector:E,profilesSearchTermSelector:O,profilesTableConfiguration:x,profilesTotalCountSelector:I})]})]})]})};function e8(e){return(e8="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function e5(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),s.push.apply(s,n)}return s}function e7(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?e5(Object(s),!0).forEach(function(t){te(e,t,s[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):e5(Object(s)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))})}return e}function te(e,t,s){var n;return(n=function(e,t){if("object"!=e8(e)||!e)return e;var s=e[Symbol.toPrimitive];if(void 0!==s){var n=s.call(e,t||"default");if("object"!=e8(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==e8(n)?n:n+"")in e)?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function tt(e,t){(null==t||t>e.length)&&(t=e.length);for(var s=0,n=Array(t);s<t;s++)n[s]=e[s];return n}var ts=function(){var e,t,s=(0,(0,C.Z)().checkExperiment)("web_m10n_business_hierarchy_beta").anyEnabled,r=(0,g.ZP)("BUSINESS_ACCESS_BUSINESS_HIERARCHY"),o=(0,Z.KJ)(!0),a=(0,Z.Dl)(),c=(0,h.v9)((0,Q.BK)(a)),u=(0,h.v9)((0,Q.mr)(null!=(e=c.id)?e:"")),d=u&&u.profiles&&u.profiles.length>0,m=(0,l.ZP)(),b=(0,p.useRef)(null),f=function(e){if(Array.isArray(e))return e}(t=(0,p.useState)(!1))||function(e,t){var s=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=s){var n,r,i,o,a=[],l=!0,c=!1;try{for(i=(s=s.call(e)).next;!(l=(n=i.call(s)).done)&&(a.push(n.value),2!==a.length);l=!0);}catch(e){c=!0,r=e}finally{try{if(!l&&null!=s.return&&(o=s.return(),Object(o)!==o))return}finally{if(c)throw r}}return a}}(t,2)||function(e,t){if(e){if("string"==typeof e)return tt(e,2);var s=({}).toString.call(e).slice(8,-1);return"Object"===s&&e.constructor&&(s=e.constructor.name),"Map"===s||"Set"===s?Array.from(e):"Arguments"===s||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s)?tt(e,2):void 0}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),y=f[0],A=f[1],v=(0,Z.HU)(),S=v.setAssignAdAccountsModal,P=v.setAssignProfilesModal,x=v.setRequestAdAccountsModal,j=v.setRequestProfileAccessModal;if(!s||(0,G.Z)(c))return null;var I=function(e){var t=e.item,s={eventName:"BUSINESS_ACCESS_ACTION",component:"BUSINESS_ACCESS_CONTAINER",componentId:"partner-details-cta",element:"BUSINESS_ACCESS_BUTTON"};"requestAdAccountFromPartner"===t.value&&(r(e7(e7({},s),{},{elementId:"request-ad-account-button"})),x({requestId:null,partnerId:c.id})),"assignAdAccountToPartner"===t.value&&(r(e7(e7({},s),{},{elementId:"assign-ad-account-button"})),S({selectedIds:[c.id],selectionType:n.c7.AD_ACCOUNT,dataToRefresh:"PARTNER",assignmentType:"PARTNER"})),"requestProfileFromPartner"===t.value&&(r(e7(e7({},s),{},{elementId:"request-profile-button"})),j({requesteeId:c.id,profilePermissions:[te({},c.id,["PROFILE_PUBLISHER"])]})),"assignProfileToEmployees"===t.value&&(r(e7(e7({},s),{},{elementId:"assign-profile-to-employees-button"})),P({selectedIds:[c.id],selectionType:n.Hl.PERSON,dataToRefresh:"PROFILE_PEOPLE",assignmentType:"PEOPLE"})),"assignProfileToPartner"===t.value&&(r(e7(e7({},s),{},{elementId:"assign-profile-to-partner-button"})),P({selectedIds:[o],selectionType:n.Hl.PROFILE,dataToRefresh:"HIERARCHY_PARTNER_PROFILE",assignmentType:"PARTNER"}))},E=c.is_shared_partner,O=E&&!d,z=E&&d,w=!E&&!d,T=O||z||w;return(0,_.jsxs)(p.Fragment,{children:[(0,_.jsx)(i.zx,{ref:b,accessibilityControls:"assign-to-partner-dropdown",accessibilityExpanded:y,accessibilityHaspopup:!0,color:"red",iconEnd:"arrow-down",onClick:function(){A(!y)},selected:y,text:m._('Add', '[m10n]businessAccess.businessHierarchy.assign.adAccounts.and.profiles', 'Text in button that showns dropdown that triggers ad account to partner or profile to partner assignment')}),y&&(0,_.jsxs)(i.Lt,{anchor:b.current,disableMobileUI:!0,id:"assign-to-partner-dropdown",onDismiss:function(){return A(!1)},children:[(0,_.jsxs)(i.Lt.Section,{label:m._('Ad accounts', '[m10n]businessAccess.businessHierarchy.assign.adAccounts.section', 'Label for assign or request ad accounts section'),children:[E&&(0,_.jsx)(i.Lt.Item,{onSelect:I,option:{value:"requestAdAccountFromPartner",label:m._('Request ad account access', '[m10n]businessAccess.businessHierarchy.request.adAccount.fromPartner.option', 'Label for requesting from partner access to ad accounts option')}}),!E&&(0,_.jsx)(i.Lt.Item,{onSelect:I,option:{value:"assignAdAccountToPartner",label:m._('Assign ad account access', '[m10n]businessAccess.businessHierarchy.assign.adAccount.toPartner.option', 'Label for assigning ad accounts to partner option')}})]}),T&&(0,_.jsxs)(i.Lt.Section,{label:m._('Profile', '[m10n]businessAccess.businessHierarchy.request.partners.section', 'Label for assign or request profiles section'),children:[O&&(0,_.jsx)(i.Lt.Item,{onSelect:I,option:{value:"requestProfileFromPartner",label:m._('Request profile access', '[m10n]businessAccess.businessHierarchy.request.profile.option', 'Label for requesting access to partner\'s profile option')}}),z&&(0,_.jsx)(i.Lt.Item,{onSelect:I,option:{value:"assignProfileToEmployees",label:m._('Assign employees', '[m10n]businessAccess.businessHierarchy.assign.employees.to.profile.option', 'Label for assigning employees to profile option')}}),w&&(0,_.jsx)(i.Lt.Item,{onSelect:I,option:{value:"assignProfileToPartner",label:m._('Assign profile access', '[m10n]businessAccess.businessHierarchy.assign.profile.option', 'Label for assigning own profile to partner option')}})]})]})]})},tn=s(537721),tr=s(417245);function ti(e){return(ti="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function to(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),s.push.apply(s,n)}return s}var ta=function(e){var t,s=e.partner,r=e.onBackClick,a=(0,l.ZP)(),u=(0,Z.HU)(),d=u.setRemovePartnerModal,m=u.setRemoveSharedPartnerModal,p=u.businessAccess.businessId,h=(null==s||null==(t=s.created_by_business)?void 0:t.id)||"",b=(0,e_.u)().logContextEvent,y=(0,g.ZP)("BUSINESS_ACCESS_BUSINESS_HIERARCHY"),A=(0,f.TH)(),v=(0,(0,C.Z)().checkExperiment)("web_m10n_business_hierarchy_beta").anyEnabled,S=(0,x.Z)(),P=S.isAuth?null==S?void 0:S.avatar_color_index:void 0;return(0,_.jsx)(ej.Z,{items:s?[(0,_.jsx)(function(e){var t=e.partner;return(0,_.jsx)(i.xu,{padding:4,children:(0,_.jsxs)(i.kC,{alignItems:"center",justifyContent:"between",children:[(0,_.jsxs)(i.kC,{alignItems:"center",gap:2,children:[t&&t.user.full_name&&(0,_.jsx)(B.qE,{color:P,name:t.user.full_name,size:"md",src:t.user.image_small_url}),(0,_.jsxs)(i.kC,{direction:"column",gap:1,children:[(0,_.jsx)(i.xv,{color:"default",size:"400",weight:"bold",children:null==t?void 0:t.user.full_name}),(0,_.jsxs)(i.kC,{alignItems:"center",children:[(0,_.jsx)(i.xv,{color:"subtle",size:"200",children:(0,c.nk)(a._('Business ID: {{ businessID }}', '[m10n]businessAccess.businessHierarchy.partnerDetail.businessId', 'Text to display the business ID. businessID: Is the business ID of the account'),{businessID:null==t?void 0:t.id})}),(null==t?void 0:t.id)&&(0,_.jsx)(eu.Z,function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?to(Object(s),!0).forEach(function(t){var n,r;n=t,r=s[t],(n=function(e){var t=function(e,t){if("object"!=ti(e)||!e)return e;var s=e[Symbol.toPrimitive];if(void 0!==s){var n=s.call(e,t||"default");if("object"!=ti(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ti(t)?t:t+""}(n))in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):to(Object(s)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))})}return e}({page:n.Q6.BUSINESS_HIERARCHY,text:t.id},(0,ed.i)(ed.O.BUSINESS_ID,a)))]})]})]}),v&&(0,_.jsx)(i.zx,{onClick:function(){(0,em.dK)(A)?y({eventName:"BUSINESS_ACCESS_ACTION",component:"BUSINESS_ACCESS_CONTAINER",componentId:"partner-summary",element:"BUSINESS_ACCESS_BUTTON",elementId:"remove-partner",partner_id:null==t?void 0:t.id}):b({event_type:101,component:14412,element:107,aux_data:{partner_id:null==t?void 0:t.id}}),t&&(p===h?d({businessId:p,partnerId:t.id,refreshData:r}):m({businessId:p,partnerId:t.id,refreshData:r}))},text:a._('Remove partner', '[m10n]bizAccess.partner.detail.remove.partner', '[m10n] button that removed a partner')})]})})},{partner:s},"PartnerSummaryTop"),(0,_.jsx)(function(e){var t,s,n,r,o=e.partner,a=(0,l.ZP)();return(0,_.jsxs)(i.xu,{direction:"row",display:"flex",padding:4,children:[(0,_.jsxs)(i.sg,{span:6,children:[(0,_.jsx)(i.xu,{marginBottom:1,children:(0,_.jsx)(i.xv,{size:"200",weight:"bold",children:a._('Relationship', '[m10n]bizAccess.partner.detail.relationship', '[m10n] label that shows partner relationship')})}),(0,_.jsx)(i.xv,{size:"200",children:(0,tr.Z)(a._('Advertising for {{ fullName }}', '[m10n]bizAccess.business.partners.details.relationship.theyAdded', 'Sentence to say in table row that the other business added the partnership with the currently active business. fullName: name of the partner'),{fullName:null!=o&&o.is_shared_partner?null!=(t=o.user.full_name)?t:"":null!=(s=null==o||null==(n=o.created_by_user)?void 0:n.full_name)?s:""})})]}),(0,_.jsxs)(i.sg,{span:6,children:[(0,_.jsx)(i.xu,{marginBottom:1,children:(0,_.jsx)(i.xv,{size:"200",weight:"bold",children:a._('Date added', '[m10n]bizAccess.people.detail.dateAdded', 'Field that shows date when member was added')})}),(0,_.jsx)(i.xv,{size:"200",children:(0,c.nk)(a._('{{creationDate}} by {{partnerCreator}}', '[m10n]bizAccess.partner.summary.createdAt', 'The title to be displayed to an partner detail page, creationDate: the date when partner was created, partnerCreator: the name of who created the partnership'),{creationDate:(0,_.jsx)(ec.Z,{dateFormatType:ec.k.LONG,useUTC:!1,value:new Date((null==o?void 0:o.created_time)||0)},"bh_partner_created_date"),partnerCreator:null==o||null==(r=o.created_by_user)?void 0:r.full_name})})]})]})},{partner:s},"PartnerSummaryBottom")]:[(0,_.jsx)(i.xH,{accessibilityLabel:(0,o.hC)(a),show:!0},"spinner")]})};function tl(e,t){(null==t||t>e.length)&&(t=e.length);for(var s=0,n=Array(t);s<t;s++)n[s]=e[s];return n}var tc=function(){var e=(0,l.ZP)(),t=(0,_.jsxs)(i.kC,{alignItems:"center",direction:"column",justifyContent:"center",minHeight:"calc(100vh - 561px)",children:[(0,_.jsx)(i.xv,{size:"300",children:e._('You have not assigned profile access', '[m10n]businessAccess.businessHierarchy.profiles.empty.title', 'Title shown on panel to indicate that user has no assigned profiles')}),(0,_.jsx)(i.xu,{marginTop:2,maxWidth:480,children:(0,_.jsx)(i.kC,{alignItems:"center",direction:"column",justifyContent:"center",children:(0,_.jsx)(i.xv,{align:"center",color:"subtle",inline:!0,size:"200",children:(0,c.nk)(e._('Assign the Publisher permission so that your partner can work on your profile, boards and Pins without sharing login credentials. {{learnMore}}', '[m10n]businessAccess.businessHierarchy.profiles.empty.message', 'Message shown on panel to indicate that user has no assigned profiles. learnMore: text with link to profile permissions help page'),{learnMore:(0,_.jsx)(eK.mz,{},1)})},0)})})]},"profile-empty-state");return(0,_.jsx)(ej.Z,{items:[t]})},tu=function(){var e=(0,l.ZP)(),t=(0,_.jsxs)(i.kC,{alignItems:"center",direction:"column",justifyContent:"center",minHeight:"calc(100vh - 561px)",children:[(0,_.jsx)(i.xv,{size:"300",children:e._('No profile access', '[m10n]businessAccess.businessHierarchy.requestProfile.empty.title', 'Title shown on panel to indicate that user has no permission to the profile')}),(0,_.jsx)(i.xu,{marginTop:2,maxWidth:480,children:(0,_.jsx)(i.kC,{alignItems:"center",direction:"column",justifyContent:"center",children:(0,_.jsx)(i.xv,{align:"center",color:"subtle",inline:!0,size:"200",children:(0,c.nk)(e._('Request the Publisher permission to work on your partner\'s profile, boards and Pins without requiring their login credentials. {{learnMore}}', '[m10n]businessAccess.businessHierarchy.requestProfile.empty.message', 'Message shown on panel to indicate that user has no permission to the profile. learnMore: text with link to profile permissions help page'),{learnMore:(0,_.jsx)(eK.mz,{},1)})},0)})})]},"request-profile-empty-state");return(0,_.jsx)(ej.Z,{items:[t]})},td=function(e){var t,s,n=e.partner,r=e.partnerRole,o=e.onBackClick,a=e.closePanels,c=e.pageType,u=e.adAccounts,d=e.adAccountsIsLoading,m=e.adAccountsTableConfiguration,b=e.adAccountsFetchData,f=e.adAccountsCurrentPageSelector,y=e.adAccountsTotalCountSelector,A=e.adAccountsPageSizeSelector,v=e.adAccountsSearchTermSelector,g=e.adAccountsColumnDefs,S=e.adAccountsOnRowClick,P=e.employees,x=e.employeesIsLoading,j=e.employeesTableConfiguration,I=e.employeesFetchData,E=e.employeesColumnDefs,O=(0,l.ZP)(),z=function(e){if(Array.isArray(e))return e}(t=(0,p.useState)(0))||function(e,t){var s=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=s){var n,r,i,o,a=[],l=!0,c=!1;try{for(i=(s=s.call(e)).next;!(l=(n=i.call(s)).done)&&(a.push(n.value),2!==a.length);l=!0);}catch(e){c=!0,r=e}finally{try{if(!l&&null!=s.return&&(o=s.return(),Object(o)!==o))return}finally{if(c)throw r}}return a}}(t,2)||function(e,t){if(e){if("string"==typeof e)return tl(e,2);var s=({}).toString.call(e).slice(8,-1);return"Object"===s&&e.constructor&&(s=e.constructor.name),"Map"===s||"Set"===s?Array.from(e):"Arguments"===s||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s)?tl(e,2):void 0}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),w=z[0],T=z[1],N=(0,Z.HU)(),B=N.setSelectedPartnerId,R=N.setSelectedDetail,D=(0,Z.KJ)(!0),k=(0,(0,C.Z)().checkExperiment)("web_m10n_business_hierarchy_beta").anyEnabled;O._('Back to business details', '[m10n]businessAccess.businessHierarchy.assets.tab.label', 'business hierarcy assets tab label'),a&&(null==o||o()),(0,p.useEffect)(function(){0===w?null==b||b({limit:eF.TJ["0"]}):1===w&&(null==I||I({limit:eF.TJ["0"]}))},[w]),(0,p.useEffect)(function(){n&&(R({detailId:n.id}),B(n.id))},[n,B,R]);var H=(0,Z.Dl)(),L=(0,h.v9)((0,Q.BK)(H)),U=L.is_shared_partner,M=(0,h.v9)((0,Q.mr)(null!=(s=L.id)?s:"")),F=M&&M.profiles&&M.profiles.length>0;return(0,_.jsx)(ew,{onBackClick:o||function(){},children:(0,_.jsxs)(p.Fragment,{children:[(0,_.jsx)(ta,{onBackClick:o,partner:n}),(0,_.jsxs)(i.xu,{marginTop:4,children:[(0,_.jsxs)(i.kC,{justifyContent:"between",children:[(0,_.jsx)(i.mQ,{activeTabIndex:w,onChange:function(e){var t=e.activeTabIndex,s=e.event,n=e.dangerouslyDisableOnNavigation;s.preventDefault(),n(),T(t)},tabs:[{href:"#",text:O._('Ad accounts', '[m10n]businessAccess.businessHierarchy.partnerDetail.tab.adAccounts', 'Partner details ad accounts tab label')},{href:"#",text:O._('Profile Access', '[m10n]businessAccess.businessHierarchy.partnerDetail.tab.profile', 'Partner\'s accesses to the profile')}]}),k&&(0,_.jsx)(ts,{})]}),(0,_.jsxs)(i.xu,{marginTop:4,children:[0===w&&(0,_.jsx)(e$.Z,{adAccounts:u,adAccountsColumnDefs:g,adAccountsCurrentPageSelector:f,adAccountsFetchData:b,adAccountsIsLoading:d,adAccountsOnRowClick:S,adAccountsPageSizeSelector:A,adAccountsSearchTermSelector:v,adAccountsTableConfiguration:m,adAccountsTotalCountSelector:y,emptyState:U?(0,_.jsx)(eK.$2,{}):(0,_.jsx)(eK.FW,{}),pageType:c}),1===w&&U&&F&&(0,_.jsx)(eZ.Z,{employees:P,employeesColumnDefs:E,employeesFetchData:I,employeesIsLoading:x,employeesTableConfiguration:j,emptyState:(0,_.jsx)(eK.uX,{}),pageType:c}),1===w&&U&&!F&&(0,_.jsx)(tu,{}),1===w&&!U&&n&&!!r&&(0,_.jsx)(tn.Z,{businessId:D,partner:n,partnerRole:r}),1===w&&!U&&!r&&(0,_.jsx)(tc,{})]})]})]})})},t_=function(e){var t=e.profile,s=e.businessAccount;return(0,_.jsx)(function(e){var t,s,n=e.profile,r=e.businessAccount,o=(0,e_.u)().logContextEvent,a=(0,l.ZP)(),u=(0,(0,C.Z)().checkExperiment)("web_m10n_business_hierarchy_beta").anyEnabled,d=null==n||null==(t=n.permissions)?void 0:t.includes("OWNER"),m=(0,x.Z)(),p=m.isAuth?null==m?void 0:m.avatar_color_index:void 0;return(0,_.jsx)(i.xu,{borderStyle:"sm",dangerouslySetInlineStyle:{__style:{borderColor:"#e9e9e9"}},padding:4,rounding:4,children:(0,_.jsxs)(i.kC,{justifyContent:"between",children:[(0,_.jsxs)(i.kC,{alignItems:"center",gap:2,children:[(0,_.jsx)(B.qE,{color:p,name:(null==n?void 0:n.asset.name)||"",size:"md",src:null==n?void 0:n.asset.image_small_url}),(0,_.jsxs)(i.kC,{direction:"column",gap:1,children:[(0,_.jsx)(i.xv,{color:"default",size:"400",weight:"bold",children:null==n?void 0:n.asset.name}),!d&&(0,_.jsx)(i.xv,{color:"subtle",size:"200",children:(0,c.nk)(a._('{{profileName}} shared their profile with {{businessAccountName}}', '[m10n]bizAccess.profile.summary.description', 'Text to display the profile sharing details, profileName:the profile name that will be displayed, businessAccountName:the profile name that will be displayed'),{profileName:null==n?void 0:n.asset.name,businessAccountName:null==r||null==(s=r.user)?void 0:s.full_name}).join("")})]})]}),u&&(0,_.jsx)(i.ZP,{href:null!=n&&n.owner.username?"/".concat(n.owner.username):"#",iconEnd:"visit",onClick:function(){o({event_type:101,component:13854,element:12679,aux_data:{business_id:null==n?void 0:n.asset.id}})},text:a._('Visit profile', '[m10n]bizAccess.profile.summary.visit.button', 'Text in button that redirects user to selected profile')})]})})},{businessAccount:s,profile:t},"ProfileSummaryTop")},tm=function(e){var t=e.businessAccount,s=e.profile,n=e.onBackClick,r=e.closePanels,i=e.employees,o=e.employeesTableConfiguration,a=e.employeesIsLoading,l=e.employeesFetchData,c=e.employeesColumnDefs,u=e.employeesOnRowClick,d=e.partners,m=e.partnersTableConfiguration,h=e.partnersIsLoading,b=e.partnersFetchData,f=e.partnersColumnDefs,y=e.partnersOnRowClick,A=e.hidePartnersTab,v=e.pageType,g=(0,Z.HU)(),S=g.setSelectedDetail,P=g.setSelectedProfile;return r&&n(),(0,p.useEffect)(function(){var e;S({detailId:null!=(e=null==s?void 0:s.asset.id)?e:""}),P(s)},[s,S,P]),(0,_.jsx)(ew,{onBackClick:n||function(){},children:(0,_.jsxs)(p.Fragment,{children:[(0,_.jsx)(t_,{businessAccount:t,profile:s}),(0,_.jsx)(eG,{employees:i,employeesColumnDefs:c,employeesFetchData:l,employeesIsLoading:a,employeesOnRowClick:u,employeesTableConfiguration:o,hidePartnersTab:A,pageType:v,parentComponent:14399,partners:d,partnersColumnDefs:f,partnersFetchData:b,partnersIsLoading:h,partnersOnRowClick:y,partnersTableConfiguration:m,showProfilesAssignDropdown:!0})]})})},tp=s(319448),th=s(478676);function tb(e){return(tb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function tf(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),s.push.apply(s,n)}return s}function ty(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?tf(Object(s),!0).forEach(function(t){var n,r;n=t,r=s[t],(n=function(e){var t=function(e,t){if("object"!=tb(e)||!e)return e;var s=e[Symbol.toPrimitive];if(void 0!==s){var n=s.call(e,t||"default");if("object"!=tb(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==tb(t)?t:t+""}(n))in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):tf(Object(s)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))})}return e}var tA=function(e){var t=(0,h.I0)();return e?function(s){var n=s||{},r=n.searchTerm,i=n.limit,o=n.page,a=ty(ty({searchBy:r?"name_or_id":void 0,searchTerm:r,businessId:e,sortBy:n.sortBy,sortDirection:n.sortDirection},i?{limit:i}:{}),o?{page:o}:{});t((0,D.lo)(a))}:null};function tv(e){return(tv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function tg(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),s.push.apply(s,n)}return s}function tS(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?tg(Object(s),!0).forEach(function(t){var n,r;n=t,r=s[t],(n=function(e){var t=function(e,t){if("object"!=tv(e)||!e)return e;var s=e[Symbol.toPrimitive];if(void 0!==s){var n=s.call(e,t||"default");if("object"!=tv(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==tv(t)?t:t+""}(n))in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):tg(Object(s)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))})}return e}var tP=function(e){var t=(0,h.I0)();return e?function(s){var n=s||{},r=n.searchTerm,i=n.limit,o=n.page,a=tS(tS({searchBy:r?"name_or_id":void 0,searchTerm:r,businessId:e,sortBy:n.sortBy,sortDirection:n.sortDirection},i?{limit:i}:{}),o?{page:o}:{});t((0,D.jk)(a))}:null},tx=s(858823),tC=s(616231);function tj(e){return(tj="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function tI(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),s.push.apply(s,n)}return s}function tE(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?tI(Object(s),!0).forEach(function(t){var n,r;n=t,r=s[t],(n=function(e){var t=function(e,t){if("object"!=tj(e)||!e)return e;var s=e[Symbol.toPrimitive];if(void 0!==s){var n=s.call(e,t||"default");if("object"!=tj(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==tj(t)?t:t+""}(n))in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):tI(Object(s)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))})}return e}var tO=function(e){var t=(0,h.I0)();return e?function(s){var n=s||{},r=n.searchTerm,i=n.limit,o=n.page,a=tE(tE({searchBy:r?"name_or_id":void 0,searchTerm:r,businessId:e,sortBy:n.sortBy,sortDirection:n.sortDirection},i?{limit:i}:{}),o?{page:o}:{});t((0,D.cp)(a))}:null},tz=s(948839),tw=s(853473),tT=s(333344),tN=function(e,t){var s=(t||{}).field,n=function(n){var r=e._('Advertising for {{ fullName }}', '[m10n]bizAccess.business.partners.details.relationship.theyAdded', 'Sentence to say in table row that the other business added the partnership with the currently active business. fullName: name of the partner');if(null!=t&&t.valueGetter)return(0,c.nk)(r,{fullName:t.valueGetter(n)});var i,o,a,l=s&&n[s]||n.is_shared_partner?null!=(i=n.user.full_name)?i:"":null!=(o=null==(a=n.created_by_user)?void 0:a.full_name)?o:"";return(0,c.nk)(r,{fullName:l})};return{field:"relationship",headerName:e._('Relationship', '[m10n]bizAccess.business.partners.relationship', 'Table column title to indicate whether the partnership was created by the active business or by the other business'),TableCellComponent:tT.Z,valueGetter:function(e){return e?n(e):tz.I.noDataSymbol},minWidth:tz.I.columnWidths.md}},tB=s(493293),tR=s(105947),tD=s(648493),tk=s(597648),tH=s(505005);function tL(e){return(tL="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function tU(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),s.push.apply(s,n)}return s}function tZ(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?tU(Object(s),!0).forEach(function(t){tM(e,t,s[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):tU(Object(s)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))})}return e}function tM(e,t,s){var n;return(n=function(e,t){if("object"!=tL(e)||!e)return e;var s=e[Symbol.toPrimitive];if(void 0!==s){var n=s.call(e,t||"default");if("object"!=tL(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==tL(n)?n:n+"")in e)?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function tF(e,t){(null==t||t>e.length)&&(t=e.length);for(var s=0,n=Array(t);s<t;s++)n[s]=e[s];return n}var tY=function(e){var t,s=e.setSelectedEntityType,r=e.setSelectedAdAccount,o=e.setSelectedProfile,a=e.setSelectedAssetGroup,c=e.setSelectedCatalog,u=e.expandedIndex,d=e.setExpandedIndex,m=e.activeTabIndex,b=void 0===m?0:m,y=e.setActiveTabIndex,A=(0,e_.u)().logContextEvent,S=(0,p.useRef)(!0),P=(0,p.useRef)(!0),x=(0,h.I0)(),C=(0,l.ZP)(),j=function(e){if(Array.isArray(e))return e}(t=(0,p.useState)(!1))||function(e,t){var s=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=s){var n,r,i,o,a=[],l=!0,c=!1;try{for(i=(s=s.call(e)).next;!(l=(n=i.call(s)).done)&&(a.push(n.value),2!==a.length);l=!0);}catch(e){c=!0,r=e}finally{try{if(!l&&null!=s.return&&(o=s.return(),Object(o)!==o))return}finally{if(c)throw r}}return a}}(t,2)||function(e,t){if(e){if("string"==typeof e)return tF(e,2);var s=({}).toString.call(e).slice(8,-1);return"Object"===s&&e.constructor&&(s=e.constructor.name),"Map"===s||"Set"===s?Array.from(e):"Arguments"===s||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s)?tF(e,2):void 0}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),I=j[0],E=j[1],O=(0,g.ZP)("BUSINESS_ACCESS_BUSINESS_HIERARCHY"),z=(0,f.TH)(),w=(0,Z.MC)(),T=(0,Z.HU)(),N=T.setRemovePartnerModal,B=T.setRemoveSharedPartnerModal,R=T.setSelectedEmployeeId,D=T.setSelectedPartnerId,k=(0,f.s0)(),H=(0,h.v9)(Q.Xy),L=(0,h.v9)(Q.wk),U=(0,h.v9)(Q.Wb),M=(0,h.v9)(Q.h$),F=(0,h.v9)(Q.Sl),Y=(0,h.v9)(Q._1),G=(0,h.v9)(Q.yY),W=(0,h.v9)(Q.JQ),q=(0,h.v9)(Q.A0),K=(0,h.v9)(Q.HW),V=(0,h.v9)(Q.zW),J=(0,h.v9)(Q.e_),$=(0,eo.Z)("ad-accounts"),X=(0,eo.Z)("employees"),ee=(0,eo.Z)("partners"),et=(0,eo.Z)("profiles"),es=(0,eo.Z)("asset-groups"),en=(0,eo.Z)("catalogs"),er=(0,th.Z)(null==w?void 0:w.user.id),ei=tO(null==w?void 0:w.user.id),ea=(0,tx.Z)(null==w?void 0:w.user.id),ec=(0,tC.Z)(null==w?void 0:w.user.id),eu=tA(null==w?void 0:w.user.id),ed=tP(null==w?void 0:w.user.id),ep=(0,p.useMemo)(function(){var e,t,s;return tM(s={},0,(tM(e={},el.J.AD_ACCOUNTS,er),tM(e,el.J.PROFILES,ei),tM(e,el.J.ASSET_GROUPS,eu),tM(e,el.J.CATALOGS,ed),e)),tM(s,1,(tM(t={},tp.J.EMPLOYEES,ea),tM(t,tp.J.PARTNERS,ec),t)),s},[er,ei,eu,ea,ec,ed]);if((0,p.useEffect)(function(){if(w){var e=ep[b][u];e&&e({})}},[w]),!er||!ea||!ec||!ei||!w||!eu||!ed)return null;var eh=function(e){S.current?(S.current=!1,ea(tZ(tZ({},e),{},{searchTerm:""}))):ea(e)},eb=function(e){P.current?(P.current=!1,ec(tZ(tZ({},e),{},{searchTerm:""}))):ec(e)};return(0,_.jsxs)(i.xu,{marginTop:2,children:[(0,_.jsxs)(i.kC,{justifyContent:"between",children:[(0,_.jsx)(i.mQ,{activeTabIndex:b,onChange:function(e){var t=e.activeTabIndex,s=e.event,n=e.dangerouslyDisableOnNavigation;s.preventDefault(),n(),y(t),null==d||d(null),O({eventName:"BUSINESS_ACCESS_ACTION",component:"BUSINESS_ACCESS_NAVIGATION",componentId:"business-hierarchy-panel",element:"BUSINESS_ACCESS_LINK",elementId:0===t?"assets.tab":"members.tab"})},tabs:[{href:"#",text:C._('Assets', '[m10n]businessAccess.businessHierarchy.assets.tab.label', 'business hierarcy assets tab label')},{href:"#",text:C._('Members', '[m10n]businessAccess.businessHierarchy.members.tab.label', 'business hierarchy members tab label')}]}),"BUSINESS_ACCOUNT"===w.entity_type&&(0,_.jsx)(eq,{})]}),(0,_.jsxs)(i.xu,{marginTop:2,children:[0===b&&(0,_.jsx)(p.Fragment,{children:(0,_.jsx)(el.Z,{adAccounts:H,adAccountsColumnDefs:[(0,tB.Z)(C,{weight:tz.I.weights.bold,headerName:C._('Ad account name', '[m10n]businessAccess.businessHierarchy.assets.adAccounts', 'column name for an asstets ad accounts'),clickable:!1}),(0,tR.Z)(C),(0,tw.Z)(C,"AD_ACCOUNT","REMOVE_OR_LINK",{iconSize:"xs"},er)],adAccountsFetchData:function(e){E(!1),er(e)},adAccountsIsLoading:L,adAccountsOnRowClick:function(e){r(H.find(function(t){return t.asset.id===(null==e?void 0:e.asset.id)})),s("AD_ACCOUNT")},adAccountsTableConfiguration:$,assetGroupsTable:{pageType:n.Q6.BUSINESS_HIERARCHY,assetGroups:q,assetGroupsIsLoading:K,assetGroupsFetchData:function(e){E(!1),eu(e)},assetGroupsColumnDefs:[(0,tB.Z)(C,{weight:tz.I.weights.bold,headerName:C._('Asset group name', '[m10n]businessAccess.businessHierarchy.asset.groups', 'column name for an asstet groups'),clickable:!1,onClick:function(e){a(q.find(function(t){return t.id===(null==e?void 0:e.id)})),s("ASSET_GROUP")}}),(0,tR.Z)(C),(0,tw.t)(C,{headerName:C._('Actions', '[m10n]businessHierarchy.actions', 'column of actions that can be taken on user'),actions:[{key:"visitAssetGroup",icon:"arrow-up-right",onClick:function(e){x((0,tH.uK)({assetGroupId:e.id||""})),k((0,v.Z)(n.Q6.ASSET_GROUPS,w.user.id))},tooltipText:C._('Visit asset group', '[m10n]businessAccess.businessHierarchy.column.visit.asset.group', 'tooltip text for visit asset group')}]})],assetGroupsTableConfiguration:es},catalogs:V,catalogsColumnDefs:[(0,tB.Z)(C,{weight:tz.I.weights.bold,headerName:C._('Catalog name', '[m10n]businessAccess.businessHierarchy.assets.catalogs', 'column name for a catalog'),clickable:!1,onClick:function(e){c(V.find(function(t){return t.id===(null==e?void 0:e.id)})),s("CATALOG")}}),(0,tR.Z)(C),(0,tw.t)(C,{headerName:C._('Actions', '[m10n]businessHierarchy.actions', 'column of actions that can be taken on user'),actions:[{key:"visitCatalog",icon:"arrow-up-right",tooltipText:C._('View catalog', '[m10n]businessAccess.businessHierarchy.column.visit.catalog', 'tooltip text for visit profile'),onClick:function(e){var t;k(null!=e&&null!=(t=e.asset)&&t.id?"/business/catalogs/".concat(e.asset.id,"/product-groups/?subjectBusinessId=").concat(e.owner.id,"&actingBusinessId=").concat(w.user.id):"#")}}]})],catalogsFetchData:function(e){E(!1),ed(e)},catalogsIsLoading:J,catalogsOnRowClick:function(e){c(V.find(function(t){return t.id===(null==e?void 0:e.id)})),s("CATALOG")},catalogsTableConfiguration:en,closePanels:I,expandedIndex:u,pageType:n.Q6.BUSINESS_HIERARCHY,profiles:G,profilesColumnDefs:[(0,tB.Z)(C,{weight:tz.I.weights.bold,headerName:C._('Profile name', '[m10n]businessAccess.businessHierarchy.assets.profiles', 'column name for an asstets profiles'),hidesAvatar:!1,clickable:!1}),(0,tw.t)(C,{headerName:C._('Actions', '[m10n]businessHierarchy.actions', 'column of actions that can be taken on user'),actions:[{key:"visitProfile",icon:"arrow-up-right",tooltipText:C._('View profile', '[m10n]businessAccess.businessHierarchy.column.visit.profile', 'tooltip text for visit profile'),onClick:function(e){k(e.owner.username?"/".concat(e.owner.username):"#")}}]})],profilesFetchData:function(e){E(!1),ei(e)},profilesIsLoading:W,profilesOnRowClick:function(e){o(G.find(function(t){return t.asset.id===(null==e?void 0:e.asset.id)})),s("PROFILE")},profilesTableConfiguration:et,setExpandedIndex:d})}),1===b&&(0,_.jsx)(tp.Z,{closePanels:I,employees:U,employeesColumnDefs:[(0,tD.Z)(C,{headerName:C._('Employee name', '[m10n]businessAccess.businessHierarchy.members.employees', 'column name for a members employees'),type:"PEOPLE",clickable:!1}),(0,tk.Z)(C,{field:"business_roles"}),(0,tw.Z)(C,"PEOPLE","EDIT_OR_REMOVE",{iconSize:"xs"})],employeesFetchData:function(e){E(!1),eh(e)},employeesIsLoading:M,employeesOnRowClick:function(e){R(null==e?void 0:e.id)},employeesTableConfiguration:X,expandedIndex:u,pageType:n.Q6.BUSINESS_HIERARCHY,partners:F,partnersColumnDefs:[(0,tD.Z)(C,{headerName:C._('Partner name', '[m10n]businessAccess.businessHierarchy.members.partners', 'column name for a members partners'),type:"PARTNER",showDescriptor:!0,clickable:!1}),tN(C),(0,tw.t)(C,{headerName:C._('Actions', '[m10n]businessHierarchy.actions', 'column of actions that can be taken on user'),actions:[{key:"removePartner",icon:"remove",tooltipText:C._('Remove partner', '[m10n]businessAccess.businessHierarchy.members.partners.remove.button', 'tooltip text for remove partner'),onClick:function(e){(0,em.dK)(z)?O({eventName:"BUSINESS_ACCESS_ACTION",component:"BUSINESS_ACCESS_TABLE",componentId:"partners-table",element:"BUSINESS_ACCESS_BUTTON",elementId:"remove-button",partner_id:e.id}):A({event_type:101,component:14408,element:107,aux_data:{partner_id:e.id,component_id:"members-tab-partners-section"}});var t,s=(null==(t=e.created_by_business)?void 0:t.id)||"";w.user.id===s?N({businessId:w.user.id,partnerId:e.id,refreshData:ec}):B({businessId:w.user.id,partnerId:e.id,refreshData:ec})}}]})],partnersFetchData:function(e){E(!1),eb(e)},partnersIsLoading:Y,partnersOnRowClick:function(e){D(null==e?void 0:e.id),s("PARTNER")},partnersTableConfiguration:ee,setExpandedIndex:d,systemUsers:[],systemUsersColumnDefs:[],systemUsersIsLoading:!1})]})]})};function tG(e){return(tG="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function tW(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),s.push.apply(s,n)}return s}function tQ(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?tW(Object(s),!0).forEach(function(t){var n,r;n=t,r=s[t],(n=function(e){var t=function(e,t){if("object"!=tG(e)||!e)return e;var s=e[Symbol.toPrimitive];if(void 0!==s){var n=s.call(e,t||"default");if("object"!=tG(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==tG(t)?t:t+""}(n))in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):tW(Object(s)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))})}return e}var tq=function(e){var t=(0,h.I0)();return e?function(s){var n=s||{},r=n.searchTerm,i=n.limit,o=n.page,a=tQ(tQ({searchTerm:r,businessHierarchyLookupId:e,sortBy:n.sortBy,sortDirection:n.sortDirection},i?{limit:i}:{}),o?{page:o}:{});t((0,D.hy)(a,"EMPLOYEE"))}:null};function tK(e){return(tK="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function tV(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),s.push.apply(s,n)}return s}function tJ(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?tV(Object(s),!0).forEach(function(t){var n,r;n=t,r=s[t],(n=function(e){var t=function(e,t){if("object"!=tK(e)||!e)return e;var s=e[Symbol.toPrimitive];if(void 0!==s){var n=s.call(e,t||"default");if("object"!=tK(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==tK(t)?t:t+""}(n))in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):tV(Object(s)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))})}return e}var t$=function(e){var t=(0,h.I0)();return e?function(s){var n=s||{},r=n.searchTerm,i=n.limit,o=n.page,a=tJ(tJ({searchTerm:r,businessHierarchyLookupId:e,sortBy:n.sortBy,sortDirection:n.sortDirection},i?{limit:i}:{}),o?{page:o}:{});t((0,D.hy)(a,"PARTNER"))}:null},tX=function(e){var t=e.employees,s=e.employeesTableConfiguration,n=e.employeesIsLoading,r=e.employeesFetchData,i=e.employeesColumnDefs,o=e.employeesOnRowClick,a=e.partners,l=e.partnersTableConfiguration,c=e.partnersIsLoading,u=e.partnersFetchData,d=e.partnersColumnDefs,m=e.partnersOnRowClick,h=e.pageType;return(0,_.jsx)(p.Fragment,{children:(0,_.jsx)(eG,{employees:t,employeesColumnDefs:i,employeesFetchData:r,employeesIsLoading:n,employeesOnRowClick:o,employeesTableConfiguration:s,pageType:h,parentComponent:14399,partners:a,partnersColumnDefs:d,partnersFetchData:u,partnersIsLoading:c,partnersOnRowClick:m,partnersTableConfiguration:l})})},t0=s(288459),t1=function(e,t){var s=t.field,n=t.headerName,r=t.sortField,i=t.valueGetter;return{field:s,headerName:n,minWidth:tz.I.columnWidths.md,TableCellComponent:tT.Z,getMinHeight:function(){return 54},sortable:!!r,sortField:r,valueGetter:i||function(e){return e[s]}}};function t2(e){return(t2="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function t3(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),s.push.apply(s,n)}return s}function t6(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?t3(Object(s),!0).forEach(function(t){var n,r;n=t,r=s[t],(n=function(e){var t=function(e,t){if("object"!=t2(e)||!e)return e;var s=e[Symbol.toPrimitive];if(void 0!==s){var n=s.call(e,t||"default");if("object"!=t2(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==t2(t)?t:t+""}(n))in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):t3(Object(s)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))})}return e}function t9(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var s=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=s){var n,r,i,o,a=[],l=!0,c=!1;try{if(i=(s=s.call(e)).next,0===t){if(Object(s)!==s)return;l=!1}else for(;!(l=(n=i.call(s)).done)&&(a.push(n.value),a.length!==t);l=!0);}catch(e){c=!0,r=e}finally{try{if(!l&&null!=s.return&&(o=s.return(),Object(o)!==o))return}finally{if(c)throw r}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return t4(e,t);var s=({}).toString.call(e).slice(8,-1);return"Object"===s&&e.constructor&&(s=e.constructor.name),"Map"===s||"Set"===s?Array.from(e):"Arguments"===s||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s)?t4(e,t):void 0}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t4(e,t){(null==t||t>e.length)&&(t=e.length);for(var s=0,n=Array(t);s<t;s++)n[s]=e[s];return n}var t8=function(e){var t,s,n,r;return{id:"",user:{id:(null==(t=e.member)?void 0:t.id)||"",email:(null==(s=e.member)?void 0:s.email)||"",full_name:(null==(n=e.member)?void 0:n.full_name)||"",image_medium_url:(null==(r=e.member)?void 0:r.image_medium_url)||""}}},t5=function(e){var t=e.setSelectedEntityType,s=(0,p.useRef)(!0),r=(0,p.useRef)(!0),o=(0,x.Z)(),a=o.isAuth?o.id:void 0,c=t9((0,p.useState)(),2),u=c[0],d=c[1],m=t9((0,p.useState)(),2),b=m[0],f=m[1],y=(0,l.ZP)(),v=(0,h.I0)(),S=(0,Z.nC)(),P=(0,Z.HU)(),C=P.setSelectedEmployeeId,j=P.setSelectedPartnerId,I=P.setEditPersonRoleModal,E=P.setRemovePartnerModal,O=P.setRemoveSharedPartnerModal,z=P.setSelectedBusiness,w=P.setRemovePersonModal,T=P.businessAccess.business,N=(0,A.g)().businessHierarchies,B=(0,g.ZP)("BUSINESS_ACCESS_BUSINESS_HIERARCHY"),R=function(e){return N.flatMap(function(e){return"BUSINESS_HIERARCHY"===e.entity_type?e.children.map(function(e){return e}):e}).find(function(t){return t.user.id===e})},k=(0,h.v9)(Q.oe),H=(0,h.v9)(Q.du),L=(0,eo.Z)("business-hierarchy-business-members"),U=tq(null==S?void 0:S.id),M=t$(null==S?void 0:S.id);if((0,p.useEffect)(function(){!H&&b&&T&&(C(b),t("EMPLOYEE"))},[H,b,C,t,z,T]),(0,p.useEffect)(function(){!H&&u&&T&&(j(u),t("PARTNER"))},[H,u,j,t,z,T]),!U||!M||!S)return null;var F=[(0,tD.Z)(y,{field:"member",valueGetter:t8,headerName:y._('Employee name', '[m10n]businessAccess.businessHierarchy.details.employees.name', 'column name for employee name'),type:"PEOPLE",clickable:!1,sortField:"MEMBER_FULL_NAME"}),t1(y,{field:"business",valueGetter:function(e){return e.business.full_name},headerName:y._('Child business', '[m10n]businessAccess.businessHierarchy.details.employees.childBusiness', 'column name for child business the employee belongs to'),sortField:"BUSINESS_FULL_NAME"}),(0,t0.Z)(y,{valueGetter:function(e){return(0,eA.B)(y)(e.business_role)},headerName:y._('Role', '[m10n]businessAccess.businessHierarchy.details.employees.role', 'column name for employee role')}),(0,tw.t)(y,{headerName:y._('Actions', '[m10n]businessHierarchy.actions', 'column of actions that can be taken on user'),actions:[{key:"editEmployee",icon:"edit",tooltipText:y._('Edit employee', '[m10n]businessAccess.businessHierarchy.employees.edit.button', 'tooltip text for edit employee'),onClick:function(e){B({eventName:"BUSINESS_ACCESS_ACTION",component:"BUSINESS_ACCESS_TABLE",componentId:"employees-table",element:"BUSINESS_ACCESS_BUTTON",elementId:"edit-button",employee_id:e.member.id}),z(R(e.business.id||"")),I({businessId:e.business.id||"",selectedId:e.member.id,onRefresh:U,isBusinessAccess:!0})}},{key:"removeEmployee",icon:"remove",disabled:function(e){return a===e.member.id},tooltipText:function(e){return a===e.member.id?y._('You cannot remove yourself', '[m10n]businessAccess.businessHierarchy.employees.remove.button', 'tooltip if you try to remove yourself'):y._('Remove employee', '[m10n]businessAccess.businessHierarchy.employees.remove.button', 'remove employee from business')},onClick:function(e){B({eventName:"BUSINESS_ACCESS_ACTION",component:"BUSINESS_ACCESS_TABLE",componentId:"employees-table",element:"BUSINESS_ACCESS_BUTTON",elementId:"remove-button",employee_id:e.member.id}),z(R(e.business.id||"")),w({businessId:e.business.id||"",selectedId:e.member.id,onRefresh:U})}}]})],Y=[(0,tD.Z)(y,{field:"member",valueGetter:t8,headerName:y._('Partner name', '[m10n]businessAccess.businessHierarchy.details.partners.name', 'column name for a profiles partners'),type:"PARTNER",showDescriptor:!0,clickable:!1,sortField:"MEMBER_FULL_NAME"}),t1(y,{field:"business",valueGetter:function(e){return e.business.full_name},headerName:y._('Child business', '[m10n]businessAccess.businessHierarchy.details.partners.childBusiness', 'column name for child business the partner belongs to'),sortField:"BUSINESS_FULL_NAME"}),tN(y,{field:"principal",valueGetter:function(e){return e.principal.full_name}}),(0,tw.t)(y,{headerName:y._('Actions', '[m10n]businessHierarchy.actions', 'column of actions that can be taken on user'),actions:[{key:"removePartner",icon:"remove",tooltipText:y._('Remove partner', '[m10n]businessAccess.businessHierarchy.details.partners.remove.button', 'tooltip text for remove partner'),onClick:function(e){B({eventName:"BUSINESS_ACCESS_ACTION",component:"BUSINESS_ACCESS_TABLE",componentId:"partners-table",element:"BUSINESS_ACCESS_BUTTON",elementId:"remove-button",partner_id:e.member.id}),z(R(e.business.id||""));var t=e.business.id||"";t===(e.principal.id||"")?E({businessId:t,partnerId:e.member.id,refreshData:M}):O({businessId:t,partnerId:e.member.id,refreshData:M})}}]})];if(b||u){var G=b?y._('Loading employee info', '[m10n]businessAccess.businessHierarchy.details.employee.loading', 'message shown when loading employee'):y._('Loading partner info', '[m10n]businessAccess.businessHierarchy.details.partner.loading', 'message shown when loading partner');return(0,_.jsx)(i.kC,{alignItems:"center",height:"100%",justifyContent:"center",width:"100%",children:(0,_.jsx)(i.xu,{padding:12,children:(0,_.jsx)(i.xH,{accessibilityLabel:G,delay:!1,show:!0})})})}return(0,_.jsx)(tX,{employees:k,employeesColumnDefs:F,employeesFetchData:function(e){B({eventName:"BUSINESS_ACCESS_ACTION",component:"BUSINESS_ACCESS_TABLE",componentId:"employees-table",element:"BUSINESS_ACCESS_FIELD",elementId:"search-bar"}),s.current?(s.current=!1,U(t6(t6({},e),{},{searchTerm:""}))):U(e)},employeesIsLoading:H,employeesOnRowClick:function(e){if(null!=e&&e.member){var t=R(e.business.id||"");if(t&&e){var s={searchBy:["BUSINESS_ID"],searchTerm:e.member.id||"",businessId:t.user.id};v((0,D.ip)(s)),z(t),f(e.member.id)}}},employeesTableConfiguration:L,pageType:n.Q6.BUSINESS_HIERARCHY,partners:k,partnersColumnDefs:Y,partnersFetchData:function(e){B({eventName:"BUSINESS_ACCESS_ACTION",component:"BUSINESS_ACCESS_TABLE",componentId:"employees-partner",element:"BUSINESS_ACCESS_FIELD",elementId:"search-bar"}),r.current?(r.current=!1,M(t6(t6({},e),{},{searchTerm:""}))):M(e)},partnersIsLoading:H,partnersOnRowClick:function(e){if(null!=e&&e.member){var t=R(e.business.id||"");if(t&&e){var s={searchBy:["BUSINESS_ID"],searchTerm:e.member.id||"",businessId:t.user.id};v((0,D.Eg)(s)),z(t),d(e.member.id)}}},partnersTableConfiguration:L})};function t7(e,t){(null==t||t>e.length)&&(t=e.length);for(var s=0,n=Array(t);s<t;s++)n[s]=e[s];return n}var se=function(){var e,t=(0,l.ZP)(),s=(0,g.ZP)("BUSINESS_ACCESS_BUSINESS_HIERARCHY"),r=function(e){if(Array.isArray(e))return e}(e=(0,p.useState)(!1))||function(e,t){var s=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=s){var n,r,i,o,a=[],l=!0,c=!1;try{for(i=(s=s.call(e)).next;!(l=(n=i.call(s)).done)&&(a.push(n.value),2!==a.length);l=!0);}catch(e){c=!0,r=e}finally{try{if(!l&&null!=s.return&&(o=s.return(),Object(o)!==o))return}finally{if(c)throw r}}return a}}(e,2)||function(e,t){if(e){if("string"==typeof e)return t7(e,2);var s=({}).toString.call(e).slice(8,-1);return"Object"===s&&e.constructor&&(s=e.constructor.name),"Map"===s||"Set"===s?Array.from(e):"Arguments"===s||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s)?t7(e,2):void 0}}(e,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),o=r[0],a=r[1],c=(0,p.useRef)(null),u=(0,Z.HU)(),d=u.businessAccess.businessId,m=u.setRemoveChildBusinessModal,h=(0,v.Z)(n.Q6.DASHBOARD,d),b={value:"visitBusinessManager",label:t._('Visit Business Manager', '[m10n]businessAccess.businessHierarchy.detail.visitBusinessManager', 'Button that redirects the user the business manager page')},f=function(e){var t=e.item;"visitBusinessManager"===t.value?s({eventName:"BUSINESS_ACCESS_ACTION",component:"BUSINESS_ACCESS_CONTAINER",componentId:"hierarchy-detail",element:"BUSINESS_ACCESS_BUTTON",elementId:"business-hierarchy-options",option_selected:t.value}):"removeBusiness"===t.value&&(s({eventName:"BUSINESS_ACCESS_ACTION",component:"BUSINESS_ACCESS_CONTAINER",componentId:"hierarchy-detail",element:"BUSINESS_ACCESS_BUTTON",elementId:"business-hierarchy-options",business_id:d,option_selected:t.value}),m())};return(0,_.jsxs)(p.Fragment,{children:[(0,_.jsx)(i.kC,{children:(0,_.jsx)(i.xu,{padding:1,children:(0,_.jsx)(i.hU,{ref:c,accessibilityControls:"business-hierarchy-options",accessibilityExpanded:o,accessibilityHaspopup:!0,accessibilityLabel:t._('More options', '[m10n]businessAccess.businessHierarchy.detail.moreOptions', 'Button that triggers the more options dropdown'),bgColor:"lightGray",icon:"ellipsis",iconColor:"darkGray",onClick:function(){return a(!o)},selected:o,size:"md"})})}),o&&(0,_.jsxs)(i.Lt,{anchor:c.current,disableMobileUI:!0,id:"business-hierarchy-options",onDismiss:function(){return a(!1)},children:[(0,_.jsx)(i.Lt.Link,{href:h,iconEnd:"visit",onClick:function(e){e.event.preventDefault(),f({item:b})},option:b}),(0,_.jsx)(i.Lt.Item,{onSelect:f,option:{value:"removeBusiness",label:t._('Remove Child Business', '[m10n]businessAccess.businessHierarchy.detail.removeBusiness', 'Button that removes the current child business')}})]})]})};function st(e){return(st="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ss(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),s.push.apply(s,n)}return s}var sn=function(e){var t,s,r,o,a,u=e.account,d=(0,l.ZP)(),m=(0,(0,C.Z)().checkExperiment)("web_m10n_business_hierarchy_beta").anyEnabled,p=(null==u?void 0:u.entity_type)==="BUSINESS_HIERARCHY",h=(0,x.Z)(),b=h.isAuth?null==h?void 0:h.avatar_color_index:void 0;if(!u)return null;var f=p&&(null==(t=u.children)?void 0:t.length)||0,y=(null==(s=u.user)?void 0:s.full_name)||u.name||"",A=p&&m?(0,c.nk)(d.ngettext('Overview of {{count}} child business', 'Overview of {{count}} child businesses', f, '[m10n]businessAccess.businessHierarchy.detail.child.count', 'Text to display the child count of a business hierarchy. count: number of childs'),{count:f.toString()}).join(""):(0,c.nk)(d._('Business ID: {{ id }}', '[m10n]businessAccess.businessHierarchy.detail.id', 'Text to display the account ID. id: Is the id of the account'),{id:null==(r=u.user)?void 0:r.id}).join("");return(0,_.jsx)(i.xu,{"data-test-id":"hierarchy-detail",children:(0,_.jsx)(i.xu,{borderStyle:"sm",dangerouslySetInlineStyle:{__style:{borderColor:"#e9e9e9"}},padding:4,rounding:4,children:(0,_.jsxs)(i.kC,{alignItems:"center",justifyContent:"between",children:[(0,_.jsxs)(i.kC,{alignItems:"center",gap:2,children:[(0,_.jsx)(B.qE,{color:b,name:y,size:"md",src:(null==(o=u.user)?void 0:o.image_medium_url)||u.img_medium_url||""}),(0,_.jsxs)(i.kC,{direction:"column",gap:1,children:[(0,_.jsx)(i.xv,{color:"default",size:"400",weight:"bold",children:y}),(0,_.jsxs)(i.kC,{alignItems:"center",children:[(0,_.jsx)(i.xv,{color:"subtle",size:"200",children:A}),!(p&&m)&&(null==(a=u.user)?void 0:a.id)&&(0,_.jsx)(eu.Z,function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?ss(Object(s),!0).forEach(function(t){var n,r;n=t,r=s[t],(n=function(e){var t=function(e,t){if("object"!=st(e)||!e)return e;var s=e[Symbol.toPrimitive];if(void 0!==s){var n=s.call(e,t||"default");if("object"!=st(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==st(t)?t:t+""}(n))in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):ss(Object(s)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))})}return e}({page:n.Q6.BUSINESS_HIERARCHY,text:u.user.id},(0,ed.i)(ed.O.BUSINESS_ID,d)))]})]})]}),!p&&m&&(0,_.jsx)(se,{})]})})})};function sr(e){return(sr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function si(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),s.push.apply(s,n)}return s}var so=function(e){var t=(0,Z.nC)(),s=!!t,n=(0,Z.MC)();return(0,_.jsxs)(p.Fragment,{children:[(0,_.jsx)(sn,{account:t||n}),s?(0,_.jsx)(t5,{setSelectedEntityType:e.setSelectedEntityType}):(0,_.jsx)(tY,function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?si(Object(s),!0).forEach(function(t){var n,r;n=t,r=s[t],(n=function(e){var t=function(e,t){if("object"!=sr(e)||!e)return e;var s=e[Symbol.toPrimitive];if(void 0!==s){var n=s.call(e,t||"default");if("object"!=sr(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==sr(t)?t:t+""}(n))in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):si(Object(s)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))})}return e}({},e))]})},sa=s(902390),sl=s(661618),sc=s(268043),su=s(835589),sd=s(594036);function s_(e){return(s_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function sm(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),s.push.apply(s,n)}return s}function sp(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?sm(Object(s),!0).forEach(function(t){var n,r;n=t,r=s[t],(n=function(e){var t=function(e,t){if("object"!=s_(e)||!e)return e;var s=e[Symbol.toPrimitive];if(void 0!==s){var n=s.call(e,t||"default");if("object"!=s_(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==s_(t)?t:t+""}(n))in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):sm(Object(s)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))})}return e}function sh(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var s=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=s){var n,r,i,o,a=[],l=!0,c=!1;try{if(i=(s=s.call(e)).next,0===t){if(Object(s)!==s)return;l=!1}else for(;!(l=(n=i.call(s)).done)&&(a.push(n.value),a.length!==t);l=!0);}catch(e){c=!0,r=e}finally{try{if(!l&&null!=s.return&&(o=s.return(),Object(o)!==o))return}finally{if(c)throw r}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return sb(e,t);var s=({}).toString.call(e).slice(8,-1);return"Object"===s&&e.constructor&&(s=e.constructor.name),"Map"===s||"Set"===s?Array.from(e):"Arguments"===s||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s)?sb(e,t):void 0}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function sb(e,t){(null==t||t>e.length)&&(t=e.length);for(var s=0,n=Array(t);s<t;s++)n[s]=e[s];return n}var sf=function(e){var t=e.businessAccount,s=(0,l.ZP)(),r=sh((0,p.useState)(null),2),o=r[0],a=r[1],c=sh((0,p.useState)(0),2),u=c[0],d=c[1],m=sh((0,p.useState)(!1),2),b=m[0],y=m[1],A=sh((0,p.useState)(),2),v=A[0],S=A[1],P=sh((0,p.useState)(),2),j=P[0],I=P[1],E=sh((0,p.useState)(),2),O=E[0],z=E[1],w=sh((0,p.useState)(),2),T=w[0],N=w[1],B=(0,Z.Dl)(),R=sh((0,p.useState)(),2)[1],k=sh((0,p.useState)(),2),H=k[0],L=k[1],U=(0,eo.Z)("ad-accounts"),M=(0,eo.Z)("employees"),G=(0,eo.Z)("partners"),q=(0,eo.Z)("profiles"),K=(0,eo.Z)("ad-accounts-detail"),V=(0,eo.Z)("profiles-detail"),$=(0,h.I0)(),X=(0,h.v9)(Q.Xy),ee=(0,h.v9)(Q.wk),es=(0,h.v9)(Q.yY),en=(0,h.v9)(Q.JQ),er=(0,h.v9)(Q.Wb),ec=(0,h.v9)(Q.h$),eu=(0,h.v9)(Q.Sl),ed=(0,h.v9)(Q._1),e_=eu.find(function(e){return e.id===B}),em=(0,h.v9)(sd.Xj),ep=(0,h.v9)(sc.wk),eh=(0,h.v9)(sd.Xj),eb=(0,h.v9)(sc.wk),ef=(0,h.v9)(sd.ZD),ey=(0,h.v9)(su.JQ),eA=(0,h.v9)((0,Q.mr)(null!=(eX=null==e_?void 0:e_.id)?eX:"")),ev=(0,h.v9)(eI._1),eg=(0,h.v9)(sd.Aj),eS=(0,g.ZP)("BUSINESS_ACCESS_BUSINESS_HIERARCHY"),eP=(0,f.s0)(),ex=(0,x.Z)(),eC=ex.isAuth?ex.id:void 0,ej=(0,Z.HU)(),eE=ej.setSelectedEmployeeId,eO=ej.setSelectedPartnerId,ez=ej.setSelectedBusiness,ew=ej.businessAccess,eT=ew.business,eN=ew.businessHierarchy,eB=ej.setRemoveProfilePermissionsModal,eR=(0,Z.jn)(),eD=(0,C.Z)(),ek=eD.checkExperiment,eH=ek("web_m10n_business_hierarchy_beta").anyEnabled,eL=ek("web_m10n_business_access_catalogs").anyEnabled,eU=ei(null==(e1=t.user)?void 0:e1.id,null==T?void 0:T.asset.id),eZ=et(null==(e2=t.user)?void 0:e2.id,null==T?void 0:T.asset.id),eM=(0,F.Z)(null==(e3=t.user)?void 0:e3.id,eR),eF=(0,Y.Z)(null==(e6=t.user)?void 0:e6.id,eR),eY=J(null==(e9=t.user)?void 0:e9.id,B);(0,p.useEffect)(function(){(eT&&!eN||!eT&&eN)&&(I(),R(),S(),N(),z(),L(),eO(),eE())},[eT,eN,eE,eO,t]),(0,p.useEffect)(function(){eH||(y(!0),d(0))},[t,eH]);var eG=function(e){var s,n=e||{},r=n.searchTerm,i=n.limit,o=n.page,a=n.sortBy,l=n.sortDirection,c=sp(sp({searchBy:r&&/\d{12}/.test(r)?"id":void 0,searchTerm:r,businessId:null==(s=t.user)?void 0:s.id,detailId:eH?eR:null==v?void 0:v.id,sortBy:a,sortDirection:l},i?{limit:i}:{}),o?{page:o}:{});$((0,e0.UQ)(c))},eQ=function(e){var s,n=e||{},r=n.searchTerm,i=n.limit,o=n.page,a=n.sortBy,l=n.sortDirection,c={searchBy:r?"name":void 0,searchTerm:r,limit:i,page:o,businessId:(null==(s=t.user)?void 0:s.id)||"",detailId:(null==e_?void 0:e_.id)||"",sortBy:a,sortDirection:l,experimentsClient:eD};null!=e_&&e_.is_shared_partner?$((0,sl.iS)(sp(sp({},c),{},{searchBy:r?"FULL_NAME":void 0}))):$((0,W.JL)(c))},eK=function(e){var s,n=e||{},r=n.searchTerm,i=n.limit,o=n.page,a=n.sortBy,l=n.sortDirection,c=sp(sp({searchBy:r?"FULL_NAME":void 0,searchTerm:r,businessId:null==(s=t.user)?void 0:s.id,detailId:null==T?void 0:T.asset.id,sortBy:a,sortDirection:l},i?{limit:i}:{}),o?{page:o}:{});$((0,D.mS)(c))},eV=function(e){var s,n=e||{},r=n.searchTerm,i=n.limit,o=n.page,a=n.sortBy,l=n.sortDirection,c=sp(sp({searchBy:r?"FULL_NAME":void 0,searchTerm:r,businessId:null==(s=t.user)?void 0:s.id,detailId:null==T?void 0:T.asset.id,sortBy:a,sortDirection:l},i?{limit:i}:{}),o?{page:o}:{});$((0,D.N_)(c))},eJ=function(e){eH?eE(null==e?void 0:e.id):(S(er.find(function(t){return t.id===(null==e?void 0:e.id)})),z("EMPLOYEE"))},e$=function(e){eO(null==e?void 0:e.id),z("PARTNER")};if(eH&&eR&&er.length>0||v&&"EMPLOYEE"===O){var eX,e1,e2,e3,e6,e9,e8,e5=eH?er.find(function(e){return e.id===eR}):v,e7=[(0,tB.Z)(s,{weight:tz.I.weights.bold,headerName:s._('Profile name', '[m10n]businessAccess.businessHierarchy.partner.profiles', 'column name for a partners profiles'),hidesAvatar:!1,clickable:!1})],te=[(0,tB.Z)(s,{headerName:s._('Ad account name', '[m10n]businessAccess.businessHierarchy.partner.adAccounts', 'column name for a partners ad accounts'),weight:tz.I.weights.bold,clickable:!1,width:"50%"}),(0,t0.Z)(s,{field:"permissions",width:"40%",inCatalogManagment:eL})];return eH&&(e7.push((0,tw.t)(s,{headerName:s._('Actions', '[m10n]businessHierarchy.actions', 'column of actions that can be taken on user'),actions:[{key:"visitProfile",icon:"arrow-up-right",tooltipText:s._('View profile', '[m10n]businessAccess.businessHierarchy.column.visit.profile', 'tooltip text for visit profile'),onClick:function(e){eP(e.owner.username?"/".concat(e.owner.username):"#")}},{key:"removeEmployeeProfilePermission",icon:"remove",disabled:function(e){return eC===e.user.id},tooltipText:function(e){return eC===e.user.id?s._('You cannot remove yourself', '[m10n]bizAccess.business.person.removeTooltip', 'tooltip if you try to remove yourself'):s._('Remove profile access', '[m10n]businessAccess.businessHierarchy.table.employee.profile.remove_tooltip', 'Remove an employee\'s permission to a profile')},onClick:function(e){eS({eventName:"BUSINESS_ACCESS_ACTION",component:"BUSINESS_ACCESS_TABLE",componentId:"profiles-table",element:"BUSINESS_ACCESS_BUTTON",elementId:"remove-employee-from-profile",profile_id:e.asset.id}),eB({userData:e.user,selectionType:n.Hl.PERSON,profileId:e.asset.id,dataToRefresh:"PEOPLE"})}}]})),te.push((0,tw.Z)(s,"AD_ACCOUNT","EDIT_OR_REMOVE_OR_LINK_EMPLOYEE_PERMISSION",{iconSize:"xs",width:"10%"},eM||eG))),(0,_.jsx)(e4,{adAccounts:eh,adAccountsColumnDefs:te,adAccountsFetchData:eH&&eM?eM:eG,adAccountsIsLoading:eb,adAccountsOnRowClick:function(e){I(eh.find(function(t){return t.asset.id===(null==e?void 0:e.asset.id)})),z("AD_ACCOUNT")},adAccountsTableConfiguration:K,businessId:null==(e8=t.user)?void 0:e8.id,closePanels:b,employee:e5,onBackClick:function(){eH?(eE(),eN&&ez()):S()},pageType:n.Q6.BUSINESS_HIERARCHY,profiles:ef.map(function(e){return sp({user:null==e5?void 0:e5.user},e)}),profilesColumnDefs:e7,profilesFetchData:eH&&eF?eF:function(e){var s,n=e.searchTerm,r=e.limit,i=e.page,o=e.sortBy,a=e.sortDirection,l=sp(sp({searchBy:n&&/\d{12}/.test(n)?"id":void 0,searchTerm:n,businessId:null==(s=t.user)?void 0:s.id,detailId:eH?eR:null==v?void 0:v.id,sortBy:o,sortDirection:a},r?{limit:r}:{}),i?{page:i}:{});$((0,e0.fR)(l))},profilesIsLoading:ey,profilesOnRowClick:function(e){N(ef.find(function(t){return t.asset.id===(null==e?void 0:e.asset.id)})),z("PROFILE")},profilesTableConfiguration:V})}if((B&&eu.length>0||e_)&&"PARTNER"===O){var tt=[(0,tD.Z)(s,{headerName:s._('Employee name', '[m10n]businessAccess.businessHierarchy.partner.profiles.employee', 'column name for employees who have access to the partner\'s profiles'),type:"PEOPLE",hidesAvatar:!0,clickable:!1}),(0,t0.Z)(s,{field:"permissions"})],ts=[(0,tB.Z)(s,{headerName:s._('Ad account name', '[m10n]businessAccess.businessHierarchy.partner.adAccounts', 'column name for a partners ad accounts'),weight:tz.I.weights.bold,clickable:!1,width:"50%"}),(0,t0.Z)(s,{field:"permissions",width:"40%",inCatalogManagment:eL})],tn=eH&&eY?eY:function(e){var s,n,r,i=e||{},o=i.searchTerm,a=i.limit,l=i.page,c=i.sortBy,u=i.sortDirection,d=sp(sp(sp({searchBy:o&&/\d{12}/.test(o)?"id":void 0,searchTerm:o,businessId:null!=(s=null==(n=t.user)?void 0:n.id)?s:"",detailId:null!=(r=null==e_?void 0:e_.id)?r:"",sortBy:c,sortDirection:u},a?{limit:a}:{}),l?{page:l}:{}),{},{experimentsClient:eD});null!=e_&&e_.is_shared_partner?$((0,W.CM)(d)):$((0,W.ek)(d))};if(eH){tt.push((0,tw.Z)(s,"PEOPLE","REMOVE_EMPLOYEE_PROFILE_PERMISSIONS",{iconSize:"xs"},eQ));var tr=null!=e_&&e_.is_shared_partner?(0,tw.Z)(s,"AD_ACCOUNT","REMOVE_OR_LINK_PARTNER_PERMISSION",{iconSize:"xs",width:"10%"},tn):(0,tw.Z)(s,"AD_ACCOUNT","EDIT_OR_REMOVE_OR_LINK_PARTNER_PERMISSION",{iconSize:"xs",width:"10%"},tn);ts.push(tr)}return(0,_.jsx)(td,{adAccounts:em,adAccountsColumnDefs:ts,adAccountsFetchData:tn,adAccountsIsLoading:ep,adAccountsOnRowClick:function(e){I(em.find(function(t){return t.asset.id===(null==e?void 0:e.asset.id)})),z("AD_ACCOUNT")},adAccountsTableConfiguration:K,closePanels:b,employees:eg,employeesColumnDefs:tt,employeesFetchData:eQ,employeesIsLoading:ev,employeesTableConfiguration:M,onBackClick:function(){eO(),eN&&ez()},pageType:n.Q6.BUSINESS_HIERARCHY,partner:e_,partnerRole:eA&&eA.profiles&&eA.profiles.length?eA.profiles[0].permissions[0]:void 0})}if(j&&"AD_ACCOUNT"===O){var ti,to=[(0,tD.Z)(s,{headerName:s._('Employee name', '[m10n]businessAccess.businessHierarchy.adAccount.employees', 'column name for an ad accounts employees'),type:"PEOPLE",clickable:!1}),(0,t0.Z)(s,{field:"permissions",inCatalogManagment:eL})],ta=[(0,tD.Z)(s,{headerName:s._('Partner name', '[m10n]businessAccess.businessHierarchy.adAccount.partners', 'column name for an ad accounts partners'),type:"PARTNER",showDescriptor:!0,clickable:!1}),(0,t0.Z)(s,{field:"permissions",inCatalogManagment:eL})];return eH&&(to.push((0,tw.Z)(s,"PEOPLE","EDIT_OR_REMOVE_AD_ACCOUNT_PERMISSION",{iconSize:"xs"})),ta.push((0,tw.Z)(s,"PARTNER","EDIT_OR_REMOVE_AD_ACCOUNT_PERMISSION",{iconSize:"xs"}))),(0,_.jsx)(eW,{adAccount:j,businessId:null==(ti=t.user)?void 0:ti.id,closePanels:b,employees:er,employeesColumnDefs:to,employeesFetchData:function(e){var s,n,r,i,o=e.searchTerm,a=e.limit,l=e.page,c=e.sortBy,u=e.sortDirection;y(!1);var d="FULL_NAME",_=sp(sp({searchBy:o?d:void 0,searchTerm:o,businessId:null==(s=t.user)?void 0:s.id,detailId:null==j?void 0:j.asset.id,sortBy:c,sortDirection:u},a?{limit:a}:{}),l?{page:l}:{});$((0,D.Q3)(_)),$((0,sa.yX)({businessId:null!=(n=null==(r=t.user)?void 0:r.id)?n:"",detailId:null!=(i=null==j?void 0:j.asset.id)?i:"",updateDataOnly:!0,searchBy:d,sortBy:d}))},employeesIsLoading:ec,employeesOnRowClick:eJ,employeesTableConfiguration:M,onBackClick:function(){z(),I()},pageType:n.Q6.BUSINESS_HIERARCHY,partners:eu,partnersColumnDefs:ta,partnersFetchData:function(e){var s,n=e.searchTerm,r=e.limit,i=e.page,o=e.sortBy,a=e.sortDirection;y(!1);var l=sp(sp({searchBy:n?"FULL_NAME":void 0,searchTerm:n,businessId:null==(s=t.user)?void 0:s.id,detailId:null==j?void 0:j.asset.id,sortBy:o,sortDirection:a},r?{limit:r}:{}),i?{page:i}:{});$((0,D.yX)(l))},partnersIsLoading:ed,partnersOnRowClick:e$,partnersTableConfiguration:G})}var tl=s._('Back to business details', '[m10n]businessAccess.businessHierarchy.assets.tab.label', 'business hierarcy assets tab label');if(H&&"CATALOG"===O)return(0,_.jsxs)(i.xu,{children:[(0,_.jsx)(i.xu,{marginBottom:5,children:(0,_.jsx)(i.iP,{onTap:function(){L(null),z(null)},children:(0,_.jsxs)(i.kC,{alignItems:"center",gap:3,justifyContent:"start",children:[(0,_.jsx)(i.JO,{accessibilityLabel:tl,color:"dark",icon:"directional-arrow-left",size:16}),(0,_.jsx)(i.xv,{size:"200",weight:"bold",children:tl})]})})}),(0,_.jsx)(ea.Z,{isHierarcyDetailsUi:!0,selectedCatalogFromProps:{id:(null==H||null==(tc=H.asset)?void 0:tc.id)||"",permissions:null==H?void 0:H.permissions,name:(null==H||null==(tu=H.asset)?void 0:tu.name)||"",owner:H.owner,type:(null==H||null==(t_=H.asset)?void 0:t_.type)||"",currencies:[],languages:[],status:(null==H||null==(th=H.asset)?void 0:th.status)||"ACTIVE",updated_time:null==H||null==(tb=H.asset)?void 0:tb.last_updated_time}})]});if(T&&"PROFILE"===O){var tc,tu,t_,th,tb,tf,ty=null==(tf=T.permissions)?void 0:tf.includes("OWNER"),tA=[(0,tD.Z)(s,{headerName:s._('Employee name', '[m10n]businessAccess.businessHierarchy.profiles.employees', 'column name for a profiles employees'),type:"PEOPLE",clickable:!1}),(0,t0.Z)(s,{field:"permissions"})],tv=[(0,tD.Z)(s,{headerName:s._('Partner name', '[m10n]businessAccess.businessHierarchy.profiles.partners', 'column name for a profiles partners'),type:"PARTNER",showDescriptor:!0,clickable:!1}),tN(s)];return eH&&(tA.push((0,tw.Z)(s,"PEOPLE","REMOVE_EMPLOYEE_PROFILE_PERMISSIONS",{iconSize:"xs"},eH&&eU?eU:eK)),tv.push((0,tw.Z)(s,"PARTNER","REMOVE_PARTNER_PROFILE_PERMISSIONS",{iconSize:"xs"},eH&&eZ?eZ:eV))),(0,_.jsx)(tm,{businessAccount:t,closePanels:b,employees:er,employeesColumnDefs:tA,employeesFetchData:eH&&eU?eU:eK,employeesIsLoading:ec,employeesOnRowClick:eJ,employeesTableConfiguration:M,hidePartnersTab:!ty,onBackClick:function(){z(),N()},pageType:n.Q6.BUSINESS_HIERARCHY,partners:eu,partnersColumnDefs:tv,partnersFetchData:eH&&eZ?eZ:eV,partnersIsLoading:ed,partnersOnRowClick:e$,partnersTableConfiguration:G,profile:T})}return eH?(0,_.jsx)(so,{activeTabIndex:u,expandedIndex:o,setActiveTabIndex:d,setExpandedIndex:a,setSelectedAdAccount:I,setSelectedAssetGroup:R,setSelectedCatalog:L,setSelectedEntityType:z,setSelectedProfile:N}):(0,_.jsxs)(p.Fragment,{children:[(0,_.jsx)(sn,{account:t}),(0,_.jsxs)(i.xu,{marginTop:2,children:[(0,_.jsxs)(i.kC,{justifyContent:"between",children:[(0,_.jsx)(i.mQ,{activeTabIndex:u,onChange:function(e){var t=e.event,s=e.activeTabIndex,n=e.dangerouslyDisableOnNavigation;t.preventDefault(),n(),d(s),eS({eventName:"BUSINESS_ACCESS_ACTION",component:"BUSINESS_ACCESS_NAVIGATION",componentId:"business-hierarchy-panel",element:"BUSINESS_ACCESS_LINK",elementId:0===s?"assets.tab":"members.tab"})},tabs:[{href:"#",text:s._('Assets', '[m10n]businessAccess.businessHierarchy.assets.tab.label', 'business hierarcy assets tab label')},{href:"#",text:s._('Members', '[m10n]businessAccess.businessHierarchy.members.tab.label', 'business hierarchy members tab label')}]}),"BUSINESS_ACCOUNT"===t.entity_type&&(0,_.jsx)(eq,{})]}),(0,_.jsxs)(i.xu,{marginTop:2,children:[0===u&&(0,_.jsx)(p.Fragment,{children:(0,_.jsx)(el.Z,{adAccounts:X,adAccountsColumnDefs:[(0,tB.Z)(s,{weight:tz.I.weights.bold,headerName:s._('Ad account name', '[m10n]businessAccess.businessHierarchy.assets.adAccounts', 'column name for an asstets ad accounts'),clickable:!1,onClick:function(e){var t,s=(null==e?void 0:e.asset_id)||(null==e||null==(t=e.asset)?void 0:t.id);I(X.find(function(e){return e.asset.id===s})),z("AD_ACCOUNT")}}),(0,tR.Z)(s)],adAccountsFetchData:function(e){var s,n=e.searchTerm,r=e.limit,i=e.page,o=e.sortBy,a=e.sortDirection;y(!1);var l=sp(sp({searchBy:"name_or_id",searchTerm:n,businessId:null==(s=t.user)?void 0:s.id,sortBy:o,sortDirection:a},r?{limit:r}:{}),i?{page:i}:{});$((0,D.cE)(l))},adAccountsIsLoading:ee,adAccountsOnRowClick:function(e){I(X.find(function(t){return t.asset.id===(null==e?void 0:e.asset.id)})),z("AD_ACCOUNT")},adAccountsTableConfiguration:U,closePanels:b,pageType:n.Q6.BUSINESS_HIERARCHY,profiles:es,profilesColumnDefs:[(0,tB.Z)(s,{weight:tz.I.weights.bold,headerName:s._('Profile name', '[m10n]businessAccess.businessHierarchy.assets.profiles', 'column name for an asstets profiles'),hidesAvatar:!1,clickable:!1})],profilesFetchData:function(e){var s,n=e.searchTerm,r=e.limit,i=e.page,o=e.sortBy,a=e.sortDirection;y(!1);var l=sp(sp({searchBy:n?"name_or_id":void 0,searchTerm:n,businessId:null==(s=t.user)?void 0:s.id,sortBy:o,sortDirection:a},r?{limit:r}:{}),i?{page:i}:{});$((0,D.cp)(l))},profilesIsLoading:en,profilesOnRowClick:function(e){N(es.find(function(t){return t.asset.id===(null==e?void 0:e.asset.id)})),z("PROFILE")},profilesTableConfiguration:q})}),1===u&&(0,_.jsx)(tp.Z,{closePanels:b,employees:er,employeesColumnDefs:[(0,tD.Z)(s,{headerName:s._('Employee name', '[m10n]businessAccess.businessHierarchy.members.employees', 'column name for a members employees'),type:"PEOPLE",clickable:!1}),(0,tk.Z)(s,{field:"business_roles"})],employeesFetchData:function(e){var s,n=e.searchTerm,r=e.limit,i=e.page,o=e.sortBy,a=e.sortDirection;y(!1);var l=sp(sp({searchBy:["FULL_NAME","EMAIL"],searchTerm:n,businessId:null==(s=t.user)?void 0:s.id,sortBy:o,sortDirection:a},r?{limit:r}:{}),i?{page:i}:{});$((0,D.ip)(l))},employeesIsLoading:ec,employeesOnRowClick:eJ,employeesTableConfiguration:M,pageType:n.Q6.BUSINESS_HIERARCHY,partners:eu,partnersColumnDefs:[(0,tD.Z)(s,{headerName:s._('Partner name', '[m10n]businessAccess.businessHierarchy.members.partners', 'column name for a members partners'),type:"PARTNER",showDescriptor:!0,clickable:!1}),tN(s)],partnersFetchData:function(e){var s,n=e.searchTerm,r=e.limit,i=e.page,o=e.sortBy,a=e.sortDirection;y(!1),$((0,D.Eg)(sp(sp({searchBy:["FULL_NAME","BUSINESS_ID","USERNAME"],searchTerm:n,businessId:null==(s=t.user)?void 0:s.id,sortBy:o,sortDirection:a},r?{limit:r}:{}),i?{page:i}:{})))},partnersIsLoading:ed,partnersOnRowClick:e$,partnersTableConfiguration:G,systemUsers:[],systemUsersColumnDefs:[],systemUsersIsLoading:!1})]})]})]})};function sy(e){return(sy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function sA(e,t,s,n,r,i,o){try{var a=e[i](o),l=a.value}catch(e){return void s(e)}a.done?t(l):Promise.resolve(l).then(n,r)}function sv(e,t,s){var n;return(n=function(e,t){if("object"!=sy(e)||!e)return e;var s=e[Symbol.toPrimitive];if(void 0!==s){var n=s.call(e,t||"default");if("object"!=sy(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==sy(n)?n:n+"")in e)?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function sg(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var s=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=s){var n,r,i,o,a=[],l=!0,c=!1;try{if(i=(s=s.call(e)).next,0===t){if(Object(s)!==s)return;l=!1}else for(;!(l=(n=i.call(s)).done)&&(a.push(n.value),a.length!==t);l=!0);}catch(e){c=!0,r=e}finally{try{if(!l&&null!=s.return&&(o=s.return(),Object(o)!==o))return}finally{if(c)throw r}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return sS(e,t);var s=({}).toString.call(e).slice(8,-1);return"Object"===s&&e.constructor&&(s=e.constructor.name),"Map"===s||"Set"===s?Array.from(e):"Arguments"===s||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s)?sS(e,t):void 0}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function sS(e,t){(null==t||t>e.length)&&(t=e.length);for(var s=0,n=Array(t);s<t;s++)n[s]=e[s];return n}var sP=function(){(0,a.Ow)(1000483);var e,t,s,r=(0,(0,C.Z)().checkExperiment)("web_m10n_business_hierarchy_beta").anyEnabled,o=(0,a._P)({id:1000483}),u=!!(o&&505651===o.experience_id),d=(0,j.B)().sterlingOnSteroidsLdap,m=(0,l.ZP)(),T=(0,Z.HU)(),N=T.setSelectedBusiness,B=T.setSelectedBusinessHierarchy,R=T.businessAccess,k=R.business,H=R.businessHierarchy,U=T.setAddChildBusinessesModal,F=(0,g.ZP)("BUSINESS_ACCESS_BUSINESS_HIERARCHY"),Y=(0,b.$B)().params.businessHierarchyId,G=(0,A.g)().businessHierarchies,W=(0,f.s0)(),Q=(0,f.TH)(),q=(0,x.Z)(),K=(0,I.dI)().showToast,V=new URLSearchParams(Q.search),J=sg((0,p.useState)(null),2),$=J[0],X=J[1],ee=sg((0,p.useState)(V.get(n.j9)===n.K3.PENDING?n.pt.PENDING:n.pt.ACTIVE),2),et=ee[0],es=ee[1];u||d||!r||q.isAuth&&(q.has_mfa_enabled||q.is_sso_user)||W((0,v.Z)("DASHBOARD",null,null,Y));var en=G.find(function(e){return e.id===Y}),er=null==en?void 0:en.children,ei=sg((0,E.Z)("businessHierarchyChildBusinessInviteTable",Y||"",!0),3),eo=ei[0],ea=ei[2],el=(0,h.I0)(),ec=function(e){switch(es(e),e){case n.pt.ACTIVE:F({eventName:"BUSINESS_ACCESS_ACTION",component:"BUSINESS_ACCESS_FORM",componentId:"business-side-panel-tab",element:"BUSINESS_ACCESS_BUTTON",elementId:"business-side-panel-tab-active"}),W({pathname:Q.pathname,search:new URLSearchParams(sv({},n.j9,n.K3.ACTIVE)).toString()},{replace:!0});break;case n.pt.PENDING:F({eventName:"BUSINESS_ACCESS_ACTION",component:"BUSINESS_ACCESS_FORM",componentId:"business-side-panel-tab",element:"BUSINESS_ACCESS_BUTTON",elementId:"business-side-panel-tab-pending"}),W({pathname:Q.pathname,search:new URLSearchParams(sv({},n.j9,n.K3.PENDING)).toString()},{replace:!0}),el((0,D.mH)({hierarchyId:Y||"",type:"CHILD_BUSINESS"}))}},eu=m._('Business hierarchy', '[m10n]bizAccess.hierarchy.title', 'Business hierarchy page title'),ed=k||H;e=et===n.pt.PENDING?ea?(0,_.jsx)(i.xu,{borderStyle:"sm",dangerouslySetInlineStyle:{__style:{borderColor:"#e9e9e9"}},flex:"grow",height:"100%",padding:4,rounding:4,children:(0,_.jsx)(i.kC,{alignItems:"center",flex:"grow",height:"100%",justifyContent:"center",children:(0,_.jsx)(i.xH,{show:!0,size:"lg"})})}):eo&&$?(0,_.jsx)(L,{invite:$}):(0,_.jsx)(M,{buttonText:m._('Add business', '[m10n]bizAccess.sidePanel.addBusiness.button', 'Button label to enter the invite business flow'),description:m._('You\'ll find businesses that you\'ve invited to join your business hierarchy here', '[m10n]bizAccess.invitePanel.emptyState.description', 'Description text for the invite panel empty state'),title:m._('Pending businesses', '[m10n]bizAccess.invitePanel.emptyState.title', 'Title text for the invite panel empty state')}):ed&&(0,_.jsx)(sf,{businessAccount:ed});var e_=(null==en?void 0:en.entity_type)==="BUSINESS_HIERARCHY"&&et!==n.pt.PENDING?en:void 0,em=function(){K(function(e){var t=e.hideToast;return(0,_.jsx)(P.Z,{duration:3e3,onHide:t,text:m._('Export error! Please try again.', '[m10n]bizAccess.sidePanel.toast.export.error', 'Informs the user that there was an error when attempting to export hierarchy permissions, in a toast.')})})},ep=(t=regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,e_){e.next=4;break}return em(),e.abrupt("return");case 4:return e.next=6,(0,S.Z)({url:"/ads/v4/business_access/business_hierarchy/".concat(e_.id,"/export/"),method:"GET",callOptions:{async:!0}});case 6:(t=e.sent).resource_response?(0,y.Z)(t.resource_response.data,"business_hierarchy"):em(),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),em();case 13:case"end":return e.stop()}},e,null,[[0,10]])}),s=function(){var e=this,s=arguments;return new Promise(function(n,r){var i=t.apply(e,s);function o(e){sA(i,n,r,o,a,"next",e)}function a(e){sA(i,n,r,o,a,"throw",e)}o(void 0)})},function(){return s.apply(this,arguments)});return(0,_.jsx)(i.xu,{"data-test-id":"hierarchy-page",children:(0,_.jsx)(z.Z,{fitToWindow:!0,mainContent:e,pageProps:{title:eu,infoTooltip:{text:m._('Manage child businesses by adding, removing or editing your employees, partners and assets', '[m10n]bizAccess.businessHierarchy.info.icon.text', 'Icon tooltip text to describe what the user can do in the business hierarchy section'),accessibilityLabel:m._('Business hierarchy info icon', '[m10n]bizAccess.businessHierarchy.info.icon.accessibilityLabel', 'Accessibility label for business hierarchy info icon')}},sidebarContent:(0,_.jsx)(i.xu,{"data-test-id":"hierarchy-side-panel",height:"100%",overflow:"hidden",children:(0,_.jsx)(O.Z,{controls:(0,_.jsx)(w,{createInviteButtonAction:function(){return U({onClose:function(e){if(e){var t=e.toUpperCase();t&&es(n.pt[t]),W({pathname:Q.pathname,search:new URLSearchParams(sv({},n.j9,e)).toString()},{replace:!0})}}})},createInviteButtonText:m._('Add business', '[m10n]bizAccess.sidePanel.addBusiness.button', 'Button label to enter the invite business flow'),exportButtonAction:function(){F&&F({eventName:"BUSINESS_ACCESS_ACTION",component:"BUSINESS_ACCESS_FORM",componentId:"business-side-panel",element:"BUSINESS_ACCESS_BUTTON",elementId:"business-side-panel-export"}),ep()},onChangeTab:function(e){ec(e.activeIndex)},selectedItemIndex:et,tabItems:[(0,_.jsx)(i.xv,{size:"300",weight:"bold",children:m._('Active', '[m10n]bizAccess.sidePanel.addBusiness.tab.active', 'Tab label to view active child businesses')},"active"),(0,_.jsx)(i.xv,{size:"300",weight:"bold",children:m._('Pending', '[m10n]bizAccess.sidePanel.addBusiness.tab.pending', 'Tab label to view pending child businesses')},"pending")]}),items:et===n.pt.PENDING?eo:er,logger:F,onItemClick:function(e){"BUSINESS_ACCOUNT"===e.entity_type?(N(e),B()):"BUSINESS_HIERARCHY"===e.entity_type?(N(),B(e)):"INVITE"===e.entity_type&&X(e)},parent:e_,searchBy:function(e,t){var s,n;return(null==(s=t.user)?void 0:s.id.includes(e))||((null==(n=t.user)?void 0:n.full_name)||"").toLowerCase().includes(e)},searchPlaceholder:m._('Search businesses', '[m10n]bizAccess.hierarchy.search', 'Placeholder for search accounts component'),shouldScroll:!0,subtitlePerItem:function(e){var t;return(0,c.nk)(m._('ID: {{ id }}', '[m10n]bizAccess.hierarchy.item.subtitle', 'Text to display the id of the business in the subtitle of the item. id: Corresponds to the ID of the business'),{id:null==(t=e.user)?void 0:t.id}).join("")},titlePerItem:function(e){var t;return null==(t=e.user)?void 0:t.full_name}})})})})},sx=function(){return(0,_.jsxs)(r.Z,{pageType:n.Q6.BUSINESS_HIERARCHY,children:[(0,_.jsx)(m,{}),(0,_.jsx)(sP,{})]})}},976525:function(e,t,s){(window.__PWS_LOADED_HANDLERS__=window.__PWS_LOADED_HANDLERS__||[]).push(["www/business/business-hierarchy/[businessHierarchyId]/hierarchy",function(){return s(905656).Z}])},361981:function(e){"use strict";e.exports="https://s.pinimg.com/webapp/sad-coffee-5a5d2aaf.svg"},224625:function(e){"use strict";e.exports="https://s.pinimg.com/webapp/sad-plant-81c429b2.svg"}},function(e){e.O(0,["13058","14711","18188","25418","28356","30338","39797","41642","43823","46174","47977","4925","5171","55594","56275","56808","73967","86875","8709","88038","9328","95202","97365","98613"],function(){return e(e.s=976525)}),e.O()}]);