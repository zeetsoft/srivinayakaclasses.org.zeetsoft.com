(self.legacyJsonp=self.legacyJsonp||[]).push([["60861"],{739907:function(e,t,n){"use strict";function i(e,t,n){var i=t;"tl-PH"===t&&(i="fil-PH");try{return e.toLocaleDateString(i,n)}catch(t){return e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate()}}n.d(t,{Z:function(){return i}})},209026:function(e,t,n){"use strict";var i=n(20256),o=n(20484),s=n(710815),r=n(199414),l=n(636864),a=n(216400),c=n(134308),u=n(557693),d=n(534898),_=n(697582),p=n(950382),f=n(346909),h=n(448125),m=n(103446),g=n(647049),b=n(108867),x=n(527254),v=n(675577),w=n(573827),y=n(429359),j=n(240769),P=n(350992),A=n(29086),S=n(815774),T=n(342),z=n(382718),I={caterpillar:{darkMode:o,lightMode:s},collage:{darkMode:r,lightMode:l},drink:{darkMode:a,lightMode:c},favorite:{darkMode:u,lightMode:d},fish:{darkMode:_,lightMode:p},gumball:{darkMode:f,lightMode:h},messagebottle:{darkMode:m,lightMode:g},palette:{darkMode:b,lightMode:x},pinboard:{darkMode:v,lightMode:w},pinjar:{darkMode:y,lightMode:j},popsicle:{darkMode:P,lightMode:A},sunglasses:{darkMode:S,lightMode:T}};t.Z=function(e){var t=e.name,n=e.containerSize,o=e.illustrationSize,s=void 0===o?195:o,r=e.message,l=e.description,a=e.primaryAction,c=(0,i.tv)().colorSchemeName;return(0,z.jsx)(i.kC,{direction:"column",height:n,width:n,children:(0,z.jsxs)(i.kC,{alignItems:"center",direction:"column",gap:3,children:[(0,z.jsxs)(i.kC,{alignItems:"center",direction:"column",gap:1,width:"100%",children:[(0,z.jsx)(i.xu,{height:s,width:s,children:(0,z.jsx)(i.Ee,{alt:"",naturalHeight:1,naturalWidth:1,role:"presentation",src:"darkMode"===c?I[t].darkMode:I[t].lightMode})}),r||l?(0,z.jsxs)(i.kC,{direction:"column",children:[(0,z.jsx)(i.X6,{accessibilityLevel:"none",align:"center",size:"400",children:r}),(0,z.jsx)(i.xv,{align:"center",size:"200",children:l})]}):null]}),null!=a?a:null]})})}},315702:function(e,t,n){"use strict";var i=n(586659),o=n(963489),s=n(20256),r=n(382718);t.Z=(0,i.memo)(function(e){var t=e.tabs,n=e.activeIndex,i=(0,o.s0)();return(0,r.jsx)(s.xu,{alignItems:"center",display:"flex",justifyContent:"center",paddingY:2,width:"100%",children:(0,r.jsx)(s.mQ,{activeTabIndex:n,onChange:function(e){var n=e.event,o=e.activeTabIndex,s=e.dangerouslyDisableOnNavigation;n.preventDefault(),s(),i((t[o]||t[0]).href)},tabs:t})})})},784038:function(e,t,n){"use strict";n.d(t,{Z:function(){return es}});var i=n(963489),o=n(15667),s=n(647709),r=n(446372),l=n(586659),a=n(20256),c=n(575108),u=n(980787),d=n(410156),_=n(739907),p=n(90691),f=n(686319),h=n(209026),m=n(982166),g=n(821342),b=n(19585),x=n(670622),v=n(516114),w=n(914061),y=n(886981),j=n(123998),P=n(378888),A=n(669442),S=n(341742),T=n(551651),z=n(469167),I=n(777939),O=n(536488),k=n(841982),E=n(547585),L=n(309048),N=n(68700),M=n(382718),U=function(e){var t=e.notification,n=e.handleTouchNotification,i=e.showIcon,o=t.header_icon_image_url,s=t.header_icon_objects,r=t.header_small_overlay_icon_image_url,l=t.header_small_overlay_icon_image_url_dark,c=t.header_text,u=t.title_text,d=t.text_mapping,_=o||s&&s.length>0;return(0,M.jsxs)(a.xu,{"data-test-id":"notification-item-title",display:"flex",children:[i&&_&&(0,M.jsx)(a.xu,{"data-test-id":"notification-header-icon",margin:"auto",paddingX:0,width:void 0,children:(0,M.jsx)(a.iP,{onTap:n,children:(0,M.jsx)(L.Z,{headerIconImageUrl:o,headerIconObjectsSchema:s,headerSmallOverlayIconUrl:r,headerSmallOverlayIconUrlDark:l})})}),(0,M.jsx)(a.kC,{alignItems:"center",flex:"grow",children:(0,M.jsx)(a.iP,{onTap:n,children:(0,M.jsxs)(a.xu,{dangerouslySetInlineStyle:{__style:{whiteSpace:"pre-wrap"}},marginEnd:2,paddingX:i&&_?2:0,children:[u&&(0,M.jsx)(N.Z,{bold:!0,headerText:u,textMapping:d||{},textSize:"300"}),(0,M.jsx)(N.Z,{headerText:c,inline:!0,textMapping:d||{},textSize:"300"})]})})})]})};function C(e){return(C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Z(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function D(e){var t=e.handleMenuEllipsisTap,n=void 0===t?function(){}:t,i=e.handleTouchNotification,o=void 0===i?function(){}:i,s=e.notification,r=s.last_updated_at,l=s.unread&&(0,I.Y0)(s.encoded_display_mode,[O.gb.HIGHLIGHT_NOTIFICATION]),c=l?O.IO:{},u=2*!!l;return"news"!==s.type?null:(0,M.jsx)(k.Z,{children:(0,M.jsx)(E.uc,{auxData:{notification_id:s.id,news_type:s.news_type},newsType:s.news_type,notificationId:s.id,children:function(e){var t=e.impressionTrackerRef;return(0,M.jsx)(a.xu,{ref:t,"data-test-id":"notification-item",direction:"column",display:"flex",justifyContent:"center",marginEnd:"auto",marginStart:"auto",maxWidth:488,paddingY:0,children:(0,M.jsx)(a.xu,{dangerouslySetInlineStyle:{__style:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Z(Object(n),!0).forEach(function(t){var i,o;i=t,o=n[t],(i=function(e){var t=function(e,t){if("object"!=C(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=C(i))return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==C(t)?t:t+""}(i))in e?Object.defineProperty(e,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[i]=o}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Z(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({borderColor:"#E9E9E9"},c)},"data-test-id":"notification-item-inner",marginEnd:u,marginStart:u,paddingX:4,rounding:6,children:(0,M.jsx)(a.xu,{height:"80px",width:"100%",children:(0,M.jsxs)(a.kC,{alignItems:"stretch",height:"100%",justifyContent:"center",children:[(0,M.jsx)(a.kC,{flex:"grow",children:(0,M.jsx)(U,{handleMenuEllipsisTap:n,handleTouchNotification:function(){return o(s)},notification:s,showIcon:!0})}),(0,M.jsxs)(a.kC,{alignItems:"end",direction:"column",children:[(0,M.jsx)(a.kC,{justifyContent:"end",children:(0,M.jsx)(a.xv,{align:"end",color:"subtle",inline:!0,size:"200",children:(0,M.jsx)(I.Q2,{lastUpdatedAt:r})})}),(0,M.jsx)(a.xu,{marginTop:2,children:(0,M.jsx)(a.hU,{accessibilityLabel:"notification options",bgColor:"white",icon:"ellipsis",iconColor:"darkGray",onClick:function(){return n(s)},size:"xs"})})]})]})})})})}},s.id)})}function F(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,o,s,r,l=[],a=!0,c=!1;try{if(s=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;a=!1}else for(;!(a=(i=s.call(n)).done)&&(l.push(i.value),l.length!==t);a=!0);}catch(e){c=!0,o=e}finally{try{if(!a&&null!=n.return&&(r=n.return(),Object(r)!==r))return}finally{if(c)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return H(e,t);var n=({}).toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?H(e,t):void 0}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function H(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=Array(t);n<t;n++)i[n]=e[n];return i}var R=function(e){var t=e.fetchMoreNotifications,n=e.handleMenuEllipsisTap,i=e.handleTouchNotification,o=e.i18n,s=e.notifications,r=F((0,l.useState)([]),2),c=r[0],u=r[1],d=F((0,l.useState)([]),2),_=d[0],p=d[1],f=F((0,l.useState)(null),2),h=f[0],m=f[1];(0,l.useEffect)(function(){if(s.length>0){var e=s.find(function(e){return e.unread&&(0,I.Y0)(e.encoded_display_mode,[O.gb.HIGHLIGHT_NOTIFICATION])})||null;m(e),u(s.filter(function(t){return t.unread&&t.id!==(null==e?void 0:e.id)})),p(s.filter(function(e){return!e.unread}))}},[s]);var g=function(e){return(0,M.jsx)(a.xu,{"data-test-id":"newshub-news-list-grid",children:(0,M.jsx)(z.default,{cacheKey:"notifications",columnWidth:1e3,items:e,loadItems:t,minCols:1,renderItem:function(e){var t=e.data;return(0,M.jsx)(D,{handleMenuEllipsisTap:n,handleTouchNotification:i,notification:t})}})})};return(0,M.jsxs)(a.xu,{"data-test-id":"newshub-news-list",children:[(h||c.length>0)&&(0,M.jsxs)(a.xu,{marginBottom:4,children:[(0,M.jsx)(a.xu,{marginBottom:2,marginEnd:2,marginStart:2,paddingX:2,children:(0,M.jsx)(a.X6,{accessibilityLevel:1,align:"start",size:"400",children:o._('New', 'Title for news hub section containing unread news items', 'Unread news hub items')})}),(0,M.jsx)(a.xu,{"data-test-id":"newshub-news-list-highlighted",children:h&&g([h])}),g(c)]}),_.length>0&&(0,M.jsxs)(l.Fragment,{children:[(0,M.jsx)(a.xu,{marginBottom:2,marginEnd:2,marginStart:2,paddingX:2,children:(0,M.jsx)(a.X6,{accessibilityLevel:1,align:"start",size:"400",children:o._('Seen', 'Title for news hub section containing read news items', 'Read news hub items')})}),g(_)]})]})},W=n(966279),B=n(315702),X=n(475498),Y=n(473728),G=n(87853);function J(e,t,n,i,o,s,r){try{var l=e[s](r),a=l.value}catch(e){return void n(e)}l.done?t(a):Promise.resolve(a).then(i,o)}function Q(e){return function(){var t=this,n=arguments;return new Promise(function(i,o){var s=e.apply(t,n);function r(e){J(s,i,o,r,l,"next",e)}function l(e){J(s,i,o,r,l,"throw",e)}r(void 0)})}}function $(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=Array(t);n<t;n++)i[n]=e[n];return i}var K={UNFOLLOWED_USER:"unfollowedUser",UNFOLLOWED_PIN:"unfollowedPin",FOLLOWED_USER:"followedUser",FOLLOWED_PIN:"followedPin",ACTION_FAILED:"actionFailed"},V=function(e){var t,n,i,o,s,r,c,d,_,p,h=e.handleCloseMenuSelection,m=e.handleObjectSubscriptionById,g=e.handleSettingsRedirect,x=e.newsId,v=e.subscribableObjects,w=(0,b.ZP)(),y=(0,u.u)().logContextEvent,j=(0,G.dI)().showToast,P=(0,W.nJ)().updateNewsIdToHiddenNews,A=v?v[0]:null,S=function(e){if(Array.isArray(e))return e}(t=(0,l.useState)((null==A?void 0:A.subscribed_to_notifications)||!1))||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,o,s,r,l=[],a=!0,c=!1;try{for(s=(n=n.call(e)).next;!(a=(i=s.call(n)).done)&&(l.push(i.value),2!==l.length);a=!0);}catch(e){c=!0,o=e}finally{try{if(!a&&null!=n.return&&(r=n.return(),Object(r)!==r))return}finally{if(c)throw o}}return l}}(t,2)||function(e,t){if(e){if("string"==typeof e)return $(e,2);var n=({}).toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?$(e,2):void 0}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),T=S[0],z=S[1];(0,l.useEffect)(function(){(null==A?void 0:A.type)==="interest"?z(!1):(null==A?void 0:A.subscribed_to_notifications)!==void 0&&z(A.subscribed_to_notifications)},[null==A?void 0:A.type,null==A?void 0:A.subscribed_to_notifications]);var k=null!=(d=null==A?void 0:A.id)?d:0,E=null!=(_=null==A?void 0:A.type)?_:"",L=null!=(p=null==A?void 0:A.full_name)?p:"",N={unfollowedUser:(0,Y.Z)(w._('You will no longer receive notifications about {{user_name}}.', 'unfollwedUser.toast', 'Unfollowed a user'),{user_name:L}),unfollowedPin:w._('You will no longer receive notifications about this Pin.', 'unfollwedPin.toast', 'Unfollowed a pim'),followedUser:(0,Y.Z)(w._('You will now receive notifications about {{user_name}}.', 'followedUser.toast', 'Followed a user'),{user_name:L}),followedPin:w._('You will now receive notifications about this Pin.', 'follwedPin.toast', 'Followed a pim'),actionFailed:w._('Action could not be performed', 'notPerformed.toast', 'action could not be performed')},U={unfollowedUser:(0,Y.Z)(w._('Turn off updates from {{ user_name }}', 'NewsListItem.UnfollowUser.Flyout', 'Turn off updates from a user, user_name: user_name of the followed user'),{user_name:L}),unfollowedPin:w._('Turn off updates from this Pin', 'NewsListItem.UnfollowPin.Flyout', 'Unfollow a pin'),followedUser:(0,Y.Z)(w._('Turn on updates from {{ user_name }}', 'NewsListItem.UnfollowUser.Flyout', 'Turn on updates from a user, user_name: user_name of the followed user'),{user_name:L}),followedPin:w._('Turn on updates from this Pin', 'NewsListItem.FollowPin.Flyout', 'Follow a pin'),actionFailed:""},C=function(e){var t=w._('Action could not be performed', 'notPerformed.toast', 'action could not be performed');Object.values(K).includes(e)&&(t=N[e]),j(function(e){var n=e.hideToast;return(0,M.jsx)(X.Z,{onHide:n,text:t})})},Z=(n=Q(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,I.fK)(x,t);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),C(e.t0);case 8:case"end":return e.stop()}},e,null,[[0,5]])})),function(e){return n.apply(this,arguments)}),D=function(e){y({event_type:101,element:14309,component:3,view_type:107,view_parameter:3081}),Z(e)},F=function(e){j(function(t){var n=t.hideToast;return(0,M.jsx)(X.Z,{duration:O.QE,onHide:n,primaryAction:{accessibilityLabel:w._('Undo see less', 'NewsListItem.UndoSeeLess.Toast.a11yButton', 'undoes the see less action'),label:w._('Undo', 'NewsListItem.UndoSeeLess.Toast.Button', 'undoes the see less action'),onClick:function(){D(e),n()}},text:w._('Got it! We\'ll show you less about this interest.', 'NewsListItem.UndoSeeLess.Toast.Text', 'text for see less undo toast')})})},H=(i=Q(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,I._Z)(x,t);case 3:e.sent.resource_response.error||F(t),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),C(e.t0);case 11:case"end":return e.stop()}},e,null,[[0,8]])})),function(e){return i.apply(this,arguments)}),R=function(e,t){var n=K.UNFOLLOWED_USER,i=K.UNFOLLOWED_PIN,o=K.FOLLOWED_USER,s=K.FOLLOWED_PIN,r=K.ACTION_FAILED,l="user";return e&&t===l?n:e||t!==l?e&&"pin"===t?i:e||"pin"!==t?r:s:o},B=(o=Q(regeneratorRuntime.mark(function e(){var t,n,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,f.Z)({url:"/v3/settings/notifications/objects/",method:"POST",data:{object_ids_to_unsubscribe:T?k:null,object_ids_to_resubscribe:T?null:k}});case 3:n=(t=e.sent.resource_response).error,i=t.data,n||m(k,i[k]),C(R(T,E)),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),C(e.t0);case 13:case"end":return e.stop()}},e,null,[[0,10]])})),function(){return o.apply(this,arguments)}),J=function(){var e=w._('Update removed!', 'NewsListItem.UndoRemove.Toast.Text', 'text for restore hidden toast');j(function(t){var n=t.hideToast;return(0,M.jsx)(X.Z,{duration:O.QE,onHide:n,primaryAction:{accessibilityLabel:w._('Undo removal', 'NewsListItem.UndoRemove.Toast.a11yButton', 'restores the removed news'),label:w._('Undo', 'NewsListItem.UndoRemove.Toast.Button', 'restores the removed news'),onClick:function(){V(!1),n()}},text:e})})};function V(e){return q.apply(this,arguments)}function q(){return(q=Q(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,I.Wy)(x,t);case 3:!e.sent.resource_response.error&&(P(x,t),t&&J()),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),C(e.t0);case 11:case"end":return e.stop()}},e,null,[[0,8]])}))).apply(this,arguments)}var ee=function(e){y({event_type:101,element:14308,component:3,view_type:107,view_parameter:3081}),H(e),h()},et=(0,M.jsx)(l.Fragment,{children:null==v?void 0:v.slice(0,2).filter(function(e){return e.type===O.Ng.INTEREST}).map(function(e){return(0,M.jsx)(a.iP,{dataTestId:"see-less-interest",fullWidth:!1,onTap:function(){return ee(e.id.toString())},children:(0,M.jsx)(a.xu,{display:"flex",marginTop:3,children:(0,M.jsx)(a.X6,{size:"400",children:(w._('See less about {{ interest_name }}', 'NewsListItem.SeeLessAboutInterest.Flyout', 'See less of an interest. interest_name: the interest name to see less of')).replace("{{ interest_name }}",e.name)})})},e.id)})});return(0,M.jsx)(a.xu,{paddingX:2,paddingY:3,children:(0,M.jsxs)(a.kC,{direction:"column",gap:{row:0,column:2},children:[(r=!!(s=T?R(T,E):null)&&Object.values(K).includes(s),c="",r&&s&&(c=U[s]),(0,M.jsxs)(l.Fragment,{children:[et,r&&(0,M.jsx)(a.iP,{fullWidth:!1,onTap:function(){B(),h()},children:(0,M.jsx)(a.xu,{display:"flex",marginTop:3,children:(0,M.jsx)(a.X6,{size:"400",children:c})})}),(0,M.jsx)(a.iP,{fullWidth:!1,onTap:function(){V(!0),h()},children:(0,M.jsx)(a.xu,{display:"flex",marginTop:3,children:(0,M.jsx)(a.X6,{size:"400",children:w._('Delete update', 'NewsListItem.RemoveNews.Item', 'Delete update')})})}),(0,M.jsx)(a.iP,{fullWidth:!1,onTap:g,children:(0,M.jsx)(a.xu,{display:"flex",marginTop:3,children:(0,M.jsx)(a.X6,{size:"400",children:w._('View notification settings', 'Ellipsis.Menu.viewNotificationSettings', 'Button to go to notification settings')})})})]})),(0,M.jsx)(a.xu,{display:"flex",justifyContent:"center",marginTop:3,children:(0,M.jsx)(a.zx,{color:"gray",onClick:h,size:"lg",text:w._('Close', 'Ellipsis.Menu.closeModal', 'Accessibility label for close button on Modal on Ellipsis Menu')})})]})})};function q(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,o,s,r,l=[],a=!0,c=!1;try{if(s=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;a=!1}else for(;!(a=(i=s.call(n)).done)&&(l.push(i.value),l.length!==t);a=!0);}catch(e){c=!0,o=e}finally{try{if(!a&&null!=n.return&&(r=n.return(),Object(r)!==r))return}finally{if(c)throw o}}return l}}(e,t)||ee(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ee(e,t){if(e){if("string"==typeof e)return et(e,t);var n=({}).toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?et(e,t):void 0}}function et(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=Array(t);n<t;n++)i[n]=e[n];return i}var en={boxShadow:"0 6px 8px -4px rgba(0, 0, 0, 0.1)",transition:"box-shadow 300ms ease-in-out"},ei=function(e){var t,n=e.i18n,o=e.newsHubResource,s=e.location,r=(0,u.u)().logContextEvent,b=(0,W.mv)().hiddenNews,x=q((0,l.useState)(0),2),y=x[0],z=x[1],I=q((0,l.useState)(!1),2),O=I[0],k=I[1],E=q((0,l.useState)(!1),2),L=E[0],N=E[1],U=q((0,l.useState)({id:null,newsType:null}),2),C=U[0],Z=U[1],D=q((0,l.useState)([]),2),F=D[0],H=D[1],X=q((0,l.useState)({}),2),Y=X[0],G=X[1],J=(0,g.Z)(),Q=(0,p.Z)(function(){return k(window.scrollY>0)},100),$=function(){c.Z.create("NewsHubBadgeResource",{}).callDelete({showError:!1}),c.Z.create("NewsHubBadgeResource",{}).callGet().then(function(e){var t=e.resource_response.data;t.conversations_unseen_count>0&&z(t.conversations_unseen_count)})};(0,S.Z)(function(){return window.addEventListener("scroll",Q),$(),function(){window.removeEventListener("scroll",Q)}}),(0,l.useEffect)(function(){var e=(o.data||[]).filter(function(e){return"news"===e.type&&!b[e.id]});H(e);var t=e.reduce(function(e,t){var n;return null==(n=t.subscribable_objects)||n.forEach(function(n){var i;e[t.id]=[].concat(function(e){if(Array.isArray(e))return et(e)}(i=e[t.id]||[])||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(i)||ee(i)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),[n])}),e},{})||{};Object.keys(t).length>0&&G(t)},[o.data,b]);var K=new Date,ei={},eo=function(e,t){(0,f.Z)({url:"/v3/news_hub/click/",method:"POST",data:{news_id_str:e,link:t}})},es=F&&F.length>0,er=(0,P.mB)(s.search);t=e.locale,K.setHours(0,0,0,0),null!=F&&F.forEach(function(i){if(i){var o=i.id,s=new Date(i.last_updated_at);s.setHours(0,0,0,0);var r="";if(s.getTime()===K.getTime())r=n._('Today', ' - ', ' -- ');else if(s.getTime()===new Date(K.getTime()-d.F4).getTime())r=n._('Yesterday', ' - ', ' -- ');else if(s>=new Date(K.getTime()-6*d.F4)){var l=e.getHumanizedTimeSince(s);r="string"!=typeof l?l.join(""):l}else r=(0,_.Z)(s,t,{month:"long",day:"numeric"});r in ei||(ei[r]=o)}});var el={href:"/notifications/",text:n._('Updates', 'mweb.inbox.tab.updates.heading', 'Heading for updates tab')},ea=y>0?{href:"/inbox/",text:n._('Inbox', 'mweb.inbox.tab.messages.heading', 'Heading for messages tab'),indicator:"dot"}:{href:"/inbox/",text:n._('Inbox', 'mweb.inbox.tab.messages.heading', 'Heading for messages tab')},ec=J.isAuth&&J.should_show_messaging?[el,ea]:[el];return"inbox"===er.tab?(0,M.jsx)(i.Fg,{replace:!0,to:{pathname:"/inbox/"}}):(0,M.jsx)(T.Z,{viewParameter:3081,viewType:107,children:(0,M.jsx)(j.Z,{view:107,viewParameter:3081,children:(0,M.jsxs)(w.default,{hasFixedHeader:!0,hasGutter:!1,children:[(0,M.jsx)(a.Le,{top:0,children:(0,M.jsxs)(a.xu,{color:"default",dangerouslySetInlineStyle:{__style:O?en:{}},width:"100%",children:[(0,M.jsx)(B.Z,{activeIndex:0,tabs:ec}),(0,M.jsx)(a.xu,{color:"default",height:8})]})}),(0,M.jsxs)(a.xu,{"data-test-id":"notifications-container",children:[es&&(0,M.jsx)(R,{fetchMoreNotifications:o.fetchMore,handleMenuEllipsisTap:function(e){var t=e.id,n=e.news_type;r({event_type:101,element:12208,component:3,view_type:107,view_parameter:3081,aux_data:{news_type:n}}),N(!0),Z({id:t,newsType:n})},handleTouchNotification:function(t){var n=t.id,i=t.display_mode,o=t.news_type,s=t.override_click_url;r({view_type:107,view_parameter:3081,element:1194,event_type:102,object_id_str:n,aux_data:{display_mode:i,news_type:o}});var l=s;if(l&&(l=(0,A.Z)(l,{entrySource:"news_hub"})),(0,P.sD)(l))eo(n,l),window.location=l;else{var a=l?encodeURI(l):"/news_hub/".concat(encodeURIComponent(n));eo(n,a),e.navigate(a)}},i18n:n,notifications:F}),!o.isFetching&&!es&&(0,M.jsx)(a.kC,{alignItems:"center",height:"calc(100vh - (".concat(v.R$,"px + ").concat(80,"px)"),justifyContent:"center",width:"100%",children:(0,M.jsx)(h.Z,{containerSize:320,description:n._('Use updates to see activity on your Pins and boards and get tips on topics to explore. They\u2019ll be here soon.', 'notifications.sunglasses.illustrations.description', 'Message displayed under the illustration when no notifications'),illustrationSize:186,message:n._('Updates are on their way', 'notifications.sunglasses.illustrations.message', 'Description displayed under the illustration when no notifications'),name:"sunglasses",primaryAction:(0,M.jsx)(a.ZP,{href:"/",text:n._('Browse home feed', 'notificatons.sunglasses.illustration', 'Button text for refreshing the page when no notifications')})})}),o.isFetching&&(0,M.jsx)(a.xu,{column:12,paddingY:2,children:(0,M.jsx)(a.xH,{accessibilityLabel:n._('Loading feed', ' - ', ' -- '),show:!0})}),(0,M.jsx)(m.ZP,{accessibilityModalLabel:"",isOpen:L,mobileHideCloseIcon:!0,onDismiss:function(){return N(!1)},children:(0,M.jsx)(a.xu,{padding:3,children:null!==C.id&&(0,M.jsx)(V,{handleCloseMenuSelection:function(){Z({id:null,newsType:null}),N(!1)},handleObjectSubscriptionById:function(e,t){var n=C.id,i=C.newsType;r({event_type:101,element:12209,component:3,view_type:107,view_parameter:3081,object_id_str:JSON.stringify(e),aux_data:{news_type:i,is_unsub_action:!t}});var o=JSON.parse(JSON.stringify(Y));o[n].find(function(t){return t.id===e}).subscribed_to_notifications=t,G(o)},handleSettingsRedirect:function(){r({event_type:101,element:12210,component:3,view_type:107,view_parameter:3081,aux_data:{news_type:C.newsType}}),e.navigate("/settings/notifications")},newsId:C.id,subscribableObjects:Y[C.id]})})})]})]})})})},eo=function(){var e=(0,i.s0)(),t=(0,i.TH)(),n=(0,b.ZP)(),s=(0,x.Z)(),r=(0,y.Z)({name:"NewsHubResource"}),l=(0,o.B)().locale;return(0,M.jsx)(W.Jo,{children:(0,M.jsx)(ei,{getHumanizedTimeSince:s,i18n:n,locale:l,location:t,navigate:e,newsHubResource:r})})},es=function(){var e=(0,s.ZP)();return(0,o.B)().isAuthenticated?"desktop"===e?(0,M.jsx)(r.Z,{}):(0,M.jsx)(eo,{}):(0,M.jsx)(i.Fg,{replace:!0,to:"/"})}},252037:function(e,t,n){(window.__PWS_LOADED_HANDLERS__=window.__PWS_LOADED_HANDLERS__||[]).push(["www/notifications",function(){return n(784038).Z}])},20484:function(e){"use strict";e.exports="https://s.pinimg.com/webapp/ill_caterpillar_spot_dark-a2684283.svg"},710815:function(e){"use strict";e.exports="https://s.pinimg.com/webapp/ill_caterpillar_spot_light-4351e2b0.svg"},199414:function(e){"use strict";e.exports="https://s.pinimg.com/webapp/ill_collage_spot_dark-801b6d1e.svg"},636864:function(e){"use strict";e.exports="https://s.pinimg.com/webapp/ill_collage_spot_light-172b7814.svg"},216400:function(e){"use strict";e.exports="https://s.pinimg.com/webapp/ill_drink_spot_dark-e13d8191.svg"},134308:function(e){"use strict";e.exports="https://s.pinimg.com/webapp/ill_drink_spot_light-eba7901c.svg"},557693:function(e){"use strict";e.exports="https://s.pinimg.com/webapp/ill_favorite_spot_dark-86e6efb1.svg"},534898:function(e){"use strict";e.exports="https://s.pinimg.com/webapp/ill_favorite_spot_light-c494804e.svg"},697582:function(e){"use strict";e.exports="https://s.pinimg.com/webapp/ill_fish_spot_dark-eabdd91c.svg"},950382:function(e){"use strict";e.exports="https://s.pinimg.com/webapp/ill_fish_spot_light-68e932f6.svg"},346909:function(e){"use strict";e.exports="https://s.pinimg.com/webapp/ill_gumball_spot_dark-fe6ad7b3.svg"},448125:function(e){"use strict";e.exports="https://s.pinimg.com/webapp/ill_gumball_spot_light-31a9c021.svg"},103446:function(e){"use strict";e.exports="https://s.pinimg.com/webapp/ill_messagebottle_spot_dark-6e62eced.svg"},647049:function(e){"use strict";e.exports="https://s.pinimg.com/webapp/ill_messagebottle_spot_light-6d12e6a6.svg"},108867:function(e){"use strict";e.exports="https://s.pinimg.com/webapp/ill_palette_spot_dark-7184dea0.svg"},527254:function(e){"use strict";e.exports="https://s.pinimg.com/webapp/ill_palette_spot_light-3ec2a5f3.svg"},675577:function(e){"use strict";e.exports="https://s.pinimg.com/webapp/ill_pinboard_spot_dark-9a1edd2c.svg"},573827:function(e){"use strict";e.exports="https://s.pinimg.com/webapp/ill_pinboard_spot_light-eac9767f.svg"},429359:function(e){"use strict";e.exports="https://s.pinimg.com/webapp/ill_pinjar_spot_dark-920f4221.svg"},240769:function(e){"use strict";e.exports="https://s.pinimg.com/webapp/ill_pinjar_spot_light-a4bdf6a8.svg"},350992:function(e){"use strict";e.exports="https://s.pinimg.com/webapp/ill_popsicle_spot_dark-9739cf41.svg"},29086:function(e){"use strict";e.exports="https://s.pinimg.com/webapp/ill_popsicle_spot_light-03d29257.svg"},815774:function(e){"use strict";e.exports="https://s.pinimg.com/webapp/ill_sunglasses_spot_dark-e0aee9e0.svg"},342:function(e){"use strict";e.exports="https://s.pinimg.com/webapp/ill_sunglasses_spot_light-42e9d57e.svg"}},function(e){e.O(0,["12041","14512","15813","25418","30338","33171","33364","34290","38340","39174","41642","43836","51036","51972","56859","6275","714","73967","8709","88038","88039","88104","92911"],function(){return e(e.s=252037)}),e.O()}]);