"use strict";(self.legacyJsonp=self.legacyJsonp||[]).push([["71929"],{446891:function(e,t,r){r.d(t,{Z:function(){return c}});var n=r(586659),o=r(20256),i=r(845421),a=r(169053),s=r(382718);function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function c(e){var t,r=e.handleTogglePinSelection,c=e.index,d=e.isSelected,u=e.pin,_=e.surface,h=e.unselectedState,f=function(e){if(Array.isArray(e))return e}(t=(0,n.useState)(d))||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,s=[],l=!0,c=!1;try{for(i=(r=r.call(e)).next;!(l=(n=i.call(r)).done)&&(s.push(n.value),2!==s.length);l=!0);}catch(e){c=!0,o=e}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw o}}return s}}(t,2)||function(e,t){if(e){if("string"==typeof e)return l(e,2);var r=({}).toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?l(e,2):void 0}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),g=f[0],p=f[1],b=(0,a.S6)()(u.id);return(0,s.jsx)(o.iP,{onTap:function(){p(!g),r(u,!d)},rounding:4,children:(0,s.jsx)(i.r,{attributionOption:"hide",blockClickEvents:!0,pinId:u.id,pinImageCrop:"none",pinKey:{type:"Legacy",data:null!=b?b:u},saveButtonOptions:{type:"none"},selectionState:d?"selected-image-only":void 0===h?"deselected-image-only":h,slotIndex:c,surface:_})})}},437175:function(e,t,r){r.d(t,{Z:function(){return T}});var n=r(586659),o=r(20256),i=r(446891),a=r(980787),s=r(982166),l=r(19585),c=r(581722),d=r(963489),u=r(657043),_=r(475498),h=r(302148),f=r(886981),g=r(87853),p=r(964577),b=r(215710),y=r(382718);function m(e){var t=e.isFirstBoardCreation,r=e.isOnSelectStep,n=e.onClickBackButton,i=e.onDismiss,a=e.selectedPinCount,s=(0,l.ZP)(),c=s._('Organize into a board', 'boardlessPins.modalHeading.organizeHeading', 'Heading for modal to add unorganized Pins to board'),d=a>0?(0,h.nk)(s.ngettext('{{ pinCount }} selected', '{{ pinCount }} selected', a, 'boardlessPins.modalHeading.PinCountHeading', 'number of Pins selected'),{pinCount:a}):c,u=s._('Create board', 'boardlessPins.modalHeading.createBoardHeading', 'Heading for modal to create new board with unorganized Pins');return(0,y.jsxs)(o.xu,{alignItems:"center",display:"flex",justifyContent:"between",paddingX:4,paddingY:8,position:"relative",children:[t||r?(0,y.jsx)(o.xu,{height:40,width:40}):(0,y.jsx)(o.hU,{accessibilityLabel:s._('Go back to previous modal', 'boardlessPins.modalHeading.arrowBackIconButton', 'Accessibility label for back button'),disabled:r,icon:"arrow-back",iconColor:r?"white":"darkGray",onClick:n,size:"md"}),(0,y.jsx)(o.xu,{maxWidth:486,children:(0,y.jsx)(o.X6,{align:"center",size:"600",children:r?d:u})}),(0,y.jsx)(o.hU,{accessibilityLabel:s._('Cancel changes', 'boardlessPins.modalHeading.cancelIconButton', 'Accessibility label for close modal button'),icon:"cancel",iconColor:"darkGray",onClick:i,size:"md"})]})}var v=r(964293),x=r(189976),S=r(831786),P=r(696323),j=r(890774);function w(e,t,r,n,o,i,a){try{var s=e[i](a),l=s.value}catch(e){return void r(e)}s.done?t(l):Promise.resolve(l).then(n,o)}function A(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,s=[],l=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=i.call(r)).done)&&(s.push(n.value),s.length!==t);l=!0);}catch(e){c=!0,o=e}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw o}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return B(e,t);var r=({}).toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?B(e,t):void 0}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function B(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function C(e){var t,r,i=e.boardlessPinsBoardId,a=e.hasBoards,B=e.isOnSelectStep,C=e.onDismiss,I=e.selectedPins,k=e.updateCurrentStep,O=e.userId,z=(0,l.ZP)(),T=(0,j.Z)(),L=A((0,n.useState)(!1),2),E=L[0],Z=L[1],R=A((0,n.useState)(""),2),D=R[0],F=R[1],N=A((0,n.useState)(""),2),H=N[0],M=N[1],U=A((0,n.useState)(!a),2),W=U[0],J=U[1],V=(0,f.Z)({name:"BoardPickerBoardsResource",options:{field_set_key:"board_picker"}}),q=(0,c.I0)(),X=(0,d.s0)(),Y=(0,g.dI)(),G=I[0],Q=I.map(function(e){return e.image}).filter(function(e){return!!e}),$=function(e,t){var r=I.map(function(e){return e.id});q((0,S.Z)({selectedPinIds:r,source:{boardId:i,sectionId:null},target:{boardId:e,sectionId:t||null}},z)),q((0,x.EX)({feedId:O,feedType:P.Z.BOARDLESS_PINS,itemIds:r,itemType:"pin"}))},K=(t=regeneratorRuntime.mark(function e(){var t,r,n,o,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t={name:H,privacy:E?"secret":"public",aux_data:{source:"organize_pins"}},e.prev=1,e.next=4,T({boardCreateOptions:t});case 4:return r=e.sent,e.next=7,$(r.id);case 7:C(),Y.showToast(function(e){var t=e.hideToast;return(0,y.jsx)(_.Z,{onHide:t,text:z._('Board created!', 'BoardlessPinsBoardPicker.boardCreated.toast', 'Confirmation that a board was created')})}),r.url&&X(r.url,{replace:!0}),e.next=17;break;case 12:e.prev=12,e.t0=e.catch(1),n=z._('Uh oh! Something went wrong.', 'BoardlessPinsBoardPicker.boardCreate.submitErrorDefault', 'Default submit error text when board create fails'),"string"==typeof e.t0?n=e.t0:(o=(0,u.Z)(e.t0,"message"))&&(n=(i=(0,u.Z)(e.t0,"message_detail"))?"".concat(o," ").concat(i):o),F(n);case 17:case"end":return e.stop()}},e,null,[[1,12]])}),r=function(){var e=this,r=arguments;return new Promise(function(n,o){var i=t.apply(e,r);function a(e){w(i,n,o,a,s,"next",e)}function s(e){w(i,n,o,a,s,"throw",e)}a(void 0)})},function(){return r.apply(this,arguments)}),ee=(0,y.jsxs)(o.xu,{alignItems:"center",display:"flex",justifyContent:"between",paddingX:4,paddingY:5,position:"relative",children:[(0,y.jsx)(o.hU,{accessibilityLabel:z._('Go back', 'BoardlessPinsBoardPicker.modalHeading.arrowBackIconButton', 'Accessibility label for back button'),disabled:B,icon:"arrow-back",iconColor:B?"white":"darkGray",onClick:function(){return k("SELECT_PINS")},size:"md"}),(0,y.jsx)(o.X6,{align:"center",size:"600",children:z._('Move to a board', 'BoardlessPinsBoardPicker.save.modalTitle', 'Title of modal for moving pins to a board')}),(0,y.jsx)(o.hU,{accessibilityLabel:z._('Cancel changes', 'BoardlessPinsBoardPicker.modalHeading.cancelIconButton', 'Accessibility label for close modal button'),icon:"cancel",iconColor:"darkGray",onClick:C,size:"md"})]});return W?(0,y.jsx)(s.ZP,{accessibilityModalLabel:z._('Create board', 'BoardlessPinsBoardPicker.createBoard.accessibilityLabel', 'Accessibility Label for modal to create a board'),footer:(0,y.jsx)(o.kC,{justifyContent:"end",children:(0,y.jsx)(o.zx,{color:"red",disabled:0===H.trim().length,onClick:function(){K()},size:"lg",text:z._('Create', 'BoardlessPinsBoardPicker.boardCreate.createButton', 'Button to create new board to move Pins to')})}),heading:(0,y.jsx)(m,{isOnSelectStep:!1,onClickBackButton:function(){k(a?"PICK_BOARD":"SELECT_PINS"),J(!1)},onDismiss:C,selectedPinCount:I.length}),onDismiss:C,size:"md",children:(0,y.jsx)(o.xu,{height:644,children:(0,y.jsx)(v.Z,{boardThumbs:Q,isSecret:E,name:H,onNameChange:function(e){var t=e.value;t.trim()||F(z._('Don\'t forget to name your board!', ' - ', ' -- ')),M(t)},onVisibilityChange:function(e){return Z(e.checked)},submitError:D})})}):(0,y.jsx)(s.ZP,{accessibilityModalLabel:z._('Move to a board', 'BoardlessPinsBoardPicker.chooseExistingBoardsModal.accessibilityLabel', 'Accessibility Label for modal to move unorganized Pins to another board'),heading:ee,onDismiss:C,size:"md",children:(0,y.jsx)(o.xu,{padding:1,children:(0,y.jsx)(b.xH,{boardResource:V,changeBoardModal:!0,onBoardCreate:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.title;M(void 0===t?"":t),J(!0)},onItemChosen:function(e){$(e.boardId,e.sectionId),Y.showToast(function(t){var r=t.hideToast;return(0,y.jsx)(_.Z,{onHide:r,text:(0,h.nk)(z._('Moved to {{boardName}}', 'BoardlessPinsBoardPicker.onItemChosen.toast', 'Toast for successfully moving pin to a different board'),{boardName:e.title}).join("")})}),C()},paneHeight:644,paneWidth:720,pinId:G.id,surface:p.Z.ORGANIZE_PINS})})})}var I=r(169053);function k(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,s=[],l=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=i.call(r)).done)&&(s.push(n.value),s.length!==t);l=!0);}catch(e){c=!0,o=e}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw o}}return s}}(e,t)||O(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function O(e,t){if(e){if("string"==typeof e)return z(e,t);var r=({}).toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?z(e,t):void 0}}function z(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function T(e){var t,r,c,d=e.boardlessPinsNormalized,u=e.fetchMore,_=e.hasBoards,h=e.isFirstBoardCreation,f=void 0!==h&&h,g=e.onDismiss,p=e.userId,b=(0,l.ZP)(),v=(0,n.useRef)(null),x=k((0,n.useState)([]),2),S=x[0],P=x[1],j=k((0,n.useState)("SELECT_PINS"),2),w=j[0],A=j[1],B=(0,a.u)().logContextEvent,T=(0,I.JC)(),L=(0,n.useMemo)(function(){return d&&T?d.reduce(function(e,t){var r=T[t.id];return e.push(r),e},[]):[]},[d,T]);(0,n.useEffect)(function(){f&&L.length&&P(L.reduce(function(e,t){if(t){var r,n,o,i;e.push({id:t.id,image:f?null!=(r=null==(n=t.images)?void 0:n["236x"])?r:null:null!=(o=null==(i=t.images)?void 0:i["170x"])?o:null})}return e},[]))},[L,f]);var E=null!=(t=null==(r=L[0])||null==(c=r.board)?void 0:c.id)?t:"",Z=function(e,t){var r,n,o,i=function(e){if(Array.isArray(e))return z(e)}(S)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(S)||O(S)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}();t?(f&&B({event_type:101,view_type:740,view_parameter:4166,element:18124,object_id_str:e.id,aux_data:{selected:!0}}),r=i.concat({id:e.id,image:f?null==(n=e.images)?void 0:n["236x"]:null==(o=e.images)?void 0:o["170x"]})):(f&&B({event_type:101,view_type:740,view_parameter:4166,element:18124,object_id_str:e.id,aux_data:{selected:!1}}),r=i.filter(function(t){return t.id!==e.id})),P(r)};(0,n.useEffect)(function(){f&&("SELECT_PINS"===w?B({event_type:13,view_type:740,view_parameter:4166}):"PICK_BOARD"===w&&B({event_type:13,view_type:740,view_parameter:4167}))},[w,f,B]);var R="SELECT_PINS"===w;return(0,y.jsx)(n.Fragment,{children:R?(0,y.jsx)(s.ZP,{accessibilityModalLabel:b._('Organize into a board', 'boardlessPins.organizeModal.accessibilityLabel', 'Accessibility Label for modal to move unorganized Pins to a board'),footer:(0,y.jsx)(o.kC,{justifyContent:"end",children:(0,y.jsx)(o.zx,{color:"red",disabled:0===S.length,onClick:function(){f&&B({event_type:101,view_type:740,view_parameter:4166,element:96}),A("PICK_BOARD")},size:"lg",text:b._('Next', 'boardlessPins.organizeModal.nextButton', 'Button to go from selecting Pins step to board creation step')})}),heading:(0,y.jsx)(m,{isFirstBoardCreation:f,isOnSelectStep:R,onClickBackButton:function(){return A("SELECT_PINS")},onDismiss:g,selectedPinCount:S.length}),onDismiss:function(){f&&B({event_type:17476,view_type:740,view_parameter:4166}),g()},size:"md",children:(0,y.jsx)(o.xu,{ref:v,height:428,children:L&&v&&(0,y.jsx)(o.Rk,{columnWidth:152,gutterWidth:16,items:L,loadItems:u,renderItem:function(e){var t=e.data,r=e.itemIdx;return(0,y.jsx)(i.Z,{handleTogglePinSelection:Z,index:r,isSelected:!!S.filter(function(e){return e.id===t.id}).length,pin:t,surface:"SelectableBoardlessPin",unselectedState:"no-selection"})},scrollContainer:function(){return v.current}})})}):(0,y.jsx)(C,{boardlessPinsBoardId:E,hasBoards:_,isOnSelectStep:R,onDismiss:function(){f&&B({event_type:17476,view_type:740,view_parameter:4167}),g()},selectedPins:S,updateCurrentStep:function(e){return A(e)},userId:p})})}},10594:function(e,t){t.Z=function(e){return{isAnalyticsSite:4===e,isSterlingSite:3===e,isWwwSite:0===e,isTrendsSite:7===e,isPlanningHub:12===e}}},684148:function(e,t){t.Z=2},968842:function(e,t,r){r.d(t,{Z:function(){return i}});var n=r(647709),o=r(183152);function i(){var e={deviceType:(0,n.ZP)(),site:(0,o.uo)()},t=e.deviceType;switch(e.site){case"analytics":return 4;case"business":return 6;case"planninghub-internal":return 12;case"sterling":return 3;case"trends":return 7;case"trends-internal":return 8;case"commerce-app":case"commerce-app-latest":case"pintergration":return 10;case"creators":case"create":return 11;case"newsroom":return 13;case"about":return 14;case"pinnacle-internal":return 17;default:return+("phone"===t||"tablet"===t)}}},742723:function(e,t,r){r.d(t,{l:function(){return c}});var n=r(586659),o=r(10594),i=r(15667),a=r(968842),s=r(821651),l=r(448505),c=(0,n.createContext)(void 0);t.Z=function(){var e,t,r,d=(0,i.B)().advertiser,u=(e=(0,o.Z)((0,a.Z)()).isSterlingSite,null!=(t=(0,n.useContext)(c))?t:e),_=(0,l.Z)(),h=((null==(r=(0,s.W)())?void 0:r.profiles)||[]).find(function(e){return(null==e?void 0:e.id)===(null==d?void 0:d.owner_user_id)});return u&&h||_}},443962:function(e,t,r){r.d(t,{j:function(){return a}});var n={á:"a",à:"a",â:"a",ä:"a",ã:"a",å:"a",æ:"a",ç:"c",é:"e",è:"e",ê:"e",ë:"e",í:"i",ì:"i",î:"i",ï:"i",ñ:"n",ó:"o",ò:"o",ô:"o",ö:"o",õ:"o",ø:"o",œ:"o",ß:"s",ú:"u",ù:"u",û:"u",ü:"u"},o=function(e){if(!e)return"";for(var t="",r=0;r<e.length;r+=1)t+=n[e.charAt(r)]||e.charAt(r);return t},i=function(e,t){for(var r=t.split(" "),n=e.split(" "),i=0,a=0;a<n.length;a+=1)(o(n[a]).includes(r[i])||n[a].includes(r[i]))&&(i+=1);return i===r.length},a=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"name",n=t.toLowerCase();return e.filter(function(e){return i(e[r].toLowerCase(),n)})}},968927:function(e,t,r){r.d(t,{Z:function(){return a}});var n=r(20256),o=r(19585),i=r(382718);function a(){var e=(0,o.ZP)();return(0,i.jsx)(n.JO,{accessibilityLabel:e._('Secret board', 'Accessibility label for icon indicating a secret board', 'Accessibility label for icon indicating a secret board'),color:"default",icon:"lock",inline:!0})}},215710:function(e,t,r){r.d(t,{DR:function(){return eP},MD:function(){return em},sR:function(){return ew},uC:function(){return ej},xH:function(){return eA}});var n=r(586659),o=r(581722),i=r(672410),a=r(20256),s=r(980787),l=r(686319),c=r(821342),d=r(19585),u=r(369416),_=r(302148),h=r(675973),f=r(15667),g=r(72918),p=r(886981),b=r(684148),y=r(742723),m=r(7872),v=r(964577),x=r(790427),S=r(341742),P=r(382718);function j(e){var t=e.children,r=e.headingLevel,n=e.textWeight,o=e.size;return(0,P.jsx)(a.X6,{accessibilityLevel:r,size:o,children:(0,P.jsx)(a.xv,{inline:!0,size:o,weight:void 0===n?"normal":n,children:t})})}function w(e){var t=e.boardPickerSuggestedBoards,r=e.clientTrackingParams,n=e.imageSignature,o=e.index,i=e.item,l=e.pinId,c=e.saveSessionId,d=e.surfaceOriginViewParameter,u=e.useLegoLayout,_=(0,s.u)().logContextEvent;return(0,S.Z)(function(){"shortlist"===i.category&&_({aux_data:{board_picker_surface_origin:d,board_picker_suggested_boards:t,image_signature:n,pin_id:l,save_session_id:c},event_type:13,clientTrackingParams:r,view_type:21,view_parameter:3988})}),(0,P.jsx)(a.xu,{marginTop:o>0?2:1,paddingX:u?4:3,paddingY:1,children:(0,P.jsx)(j,{headingLevel:3,size:u?"100":"200",children:i.title})})}var A=r(918920),B=r(247354);function C(e){return(C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function I(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function k(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?I(Object(r),!0).forEach(function(t){var n,o;n=t,o=r[t],(n=function(e){var t=function(e,t){if("object"!=C(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=C(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==C(t)?t:t+""}(n))in e?Object.defineProperty(e,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[n]=o}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):I(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function O(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var z=function(e){var t,r=e.accessibilityLabelText,o=e.board,i=e.boardPickerSuggestedBoards,s=e.buttonText,l=e.clientTrackingParams,c=e.displayAlreadySavedMsg,d=e.i18n,u=e.imageSignature,_=e.isSectionOpen,h=e.logContextEvent,f=e.onButtonClick,g=e.onClick,p=e.pinId,b=e.saveSessionId,y=e.shouldOpenSections,m=void 0===y||y,v=e.showSaveToProfile,x=e.showFlyoutSaveButton,S=e.surfaceOriginViewParameter,j=e.useLegoLayout,w=function(e){if(Array.isArray(e))return e}(t=(0,n.useState)(!1))||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,s=[],l=!0,c=!1;try{for(i=(r=r.call(e)).next;!(l=(n=i.call(r)).done)&&(s.push(n.value),2!==s.length);l=!0);}catch(e){c=!0,o=e}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw o}}return s}}(t,2)||function(e,t){if(e){if("string"==typeof e)return O(e,2);var r=({}).toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?O(e,2):void 0}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),C=w[0],I=w[1],k=(0,n.useRef)(null),z=!!o.section_count&&o.section_count>0,T=o||{},L=T.images,E=T.image_cover_url,Z=!(null!=E&&E.includes("custom"))&&L&&L["75x75"]&&L["75x75"][L["75x75"].length-1].url||E;(0,n.useEffect)(function(){"boardless"===o.type&&h({aux_data:{board_picker_surface_origin:S,board_picker_suggested_boards:i,image_signature:u,pin_id:p,save_session_id:b},clientTrackingParams:l,event_type:13,view_parameter:3990,view_type:21})},[]);var R=function(){g(o)};return(0,P.jsx)(a.xu,{"data-test-id":z?"boardWithSection":"boardWithoutSection",children:(0,P.jsx)(a.iP,{ref:k,onBlur:function(){I(!1)},onFocus:function(){I(!0)},onMouseEnter:function(){I(!0)},onMouseLeave:function(){I(!1)},onTap:R,children:(0,P.jsxs)(a.xu,{alignItems:"center",color:C?"secondary":"default","data-test-id":"board-row-".concat(o.name||""),display:"flex",height:j?64:52,marginBottom:+!j,marginEnd:j?2:3,marginStart:j?2:3,marginTop:+!j,padding:2*!!j,rounding:3,children:[(0,P.jsxs)(a.xu,{"aria-hidden":"true",flex:"none",height:j?48:36,marginBottom:+!j,marginEnd:j?2:3,marginStart:2*!j,marginTop:+!j,overflow:"hidden",width:j?48:36,children:[v&&"boardless"===o.type&&(0,P.jsx)(a.zd,{height:"100%",rounding:2,width:"100%",children:(0,P.jsx)(a.xu,{alignItems:"center",color:C?"default":"secondary",display:"flex",height:"100%",justifyContent:"center",width:"100%",children:(0,P.jsx)(a.xu,{children:(0,P.jsx)(a.JO,{accessibilityLabel:d._('Save to profile icon', 'BoardRow.TapArea.Icon', 'Icon to indicate saving to profile.'),color:"default",icon:"history",size:24})})})}),Z&&!m&&(0,P.jsx)(a.zd,{height:j?48:36,rounding:2,wash:!0,width:j?48:36,children:(0,P.jsx)(a.Ee,{alt:"",fit:"cover",naturalHeight:j?48:36,naturalWidth:j?48:36,src:Z})}),Z&&m?(0,P.jsx)(a.zd,{height:j?48:36,rounding:2,wash:!0,width:j?48:36,children:(0,P.jsx)(a.Ee,{alt:"",fit:"cover",naturalHeight:j?48:36,naturalWidth:j?48:36,src:Z})}):(0,P.jsx)(a.zd,{height:j?48:36,rounding:2,width:j?48:36,children:(0,P.jsx)(a.xu,{color:m?"secondary":"transparent",height:"100%",width:"100%"})})]}),(0,P.jsxs)(a.xu,{flex:"grow",marginStart:+!j,overflow:"hidden",paddingY:1,children:[(0,P.jsx)(a.xv,{lineClamp:1,overflow:"breakAll",weight:m||!m?"bold":"normal",children:o.name}),c&&(0,P.jsx)(a.xu,{marginTop:1,children:(0,P.jsx)(a.xv,{align:"start",color:"default",size:"100",children:d._('Saved here already', 'BoardFlyout.AlreadySaved.Message', 'Text that indicates if a pin has been already saved to a board')})})]}),(0,P.jsxs)(a.kC,{alignItems:"center",gap:2,children:[(0===o.section_count||!m)&&(void 0===x||x)&&(0,P.jsx)(a.xu,{"data-test-id":"board-row-save-button-container",flex:"none",opacity:+!!C,children:(0,P.jsx)(a.zx,{accessibilityLabel:r||d._('save', 'boardRow.saveButton', 'Default accessibility label for the board row save button'),color:"red","data-test-id":"board-row-save-button",onClick:function(e){var t=e.event;R(),f&&f(),t.stopPropagation()},tabIndex:-1,text:s||d._('Save', 'save button', 'save button')})}),o&&!_?(0,P.jsx)(a.xu,{marginEnd:2*!j,children:(0,P.jsx)(B.Z,{board:o,showCollaborativeIcon:!!o.is_collaborative,showPrivateIcon:o.privacy===A.ZP.BoardPrivacy.SECRET,showProtectedIcon:o.privacy===A.ZP.BoardPrivacy.PROTECTED,showSectionsIcon:z&&m,useLegoLayout:j})}):null]})]})})})},T=function(e){var t=(0,s.u)().logContextEvent,r=(0,d.ZP)();return(0,P.jsx)(z,k(k({},e),{},{i18n:r,logContextEvent:t}))},L=r(448505),E=r(288489);function Z(e){return(Z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function R(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function D(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?R(Object(r),!0).forEach(function(t){U(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):R(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function F(e,t){return(F=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function N(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function H(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(H=function(){return!!e})()}function M(e){return(M=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function U(e,t,r){return(t=W(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function W(e){var t=function(e,t){if("object"!=Z(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Z(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Z(t)?t:t+""}var J=function(e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");i.prototype=Object.create(e&&e.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),Object.defineProperty(i,"prototype",{writable:!1}),e&&F(i,e);var t,r,o=(t=H(),function(){var e,r=M(i);return e=t?Reflect.construct(r,arguments,M(this).constructor):r.apply(this,arguments),function(e,t){if(t&&("object"==Z(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return N(e)}(this,e)});function i(){var e;if(!(this instanceof i))throw TypeError("Cannot call a class as a function");for(var t=arguments.length,r=Array(t),a=0;a<t;a++)r[a]=arguments[a];return U(N(e=o.call.apply(o,[this].concat(r))),"state",{hovered:!1}),U(N(e),"handleMouseEnter",function(){e.setState({hovered:!0})}),U(N(e),"handleMouseLeave",function(){e.setState({hovered:!1})}),U(N(e),"handleTouch",function(){var t=e.props,r=t.board;(0,t.onClick)(t.section,r)}),U(N(e),"handleButtonClick",function(t){var r=t.event,n=e.props.onButtonClick;e.handleTouch(),n&&n(),r.stopPropagation()}),U(N(e),"tapAreaRef",(0,n.createRef)()),e}return r=[{key:"focus",value:function(){var e=this.tapAreaRef.current;e&&e.focus()}},{key:"render",value:function(){var e,t,r,n,o,i,s=this.state.hovered,l=this.props,c=l.buttonText,d=l.section,u=l.showSectionSaveButton,_=l.useLegoLayout;return(0,P.jsx)(a.iP,{ref:this.tapAreaRef,onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,onTap:this.handleTouch,children:(0,P.jsxs)(a.xu,{alignItems:"center",color:s?"secondary":"default",dangerouslySetInlineStyle:{__style:_?{}:{marginLeft:53,marginRight:11}},"data-test-id":"section-row-".concat(d.title||""),display:"flex",height:_?64:52,marginEnd:2*!!_,marginStart:2*!!_,marginTop:+!_,padding:2*!!_,rounding:3,children:[_&&!!(null!=(e=d.preview_pins)&&e.length)&&(0,P.jsx)(E.Z,{image_url:null!=(t=d.preview_pins[0].image_square_url)?t:"",naturalHeight:null!=(r=null==(n=d.preview_pins[0].image_square_size_pixels)?void 0:n.height)?r:1,naturalWidth:null!=(o=null==(i=d.preview_pins[0].image_square_size_pixels)?void 0:i.width)?o:1}),(0,P.jsx)(a.xu,{flex:"grow",marginStart:4*!_,paddingY:1,children:(0,P.jsx)(a.xv,{lineClamp:1,weight:_?"bold":"normal",children:d.title})}),s&&u&&(0,P.jsx)(a.xu,{flex:"none",marginEnd:2*!_,children:(0,P.jsx)(a.zx,{accessibilityLabel:"save button",color:"red",onClick:this.handleButtonClick,text:c||this.props.i18n._('Save', 'save button', 'save button')})})]})})}}],function(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,W(n.key),n)}}(i.prototype,r),Object.defineProperty(i,"prototype",{writable:!1}),i}(n.Component);function V(e){var t=(0,d.ZP)();return(0,P.jsx)(J,D(D({},e),{},{i18n:t}))}function q(e){var t=(0,d.ZP)(),r=e.board,n=e.buttonText,o=e.onClick,i=e.onButtonClick,s=e.showSectionSaveButton,l=e.useLegoLayout,u=(0,L.Z)(),_=(0,c.Z)(),h=(0,m.lJ)(_,u),f=(0,p.Z)({name:"BoardSectionsRepinResource",options:{board_id:r.id,orbac_subject_id:h},noCache:!0}),g=f&&f.data||[];return(0,P.jsxs)(a.xu,{children:[!f.isLoaded&&(0,P.jsx)(a.kC,{alignItems:"center",height:"100%",justifyContent:"center",minHeight:200,width:"100%",children:(0,P.jsx)(a.xH,{accessibilityLabel:t._('loading board picker', 'accessibility text for loading spinner', 'accessibility text for loading spinner'),show:!0})}),f.isLoaded&&(0,P.jsxs)(a.xu,{children:[l&&(0,P.jsx)(a.xu,{marginStart:4,marginTop:2,paddingY:1,children:(0,P.jsx)(j,{headingLevel:3,size:"100",children:t._('Section', 'PinBetterSave.BoardFlyout.SectionPlaceholderText', 'section list title')})}),g.map(function(e){return(0,P.jsx)(V,{board:r,buttonText:n,onButtonClick:i,onClick:o,section:e,showSectionSaveButton:s,useLegoLayout:l},e.id)})]})]})}function X(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function Y(e){var t,r=e.onClick,o=e.title,i=e.showIcon,s=(0,d.ZP)(),l=function(e){if(Array.isArray(e))return e}(t=(0,n.useState)(!1))||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,s=[],l=!0,c=!1;try{for(i=(r=r.call(e)).next;!(l=(n=i.call(r)).done)&&(s.push(n.value),2!==s.length);l=!0);}catch(e){c=!0,o=e}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw o}}return s}}(t,2)||function(e,t){if(e){if("string"==typeof e)return X(e,2);var r=({}).toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?X(e,2):void 0}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),c=l[0],u=l[1];return(0,P.jsx)(a.iP,{dataTestId:"board-suggestion-row-button",onMouseEnter:function(){return u(!0)},onMouseLeave:function(){return u(!1)},onTap:function(){r({title:o})},children:(0,P.jsxs)(a.xu,{alignItems:"center",color:c?"secondary":"default",display:"flex",height:i?64:52,marginBottom:1,marginEnd:3,marginStart:3,rounding:3,children:[(0,P.jsx)(a.xu,{flex:"none",height:i?48:36,marginBottom:1,marginEnd:3,marginStart:i?1:2,marginTop:1,overflow:"hidden",rounding:i?2:1,width:i?48:36,children:(0,P.jsx)(a.xu,{alignItems:i?"center":void 0,color:"secondary",display:i?"flex":void 0,height:"100%",justifyContent:i?"center":void 0,width:"100%",children:i&&(0,P.jsx)(a.JO,{accessibilityLabel:s._('Create board icon', 'BoardSuggestionRow.AccessibilityLabel.Text', 'accessibility label text form add icon'),color:"default",icon:"add",size:20})})}),(0,P.jsx)(a.xu,{flex:"grow",paddingY:1,children:(0,P.jsx)(a.xv,{lineClamp:1,weight:"bold",children:o})}),c&&(0,P.jsx)(a.xu,{marginEnd:2,children:(0,P.jsx)(a.zx,{accessibilityLabel:"create button",color:"red",text:s._('Create', 'create button to create a new board', 'create button to create a new board')})})]})})}function G(e){var t=(0,d.ZP)(),r=e.suggestionsResource,o=e.onClick,i=e.pinBuilderSuggestions,s=e.inWebRepinFlowExp,l=i||r&&r.data||[],c=(0,P.jsxs)(n.Fragment,{children:[s&&(0,P.jsx)(a.xu,{marginStart:4,marginTop:2,paddingY:1,children:(0,P.jsx)(j,{headingLevel:3,size:"100",children:t._('Suggestions', 'PinBetterSave.BoardFlyout.SectionPlaceholderText', 'section list title')})}),l.map(function(e,t){return(0,P.jsx)(Y,{onClick:o,showIcon:s,title:e.title},t)})]});return(0,P.jsx)(n.Fragment,{children:l?c:(0,P.jsx)(a.kC,{alignItems:"center",height:"100%",justifyContent:"center",minHeight:200,width:"100%",children:(0,P.jsx)(a.xH,{accessibilityLabel:t._('loading board suggestions', 'accessibility text for loading spinner', 'accessibility text for loading spinner'),show:!0})})})}U(J,"defaultProps",{showSectionSaveButton:!0});var Q=r(461951);function $(e){return($="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function K(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function ee(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,s=[],l=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=i.call(r)).done)&&(s.push(n.value),s.length!==t);l=!0);}catch(e){c=!0,o=e}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw o}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return et(e,t);var r=({}).toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?et(e,t):void 0}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function et(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function er(e){var t=e.isBoardCreate,r=e.onCreateBoardClick,o=e.useLegoLayout,i=(0,d.ZP)(),s=ee((0,n.useState)(!1),2),l=s[0],c=s[1],u=ee((0,n.useState)(!1),2),_=u[0],h=u[1];return(0,P.jsx)(a.xu,{"data-test-id":"create-board",display:"flex",height:"100%",rounding:2,children:(0,P.jsx)(a.iP,{dataTestId:t?"create-board-button":"create-section-button",onBlur:function(){return h(!1)},onFocus:function(){return h(!0)},onMouseEnter:function(){return c(!0)},onMouseLeave:function(){return c(!1)},onTap:r,rounding:2,children:(0,P.jsxs)(a.xu,{alignItems:"center",color:l?"secondary":"default",dangerouslySetInlineStyle:{__style:function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?K(Object(r),!0).forEach(function(t){var n,o;n=t,o=r[t],(n=function(e){var t=function(e,t){if("object"!=$(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=$(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==$(t)?t:t+""}(n))in e?Object.defineProperty(e,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[n]=o}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):K(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({},_?{border:"2px solid ".concat(Q.nTo)}:{})},display:"flex",height:"100%",padding:o?4:2,width:"100%",children:[(0,P.jsx)(a.xu,{color:o?"secondary":"transparent",dangerouslySetInlineStyle:{__style:o?{padding:"14px"}:{}},marginEnd:o?2:5,marginStart:4*!o,rounding:2*!!o,children:(0,P.jsx)(a.JO,{accessibilityLabel:"",color:o?"default":"error",icon:o?"add":"add-circle",size:o?20:28})}),t?(0,P.jsx)(a.xv,{align:"center",lineClamp:1,weight:"bold",children:i._('Create board', ' - ', ' -- ')}):(0,P.jsx)(a.xv,{align:"center",lineClamp:1,weight:"bold",children:i._('Create section', ' - ', ' -- ')})]})})})}var en=r(443962),eo=r(524558);function ei(e){return(ei="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ea(e,t,r,n,o,i,a){try{var s=e[i](a),l=s.value}catch(e){return void r(e)}s.done?t(l):Promise.resolve(l).then(n,o)}function es(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function el(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?es(Object(r),!0).forEach(function(t){eg(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):es(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function ec(e){return function(e){if(Array.isArray(e))return ed(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return ed(e,void 0);var r=({}).toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ed(e,void 0):void 0}}(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ed(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function eu(e,t){return(eu=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function e_(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function eh(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(eh=function(){return!!e})()}function ef(e){return(ef=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function eg(e,t,r){return(t=ep(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ep(e){var t=function(e,t){if("object"!=ei(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=ei(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ei(t)?t:t+""}var eb="allBoards",ey="shortlist",em=function(e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");s.prototype=Object.create(e&&e.prototype,{constructor:{value:s,writable:!0,configurable:!0}}),Object.defineProperty(s,"prototype",{writable:!1}),e&&eu(s,e);var t,r,o=(t=eh(),function(){var e,r=ef(s);return e=t?Reflect.construct(r,arguments,ef(this).constructor):r.apply(this,arguments),function(e,t){if(t&&("object"==ei(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return e_(e)}(this,e)});function s(){var e,t;if(!(this instanceof s))throw TypeError("Cannot call a class as a function");for(var r=arguments.length,n=Array(r),a=0;a<r;a++)n[a]=arguments[a];return eg(e_(e=o.call.apply(o,[this].concat(n))),"state",{boardSuggestions:[],isSectionOpen:null,selectedBoardId:"",selectedBoardCategory:"",searchQuery:"",searchBoxFocused:!0,saveSessionId:(0,i.Z)()}),eg(e_(e),"handleScroll",function(){e_(e)._container,(0,e.props.logContextEvent)({event_type:110,component:13282,view_type:21})}),eg(e_(e),"getComplexBoardPickerThreshold",function(){var t,r=e.props,n=r.boardResource,o=r.checkExperiment,i=((null==n||null==(t=n.data)?void 0:t.all_boards)||[]).length>0?o("web_curation_board_picker_tune_complex_board_picker").group:"control",a=3;switch(i){case"enabled_2":a=2;break;case"enabled_4":a=4;break;case"enabled_5":a=5;break;default:a=3}return a}),eg(e_(e),"refHandler",function(t){e.removeEventListeners(),t&&t.addEventListener("scroll",e.handleScroll,{once:!0}),e._container=t}),eg(e_(e),"getItems",function(t){var r=e.props,n=r.boardResource,o=r.showSaveToProfile,i=r.checkExperiment;if(!(null!=n&&n.data))return[];var a=n.data.all_boards,s=a.length>=e.getComplexBoardPickerThreshold(),l=o&&a.length&&i("web_curation_board_picker_reorder_profile_option").anyEnabled,c=[{boardId:"",image_cover_url:"",is_collaborative:!1,isOpen:!1,name:e.props.i18n._('Profile', 'pinBetterSave.initialSelection.boardlessPinsOption', 'Option to save to profile without a board.'),privacy:"public",section_count:0,type:"boardless",url:"/me/"}],d=e.getAllBoards().map(function(t,r){return e.mapBoards(t,eb,r)}),u=e.getShortlist().map(function(t,r){return e.mapBoards(t,ey,r)}),_=e.state.searchQuery;return _.length>=b.Z?ec((0,en.j)(d,_)):[].concat(ec(s||!o||l?[]:[{type:"header",title:e.props.i18n._('Quick save and organize later', 'BoardFlyout.inPinBetterSaveAndLessThanThreeBoards.boardlessPinsTitle', 'Header saving to profile')}].concat(c)),ec(s&&s&&o&&!l?c:[]),ec(s&&null!=u&&u.length?[{category:ey,type:"header",title:t?e.props.i18n._('Top choices', 'PinBetterSave.BoardFlyout.TopChoicesSectionTitle', 'Header for top suggestions in board picker'):e.props.i18n._('Top board suggestions', 'Header for top suggesions in board picker', 'Header for top suggesions in board picker')}].concat(ec(u)):[]),ec(a.length>0?[{type:"header",title:!s&&o?e.props.i18n._('Save to board', 'BoardFlyout.inPinBetterSaveAndLessThanThreeBoards.saveToBoardTitle', 'Header for boards when there are less than 3 boards in board picker'):e.props.i18n._('All boards', 'Header for all boards in board picker', 'Header for all boards in board picker')}].concat(ec(d),ec(l?c:[])):[]))}),eg(e_(e),"mapBoards",function(t,r,n){var o=e.state,i=o.selectedBoardId,a=o.selectedBoardCategory,s=t.id===i&&r===a;return el(el({},t),{},{category:r,isOpen:s,gridIndex:n})}),eg(e_(e),"handleBack",function(){var t=e.props.setBoardWithSection;e.setState({isSectionOpen:!1,selectedBoardId:"",selectedBoardCategory:""}),t&&t(null)}),eg(e_(e),"handleSectionClick",function(t,r){var n=e.props,o=n.clientTrackingParams,i=n.imageSignature,a=n.logContextEvent,s=n.onItemChosen,l=n.pinId,c=n.surfaceOriginViewParameter,d=e.state,u=d.saveSessionId,_=d.searchQuery;a({event_type:101,clientTrackingParams:o,component:13282,element:36,object_id_str:r.id,view_type:91,view_parameter:3133,aux_data:{board_id:r.id,board_picker_surface_origin:c,board_picker_suggested_boards:JSON.stringify(e.getTopChoiceBoardsAuxData()),board_title_suggestions:JSON.stringify(e.getBoardTitleSuggestionsAuxData()),board_index:r.gridIndex,image_signature:i,is_profile_save:!1,pin_id:l,save_session_id:u,search_query:_,section_id:t.id}}),s({boardId:r.id,url:t.slug?"".concat(r.url).concat(t.slug,"/"):r.url,sectionId:t.id,title:t.title||"",type:t.type,imageCoverUrl:r.image_cover_url,ownerUsername:r.owner&&r.owner.username||""})}),eg(e_(e),"getPinBuilderSuggestions",(t=regeneratorRuntime.mark(function t(){var r,n,o,i,a,s,c,d,u;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=(r=e.props).clientTrackingParams,o=r.imageSignature,i=r.logContextEvent,a=r.pinId,s=r.surfaceOriginViewParameter,c=e.state.saveSessionId,!a){t.next=7;break}return t.next=5,(0,l.Z)({url:"/v3/pins/".concat(a,"/board_title_suggestions/"),data:{pin_id:a}});case 5:(d=t.sent).resource_response.data&&(u=d.resource_response.data.map(function(e){var t;return{title:e.title,metadata:JSON.parse(null!=(t=null==e?void 0:e.metadata)?t:"{}")}})||[],e.setState({boardSuggestions:u}),i({aux_data:{board_picker_surface_origin:s,board_picker_suggested_boards:JSON.stringify(e.getTopChoiceBoardsAuxData()),board_title_suggestions:JSON.stringify(e.getBoardTitleSuggestionsAuxData()),image_signature:o,pin_id:a,save_session_id:c},component:13282,clientTrackingParams:n,event_type:13,view_parameter:3992,view_type:21}));case 7:case"end":return t.stop()}},t)}),function(){var e=this,r=arguments;return new Promise(function(n,o){var i=t.apply(e,r);function a(e){ea(i,n,o,a,s,"next",e)}function s(e){ea(i,n,o,a,s,"throw",e)}a(void 0)})})),eg(e_(e),"getAllBoards",function(){var t,r=e.props,n=r.boardResource,o=r.advertiser_id;return((null==n||null==(t=n.data)?void 0:t.all_boards)||[]).filter(function(e){return!o||"secret"!==e.privacy})}),eg(e_(e),"getShortlist",function(){var t,r=e.props,n=r.suggestedBoardsShortListResource,o=r.displayShortlistMostRecentBoard,i=r.boardResource,a=(null==i||null==(t=i.data)?void 0:t.boards_shortlist)||[];return o?a:(null==n?void 0:n.data)||[]}),eg(e_(e),"getBoards",function(t){return t===eb?e.getAllBoards():t===ey?e.getShortlist():[]}),eg(e_(e),"getSuggestedBoardsIds",function(){var t=e.props.showSaveToProfile,r=(t?e.getShortlist().slice(0,2):e.getShortlist()).map(function(e){return e.id});return t&&r.unshift("PROFILE_PINS"),r}),eg(e_(e),"getTopChoiceBoardsAuxData",function(){return(e.props.showSaveToProfile?e.getShortlist().slice(0,2):ec(e.getShortlist())).map(function(e){var t,r;return{board_title_id:String(e.id),board_title_kind:JSON.parse(null!=(t=e.recommendation_reason)?t:"{}").reason,board_title:String(e.name),board_title_score:JSON.parse(null!=(r=e.recommendation_reason)?r:"{}").score}})}),eg(e_(e),"getBoardTitleSuggestionsAuxData",function(){return e.state.boardSuggestions.map(function(e){return{board_title_id:String(e.metadata.value),board_title_kind:String(e.metadata.kind),board_title:String(e.title),board_title_score:String(e.metadata.confidence)}})}),eg(e_(e),"handleBoardWithSectionsClick",function(t){var r=e.props,n=r.clientTrackingParams,o=r.logContextEvent,i=r.pinId,a=r.setBoardWithSection,s=r.surfaceOriginViewParameter,l=e.state,c=l.saveSessionId,d=l.searchQuery,u=l.selectedBoardId,_=l.selectedBoardCategory,h=e.getBoards(t.category).find(function(e){return e.id===t.id}),f=u===t.id&&_===t.category;o({event_type:13,clientTrackingParams:n,component:13282,element:36,object_id_str:t.id,view_type:275,aux_data:{board_id:t.id,board_picker_surface_origin:s,board_picker_suggested_boards:JSON.stringify(e.getTopChoiceBoardsAuxData()),board_title_suggestions:JSON.stringify(e.getBoardTitleSuggestionsAuxData()),board_index:t.gridIndex,is_profile_save:!1,pin_id:i,save_session_id:c,search_query:d}}),h&&a&&a(h),e.setState({isSectionOpen:!0,selectedBoardId:f?"":t.id,selectedBoardCategory:f?"":t.category})}),eg(e_(e),"handleBoardClick",function(t){var r=t.board,n=t.toggleSections,o=e.props,i=o.clientTrackingParams,a=o.imageSignature,s=o.logContextEvent,l=o.onItemChosen,c=o.pinId,d=o.surfaceOriginViewParameter,u=e.state,_=u.saveSessionId,h=u.searchQuery;e.setState({searchBoxFocused:!1}),n?(s({event_type:101,component:13282,element:36,clientTrackingParams:i,object_id_str:r.id,view_type:91,view_parameter:r.category===ey?3988:3989,aux_data:{board_id:r.id,board_component:r.category===ey?3988:3989,board_picker_surface_origin:d,board_picker_suggested_boards:JSON.stringify(e.getTopChoiceBoardsAuxData()),board_title_suggestions:JSON.stringify(e.getBoardTitleSuggestionsAuxData()),board_index:r.gridIndex,image_signature:a,is_profile_save:!1,pin_id:c,save_session_id:_,search_query:h}}),e.handleBoardWithSectionsClick({category:r.category,gridIndex:r.gridIndex,id:r.id})):(s("boardless"===r.type?{event_type:101,clientTrackingParams:i,component:13282,element:36,object_id_str:r.id,view_type:91,view_parameter:3990,aux_data:{board_id:r.id,board_component:3990,board_picker_surface_origin:d,board_picker_suggested_boards:JSON.stringify(e.getTopChoiceBoardsAuxData()),board_title_suggestions:JSON.stringify(e.getBoardTitleSuggestionsAuxData()),board_index:r.gridIndex,image_signature:a,is_profile_save:!0,pin_id:c,save_session_id:_,search_query:h}}:{event_type:101,clientTrackingParams:i,component:13282,element:36,object_id_str:r.id,view_type:91,view_parameter:r.category===ey?3988:3989,aux_data:{board_id:r.id,board_component:r.category===ey?3988:3989,board_picker_surface_origin:d,board_picker_suggested_boards:JSON.stringify(e.getTopChoiceBoardsAuxData()),board_title_suggestions:JSON.stringify(e.getBoardTitleSuggestionsAuxData()),board_index:r.gridIndex,image_signature:a,is_profile_save:"boardless"===r.type,pin_id:c,save_session_id:_,search_query:h}}),l({boardId:r.id,url:r.url,title:r.name||"",type:r.type,imageCoverUrl:r.image_cover_url,privacy:r.privacy}))}),eg(e_(e),"handleSearchQueryUpdate",function(t){e.setState(function(e){return el(el({},e),{},{searchQuery:t})})}),eg(e_(e),"handleCreateBoardClick",function(t){var r=e.props,n=r.clientTrackingParams,o=r.imageSignature,i=r.logContextEvent,a=r.onBoardCreate,s=r.pinId,l=r.surfaceOriginViewParameter,c=r.surface,d=e.state,u=d.saveSessionId,_=d.searchQuery;i({event_type:101,clientTrackingParams:n,component:13282,element:249,view_type:91,view_parameter:t?87:3132,aux_data:{board_component:t?87:3132,board_picker_surface_origin:l,board_picker_suggested_boards:JSON.stringify(e.getTopChoiceBoardsAuxData()),board_title_suggestions:JSON.stringify(e.getBoardTitleSuggestionsAuxData()),image_signature:o,pin_id:s,save_session_id:u,search_query:_,source:null!=c?c:v.Z.BOARD_PICKER}}),a({title:_})}),eg(e_(e),"handleBoardSuggestionClick",function(t){var r=e.props,n=r.clientTrackingParams,o=r.imageSignature,i=r.logContextEvent,a=r.onBoardCreate,s=r.pinId,l=r.surfaceOriginViewParameter,c=e.state.saveSessionId;i({event_type:101,clientTrackingParams:n,component:13282,element:23,view_type:91,view_parameter:3992,aux_data:{board_picker_surface_origin:l,board_title_suggestions:JSON.stringify(e.getBoardTitleSuggestionsAuxData()),image_signature:o,pin_id:s,save_session_id:c}}),a(t)}),e}return r=[{key:"componentWillUnmount",value:function(){this.removeEventListeners()}},{key:"componentDidMount",value:function(){var e=this.props,t=e.clientTrackingParams,r=e.logContextEvent,n=e.imageSignature,o=e.pinId,i=e.setBoardWithSection,a=e.surfaceOriginViewParameter,s=this.state.saveSessionId;i&&i(null),r({event_type:13,component:13282,clientTrackingParams:t,element:10960,aux_data:{board_picker_surface_origin:a,board_picker_suggested_boards:JSON.stringify(this.getTopChoiceBoardsAuxData()),image_signature:n,pin_id:o,save_session_id:s}})}},{key:"componentDidUpdate",value:function(e){var t,r,n=this.state.saveSessionId,o=this.props.clientTrackingParams;!(null!=(t=e.suggestedBoardsShortListResource)&&t.isLoaded)&&null!=(r=this.props.suggestedBoardsShortListResource)&&r.isLoaded&&this.getSuggestedBoardsIds().length>0&&this.props.logContextEvent({event_type:13,clientTrackingParams:o,component:13282,element:1001,aux_data:{pin_id:this.props.pinId,board_picker_suggested_boards:JSON.stringify(this.getTopChoiceBoardsAuxData()),save_session_id:n}})}},{key:"removeEventListeners",value:function(){var e=this._container;e&&e.removeEventListener("scroll",this.handleScroll)}},{key:"render",value:function(){var e,t,r,o,i,s,l,c=this,d=this.props,h=d.accessibilityLabelText,f=d.boardResource,g=d.buttonText,p=d.changeBoardModal,b=d.clientTrackingParams,y=d.customItem,m=d.headerText,v=d.hideAlreadySavedMsg,S=d.imageSignature,A=d.onButtonClick,B=d.paneHeight,C=d.paneWidth,I=d.pinAlreadySavedBoard,k=d.pinId,O=d.requestContext,z=d.sectionText,L=d.showSaveToProfile,E=d.showSearchField,Z=d.showCreateBoardButton,R=d.showFlyoutSaveButton,D=d.showSections,F=d.showSectionSaveButton,N=d.suggestedBoardsShortListResource,H=d.surfaceOriginViewParameter,M=d.useStoryboardStyle,U=d.useLegoLayout,W=d.boardFlyoutStyle,J=this.state,V=J.boardSuggestions,X=J.isSectionOpen,Y=J.saveSessionId,Q=J.searchBoxFocused,$=J.searchQuery;if(!f)return null;var K=f.isLoaded,ee=f.error,et=[];(K&&!ee||N&&N.data&&!N.error)&&(et=this.getItems(!!U));var en=et.filter(function(e){return e&&e.category===eb}).length,ei=en>this.getComplexBoardPickerThreshold();ei||0!==V.length||this.getPinBuilderSuggestions();var ea=M?200:322,es=M?214:334,el=B||290,ec=JSON.stringify(this.getTopChoiceBoardsAuxData()),ed=O.isRTL?"BoardsSlideRightRTL":"BoardsSlideLeft",eu="";null!==X&&(eu=O.isRTL?"BoardsSlideLeftRTL":"BoardsSlideRight");var e_=function(e){return(0,P.jsxs)(n.Fragment,{children:[!U&&(0,P.jsx)(a.iz,{}),(0,P.jsx)(a.xu,{borderStyle:U&&en>=3&&et.length>1?"shadow":"none",dangerouslySetInlineStyle:{__style:{borderBottomRightRadius:8,borderBottomLeftRadius:8}},height:U?80:52,overflow:"hidden",children:(0,P.jsx)(er,{isBoardCreate:e,onCreateBoardClick:function(t){t.event.stopPropagation(),c.handleCreateBoardClick(e)},useLegoLayout:U})})]})};return(0,P.jsxs)(a.xu,{color:"default","data-test-id":"board-picker-flyout",height:M||p?"100%":U?498:439,overflow:"hidden",rounding:2,width:U&&!p?"100%":C,zIndex:x.lI,children:[(0,P.jsx)(u.Z,{unsafeCSS:"\n.BoardsSlideLeft {\n  animation: boardFlyoutSlideLeft 0.5s cubic-bezier(0.165, 0.84, 0.44, 1) forwards;\n}\n\n.BoardsSlideRight {\n  animation: boardFlyoutSlideRight 0.5s cubic-bezier(0.165, 0.84, 0.44, 1) forwards;\n}\n\n.BoardsSlideLeftRTL {\n  animation: boardFlyoutSlideLeftRTL 0.5s cubic-bezier(0.165, 0.84, 0.44, 1) forwards;\n}\n\n.BoardsSlideRightRTL {\n  animation: boardFlyoutSlideRightRTL 0.5s cubic-bezier(0.165, 0.84, 0.44, 1) forwards;\n}\n\n@keyframes boardFlyoutSlideLeft {\n  from {\n    margin-left: 0%;\n  }\n\n  to {\n    margin-left: -100%;\n  }\n}\n\n@keyframes boardFlyoutSlideRight {\n  from {\n    margin-left: -100%;\n  }\n\n  to {\n    margin-left: 0%;\n  }\n}\n\n@keyframes boardFlyoutSlideLeftRTL {\n  from {\n    margin-right: -100%;\n  }\n\n  to {\n    margin-right: 0%;\n  }\n}\n\n@keyframes boardFlyoutSlideRightRTL {\n  from {\n    margin-right: 0%;\n  }\n\n  to {\n    margin-right: -100%;\n  }\n}\n"}),K?null:(0,P.jsx)(a.kC,{alignItems:"center",height:"100%",justifyContent:"center",minHeight:200,width:U&&!p?360:C,children:(0,P.jsx)(a.xH,{accessibilityLabel:this.props.i18n._('loading board picker', 'accessibility text for loading spinner', 'accessibility text for loading spinner'),show:!0})}),(0,P.jsx)(a.kC,{direction:"row",children:K&&(0,P.jsx)("div",{className:X?ed:eu,children:(0,P.jsx)(a.xu,{position:"relative",children:(0,P.jsxs)(a.xu,{direction:"row",display:"flex",width:U&&!p?720:(null!=C?C:0)*2,zIndex:new a.Ry(0),children:[(0,P.jsxs)(a.kC,{alignItems:"stretch",direction:"column",justifyContent:"start",width:U&&!p?360:C,children:[U&&!p&&(0,P.jsx)(a.kC,{alignItems:"center",height:64,justifyContent:"center",children:(0,P.jsx)(j,{headingLevel:2,size:"300",textWeight:"bold",children:m||(L?this.props.i18n._('Save', 'PinBetterSave.BoardFlyout.SavePlaceholder', 'flyout header text to indicate save options'):this.props.i18n._('Save to board', 'PinBetterSave.BoardFlyout.SaveToBoardPlaceholder', 'flyout header text'))})}),(null!=E?E:!p)&&(0,P.jsxs)(a.xu,{"data-test-id":"search-boards-field-container",height:U?64:"auto",padding:null!=(e=null==W||null==(t=W.searchFieldStyle)?void 0:t.padding)?e:3*!U,paddingX:null!=(r=null==W||null==(o=W.searchFieldStyle)?void 0:o.paddingX)?r:U?4:3,paddingY:null==W||null==(i=W.searchFieldStyle)?void 0:i.paddingY,children:[(0,P.jsx)(eo.Z,{accessibilityClearButtonLabel:this.props.i18n._('Clear board search text', 'dropdown.searchField.clearButtonLabel', 'clear button label for search field in board picker'),accessibilityLabel:this.props.i18n._('Search through your boards', 'search bar placeholder text', 'search bar placeholder text'),focused:Q,id:"pickerSearchField",onChange:function(e){var t=e.value;return c.handleSearchQueryUpdate(t)},placeholder:this.props.i18n._('Search', 'search bar placeholder text', 'search bar placeholder text'),size:null!=(s=null==W||null==(l=W.searchFieldStyle)?void 0:l.size)?s:"lg",value:$}),(0,P.jsx)(a.xu,{"aria-live":"assertive",display:"visuallyHidden",children:en?(0,_.Wc)(this.props.i18n.ngettext('Found a board', 'Found {{boardCount}} boards', en, 'PinBetterSave.BoardFlyout.BoardFoundsDropdown', 'Text to indicate how many boards were found in the board autocomplete. boardCount: the number of boards created by the user.'),{boardCount:en.toString()}):this.props.i18n._('No boards found', 'PinBetterSave.BoardFlyout.noBoardFoundsDropdown', 'Text to indicate no boards were found in the board autocomplete')})]}),(0,P.jsxs)(a.xu,{ref:this.refHandler,maxHeight:U?el:ea,minHeight:U?290:ea,overflow:"scrollY",children:[N&&!N.isLoaded?(0,P.jsx)(a.xu,{"data-test-id":"suggestedBoardsContainer",children:(0,P.jsx)(a.kC,{alignItems:"center",height:"100%",justifyContent:"center",minHeight:128.5,width:"100%",children:(0,P.jsx)(a.xH,{accessibilityLabel:this.props.i18n._('loading board picker', 'accessibility text for loading spinner', 'accessibility text for loading spinner'),show:!0})})}):null,y,et.map(function(e,t){return"header"===e.type?(0,P.jsx)(w,{boardPickerSuggestedBoards:ec,clientTrackingParams:b,imageSignature:S,index:t,item:e,pinId:k,saveSessionId:Y,surfaceOriginViewParameter:H,useLegoLayout:U},"".concat(e.title)):(0,P.jsx)(a.xu,{children:(0,P.jsx)(T,{accessibilityLabelText:h,board:e,boardPickerSuggestedBoards:ec,buttonText:g,clientTrackingParams:b,displayAlreadySavedMsg:I&&I.id===e.id&&!v,imageSignature:S,onButtonClick:A,onClick:function(e){c.handleBoardClick({board:e,toggleSections:D&&!!e.section_count})},pinId:k,saveSessionId:Y,shouldOpenSections:D,showFlyoutSaveButton:R,showSaveToProfile:L,surfaceOriginViewParameter:H,useLegoLayout:U})},"".concat(e.category,"-").concat(e.id))}),!ei&&V.length>0&&(0,P.jsx)(G,{inWebRepinFlowExp:U,onClick:this.handleBoardSuggestionClick,pinBuilderSuggestions:V})]}),Z&&e_(!0)]}),X&&(0,P.jsxs)(a.xu,{direction:"column",display:"flex",marginBottom:2*!!U,width:U&&!p?360:C,children:[(0,P.jsxs)(a.kC,{alignContent:"center",alignItems:"center",direction:"row",justifyContent:"center",children:[(0,P.jsx)(a.sg,{span:2,children:(0,P.jsx)(a.xu,{alignContent:"center",alignItems:"center",display:"flex",justifyContent:"start",marginStart:3,children:(0,P.jsx)(a.hU,{accessibilityLabel:"Back button",icon:"arrow-back",iconColor:"darkGray",onClick:this.handleBack,size:"sm"})})}),(0,P.jsx)(a.sg,{span:8,children:(0,P.jsx)(a.kC,{alignItems:"center",height:U?64:52,justifyContent:"center",children:(0,P.jsx)(j,{headingLevel:2,size:"300",textWeight:"bold",children:z||(U?this.props.i18n._('Save Pin to', 'PinBetterSave.BoardFlyout.SectionHeader', 'Header for section header'):this.props.i18n._('Choose section', 'Header for section header', 'Header for section header'))})})}),(0,P.jsx)(a.sg,{span:2,children:(0,P.jsx)(a.xu,{})})]}),!U&&(0,P.jsx)(a.iz,{}),(0,P.jsx)(a.xu,{maxHeight:U?el:es,minHeight:U?354:es,overflow:"scrollY",children:et?(0,P.jsx)(n.Fragment,{children:et&&et.map(function(e){return"header"===e.type?null:(0,P.jsx)(a.xu,{children:e.isOpen&&(0,P.jsxs)(n.Fragment,{children:[U&&(0,P.jsx)(a.xu,{marginStart:4,marginTop:2,paddingY:1,children:(0,P.jsx)(j,{headingLevel:3,size:"100",children:c.props.i18n._('Board', 'PinBetterSave.BoardFlyout.BoardPickerTitle', 'board title on section picker')})}),(0,P.jsx)(T,{board:e,boardPickerSuggestedBoards:ec,buttonText:g,displayAlreadySavedMsg:I&&I.id===e.id,isSectionOpen:!0,onButtonClick:A,onClick:function(e){c.handleBoardClick({board:e,toggleSections:!1})},saveSessionId:Y,shouldOpenSections:!1,showFlyoutSaveButton:R,useLegoLayout:U}),(0,P.jsx)(q,{board:e,buttonText:g,onButtonClick:A,onClick:c.handleSectionClick,showSectionSaveButton:F,useLegoLayout:U})]})},"".concat(e.category,"-").concat(e.id))})}):null}),Z&&!p&&e_(!1)]})]})})})})]})}}],function(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,ep(n.key),n)}}(s.prototype,r),Object.defineProperty(s,"prototype",{writable:!1}),s}(n.PureComponent);function ev(e){var t=(0,s.u)().logContextEvent,r=(0,d.ZP)(),n=(0,h.Z)().checkExperiment;return(0,P.jsx)(em,el(el({},e),{},{checkExperiment:n,i18n:r,logContextEvent:t,requestContext:(0,f.B)()}))}function ex(e,t,r){var n=e.advertiser,o={};if(r&&r.user&&r.user.username&&r.id!==(t.isAuth?t.id:void 0)&&(o.orbacActingAs=r,o.username=r.user.username),t&&n){var i=e.advertiser;if(t.isAuth&&i.is_impersonation)return el({hasMUA:i.owner_user_id!==t.id,advertiser_id:i.id,username:i.owner_user_id},o);if(t.isAuth&&i.owner_user_id!==t.id)return el({hasMUA:!0,advertiser_id:i.id,username:i.owner_user_id},o);if(t.isAuth&&i.owner_user_id===t.id)return{hasMUA:!1,advertiser_id:i.id,username:"me"}}return el({advertiser_id:void 0,hasMUA:void 0},o)}function eS(e){var t=e.advertiser_id,r=e.hasMUA,n=e.boardFilter,o=void 0===n?"all":n,i=e.username,a=el(el({field_set_key:"board_picker",filter:r?"protected":o},i?{username:i}:Object.freeze({})),t?{advertiser_id:t}:{});return e.orbacActingAs&&e.orbacActingAs.user&&e.orbacActingAs.user.username&&(a=el(el({},a),{},{username:e.orbacActingAs.user.username,orbac_subject_id:e.orbacActingAs.id,filter:o})),a}function eP(e,t){return function(r,n){return r((0,g.jB)("BoardPickerBoardsResource",eS(ex(n(),e,t))))}}function ej(e){var t=(0,c.Z)(),r=(0,o.v9)(function(r){return ex(r,t,e.orbacActingAs)}),n=el(el({},e),r),i=(0,p.Z)({name:"BoardPickerBoardsResource",options:eS(n)});return(0,P.jsx)(ev,el(el({},n),{},{boardResource:i}))}function ew(e){var t=(0,y.Z)(),r=(0,c.Z)(),n=(0,m.lJ)(r,t);return(0,P.jsx)(ej,el(el({},e),{},{orbacActingAs:n?t:void 0}))}function eA(e){var t=(0,p.Z)({name:"BoardPickerBoardsShortlistResource",options:{pin_id:e.pinId,shortlist_length:2,num_shortlist_suggestions:2}}),r=(0,p.Z)({name:"ApiResource",options:{url:"/v3/pins/".concat(e.pinId,"/"),field_sets:["pin.pinned_to_board()"]},noCache:!0}).data;return(0,P.jsx)(ev,el(el({},e),{},{pinAlreadySavedBoard:null==r?void 0:r.pinned_to_board,suggestedBoardsShortListResource:t}))}eg(em,"defaultProps",{clientTrackingParams:void 0,paneWidth:320,showCreateBoardButton:!0,showFlyoutSaveButton:!0,showSections:!0,showSectionSaveButton:!0,useLegoLayout:!0})},247354:function(e,t,r){var n=r(20256),o=r(411544),i=r(494904),a=r(382718),s=function(e){var t=e.collaborator_count,r=e.useLegoLayout,o=e.type;return r?(0,a.jsx)(n.xu,{marginEnd:2*!!t,children:(0,a.jsx)(i.Z,{type:o})}):(0,a.jsx)(i.Z,{type:o})};t.Z=function(e){var t,r=e.board,l=e.showCollaborativeIcon,c=e.showPrivateIcon,d=e.showProtectedIcon,u=e.showSectionsIcon,_=e.useLegoLayout,h=(null==r||null==(t=r.collaborating_users)?void 0:t.length)||0;return l||c||d||u?(0,a.jsxs)(n.xu,{alignItems:"center",dangerouslySetInlineStyle:{__style:{paddingLeft:8}},"data-test-id":"board-picker-row-icon-list-box",direction:"row",display:"flex",marginEnd:5*!_,children:[c&&(0,a.jsx)(s,{collaborator_count:h,type:"secret",useLegoLayout:_}),d&&(0,a.jsx)(s,{collaborator_count:h,type:"protected",useLegoLayout:_}),l&&(_?(0,a.jsx)(o.Z,{board:r,isCompact:!0,ownerOnly:!1}):(0,a.jsx)(i.Z,{type:"group"})),u&&(0,a.jsx)(i.Z,{type:"sections"})]}):null}},288489:function(e,t,r){var n=r(20256),o=r(382718);t.Z=function(e){var t=e.image_url,r=e.naturalHeight,i=e.naturalWidth;return(0,o.jsx)(n.xu,{"aria-hidden":"true",height:48,marginBottom:1,marginEnd:2,marginTop:1,overflow:"hidden",width:48,children:(0,o.jsx)(n.zd,{height:48,rounding:2,wash:!0,width:48,children:(0,o.jsx)(n.Ee,{alt:"",naturalHeight:r,naturalWidth:i,src:t})})})}},808141:function(e,t,r){r.d(t,{Z:function(){return h}});var n=r(20256),o=r(140725),i=r(19585),a=r(15667),s=r(968927),l=r(509120),c=r(382718);function d(e){var t,r,o,i=e.cover,a=e.height,s=e.image,d=e.width;return i?(0,c.jsx)(l.Z,{customCover:i.isCustom,height:a,imgPos:i.position||{width:0,height:0,x:0,y:0},imgUrl:null!=(o=i.url)?o:"",width:d}):s&&s.url?(0,c.jsx)(n.zd,{height:a,wash:!0,width:d,children:(0,c.jsx)(n.Ee,{alt:"Board collage cover image",color:"#EFEFEF",fit:"cover",naturalHeight:null!=(t=s.height)?t:1,naturalWidth:null!=(r=s.width)?r:1,src:s.url})}):(0,c.jsx)(n.xu,{color:"secondary",height:a,width:d})}var u=r(785352),_=r(875280);function h(e){var t=e.boardThumbs,r=void 0===t?[]:t,l=e.cover,h=e.editButton,f=e.isActive,g=e.isSecret,p=e.layout,b=e.sensitivityScreenAuxData,y=e.showSensitivityScreen,m=void 0!==y&&y,v=(0,i.ZP)();(0,o.Q)(m?{component:13861,view_type:215,aux_data:b}:null);var x=(0,a.B)().isRTL,S=(0,_.F)(p),P=S.height,j=S.width,w=Math.floor(P/2),A=Math.floor(j/3),B=l?void 0:r[0],C=r.slice(+!l);return(0,c.jsxs)(n.zd,{height:P,rounding:4,wash:f,width:j,children:[(0,c.jsx)(n.xu,{"aria-label":"Board",color:"default",dangerouslySetInlineStyle:{__style:m?{filter:"blur(20px)"}:{}},display:"flex",height:"100%",justifyContent:"between",width:"100%",children:(0,c.jsxs)(n.xu,{"aria-hidden":"true",dangerouslySetInlineStyle:{__style:{gap:"1px"}},display:"flex",height:"100%",justifyContent:"between",width:"100%",children:[(0,c.jsx)(d,{cover:l,height:P,image:B,width:Math.floor(j/3*2)}),(0,c.jsxs)(n.kC,{alignItems:"stretch",direction:"column",flex:"none",height:"100%",justifyContent:"between",children:[(0,c.jsx)(u.Z,{height:w,image:C[0],width:A}),(0,c.jsx)(u.Z,{height:w,image:C[1],width:A})]})]})}),g&&(0,c.jsx)(n.xu,{alignItems:"center",color:"default",display:"flex",height:32,justifyContent:"center",left:!x,marginStart:2,marginTop:2,position:"absolute",right:x,rounding:"circle",top:!0,width:32,children:(0,c.jsx)(s.Z,{})}),f&&h&&(0,c.jsx)(n.xu,{alignItems:"center",bottom:!0,color:"default",display:"flex",height:32,justifyContent:"center",left:x,marginBottom:2,marginEnd:2,position:"absolute",right:!x,rounding:"circle",width:32,children:h}),m&&(0,c.jsx)(n.xu,{alignItems:"center",dangerouslySetInlineStyle:{__style:{background:"rgba(0,0,0,0.5)"}},display:"flex",height:"100%",justifyContent:"center",position:"absolute",top:!0,width:"100%",children:(0,c.jsx)(n.X6,{align:"center",color:"light",size:"400",children:v._('This board may contain sensitive content', 'profileBoardCard.boardCollage.heading', 'Warning text on board that may have sensitive content')})})]})}},785352:function(e,t,r){r.d(t,{Z:function(){return i}});var n=r(20256),o=r(382718);function i(e){var t=e.image,r=e.width,i=e.height;return t&&t.url?(0,o.jsx)(n.zd,{height:i,wash:!0,width:r,children:(0,o.jsx)(n.Ee,{alt:"Board collage image",color:"#EFEFEF",fit:"cover",naturalHeight:t.height||1,naturalWidth:t.width||1,src:t.url})}):(0,o.jsx)(n.xu,{color:"secondary",height:i,width:r})}},411544:function(e,t,r){r.d(t,{Z:function(){return u}});var n=r(20256),o=r(821342),i=r(19585),a=r(302148),s=r(382718);function l(e){return function(e){if(Array.isArray(e))return c(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return c(e,void 0);var r=({}).toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?c(e,void 0):void 0}}(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function d(e){var t,r,n,o,i,a=null!=(t=null!=(r=null==e?void 0:e.imageMediumUrl)?r:null==e?void 0:e.image_medium_url)?t:"",s=null!=(n=null==e?void 0:e.avatar_color_index)?n:void 0;return{name:null!=(o=null!=(i=null==e?void 0:e.fullName)?i:null==e?void 0:e.full_name)?o:"",color:s,src:"https://s.pinimg.com/images/user/default_75.png"===a?void 0:a}}function u(e){var t,r,c,u,_,h=e.board,f=e.forceViewer,g=e.isCompact,p=e.ownerOnly,b=(0,i.ZP)(),y=(0,o.Z)(),m=p?[d(null==h?void 0:h.owner)]:(function(e,t,r){var n=null!=e?e:{},o=n.collaborated_by_me,i=n.collaborating_users,a=n.owner,s=null!=i?i:[],c=[a];if(o||r){var d=s.findIndex(function(e){return t.isAuth&&e.id===t.id});if(-1!==d){var u=s.splice(d,1)[0];c.push(u)}else c.push(t)}var _=l(s).sort(function(e,t){var r,n,o,i;return(null!=(r=e.full_name)?r:"")>(null!=(n=t.full_name)?n:"")?1:(null!=(o=t.full_name)?o:"")>(null!=(i=e.full_name)?i:"")?-1:0});return[].concat(c,l(_))})(h,y,f).map(d),v=m.slice(0,3).map(function(e){return e.name}),x="";switch(m.length){case 3:x=(0,a.Wc)("".concat(b._('{{ first }}, {{ second }}, and {{ last }}', 'CollaboratorsFacePile.AvatarGroup.accessibilityLabel.usernames.ThreeAvatars', 'List of three usernames')),{first:"".concat(null!=(t=v[0])?t:""),second:"".concat(null!=(r=v[1])?r:""),last:"".concat(null!=(c=v[2])?c:"")});break;case 2:x=(0,a.Wc)("".concat(b._('{{ first }} and {{ second }}', 'CollaboratorsFacePile.AvatarGroup.accessibilityLabel.usernames.TwoAvatars', 'List of two usernames.')),{first:"".concat(null!=(u=v[0])?u:""),second:"".concat(null!=(_=v[1])?_:"")});break;default:x=v.join(", ")}var S=m.length>3?(0,a.Wc)(", ".concat(b.ngettext('Collaborators: {{ userNames }} and {{ leftCount }} more.', 'Collaborators: {{ userNames }} and {{ leftCount }} more.', m.length - 3, 'CollaboratorsFacePile.AvatarGroup.accessibilityLabel.aboveThree', 'Accessibility label that lists the names of collaborators and a final count of non-displayed avatars')),{userNames:x,leftCount:"".concat(m.length-3)}):(0,a.Wc)(", ".concat(b._('Collaborators: {{ userNames }}.', 'CollaboratorsFacePile.AvatarGroup.accessibilityLabel.notAboveThree', 'Accessibility label that lists the names of collaborators')),{userNames:x});return(0,s.jsx)(n.HE,{accessibilityLabel:S,collaborators:m,size:g?"xs":"sm"})}},875280:function(e,t,r){r.d(t,{F:function(){return o},m:function(){return i}});var n={square:{width:236,height:157},wide:{width:320,height:213}};function o(e){return n["square"===e?"square":"wide"]}function i(e){return o(e).width+16}},964293:function(e,t,r){r.d(t,{Z:function(){return s}});var n=r(20256),o=r(19585),i=r(808141),a=r(382718);function s(e){var t=e.boardThumbs,r=e.isChangeBoardModal,s=e.isSecret,l=e.name,c=e.onNameChange,d=e.onVisibilityChange,u=e.submitError,_=(0,o.ZP)();return(0,a.jsx)(n.xu,{paddingX:8,children:(0,a.jsxs)(n.kC,{direction:"column",gap:{row:0,column:4},children:[t&&!r&&(0,a.jsx)(i.Z,{boardThumbs:t,editButton:null,isActive:!1,isSecret:!1,layout:"square"}),(0,a.jsxs)(n.kC,{direction:"column",gap:{row:0,column:2},children:[(0,a.jsx)(n.xv,{size:"100",children:_._('Name', 'boardlessPins.createBoard.boardNameText', 'Title of text field where user inputs name of board')}),(0,a.jsx)(n.nv,{id:"boardName",name:"boardName",onChange:c,placeholder:_._('Add a title, like \u201CDIY\u201D or \u201CRecipes\u201D', 'boardlessPins.createBoard.boardNameTextPlaceholder', 'Placeholder of text field where user inputs name of board'),size:"lg",value:l})]}),(0,a.jsxs)(n.kC,{direction:"column",gap:{row:0,column:2},children:[(0,a.jsx)(n.xv,{size:"100",children:_._('Visibility', 'boardlessPins.createBoard.visibilityTitle', 'Title of visibility checkbox')}),(0,a.jsxs)(n.kC,{gap:{row:4,column:0},children:[(0,a.jsx)(n.XZ,{checked:s,id:"boardVisibility",name:"boardVisibility",onChange:d}),(0,a.jsxs)(n.kC,{direction:"column",gap:{row:0,column:1},children:[(0,a.jsx)(n.xv,{children:_._('Keep this board secret', 'boardlessPins.createBoard.visibilityCheckbox', 'Caption for board settings checkbox to set visibility')}),(0,a.jsx)(n.xv,{color:"subtle",children:_._('So only you and collaborators can see it.', 'boardlessPins.createBoard.visibilityCheckboxInfo', 'Description of secret setting on board')})]})]})]}),u&&(0,a.jsx)(n.xv,{color:"error",children:u})]})})}},74105:function(e,t,r){r.d(t,{Z:function(){return a}});var n=r(536652);function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function a(e,t,r){return(0,n.U)("BoardResource",{options:function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach(function(t){var n,i;n=t,i=r[t],(n=function(e){var t=function(e,t){if("object"!=o(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=o(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==o(t)?t:t+""}(n))in e?Object.defineProperty(e,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[n]=i}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({board_id:e,field_set_key:t},r?{orbac_subject_id:r}:{})})}},831786:function(e,t,r){r.d(t,{S:function(){return h},Z:function(){return f}});var n=r(575108),o=r(74105),i=r(225013),a=r(189976),s=r(686231),l=r(696323),c=r(697063),d=function(e){return function(t){c.Z.showError(function(e,t){switch(e.api_error_code){case 2171:case 2172:case 2173:return t._('Please wait until the previous board action finishes.', ' - ', ' -- ');default:return e.message}}(t,e))}},u=function(e){return(0,a.N8)(e.sectionId?l.Z.BOARD_SECTION_PINS:l.Z.BOARDFEED,e.sectionId||e.boardId)};function _(e,t){var r=e.source,n=e.target;n.boardId!==r.boardId?(t((0,o.Z)(r.boardId,"pin_count")),t((0,o.Z)(n.boardId,"pin_count"))):r.sectionId&&n.sectionId||t((0,o.Z)(n.boardId,"pin_count")),r.sectionId&&t((0,i.Z)(r.sectionId)),n.sectionId&&t((0,i.Z)(n.sectionId))}function h(e){return function(t){var r=e.selectedPinIds,n=e.source,o=e.target;t((0,a.EX)({feedId:n.sectionId||n.boardId,feedType:n.sectionId?l.Z.BOARD_SECTION_PINS:l.Z.BOARDFEED,itemIds:r,itemType:"pin"})),t((0,a.vX)({feedId:o.sectionId||o.boardId,feedType:o.sectionId?l.Z.BOARD_SECTION_PINS:l.Z.BOARDFEED,itemIds:r,itemType:"pin"})),r.forEach(function(e){t((0,s.Vp)({pinId:e,boardId:o.boardId,sectionId:o.sectionId||void 0,title:o.name||""}))}),_(e,t)}}function f(e,t){return function(r){var o=e.selectedPinIds,i=e.target;return o.forEach(function(e){r((0,s.Vp)({pinId:e,boardId:i.boardId,sectionId:i.sectionId||void 0,title:i.name||""}))}),(function(e,t,r){var o=e.inverseSelection,i=e.selectedPinIds,s=e.source,c=e.target,_=e.orbacSubjectId;if(s.boardId===c.boardId&&(s.sectionId||null)===(c.sectionId||null))return Promise.reject();if(o){var h={board_id:s.boardId,new_board_id:c.boardId,old_section_id:s.sectionId||void 0,new_section_id:c.sectionId||void 0,pin_ids:i,orbac_subject_id:_};return n.Z.create("BulkEditSelectAllResource",h).callUpdate({showError:!1}).then(function(){return Promise.all([t(u(s)),t(u(c))])}).catch(d(r))}var f=function(e,r){t((0,a.EX)({feedId:e.sectionId||e.boardId,feedType:e.sectionId?l.Z.BOARD_SECTION_PINS:l.Z.BOARDFEED,itemIds:i,itemType:"pin"})),t((0,a.vX)({feedId:r.sectionId||r.boardId,feedType:r.sectionId?l.Z.BOARD_SECTION_PINS:l.Z.BOARDFEED,itemIds:i,itemType:"pin"}))};f(s,c);var g=function(){return f(c,s)};if(c.boardId===s.boardId)if(c.sectionId){var p={section_id:c.sectionId,pins:i,orbac_subject_id:_};return n.Z.create("BoardSectionEditResource",p).callUpdate({showError:!1}).catch(function(e){g(),d(r)(e)})}else{var b={section_id:s.sectionId,pins:i,orbac_subject_id:_};return n.Z.create("BoardSectionPinsResource",b).callDelete({showError:!1}).catch(function(e){g(),d(r)(e)})}var y={board_id:c.boardId,section_id:c.sectionId||void 0,pin_ids:i,orbac_subject_id:_};return n.Z.create("BulkEditResource",y).callUpdate({showError:!1}).catch(function(e){g(),d(r)(e)})})(e,r,t).then(function(){return _(e,r)})}}},524558:function(e,t,r){r.d(t,{Z:function(){return a}});var n=r(586659),o=r(20256),i=r(382718);function a(e){var t=e.accessibilityClearButtonLabel,r=e.accessibilityLabel,a=e.focused,s=e.id,l=e.onBlur,c=e.onChange,d=e.onFocus,u=e.placeholder,_=e.value,h=e.size,f=(0,n.useRef)(null);return(0,n.useEffect)(function(){if(a){var e=f.current;window.requestAnimationFrame(function(){var t=e&&e.querySelector("input");t instanceof HTMLInputElement&&t.focus()})}},[a]),(0,i.jsx)(o.xu,{ref:f,children:(0,i.jsx)(o.Um,{accessibilityClearButtonLabel:t,accessibilityLabel:r,id:s,onBlur:l,onChange:c,onFocus:d,placeholder:u,size:void 0===h?"lg":h,value:_})})}},494904:function(e,t,r){var n=r(20256),o=r(19585),i=r(382718);t.Z=function(e){var t=e.type,r=(0,o.ZP)(),a={group:{accessibilityLabel:r._('group board', 'Board picker group board icon', 'Board picker group board icon'),icon:"people"},protected:{accessibilityLabel:r._('protected board', 'Board picker protected board icon', 'Board picker protected board icon'),icon:"protect"},secret:{accessibilityLabel:r._('secret board', 'Board picker secret board icon', 'Board picker secret board icon'),icon:"lock"},sections:{accessibilityLabel:r._('board with sections', 'Board picker board with sections icon', 'Board picker board with sections icon'),icon:"arrow-forward"},sectionsInline:{accessibilityLabel:r._('board with sections', 'Board picker board with sections icon', 'Board picker board with sections icon'),icon:"arrow-down"}}[t],s="sections"===t||"sectionsInline"===t;return(0,i.jsx)(n.xu,{marginStart:+!!s,children:(0,i.jsx)(n.xu,{marginStart:2*!!s,children:"sections"===t||"sectionsInline"===t?(0,i.jsx)(n.JO,{accessibilityLabel:a.accessibilityLabel,color:"default",icon:a.icon,size:"12"}):(0,i.jsx)(n.JO,{accessibilityLabel:a.accessibilityLabel,color:"default",icon:a.icon,size:16})})})}},890774:function(e,t,r){r.d(t,{Z:function(){return u}});var n=r(581722),o=r(60101),i=r(575108),a=r(877956),s=r(440568),l=r(536652),c=r(72918);function d(e,t,r,n,o,i,a){try{var s=e[i](a),l=s.value}catch(e){return void r(e)}s.done?t(l):Promise.resolve(l).then(n,o)}function u(){var e,t,r=(0,n.I0)(),u=(0,n.v9)(function(e){return e.resources});return e=regeneratorRuntime.mark(function e(t){var n,d,_,h,f,g,p,b;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return d=t.boardCreateOptions,_=t.deprecatedSchemaForNormalization,e.next=3,i.Z.create("BoardResource",d).callCreate();case 3:return f=(h=e.sent).resource_response.data,g=_?(0,o.Fv)(f,_):void 0,r((0,c.XM)("BoardResource",d,h,g)),r((0,a.fO)({event_type:20})),null!=(n=f.owner)&&n.id&&r((0,l.b)("UserResource",{options:{user_id:f.owner.id,field_set_key:"save_behavior"}})),p=u.BoardsResource||{},b=u.BoardsFeedResource||{},Object.keys(p).forEach(function(e){var t;(0,s.k)(e).username===(null==(t=f.owner)?void 0:t.username)&&r((0,c.jB)("BoardsResource",e))}),Object.keys(b).forEach(function(e){var t;(0,s.k)(e).username===(null==(t=f.owner)?void 0:t.username)&&r((0,c.jB)("BoardsFeedResource",e))}),e.abrupt("return",f);case 14:case"end":return e.stop()}},e)}),t=function(){var t=this,r=arguments;return new Promise(function(n,o){var i=e.apply(t,r);function a(e){d(i,n,o,a,s,"next",e)}function s(e){d(i,n,o,a,s,"throw",e)}a(void 0)})},function(e){return t.apply(this,arguments)}}}}]);